<?xml version="1.0" ?>
<Presentation>
  <div class="page">
    <p>Achieving Keyless CDNs with Conclaves</p>
    <p>Stephen Herwig</p>
    <p>Dave LevinChristina Garman</p>
    <p>Measurement and Analysis of Private Key Sharing in</p>
    <p>the HTTPS Ecosystem</p>
    <p>Frank Cangialosi, Taejoong Chung, David Choffnes, Dave Levin, Bruce M. Maggs, Alan Mislove, Christo Wilson</p>
  </div>
  <div class="page">
    <p>User Bank</p>
  </div>
  <div class="page">
    <p>customers origin server</p>
    <p>Content Delivery Networks host their customers websites</p>
  </div>
  <div class="page">
    <p>CDNs</p>
    <p>customers origin server</p>
    <p>CDNs edge server</p>
    <p>Content Delivery Networks host their customers websites</p>
  </div>
  <div class="page">
    <p>CDNs CDNs reduce page load times</p>
    <p>CDNs edge server</p>
    <p>customers origin server</p>
  </div>
  <div class="page">
    <p>CDNs CDNs reduce page load times</p>
    <p>CDNs edge server</p>
    <p>customers origin server</p>
  </div>
  <div class="page">
    <p>CDNsCDNs mitigate and block attacks</p>
    <p>CDNs edge server</p>
    <p>customers origin server</p>
  </div>
  <div class="page">
    <p>CDNsCDNs mitigate and block attacks</p>
    <p>CDNs edge server</p>
    <p>customers origin server</p>
  </div>
  <div class="page">
    <p>Customers share their keys with CDNs</p>
    <p>CDNs edge server</p>
  </div>
  <div class="page">
    <p>banks private key</p>
    <p>Customers share their keys with CDNs</p>
    <p>CDNs edge server</p>
  </div>
  <div class="page">
    <p>Key sharing is widespread</p>
    <p>Cangialosi et al., CCS 2016</p>
  </div>
  <div class="page">
    <p>Key sharing is widespread</p>
    <p>Who shares?</p>
    <p>F ra</p>
    <p>c ti</p>
    <p>o n</p>
    <p>o f</p>
    <p>D o</p>
    <p>m a in</p>
    <p>s H</p>
    <p>o s te</p>
    <p>d o</p>
    <p>n T</p>
    <p>h ir</p>
    <p>d -p</p>
    <p>a rt</p>
    <p>y P</p>
    <p>ro v id</p>
    <p>e rs</p>
    <p>Alexa Site Rank (bins of 10,000)</p>
    <p>At least one key shared All keys shared</p>
    <p>Cangialosi et al., CCS 2016</p>
  </div>
  <div class="page">
    <p>Key sharing is widespread</p>
    <p>Who shares?</p>
    <p>F ra</p>
    <p>c ti</p>
    <p>o n</p>
    <p>o f</p>
    <p>D o</p>
    <p>m a in</p>
    <p>s H</p>
    <p>o s te</p>
    <p>d o</p>
    <p>n T</p>
    <p>h ir</p>
    <p>d -p</p>
    <p>a rt</p>
    <p>y P</p>
    <p>ro v id</p>
    <p>e rs</p>
    <p>Alexa Site Rank (bins of 10,000)</p>
    <p>At least one key shared All keys shared</p>
    <p>Cangialosi et al., CCS 2016</p>
    <p>The web has consolidated keys in the hands of a few CDNs</p>
  </div>
  <div class="page">
    <p>Keyless SSL</p>
    <p>Introduced by Cloudflare to mitigate key sharing</p>
  </div>
  <div class="page">
    <p>Keyless SSL</p>
    <p>Introduced by Cloudflare to mitigate key sharing</p>
    <p>Private keys stay at the key server (origin)</p>
  </div>
  <div class="page">
    <p>Keyless SSL</p>
    <p>Introduced by Cloudflare to mitigate key sharing</p>
    <p>Private keys stay at the key server (origin)</p>
    <p>Key server performs actions requiring private key</p>
  </div>
  <div class="page">
    <p>Keyless SSL</p>
    <p>Introduced by Cloudflare to mitigate key sharing</p>
    <p>Private keys stay at the key server (origin)</p>
    <p>Key server performs actions requiring private key</p>
  </div>
  <div class="page">
    <p>Keyless SSL</p>
    <p>Introduced by Cloudflare to mitigate key sharing</p>
    <p>Private keys stay at the key server (origin)</p>
    <p>Key server performs actions requiring private key</p>
  </div>
  <div class="page">
    <p>Keyless SSL</p>
    <p>Introduced by Cloudflare to mitigate key sharing</p>
    <p>Private keys stay at the key server (origin)</p>
    <p>Key server performs actions requiring private key</p>
  </div>
  <div class="page">
    <p>Keyless SSL</p>
    <p>Introduced by Cloudflare to mitigate key sharing</p>
    <p>Private keys stay at the key server (origin)</p>
    <p>Key server performs actions requiring private key</p>
  </div>
  <div class="page">
    <p>Keyless SSL</p>
    <p>Introduced by Cloudflare to mitigate key sharing</p>
    <p>Private keys stay at the key server (origin)</p>
    <p>Key server performs actions requiring private key</p>
  </div>
  <div class="page">
    <p>Key server performs actions requiring private key</p>
    <p>Keyless SSL</p>
    <p>Introduced by Cloudflare to mitigate key sharing</p>
    <p>Private keys stay at the key server (origin)</p>
    <p>The CDN learns all session keys</p>
  </div>
  <div class="page">
    <p>Key server performs actions requiring private key</p>
    <p>Keyless SSL</p>
    <p>Introduced by Cloudflare to mitigate key sharing</p>
    <p>Private keys stay at the key server (origin)</p>
    <p>The CDN learns all session keys</p>
    <p>In practice: CDN</p>
  </div>
  <div class="page">
    <p>Third-party resources on</p>
    <p>using Legacy applications</p>
    <p>Can we Maintain privacy</p>
    <p>?</p>
  </div>
  <div class="page">
    <p>Third-party resources</p>
    <p>Legacy applications</p>
    <p>Maintain privacy The CDN is no more trusted than a standard on-path attacker</p>
  </div>
  <div class="page">
    <p>Third-party resources</p>
    <p>Legacy applications</p>
    <p>Maintain privacy The CDN is no more trusted than a standard on-path attacker</p>
    <p>No changes to existing code-bases; facilitates deployment and adoption</p>
  </div>
  <div class="page">
    <p>Third-party resources</p>
    <p>Legacy applications</p>
    <p>Maintain privacy The CDN is no more trusted than a standard on-path attacker</p>
    <p>Leverage the existing infrastructure. One additional assumption: TEEs</p>
    <p>No changes to existing code-bases; facilitates deployment and adoption</p>
  </div>
  <div class="page">
    <p>Third-party resources</p>
    <p>Legacy applications</p>
    <p>Maintain privacy The CDN is no more trusted than a standard on-path attacker</p>
    <p>Leverage the existing infrastructure. One additional assumption: TEEs</p>
    <p>No changes to existing code-bases; facilitates deployment and adoption</p>
  </div>
  <div class="page">
    <p>Third-party resources</p>
    <p>Legacy applications</p>
    <p>Maintain privacy The CDN is no more trusted than a standard on-path attacker</p>
    <p>Leverage the existing infrastructure. One additional assumption: TEEs</p>
    <p>No changes to existing code-bases; facilitates deployment and adoption</p>
    <p>Phoenix</p>
  </div>
  <div class="page">
    <p>Trusted execution environments</p>
    <p>Hardware</p>
    <p>Operating System</p>
    <p>Application</p>
    <p>By default, assume all system components are untrusted</p>
    <p>Code</p>
    <p>Service</p>
  </div>
  <div class="page">
    <p>Trusted execution environments</p>
    <p>Hardware</p>
    <p>Operating System</p>
    <p>Application</p>
    <p>By default, assume all system components are untrusted</p>
    <p>Small trusted CPU Resistant to physical attacks</p>
    <p>Code</p>
    <p>Service</p>
  </div>
  <div class="page">
    <p>Trusted execution environments</p>
    <p>Hardware</p>
    <p>Operating System</p>
    <p>Application</p>
    <p>By default, assume all system components are untrusted</p>
    <p>Small trusted CPU Resistant to physical attacks</p>
    <p>Code</p>
    <p>Service</p>
    <p>Enclave: Isolated application memory</p>
    <p>Enclave</p>
  </div>
  <div class="page">
    <p>Trusted execution environments</p>
    <p>Hardware</p>
    <p>Operating System</p>
    <p>Application</p>
    <p>By default, assume all system components are untrusted</p>
    <p>Small trusted CPU Resistant to physical attacks</p>
    <p>Code</p>
    <p>Service</p>
    <p>Model: Code and data can safely reside inside an enclave</p>
    <p>Enclave: Isolated application memory</p>
    <p>Enclave</p>
  </div>
  <div class="page">
    <p>Hardware</p>
    <p>Operating System</p>
    <p>Application Code</p>
    <p>Service</p>
    <p>Practical limitations of TEEs</p>
    <p>Syscalls</p>
    <p>Untrusted</p>
    <p>Applications inside enclaves cannot make syscalls</p>
    <p>Enclave</p>
  </div>
  <div class="page">
    <p>Hardware</p>
    <p>Operating System</p>
    <p>Service</p>
    <p>libOSes Idea: Implement a small OS inside the enclave</p>
    <p>Enclave</p>
  </div>
  <div class="page">
    <p>Hardware</p>
    <p>Operating System</p>
    <p>Service</p>
    <p>Application Code</p>
    <p>libOS Service</p>
    <p>libOSes Idea: Implement a small OS inside the enclave</p>
    <p>Enclave</p>
  </div>
  <div class="page">
    <p>Hardware</p>
    <p>Operating System</p>
    <p>Service</p>
    <p>Application Code</p>
    <p>libOS Service</p>
    <p>libOSes</p>
    <p>&quot;Syscalls&quot;</p>
    <p>Idea: Implement a small OS inside the enclave</p>
    <p>Enclave</p>
  </div>
  <div class="page">
    <p>Hardware</p>
    <p>Operating System</p>
    <p>Service</p>
    <p>Application Code</p>
    <p>libOS Service</p>
    <p>libOSes</p>
    <p>&quot;Syscalls&quot;</p>
    <p>Idea: Implement a small OS inside the enclave</p>
    <p>Enclave</p>
    <p>Service locally when possible</p>
  </div>
  <div class="page">
    <p>Hardware</p>
    <p>Operating System</p>
    <p>Service</p>
    <p>Application Code</p>
    <p>libOS Service</p>
    <p>libOSes</p>
    <p>&quot;Syscalls&quot;</p>
    <p>Idea: Implement a small OS inside the enclave</p>
    <p>Enclave</p>
    <p>Service locally when possible</p>
    <p>Syscalls</p>
  </div>
  <div class="page">
    <p>Graphene-SGX</p>
    <p>Tsai et al., ATC 2017</p>
    <p>A libOS for Intel SGX that supports some services</p>
  </div>
  <div class="page">
    <p>Graphene-SGX A libOS for Intel SGX that supports some services</p>
    <p>fork</p>
    <p>exec</p>
    <p>Graphenes supported services:</p>
    <p>pipes, signals, semaphores</p>
    <p>Tsai et al., ATC 2017</p>
  </div>
  <div class="page">
    <p>Graphene-SGX A libOS for Intel SGX that supports some services</p>
    <p>fork</p>
    <p>exec</p>
    <p>Graphenes supported services:</p>
    <p>pipes, signals, semaphores</p>
    <p>What constitutes a CDN?</p>
    <p>Cache</p>
    <p>Web Application Firewall</p>
    <p>Key Server</p>
    <p>Web server Multiple tenants</p>
    <p>Needs plaintext</p>
    <p>Needs disk</p>
    <p>Needs safe</p>
    <p>storage</p>
  </div>
  <div class="page">
    <p>Graphene-SGX A libOS for Intel SGX that supports some services</p>
    <p>fork</p>
    <p>exec</p>
    <p>Graphenes supported services:</p>
    <p>pipes, signals, semaphores</p>
    <p>What constitutes a CDN?</p>
    <p>Cache</p>
    <p>Web Application Firewall</p>
    <p>Key Server</p>
    <p>Reading &amp; writing files</p>
    <p>Shared memory</p>
    <p>Also critical to a CDN:</p>
    <p>Access to private keys</p>
    <p>Web server Multiple tenants</p>
    <p>Needs plaintext</p>
    <p>Needs disk</p>
    <p>Needs safe</p>
    <p>storage</p>
  </div>
  <div class="page">
    <p>The first truly keyless CDN</p>
    <p>fork</p>
    <p>exec</p>
    <p>Graphenes supported services:</p>
    <p>pipes, signals, semaphores</p>
    <p>What constitutes a CDN?</p>
    <p>Cache</p>
    <p>Web Application Firewall</p>
    <p>Key Server</p>
    <p>Web server Multiple tenants</p>
    <p>Needs plaintext</p>
    <p>Needs disk</p>
    <p>Needs safe</p>
    <p>storage</p>
    <p>Phoenix Containers of enclavesConclaves</p>
  </div>
  <div class="page">
    <p>The first truly keyless CDN</p>
    <p>fork</p>
    <p>exec</p>
    <p>Graphenes supported services:</p>
    <p>pipes, signals, semaphores</p>
    <p>What constitutes a CDN?</p>
    <p>Cache</p>
    <p>Web Application Firewall</p>
    <p>Key Server</p>
    <p>Reading &amp; writing files</p>
    <p>Shared memory</p>
    <p>Also critical to a CDN:</p>
    <p>Access to private keys</p>
    <p>Web server Multiple tenants</p>
    <p>Needs plaintext</p>
    <p>Needs disk</p>
    <p>Needs safe</p>
    <p>storage</p>
    <p>Phoenix Containers of enclavesConclaves</p>
  </div>
  <div class="page">
    <p>Enclave</p>
    <p>Enclave</p>
    <p>Web server</p>
    <p>Cache</p>
    <p>Web Application Firewall</p>
    <p>Enclave</p>
    <p>Web server</p>
    <p>Cache</p>
    <p>Web Application Firewall</p>
    <p>The first truly keyless CDN</p>
    <p>Key Server</p>
    <p>Phoenix Containers of enclavesConclaves</p>
    <p>Enclave</p>
    <p>Web server</p>
    <p>Cache</p>
    <p>Web Application Firewall</p>
    <p>Insight: Treat enclaves like a distributed system Implement services using kernel servers</p>
  </div>
  <div class="page">
    <p>Enclave</p>
    <p>Enclave</p>
    <p>Web server</p>
    <p>Cache</p>
    <p>Web Application Firewall</p>
    <p>Enclave</p>
    <p>Web server</p>
    <p>Cache</p>
    <p>Web Application Firewall</p>
    <p>The first truly keyless CDN</p>
    <p>Key Server</p>
    <p>Phoenix Containers of enclavesConclaves</p>
    <p>Enclave</p>
    <p>Web server</p>
    <p>Cache</p>
    <p>Web Application Firewall</p>
    <p>Insight: Treat enclaves like a distributed system Implement services using kernel servers</p>
    <p>TLS</p>
    <p>Enclaves mutually authenticate via</p>
    <p>attested TLS</p>
    <p>Knauth et al., 2018</p>
  </div>
  <div class="page">
    <p>Enclave</p>
    <p>Enclave</p>
    <p>Web server</p>
    <p>Cache</p>
    <p>Web Application Firewall</p>
    <p>Enclave</p>
    <p>Web server</p>
    <p>Cache</p>
    <p>Web Application Firewall</p>
    <p>The first truly keyless CDN</p>
    <p>Key Server</p>
    <p>Phoenix Containers of enclavesConclaves</p>
    <p>Enclave</p>
    <p>Web server</p>
    <p>Cache</p>
    <p>Web Application Firewall</p>
    <p>Insight: Treat enclaves like a distributed system Implement services using kernel servers</p>
    <p>TLS</p>
    <p>Private key operation</p>
    <p>Enclaves mutually authenticate via</p>
    <p>attested TLS</p>
    <p>Knauth et al., 2018</p>
  </div>
  <div class="page">
    <p>Enclave</p>
    <p>Enclave</p>
    <p>Web server</p>
    <p>Cache</p>
    <p>Web Application Firewall</p>
    <p>Enclave</p>
    <p>Web server</p>
    <p>Cache</p>
    <p>Web Application Firewall</p>
    <p>The first truly keyless CDN</p>
    <p>Key Server</p>
    <p>Phoenix Containers of enclavesConclaves</p>
    <p>Enclave</p>
    <p>Web server</p>
    <p>Cache</p>
    <p>Web Application Firewall</p>
    <p>Insight: Treat enclaves like a distributed system Implement services using kernel servers</p>
    <p>TLS</p>
    <p>Private key operation</p>
    <p>Result Enclaves mutually authenticate via</p>
    <p>attested TLS</p>
    <p>Knauth et al., 2018</p>
  </div>
  <div class="page">
    <p>EnclaveEnclave</p>
    <p>Web server</p>
    <p>Cache</p>
    <p>Web Application Firewall</p>
    <p>Enclave</p>
    <p>Web server</p>
    <p>Cache</p>
    <p>Web Application Firewall</p>
    <p>The first truly keyless CDN</p>
    <p>Key Server</p>
    <p>Phoenix Containers of enclavesConclaves</p>
    <p>Enclave</p>
    <p>Web server</p>
    <p>Cache</p>
    <p>Web Application Firewall</p>
    <p>Insight: Treat enclaves like a distributed system Implement services using kernel servers</p>
    <p>Enclave</p>
    <p>Memory Server</p>
  </div>
  <div class="page">
    <p>EnclaveEnclave</p>
    <p>Web server</p>
    <p>Cache</p>
    <p>Web Application Firewall</p>
    <p>Enclave</p>
    <p>Web server</p>
    <p>Cache</p>
    <p>Web Application Firewall</p>
    <p>The first truly keyless CDN</p>
    <p>Key Server</p>
    <p>Phoenix Containers of enclavesConclaves</p>
    <p>Enclave</p>
    <p>Web server</p>
    <p>Cache</p>
    <p>Web Application Firewall</p>
    <p>Insight: Treat enclaves like a distributed system Implement services using kernel servers</p>
    <p>Enclave</p>
    <p>Memory Server</p>
    <p>Shared memory read</p>
  </div>
  <div class="page">
    <p>EnclaveEnclave</p>
    <p>Web server</p>
    <p>Cache</p>
    <p>Web Application Firewall</p>
    <p>Enclave</p>
    <p>Web server</p>
    <p>Cache</p>
    <p>Web Application Firewall</p>
    <p>The first truly keyless CDN</p>
    <p>Key Server</p>
    <p>Phoenix Containers of enclavesConclaves</p>
    <p>Enclave</p>
    <p>Web server</p>
    <p>Cache</p>
    <p>Web Application Firewall</p>
    <p>Insight: Treat enclaves like a distributed system Implement services using kernel servers</p>
    <p>Enclave</p>
    <p>Memory Server</p>
    <p>Shared memory read</p>
    <p>Shared memory write</p>
  </div>
  <div class="page">
    <p>EnclaveEnclave</p>
    <p>Web server</p>
    <p>Cache</p>
    <p>Web Application Firewall</p>
    <p>Enclave</p>
    <p>Web server</p>
    <p>Cache</p>
    <p>Web Application Firewall</p>
    <p>The first truly keyless CDN</p>
    <p>Key Server</p>
    <p>Phoenix Containers of enclavesConclaves</p>
    <p>Enclave</p>
    <p>Web server</p>
    <p>Cache</p>
    <p>Web Application Firewall</p>
    <p>Insight: Treat enclaves like a distributed system Implement services using kernel servers</p>
    <p>Enclave</p>
    <p>Memory Server</p>
  </div>
  <div class="page">
    <p>Application Code</p>
    <p>libOS Service</p>
    <p>Enclave</p>
    <p>Enclave</p>
    <p>Memory Server</p>
    <p>Hardware</p>
    <p>Operating System</p>
    <p>Service</p>
    <p>Shared memoryConclaves</p>
  </div>
  <div class="page">
    <p>Application</p>
    <p>libOS Service</p>
    <p>Enclave</p>
    <p>Enclave</p>
    <p>Memory Server</p>
    <p>Hardware</p>
    <p>Operating System</p>
    <p>Service</p>
    <p>fcntl()</p>
    <p>Shared memoryConclaves</p>
  </div>
  <div class="page">
    <p>Application</p>
    <p>libOS Service</p>
    <p>Enclave</p>
    <p>&quot;Syscall&quot; Enclave</p>
    <p>Memory Server</p>
    <p>Hardware</p>
    <p>Operating System</p>
    <p>Service</p>
    <p>fcntl()</p>
    <p>Shared memoryConclaves</p>
  </div>
  <div class="page">
    <p>Application</p>
    <p>libOS Service</p>
    <p>Enclave</p>
    <p>&quot;Syscall&quot; Enclave</p>
    <p>Memory Server RPC</p>
    <p>Hardware</p>
    <p>Operating System</p>
    <p>Service</p>
    <p>fcntl()</p>
    <p>Shared memoryConclaves</p>
  </div>
  <div class="page">
    <p>Application</p>
    <p>libOS Service</p>
    <p>Enclave</p>
    <p>&quot;Syscall&quot; Enclave</p>
    <p>Memory Server RPC</p>
    <p>Hardware</p>
    <p>Operating System</p>
    <p>Service</p>
    <p>Coordinates locks Maintains memory locations</p>
    <p>fcntl()</p>
    <p>Shared memoryConclaves</p>
  </div>
  <div class="page">
    <p>Application</p>
    <p>libOS Service</p>
    <p>Enclave</p>
    <p>&quot;Syscall&quot; Enclave</p>
    <p>Memory Server</p>
    <p>Hardware</p>
    <p>Operating System</p>
    <p>Service</p>
    <p>Coordinates locks Maintains memory locations</p>
    <p>fcntl()</p>
    <p>Shared memoryConclaves</p>
  </div>
  <div class="page">
    <p>Application</p>
    <p>libOS Service</p>
    <p>Enclave</p>
    <p>&quot;Syscall&quot; Enclave</p>
    <p>Memory Server</p>
    <p>Hardware</p>
    <p>Operating System</p>
    <p>Service</p>
    <p>Syscall Coordinates locks Maintains memory locations</p>
    <p>fcntl()</p>
    <p>Shared memoryConclaves</p>
  </div>
  <div class="page">
    <p>Application</p>
    <p>libOS Service</p>
    <p>Enclave</p>
    <p>&quot;Syscall&quot; Enclave</p>
    <p>Memory Server</p>
    <p>Hardware</p>
    <p>Operating System</p>
    <p>Service</p>
    <p>Syscall Coordinates locks Maintains memory locations</p>
    <p>fcntl()</p>
    <p>Shared memoryConclaves</p>
  </div>
  <div class="page">
    <p>Application</p>
    <p>libOS Service</p>
    <p>Enclave</p>
    <p>&quot;Syscall&quot; Enclave</p>
    <p>Memory Server</p>
    <p>Hardware</p>
    <p>Operating System</p>
    <p>Service</p>
    <p>Syscall</p>
    <p>Memory file Encrypted on untrusted disk</p>
    <p>Coordinates locks Maintains memory locations</p>
    <p>fcntl()</p>
    <p>Shared memoryConclaves</p>
  </div>
  <div class="page">
    <p>Application</p>
    <p>libOS Service</p>
    <p>Enclave</p>
    <p>&quot;Syscall&quot; Enclave</p>
    <p>Memory Server</p>
    <p>Hardware</p>
    <p>Operating System</p>
    <p>Service</p>
    <p>Syscall</p>
    <p>Memory file Encrypted on untrusted disk</p>
    <p>Coordinates locks Maintains memory locations</p>
    <p>fcntl()</p>
    <p>Shared memoryConclaves</p>
  </div>
  <div class="page">
    <p>Application</p>
    <p>libOS Service</p>
    <p>Enclave</p>
    <p>Enclave</p>
    <p>Memory Server</p>
    <p>Hardware</p>
    <p>Operating System</p>
    <p>Service</p>
    <p>Memory file Encrypted on untrusted disk</p>
    <p>Coordinates locks Maintains memory locations</p>
    <p>Shared Memory</p>
    <p>fcntl()</p>
    <p>Shared memoryConclaves</p>
  </div>
  <div class="page">
    <p>EnclaveEnclave</p>
    <p>Web server</p>
    <p>Cache</p>
    <p>Web Application Firewall</p>
    <p>Enclave</p>
    <p>Web server</p>
    <p>Cache</p>
    <p>Web Application Firewall</p>
    <p>The first truly keyless CDN</p>
    <p>Key Server</p>
    <p>Phoenix Containers of enclavesConclaves</p>
    <p>Enclave</p>
    <p>Web server</p>
    <p>Cache</p>
    <p>Web Application Firewall</p>
    <p>Insight: Treat enclaves like a distributed system Implement services using kernel servers</p>
    <p>Enclave</p>
    <p>Memory Server</p>
  </div>
  <div class="page">
    <p>EnclaveEnclave</p>
    <p>Web server</p>
    <p>Cache</p>
    <p>Web Application Firewall</p>
    <p>Enclave</p>
    <p>Web server</p>
    <p>Cache</p>
    <p>Web Application Firewall</p>
    <p>The first truly keyless CDN</p>
    <p>Key Server</p>
    <p>Phoenix Containers of enclavesConclaves</p>
    <p>Enclave</p>
    <p>Web server</p>
    <p>Cache</p>
    <p>Web Application Firewall</p>
    <p>Insight: Treat enclaves like a distributed system Implement services using kernel servers</p>
    <p>Enclave</p>
    <p>Memory Server</p>
    <p>Enclave</p>
    <p>File Server</p>
  </div>
  <div class="page">
    <p>EnclaveEnclave</p>
    <p>Web server</p>
    <p>Cache</p>
    <p>Web Application Firewall</p>
    <p>Enclave</p>
    <p>Web server</p>
    <p>Cache</p>
    <p>Web Application Firewall</p>
    <p>The first truly keyless CDN</p>
    <p>Key Server</p>
    <p>Phoenix Containers of enclavesConclaves</p>
    <p>Enclave</p>
    <p>Web server</p>
    <p>Cache</p>
    <p>Web Application Firewall</p>
    <p>Insight: Treat enclaves like a distributed system Implement services using kernel servers</p>
    <p>Enclave</p>
    <p>Memory Server</p>
    <p>Enclave</p>
    <p>File Server</p>
  </div>
  <div class="page">
    <p>EnclaveEnclave</p>
    <p>Web server</p>
    <p>Cache</p>
    <p>Web Application Firewall</p>
    <p>Enclave</p>
    <p>Web server</p>
    <p>Cache</p>
    <p>Web Application Firewall</p>
    <p>The first truly keyless CDN</p>
    <p>Key Server</p>
    <p>Phoenix Containers of enclavesConclaves</p>
    <p>Enclave</p>
    <p>Web server</p>
    <p>Cache</p>
    <p>Web Application Firewall</p>
    <p>Insight: Treat enclaves like a distributed system Implement services using kernel servers</p>
    <p>Enclave</p>
    <p>Memory Server</p>
    <p>Enclave</p>
    <p>File Server</p>
    <p>File access</p>
  </div>
  <div class="page">
    <p>EnclaveEnclave</p>
    <p>Web server</p>
    <p>Cache</p>
    <p>Web Application Firewall</p>
    <p>Enclave</p>
    <p>Web server</p>
    <p>Cache</p>
    <p>Web Application Firewall</p>
    <p>The first truly keyless CDN</p>
    <p>Key Server</p>
    <p>Phoenix Containers of enclavesConclaves</p>
    <p>Enclave</p>
    <p>Web server</p>
    <p>Cache</p>
    <p>Web Application Firewall</p>
    <p>Insight: Treat enclaves like a distributed system Implement services using kernel servers</p>
    <p>Enclave</p>
    <p>Memory Server</p>
    <p>Enclave</p>
    <p>File Server</p>
    <p>File access</p>
    <p>Verified data</p>
  </div>
  <div class="page">
    <p>Application Code</p>
    <p>libOS Service</p>
    <p>Enclave</p>
    <p>Enclave</p>
    <p>File Server</p>
    <p>Hardware</p>
    <p>Operating System</p>
    <p>Service</p>
    <p>File system accessConclaves</p>
  </div>
  <div class="page">
    <p>Application Code</p>
    <p>libOS Service</p>
    <p>Enclave</p>
    <p>Enclave</p>
    <p>File Server</p>
    <p>File system accessConclaves</p>
    <p>Hardware</p>
    <p>Operating System</p>
    <p>Service</p>
    <p>Merkle Tree Encrypted on untrusted disk</p>
  </div>
  <div class="page">
    <p>Application</p>
    <p>libOS Service</p>
    <p>Enclave</p>
    <p>Enclave</p>
    <p>File Server</p>
    <p>Hardware</p>
    <p>Operating System</p>
    <p>Service</p>
    <p>read()</p>
    <p>Conclaves</p>
    <p>Merkle Tree Encrypted on untrusted disk</p>
    <p>File system access</p>
  </div>
  <div class="page">
    <p>Application</p>
    <p>libOS Service</p>
    <p>Enclave</p>
    <p>&quot;Syscall&quot; Enclave</p>
    <p>File Server</p>
    <p>Hardware</p>
    <p>Operating System</p>
    <p>Service</p>
    <p>read()</p>
    <p>Conclaves</p>
    <p>Merkle Tree Encrypted on untrusted disk</p>
    <p>File system access</p>
  </div>
  <div class="page">
    <p>Application</p>
    <p>libOS Service</p>
    <p>Enclave</p>
    <p>&quot;Syscall&quot; Enclave</p>
    <p>File Server RPC</p>
    <p>Hardware</p>
    <p>Operating System</p>
    <p>Service</p>
    <p>read()</p>
    <p>Conclaves</p>
    <p>Merkle Tree Encrypted on untrusted disk</p>
    <p>File system access</p>
  </div>
  <div class="page">
    <p>Application</p>
    <p>libOS Service</p>
    <p>Enclave</p>
    <p>&quot;Syscall&quot; Enclave</p>
    <p>read()</p>
    <p>libOS</p>
    <p>Conclaves</p>
    <p>Hardware</p>
    <p>Operating System</p>
    <p>Service</p>
    <p>Merkle Tree Encrypted on untrusted disk</p>
    <p>RPC</p>
    <p>ext2fs server</p>
    <p>Block layer Merkle root</p>
    <p>File system access</p>
  </div>
  <div class="page">
    <p>Application</p>
    <p>libOS Service</p>
    <p>Enclave</p>
    <p>&quot;Syscall&quot; Enclave</p>
    <p>read()</p>
    <p>libOS</p>
    <p>Conclaves</p>
    <p>Hardware</p>
    <p>Operating System</p>
    <p>Service</p>
    <p>Merkle Tree Encrypted on untrusted disk</p>
    <p>RPC</p>
    <p>Syscall</p>
    <p>ext2fs server</p>
    <p>Block layer Merkle root</p>
    <p>File system access</p>
  </div>
  <div class="page">
    <p>Application</p>
    <p>libOS Service</p>
    <p>Enclave</p>
    <p>&quot;Syscall&quot; Enclave</p>
    <p>read()</p>
    <p>libOS</p>
    <p>Conclaves</p>
    <p>Hardware</p>
    <p>Operating System</p>
    <p>Service</p>
    <p>Merkle Tree Encrypted on untrusted disk</p>
    <p>RPC</p>
    <p>Syscall</p>
    <p>ext2fs server</p>
    <p>Block layer Merkle root</p>
    <p>File system access</p>
  </div>
  <div class="page">
    <p>Application</p>
    <p>libOS Service</p>
    <p>Enclave</p>
    <p>&quot;Syscall&quot; Enclave</p>
    <p>read()</p>
    <p>libOS</p>
    <p>Conclaves</p>
    <p>Hardware</p>
    <p>Operating System</p>
    <p>Service</p>
    <p>Merkle Tree Encrypted on untrusted disk</p>
    <p>RPC</p>
    <p>Syscall</p>
    <p>ext2fs server</p>
    <p>Block layer Merkle root</p>
    <p>File system access</p>
  </div>
  <div class="page">
    <p>Application</p>
    <p>libOS Service</p>
    <p>Enclave</p>
    <p>&quot;Syscall&quot; Enclave</p>
    <p>read()</p>
    <p>libOS</p>
    <p>Conclaves</p>
    <p>Hardware</p>
    <p>Operating System</p>
    <p>Service</p>
    <p>Merkle Tree Encrypted on untrusted disk</p>
    <p>RPC</p>
    <p>Syscall</p>
    <p>Verifies branches</p>
    <p>Decrypts blocks</p>
    <p>ext2fs server</p>
    <p>Block layer Merkle root</p>
    <p>File system access</p>
  </div>
  <div class="page">
    <p>Application</p>
    <p>libOS Service</p>
    <p>Enclave</p>
    <p>&quot;Syscall&quot; Enclave</p>
    <p>read()</p>
    <p>libOS</p>
    <p>Conclaves</p>
    <p>Hardware</p>
    <p>Operating System</p>
    <p>Service</p>
    <p>Merkle Tree Encrypted on untrusted disk</p>
    <p>RPC</p>
    <p>Syscall</p>
    <p>Verifies branches</p>
    <p>Decrypts blocks</p>
    <p>ext2fs server</p>
    <p>Block layer Merkle root</p>
    <p>File system access</p>
  </div>
  <div class="page">
    <p>Application</p>
    <p>libOS Service</p>
    <p>Enclave</p>
    <p>read()</p>
    <p>File system accessConclaves</p>
    <p>Hardware</p>
    <p>Operating System</p>
    <p>Service</p>
    <p>Merkle Tree Encrypted on untrusted disk</p>
    <p>Enclave</p>
    <p>ext2fs server</p>
    <p>libOS</p>
    <p>Block layer Merkle root</p>
    <p>Data Verifies branches</p>
    <p>Decrypts blocks</p>
  </div>
  <div class="page">
    <p>EnclaveEnclave</p>
    <p>Web server</p>
    <p>Cache</p>
    <p>Web Application Firewall</p>
    <p>Enclave</p>
    <p>Web server</p>
    <p>Cache</p>
    <p>Web Application Firewall</p>
    <p>Key Server Enclave</p>
    <p>Web server</p>
    <p>Cache</p>
    <p>Web Application Firewall</p>
    <p>Execution environment is a distributed system of enclaves</p>
    <p>Enclave</p>
    <p>Memory Server</p>
    <p>Enclave</p>
    <p>File Server</p>
    <p>The first truly keyless CDNPhoenix Containers of enclavesConclaves</p>
  </div>
  <div class="page">
    <p>Enclave Enclave</p>
    <p>Web server</p>
    <p>Cache</p>
    <p>Web Application Firewall</p>
    <p>Enclave</p>
    <p>Web server</p>
    <p>Cache</p>
    <p>Web Application Firewall</p>
    <p>Key Server Enclave</p>
    <p>Web server</p>
    <p>Cache</p>
    <p>Web Application Firewall</p>
    <p>Execution environment is a distributed system of enclaves</p>
    <p>Enclave</p>
    <p>Memory Server</p>
    <p>Enclave</p>
    <p>File Server</p>
    <p>Conclave</p>
    <p>The first truly keyless CDNPhoenix Containers of enclavesConclaves</p>
  </div>
  <div class="page">
    <p>Enclave Enclave</p>
    <p>Web server</p>
    <p>Cache</p>
    <p>Web Application Firewall</p>
    <p>Enclave</p>
    <p>Web server</p>
    <p>Cache</p>
    <p>Web Application Firewall</p>
    <p>The first truly keyless CDN</p>
    <p>Key Server</p>
    <p>Phoenix Containers of enclavesConclaves</p>
    <p>Enclave</p>
    <p>Web server</p>
    <p>Cache</p>
    <p>Web Application Firewall</p>
    <p>Execution environment is a distributed system of enclaves</p>
    <p>Enclave</p>
    <p>Memory Server</p>
    <p>Enclave</p>
    <p>File Server</p>
    <p>Conclave</p>
    <p>fork</p>
    <p>exec</p>
    <p>Conclaves supported services:</p>
    <p>pipes, signals, semaphores</p>
    <p>Reading &amp; writing files</p>
    <p>Shared memory</p>
    <p>Access to private keys</p>
    <p>Trusted time server</p>
  </div>
  <div class="page">
    <p>The first truly keyless CDNPhoenix</p>
  </div>
  <div class="page">
    <p>The first truly keyless CDNPhoenix</p>
    <p>Websites delegate provisioning to CDNs</p>
    <p>Phoenix supports many deployment configurations</p>
    <p>Other details in the paper</p>
    <p>Supports multi-tenancy Both CDN and website can store private data</p>
  </div>
  <div class="page">
    <p>The first truly keyless CDNPhoenix</p>
    <p>Websites delegate provisioning to CDNs</p>
    <p>Phoenix supports many deployment configurations</p>
    <p>Other details in the paper</p>
    <p>Conclave Conclave Conclave</p>
    <p>Supports multi-tenancy Both CDN and website can store private data</p>
  </div>
  <div class="page">
    <p>The first truly keyless CDNPhoenix</p>
    <p>Conclave Conclave Conclave</p>
    <p>ARTIFACT EVALUATED</p>
    <p>PASSED</p>
    <p>Implemented on top of Graphene-SGX</p>
    <p>Evaluated to understand throughput and scalability</p>
  </div>
  <div class="page">
    <p># Workers 1 2 4 8</p>
    <p>Th ro</p>
    <p>ug hp</p>
    <p>ut (r</p>
    <p>eq ue</p>
    <p>st s/</p>
    <p>se c)</p>
    <p>Downloaded file size</p>
    <p>Fetch a file 10,000 times over non-persistent HTTPS connections from among 128 concurrent clients</p>
    <p>What is Phoenixs request throughput?</p>
  </div>
  <div class="page">
    <p># Workers 1 2 4 8</p>
    <p>Th ro</p>
    <p>ug hp</p>
    <p>ut (r</p>
    <p>eq ue</p>
    <p>st s/</p>
    <p>se c)</p>
    <p>Downloaded file size</p>
    <p>Linux</p>
    <p>Fetch a file 10,000 times over non-persistent HTTPS connections from among 128 concurrent clients</p>
    <p>NGINX running on normal Linux</p>
    <p>What is Phoenixs request throughput?</p>
  </div>
  <div class="page">
    <p># Workers 1 2 4 8</p>
    <p>Th ro</p>
    <p>ug hp</p>
    <p>ut (r</p>
    <p>eq ue</p>
    <p>st s/</p>
    <p>se c)</p>
    <p>Downloaded file size</p>
    <p>Linux Phoenix-crypt Phoenix-vericrypt</p>
    <p>Fetch a file 10,000 times over non-persistent HTTPS connections from among 128 concurrent clients confidentiality</p>
    <p>confidentiality &amp; integrity</p>
    <p>What is Phoenixs request throughput?</p>
  </div>
  <div class="page">
    <p>How does Phoenix scale to multiple tenants?</p>
    <p>Ti m</p>
    <p>e pe</p>
    <p>r re</p>
    <p>qu es</p>
    <p>t ( m</p>
    <p>s)</p>
    <p>Number of tenants</p>
    <p>Linux (shared NGINX)</p>
  </div>
  <div class="page">
    <p>Ti m</p>
    <p>e pe</p>
    <p>r re</p>
    <p>qu es</p>
    <p>t ( m</p>
    <p>s)</p>
    <p>Number of tenants</p>
    <p>Linux (shared NGINX)</p>
    <p>Phoenix-crypt (shared nothing)</p>
    <p>How does Phoenix scale to multiple tenants?</p>
    <p>Number of enclaves</p>
  </div>
  <div class="page">
    <p>Ti m</p>
    <p>e pe</p>
    <p>r re</p>
    <p>qu es</p>
    <p>t ( m</p>
    <p>s)</p>
    <p>Number of tenants</p>
    <p>Linux (shared NGINX) Phoenix-crypt (shared NGINX)</p>
    <p>Phoenix-crypt (shared nothing)</p>
    <p>Number of enclaves</p>
    <p>How does Phoenix scale to multiple tenants?</p>
  </div>
  <div class="page">
    <p>Ti m</p>
    <p>e pe</p>
    <p>r re</p>
    <p>qu es</p>
    <p>t ( m</p>
    <p>s)</p>
    <p>S G</p>
    <p>X p</p>
    <p>ag in</p>
    <p>g ev</p>
    <p>en ts</p>
    <p>Number of tenants</p>
    <p>Linux (shared NGINX) Phoenix-crypt (shared NGINX)</p>
    <p>Phoenix-crypt (shared nothing)</p>
    <p>How does Phoenix scale to multiple tenants?</p>
    <p>Number of enclaves</p>
  </div>
  <div class="page">
    <p>Other results</p>
    <p>Benchmark overhead of running WAFs (ModSecurity) in SGX (overhead about the same as in Linux)</p>
    <p>Perform detailed micro-benchmarks of each kernel server</p>
    <p>Compare standard ocalls to exitless ocalls (not always better)</p>
  </div>
  <div class="page">
    <p>ARTIFACT EVALUATED</p>
    <p>PASSED</p>
    <p>Moderate performance overheads</p>
    <p>https://phoenix.cs.umd.edu/</p>
    <p># Workers 1 2 4 8</p>
    <p>Th ro</p>
    <p>ug hp</p>
    <p>ut (r</p>
    <p>eq ue</p>
    <p>st s/</p>
    <p>se c)</p>
    <p>Downloaded file size</p>
    <p>Linux Phoenix-crypt Phoenix-vericrypt</p>
    <p>The first truly keyless CDNPhoenix Containers of enclavesConclaves</p>
    <p>Run legacy apps in enclaves</p>
  </div>
</Presentation>

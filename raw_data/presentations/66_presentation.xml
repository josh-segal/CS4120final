<?xml version="1.0" ?>
<Presentation>
  <div class="page">
    <p>Rice Networks Group http://www.ece.rice.edu/networks</p>
    <p>Michele Garetto Jingpu Shi</p>
    <p>Edward W. Knightly</p>
    <p>Modeling Media Access in Embedded Two-Flow Topologies of Multi-hop Wireless Networks</p>
    <p>MobiCom 2005</p>
  </div>
  <div class="page">
    <p>Garetto, Shi, Knightly</p>
    <p>Motivation</p>
    <p>Multi-hop wireless networks with CSMA/CA protocols</p>
    <p>single-cell case</p>
  </div>
  <div class="page">
    <p>Garetto, Shi, Knightly</p>
    <p>Motivation</p>
    <p>Multi-hop wireless networks with CSMA/CA protocols</p>
    <p>Long-term unfairness (starvation)</p>
    <p>Short-term unfairness (~100 ms)</p>
  </div>
  <div class="page">
    <p>Garetto, Shi, Knightly</p>
    <p>Motivation</p>
    <p>Multi-hop wireless networks with CSMA/CA protocols</p>
  </div>
  <div class="page">
    <p>Garetto, Shi, Knightly</p>
    <p>Motivation</p>
    <p>Multi-hop wireless networks with CSMA/CA protocols</p>
    <p>A B</p>
  </div>
  <div class="page">
    <p>Garetto, Shi, Knightly</p>
    <p>Motivation</p>
    <p>Multi-hop wireless networks with CSMA/CA protocols</p>
    <p>Long-term unfairness (flow A starves)</p>
    <p>B</p>
    <p>A</p>
  </div>
  <div class="page">
    <p>Garetto, Shi, Knightly</p>
    <p>Motivation</p>
    <p>Multi-hop wireless networks with CSMA/CA protocols</p>
    <p>B</p>
    <p>A</p>
    <p>Short-term unfairness (~100 ms)</p>
  </div>
  <div class="page">
    <p>Garetto, Shi, Knightly</p>
    <p>Motivation</p>
    <p>Multi-hop wireless networks employing CSMA/CA exhibit complex behavior and are difficult to analyze  Root cause: different and incomplete channel state</p>
    <p>information among flows  Most of existing modeling techniques only consider the</p>
    <p>single-hop case</p>
    <p>When stations are not all in radio range, severe unfairness can occur among flows:  Long-term unfairness and starvation  Short-term unfairness</p>
  </div>
  <div class="page">
    <p>Garetto, Shi, Knightly</p>
    <p>Our contributions</p>
    <p>We decompose a large-scale network into embedded 2-flow subgraphs</p>
    <p>We identify all possible 2-flow scenarios and classify them</p>
    <p>Spatial analysis: we compute the occurrence probability of each scenario under random nodes deployment</p>
    <p>We accurately predict the performance of random access in all cases, quantifying long-term and short-term unfairness</p>
  </div>
  <div class="page">
    <p>Garetto, Shi, Knightly</p>
    <p>Basic two-flow, four-node layout</p>
    <p>A</p>
    <p>ba</p>
    <p>B AB</p>
    <p>Ab</p>
    <p>aB</p>
    <p>AB</p>
    <p>Senders A, B Receivers a, b A-a, B-b must be connected (= in radio range)</p>
    <p>Nodes from one flow may hear nodes from the other Four possible connections that can exist  or not</p>
  </div>
  <div class="page">
    <p>Garetto, Shi, Knightly</p>
    <p>Twelve possible scenarios</p>
    <p>A</p>
    <p>ba</p>
    <p>BA</p>
    <p>ba</p>
    <p>BA</p>
    <p>ba</p>
    <p>BA</p>
    <p>ba</p>
    <p>B Ab</p>
    <p>A</p>
    <p>ba</p>
    <p>B</p>
    <p>ab</p>
    <p>A</p>
    <p>ba</p>
    <p>B Ab</p>
    <p>A</p>
    <p>ba</p>
    <p>BABA</p>
    <p>ba</p>
    <p>BAB</p>
    <p>A</p>
    <p>ba</p>
    <p>B</p>
    <p>ab</p>
    <p>A</p>
    <p>ba</p>
    <p>BA</p>
    <p>ba</p>
    <p>B</p>
    <p>ab</p>
    <p>Ab</p>
    <p>aB</p>
    <p>A</p>
    <p>ba</p>
    <p>B AB AB AB</p>
    <p>AB</p>
    <p>Ab Ab</p>
    <p>aB</p>
    <p>aB aBaB</p>
    <p>ab</p>
    <p>ab ab</p>
    <p>aB aB</p>
  </div>
  <div class="page">
    <p>Garetto, Shi, Knightly</p>
    <p>Example topologies</p>
  </div>
  <div class="page">
    <p>Garetto, Shi, Knightly</p>
    <p>Spatial analysis</p>
    <p>We compute the occurrence probability of each scenario We assume nodes uniformly distributed in the area with equal radio range We discard the case in which flows are completely isolated from each other normalized probabilities  insensitive to node density  insensitive to area size (no border effects)</p>
    <p>B</p>
    <p>A a</p>
    <p>b</p>
    <p>x</p>
    <p>y</p>
    <p>b</p>
    <p>A a</p>
    <p>d2</p>
    <p>B</p>
    <p>d2</p>
  </div>
  <div class="page">
    <p>Garetto, Shi, Knightly</p>
    <p>P ro</p>
    <p>ba bi</p>
    <p>lit y</p>
    <p>(c on</p>
    <p>di tio</p>
    <p>ne d)</p>
    <p>Normalized distance between tx and rx</p>
    <p>scenario 2 scenario 3 scenario 4 scenario 5 scenario 6 scenario 7 scenario 8 scenario 9</p>
    <p>scenario 10 scenario 11 scenario 12</p>
    <p>Scenario Likelihood</p>
  </div>
  <div class="page">
    <p>Garetto, Shi, Knightly</p>
    <p>Performance simulations with CSMA/CA protocol</p>
    <p>Throughput measurements every 400 ms X = two-way handshake</p>
    <p>= four-way handshake</p>
  </div>
  <div class="page">
    <p>Garetto, Shi, Knightly</p>
    <p>Performance simulations with CSMA/CA protocol</p>
    <p>Throughput measurements every 400 ms X = two-way handshake</p>
    <p>= four-way handshake</p>
  </div>
  <div class="page">
    <p>Garetto, Shi, Knightly</p>
    <p>Performance simulations with CSMA/CA protocol</p>
    <p>Throughput measurements every 400 ms X = two-way handshake</p>
    <p>= four-way handshake</p>
  </div>
  <div class="page">
    <p>Garetto, Shi, Knightly</p>
    <p>Performance simulations with CSMA/CA protocol</p>
    <p>Throughput measurements every 400 ms X = two-way handshake</p>
    <p>= four-way handshake</p>
  </div>
  <div class="page">
    <p>Garetto, Shi, Knightly</p>
    <p>Scenarios classification : 3 groups</p>
    <p>A</p>
    <p>ba</p>
    <p>B Ab</p>
    <p>aB</p>
    <p>A</p>
    <p>ba</p>
    <p>BA</p>
    <p>ba</p>
    <p>B Ab</p>
    <p>aB ab</p>
    <p>A</p>
    <p>ba</p>
    <p>BA</p>
    <p>ba</p>
    <p>B</p>
    <p>aBaB</p>
    <p>ab</p>
    <p>A</p>
    <p>ba</p>
    <p>B AB</p>
    <p>Senders Connected (SC)</p>
    <p>Symmetric Incomplete State</p>
    <p>(SIS)</p>
    <p>Asymmetric Incomplete State</p>
    <p>(AIS)</p>
  </div>
  <div class="page">
    <p>Garetto, Shi, Knightly</p>
    <p>P ro</p>
    <p>ba bi</p>
    <p>lit y</p>
    <p>(c on</p>
    <p>di tio</p>
    <p>ne d)</p>
    <p>Normalized distance between tx and rx</p>
    <p>SC AIS SIS</p>
    <p>Probabilities of 3 groups of scenarios</p>
    <p>Problematic scenarios are highly likely to occur !</p>
  </div>
  <div class="page">
    <p>Garetto, Shi, Knightly</p>
    <p>Hop distance distribution in a multi-hop network</p>
    <p>P ro</p>
    <p>ba bi</p>
    <p>lit y</p>
    <p>Hop distance / TX range</p>
    <p>Most of actively used hops are close to the maximum</p>
    <p>TX range !</p>
  </div>
  <div class="page">
    <p>Garetto, Shi, Knightly</p>
    <p>Probabilities of 3 groups of scenarios</p>
    <p>P ro</p>
    <p>ba bi</p>
    <p>lit y</p>
    <p>(c on</p>
    <p>di tio</p>
    <p>ne d)</p>
    <p>Ratio between sensing range and transmission range</p>
    <p>SC AIS SIS</p>
    <p>Hop distance = TX range ; variable Sensing Range</p>
  </div>
  <div class="page">
    <p>Garetto, Shi, Knightly</p>
    <p>Analysis of Asimmetric Incomplete State scenarios (AIS)</p>
    <p>Known to be highly problematic for random access protocols: flow A a starves  V. Bharghavan, A. J. Demers, S. Shenker, L. Zhang,</p>
    <p>MACAW: A Media Access Protocol for Wireless LAN's, SIGCOMM 94</p>
    <p>RTS/CTS does not solve the problem RRTS does not help Not yet modeled analytically</p>
    <p>A a</p>
    <p>B b</p>
    <p>aA</p>
    <p>b</p>
    <p>B</p>
  </div>
  <div class="page">
    <p>Garetto, Shi, Knightly</p>
    <p>Decoupling technique (valid for general topologies)</p>
    <p>The channel private view of a node:</p>
    <p>Nodes transmission is successful idle slot</p>
    <p>Nodes transmission collides</p>
    <p>t</p>
    <p>channel is busy because of activity</p>
    <p>of other nodes</p>
    <p>Modelled as a renewal-reward process</p>
    <p>Throughput (pkt/s) = P [event Ts occurs]</p>
    <p>Average duration of an event (s)</p>
  </div>
  <div class="page">
    <p>Garetto, Shi, Knightly</p>
    <p>Analysis of Asymmetric Incomplete State scenarios (AIS)</p>
    <p>Flow A a does not know when to contend: it has to discover an available gap in the activity of flow B b randomly, where to place an entire RTS or DATA packet</p>
    <p>B b t</p>
    <p>B b B b B b</p>
    <p>A a ? RTS/DATA</p>
    <p>A a</p>
    <p>B b</p>
    <p>aA</p>
    <p>b</p>
    <p>B</p>
  </div>
  <div class="page">
    <p>Garetto, Shi, Knightly</p>
    <p>Analysis of Asimmetric Incomplete State scenarios (AIS)</p>
    <p>B b A a</p>
    <p>B b B b</p>
    <p>B b A a</p>
    <p>B b B b</p>
    <p>B b A a B b B b</p>
    <p>The collision probability of flow A a can be accurately computed assuming that the first packet arrives at a random point in time</p>
    <p>The collision probability of flow B b is zero</p>
  </div>
  <div class="page">
    <p>Garetto, Shi, Knightly</p>
    <p>AIS scenario  model vs simulation</p>
    <p>P ac</p>
    <p>ke t T</p>
    <p>hr ou</p>
    <p>gh pu</p>
    <p>t ( pk</p>
    <p>t/s )</p>
    <p>Data Payload Size (bytes)</p>
    <p>ns - Flow B model - Flow B</p>
    <p>ns - Flow A model - Flow A</p>
    <p>ns - Flow B model - Flow B</p>
    <p>ns - Flow A model - Flow A</p>
    <p>with RTS/CTS basic access (no RTS/CTS)</p>
  </div>
  <div class="page">
    <p>Garetto, Shi, Knightly</p>
    <p>AIS scenario  model vs simulation</p>
    <p>P ac</p>
    <p>ke t T</p>
    <p>hr ou</p>
    <p>gh pu</p>
    <p>t ( pk</p>
    <p>t/s )</p>
    <p>Arrival rate of flow B (pkt/s)</p>
    <p>Flow A backlogged  Flow B not backlogged</p>
    <p>ns - Flow B model - Flow B</p>
    <p>ns - Flow A model - Flow A</p>
  </div>
  <div class="page">
    <p>Garetto, Shi, Knightly</p>
    <p>Analysis of Symmetric Incomplete State scenarios (SIS)</p>
    <p>Long-term fair, but short-term unfair One flow dominates over the other, until they switch their role (randomly) RTS/CTS does not help, and can even make things worse Not yet modeled analytically As a particular case, the receiver can be in common:</p>
    <p>AP = the classic hidden-terminal scenario</p>
  </div>
  <div class="page">
    <p>Garetto, Shi, Knightly</p>
    <p>Simulation of short term unfairness  SC vs SIS</p>
    <p>th ro</p>
    <p>ug hp</p>
    <p>ut d</p>
    <p>ur in</p>
    <p>g 10</p>
    <p>s</p>
    <p>Time (s)</p>
    <p>Time (s)</p>
    <p>RTS/CTS  7 backoff stages</p>
    <p>th ro</p>
    <p>ug hp</p>
    <p>ut d</p>
    <p>ur in</p>
    <p>g 10</p>
    <p>s</p>
    <p>basic access  4 backoff stages</p>
    <p>basic access  7 backoff stages</p>
    <p>RTS/CTS  9 backoff stages</p>
  </div>
  <div class="page">
    <p>Garetto, Shi, Knightly</p>
    <p>Analysis of Symmetric Incomplete State scenarios (SIS)</p>
    <p>To capture short-term behavior, we cannot apply the decoupling technique (i.e. assume independent states)</p>
    <p>States of the two flows are tightly correlated !</p>
    <p>We use a markov model in which the state is:</p>
    <p>The computation of the collision probability is the key point</p>
    <p>{ backoff stage of A, backoff stage of B }</p>
  </div>
  <div class="page">
    <p>Garetto, Shi, Knightly</p>
    <p>Analysis of Symmetric Incomplete State scenarios (SIS)</p>
    <p>Steady-state distribution of Markov Chain:</p>
    <p>P ro</p>
    <p>ba bi</p>
    <p>lit y</p>
    <p>stage B</p>
    <p>Time-scale of short term unfairness</p>
  </div>
  <div class="page">
    <p>Garetto, Shi, Knightly</p>
    <p>SIS scenario  model vs simulation</p>
    <p>Basic access 7 stages</p>
    <p>Basic access 4 stages</p>
    <p>RTS/CTS 9 stages</p>
    <p>RTS/CTS 7 stages</p>
    <p>Time scale of unfairness (ms)</p>
    <p>Collision probability</p>
    <p>Throughput (pkt/s)</p>
    <p>Case</p>
    <p>ns</p>
    <p>model</p>
    <p>ns</p>
    <p>model</p>
    <p>ns</p>
    <p>model</p>
    <p>ns</p>
    <p>model</p>
  </div>
  <div class="page">
    <p>Garetto, Shi, Knightly</p>
    <p>Conclusions</p>
    <p>We systematically studied all 2-flow scenarios of a multi-hop network</p>
    <p>We developed accurate analytical models to characterize throughput and fairness in all cases</p>
    <p>Spatial analysis reveals that problematic cases are not just corner cases, but dominating scenarios occurring with high probability</p>
    <p>Deployment of wireless mesh networks using standard protocols (e.g. 802.11) incurs severe performance problems still to be solved</p>
  </div>
  <div class="page">
    <p>Thanks !</p>
  </div>
  <div class="page">
    <p>Garetto, Shi, Knightly</p>
    <p>Decoupling technique (valid for general topologies)</p>
    <p>The channel private view of a node:</p>
    <p>Nodes transmission is successful idle slot</p>
    <p>Nodes transmission collides</p>
    <p>t</p>
    <p>channel is busy because of activity</p>
    <p>of other nodes</p>
    <p>Modelled as a renewal-reward process</p>
    <p>Throughput (pkt/s) = P [event Ts occurs]</p>
    <p>Average duration of an event (s)</p>
  </div>
  <div class="page">
    <p>Garetto, Shi, Knightly</p>
    <p>Modeling Media Access</p>
    <p>Event probabilities:</p>
    <p>t</p>
    <p>Define the probabilities</p>
    <p>= probability that the node sends out a packet in a slot</p>
    <p>= conditional collision probability</p>
    <p>= conditional busy channel probability</p>
  </div>
  <div class="page">
    <p>Garetto, Shi, Knightly</p>
    <p>The unknown variables are:</p>
    <p>(a decreasing function of p )</p>
    <p>The throughput of a node decreases if either:</p>
    <p>is large (if so, is small, also)</p>
    <p>is large (large fraction of busy time)</p>
    <p>Throughput formula:</p>
    <p>Modeling Media Access</p>
  </div>
  <div class="page">
    <p>Garetto, Shi, Knightly</p>
    <p>Mobility and Fairness</p>
  </div>
</Presentation>

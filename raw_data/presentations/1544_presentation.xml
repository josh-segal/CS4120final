<?xml version="1.0" ?>
<Presentation>
  <div class="page">
    <p>Environmental Conditions and Disk Reliability in Free-cooled Datacenters</p>
    <p>Ioannis Manousakis, Sriram Sankar, Gregg McKnight,</p>
    <p>Thu D. Nguyen, and Ricardo Bianchini</p>
    <p>FAST 2016</p>
  </div>
  <div class="page">
    <p>Problem Statement</p>
    <p>Datacenters are costly and consume lots of energy</p>
    <p>Evolving cooling technologies in datacenters  Chiller-based (traditional)  Water-side economized  Air-side economized (aka free cooling)</p>
    <p>Unexplored tradeoff: environmentals, reliability, cost</p>
    <p>FAST 2016</p>
  </div>
  <div class="page">
    <p>Background</p>
    <p>a) Chiller-based Cooling b) Free Cooling</p>
    <p>Cooling technologies</p>
    <p>Chillers and water-side: tightly controlled environmentals</p>
    <p>FAST 2016</p>
  </div>
  <div class="page">
    <p>Background</p>
    <p>a) Chiller-based Cooling b) Free Cooling</p>
    <p>Cooling technologies</p>
    <p>Chillers and water-side: tightly controlled environmentals</p>
    <p>FAST 2016</p>
  </div>
  <div class="page">
    <p>Background</p>
    <p>a) Chiller-based Cooling b) Free Cooling</p>
    <p>Cooling technologies</p>
    <p>Chillers and water-side: tightly controlled environmentals</p>
    <p>FAST 2016</p>
  </div>
  <div class="page">
    <p>Background</p>
    <p>a) Chiller-based Cooling b) Free Cooling</p>
    <p>Cooling technologies</p>
    <p>Chillers and water-side: tightly controlled environmentals</p>
    <p>FAST 2016</p>
  </div>
  <div class="page">
    <p>Background</p>
    <p>a) Chiller-based Cooling b) Free Cooling</p>
    <p>Cooling technologies</p>
    <p>Chillers and water-side: tightly controlled environmentals</p>
    <p>FAST 2016</p>
  </div>
  <div class="page">
    <p>Background</p>
    <p>a) Chiller-based Cooling b) Free Cooling</p>
    <p>Cooling technologies</p>
    <p>Free cooling: may expose servers to harsh environmentals</p>
    <p>FAST 2016</p>
  </div>
  <div class="page">
    <p>Technology Characteristics</p>
    <p>Cooling technologies:  Chiller-based  Water-side economized  Free cooling</p>
    <p>C A P E X</p>
    <p>OPEX</p>
    <p>R H</p>
    <p>Temperature</p>
    <p>FAST 2016</p>
  </div>
  <div class="page">
    <p>Prior Work</p>
    <p>Hard disk failure studies in datacenters  Pinheiro[FAST07], El-Sayed[SIGMETRICS12], Sankar[ToS13]</p>
    <p>Focused on temperature and temperature variation  Chiller-based datacenters  Three types of cooling  Wider (more aggressive) environmental envelopes</p>
    <p>FAST 2016</p>
  </div>
  <div class="page">
    <p>Contributions and Roadmap</p>
    <p>FAST 2016</p>
  </div>
  <div class="page">
    <p>Methodology</p>
    <p>Collect large traces from hard disks  Nine datacenters (2-4 years), 1M HDDs  All types of Microsoft datacenters</p>
    <p>Tag Technology Population</p>
    <p>CD1 Chiller 117K</p>
    <p>CD2 Water-side 146K</p>
    <p>CD3 Free-Cooled 24K</p>
    <p>HD1 Chiller 16K</p>
    <p>HD2 Water-side 100K</p>
    <p>HH1 Free-Cooled 168K</p>
    <p>HH2 Free-Cooled 213K</p>
    <p>HH3 Free-Cooled 124K</p>
    <p>HH4 Free-Cooled 161K</p>
    <p>Total 1.07M</p>
    <p>CD1</p>
    <p>cold dry</p>
    <p>HH1</p>
    <p>hot humid</p>
    <p>FAST 2016</p>
  </div>
  <div class="page">
    <p>Methodology</p>
    <p>Collect extensive hard disk operation traces  Logged and archived by Microsoft Autopilot 1. I/O communication faults (dead controller / TX-RX error) 2. Behavioral SMART faults (read-write, sectors, seek, etc.) 3. Age-related SMART faults (max hours, on-off cycles, etc.)</p>
    <p>AutopilotServer Rack</p>
    <p>FAST 2016</p>
  </div>
  <div class="page">
    <p>Methodology</p>
    <p>Server Rack Fault Type</p>
    <p>RMA</p>
    <p>Autopilot</p>
    <p>FAST 2016</p>
    <p>Collect extensive hard disk operation traces  Logged and archived by Microsoft Autopilot 1. I/O communication faults (dead controller / TX-RX error) 2. Behavioral SMART faults (read-write, sectors, seek, etc.) 3. Age-related SMART faults (max hours, on-off cycles, etc.)</p>
  </div>
  <div class="page">
    <p>Annual Failure Rate (AFR) Results</p>
    <p>DC Tag Technology AFR Increase wrt 1.5%</p>
    <p>CD1 Chiller 1.5% 0%</p>
    <p>CD2 Water-side 2.1% 40%</p>
    <p>CD3 Free-Cooled 1.8% 20%</p>
    <p>HD1 Chiller 2.0% 33%</p>
    <p>HD2 Water-side 2.3% 53%</p>
    <p>HH1 Free-Cooled 3.1% 107%</p>
    <p>HH2 Free-Cooled 5.1% 240%</p>
    <p>HH3 Free-Cooled 5.1% 240%</p>
    <p>HH4 Free-Cooled 5.4% 260%</p>
    <p>CD1</p>
    <p>cold dry</p>
    <p>HH1</p>
    <p>hot humid</p>
    <p>FAST 2016</p>
  </div>
  <div class="page">
    <p>Annual Failure Rate (AFR) Results</p>
    <p>DC Tag Technology AFR Increase wrt 1.5%</p>
    <p>CD1 Chiller 1.5% 0%</p>
    <p>CD2 Water-side 2.1% 40%</p>
    <p>CD3 Free-Cooled 1.8% 20%</p>
    <p>HD1 Chiller 2.0% 33%</p>
    <p>HD2 Water-side 2.3% 53%</p>
    <p>HH1 Free-Cooled 3.1% 107%</p>
    <p>HH2 Free-Cooled 5.1% 240%</p>
    <p>HH3 Free-Cooled 5.1% 240%</p>
    <p>HH4 Free-Cooled 5.4% 260%</p>
    <p>HH1</p>
    <p>hot humid</p>
    <p>CD1</p>
    <p>cold dry</p>
    <p>FAST 2016</p>
  </div>
  <div class="page">
    <p>Contributions and Roadmap</p>
    <p>FAST 2016</p>
  </div>
  <div class="page">
    <p>Root Causes: Error Breakdown</p>
    <p>Dry DCs  Bad sector count: ~50-60%  Humid DCs  Controller/connectivity: ~60%</p>
    <p>Raw Read Error Rate Spin Up Time</p>
    <p>Reallocated Sectors Count</p>
    <p>Seek Error Rate Spin Retry Count Power Cycle Count Current Pending Sector</p>
    <p>SMART RCV DRIVE DATA</p>
    <p>IOCTL ATA PASS THROUGH</p>
    <p>Other</p>
    <p>HD1</p>
    <p>CD3</p>
    <p>HH1</p>
    <p>Percentage(%)</p>
    <p>FAST 2016</p>
  </div>
  <div class="page">
    <p>Root Causes: Temporal Clustering</p>
    <p>Significant temporal clustering on HH1  No temporal clustering on HD1</p>
    <p>FAST 2016</p>
  </div>
  <div class="page">
    <p>Root Causes: Temporal Clustering</p>
    <p>Significant temporal clustering on HH1  No temporal clustering on HD1</p>
    <p>Data suggests a lifetime failure process</p>
    <p>Summer Winter Summer Winter</p>
    <p>FAST 2016</p>
  </div>
  <div class="page">
    <p>Root Causes: Correlating to Environmentals</p>
    <p>Failure rate regressions for HH1 1. Discover trends  variables that change together 2. Split into 4 groups P1  P4 (total population = 170K)</p>
    <p>Popul. % Temp. RH CoV Temp.</p>
    <p>CoV RH</p>
    <p>P1 30.1 5.1*10-5 1.2*10-4 -7.9*10-3 -6.5*10-3</p>
    <p>P2 25.6 -1.9*10-5 1.0*10-4 -9.0*10-3 -3.7*10-3</p>
    <p>P3 23.3 1.4*10-3 2.1*10-4 -4.9*10-2 -4.4*10-2</p>
    <p>P4 19.6 1.7*10-3 4.4*10-4 -1.3*10-1 -8.0*10-2</p>
    <p>Popul. % Temp. RH CoV Temp.</p>
    <p>CoV RH</p>
    <p>P1 30.1 -6.4*10-3 5.1*10-2 -1.7*10 0 -9.0*10-0</p>
    <p>P2 25.6 -1.6*10-2 5.3*10-2 -1.0*10-1 -1.6*10-1</p>
    <p>P3 23.3 6.3*10-3 9.9*10-2 -8.4*10 0 3.5*10 0</p>
    <p>P4 19.6 3.3*10-2 11.5*10-2 -3.9*10 0 -1.3*10 0</p>
    <p>y = a*x + b y = a*e (b*x)</p>
    <p>coefficient a coefficient b</p>
    <p>FAST 2016</p>
  </div>
  <div class="page">
    <p>Root Causes: Correlating to Environmentals</p>
    <p>Failure rate regressions for HH1 1. Discover trends  variables that change together 2. Split into 4 groups P1  P4 (total population = 170K)</p>
    <p>Popul. % Temp. RH CoV Temp.</p>
    <p>CoV RH</p>
    <p>P1 30.1 5.1*10-5 1.2*10-4 -7.9*10-3 -6.5*10-3</p>
    <p>P2 25.6 -1.9*10-5 1.0*10-4 -9.0*10-3 -3.7*10-3</p>
    <p>P3 23.3 1.4*10-3 2.1*10-4 -4.9*10-2 -4.4*10-2</p>
    <p>P4 19.6 1.7*10-3 4.4*10-4 -1.3*10-1 -8.0*10-2</p>
    <p>Popul. % Temp. RH CoV Temp.</p>
    <p>CoV RH</p>
    <p>P1 30.1 -6.4*10-3 5.1*10-2 -1.7*10 0 -9.0*10-0</p>
    <p>P2 25.6 -1.6*10-2 5.3*10-2 -1.0*10-1 -1.6*10-1</p>
    <p>P3 23.3 6.3*10-3 9.9*10-2 -8.4*10 0 3.5*10 0</p>
    <p>P4 19.6 3.3*10-2 11.5*10-2 -3.9*10 0 -1.3*10 0</p>
    <p>y = a*x + b y = a*e (b*x)</p>
    <p>coefficient a coefficient b</p>
    <p>FAST 2016</p>
  </div>
  <div class="page">
    <p>Root Causes: Correlating to Environmentals</p>
    <p>Failure rate regressions for HH1 1. Discover trends  variables that change together 2. Split into 4 groups P1  P4 (total population = 170K)</p>
    <p>RH% seems to have the strongest impact</p>
    <p>Popul. % Temp. RH CoV Temp.</p>
    <p>CoV RH</p>
    <p>P1 30.1 5.1*10-5 1.2*10-4 -7.9*10-3 -6.5*10-3</p>
    <p>P2 25.6 -1.9*10-5 1.0*10-4 -9.0*10-3 -3.7*10-3</p>
    <p>P3 23.3 1.4*10-3 2.1*10-4 -4.9*10-2 -4.4*10-2</p>
    <p>P4 19.6 1.7*10-3 4.4*10-4 -1.3*10-1 -8.0*10-2</p>
    <p>Popul. % Temp. RH CoV Temp.</p>
    <p>CoV RH</p>
    <p>P1 30.1 -6.4*10-3 5.1*10-2 -1.7*10 0 -9.0*10-0</p>
    <p>P2 25.6 -1.6*10-2 5.3*10-2 -1.0*10-1 -1.6*10-1</p>
    <p>P3 23.3 6.3*10-3 9.9*10-2 -8.4*10 0 3.5*10 0</p>
    <p>P4 19.6 3.3*10-2 11.5*10-2 -3.9*10 0 -1.3*10 0</p>
    <p>y = a*x + b y = a*e (b*x)</p>
    <p>coefficient a coefficient b</p>
    <p>FAST 2016</p>
  </div>
  <div class="page">
    <p>Root Causes: Correlating to Environmentals</p>
    <p>Failure rate correlations for HH1 1. Discover trends  variables that change together 2. Correlation matrix</p>
    <p>a) Pearsons correlation b) Spearmans correlationFAST 2016</p>
  </div>
  <div class="page">
    <p>Root Causes: Correlating to Environmentals</p>
    <p>a) Pearsons correlation b) Spearmans correlationFAST 2016</p>
    <p>Failure rate correlations for HH1 1. Discover trends  variables that change together 2. Correlation matrix</p>
  </div>
  <div class="page">
    <p>Root Causes: Correlating to Environmentals</p>
    <p>a) Pearsons correlation b) Spearmans correlationFAST 2016</p>
    <p>Failure rate correlations for HH1 1. Discover trends  variables that change together 2. Correlation matrix</p>
  </div>
  <div class="page">
    <p>Contributions and Roadmap</p>
    <p>FAST 2016</p>
  </div>
  <div class="page">
    <p>Cooling-Related Cost Tradeoffs</p>
    <p>Cooling technologies vs costs  Free cooling results in higher HDD costs  Operator might pay the extra HDD costs</p>
    <p>N o rm a liz e d C o st</p>
    <p>Ch ill er</p>
    <p>W -s id e</p>
    <p>Ch ill er</p>
    <p>W -s id e</p>
    <p>Ch ill er</p>
    <p>W -s id e</p>
    <p>Disk Cost Opex Cool Capex Cool</p>
    <p>Fr ee Co ol</p>
    <p>Fr ee Co ol</p>
    <p>Fr ee Co ol</p>
    <p>FAST 2016</p>
  </div>
  <div class="page">
    <p>Cooling-Related Cost Tradeoffs</p>
    <p>N o rm a liz e d C o st</p>
    <p>Ch ill er</p>
    <p>W -s id e</p>
    <p>Ch ill er</p>
    <p>W -s id e</p>
    <p>Ch ill er</p>
    <p>W -s id e</p>
    <p>Disk Cost Opex Cool Capex Cool</p>
    <p>Fr ee Co ol</p>
    <p>Fr ee Co ol</p>
    <p>Fr ee Co ol</p>
    <p>FAST 2016</p>
    <p>Cooling technologies vs costs  Free cooling results in higher HDD costs  Operator might pay the extra HDD costs</p>
  </div>
  <div class="page">
    <p>Cooling-Related Cost Tradeoffs</p>
    <p>AFR = 1.5%</p>
    <p>N o rm a liz e d C o st</p>
    <p>Ch ill er</p>
    <p>W -s id e</p>
    <p>Ch ill er</p>
    <p>W -s id e</p>
    <p>Ch ill er</p>
    <p>W -s id e</p>
    <p>Disk Cost Opex Cool Capex Cool</p>
    <p>Fr ee Co ol</p>
    <p>Fr ee Co ol</p>
    <p>Fr ee Co ol</p>
    <p>AFR = 1.75%</p>
    <p>AFR = 5.4%</p>
    <p>FAST 2016</p>
    <p>Cooling technologies vs costs  Free cooling results in higher HDD costs  Operator might pay the extra HDD costs  Free cooling savings make up for the extra costs</p>
  </div>
  <div class="page">
    <p>Summary of Observations</p>
    <p>FAST 2016</p>
  </div>
  <div class="page">
    <p>Summary of Observations</p>
    <p>FAST 2016</p>
  </div>
  <div class="page">
    <p>Contributions and Roadmap</p>
    <p>FAST 2016</p>
  </div>
  <div class="page">
    <p>Model Construction</p>
    <p>Estimate AFRs  Various server and datacenter designs/conditions/locations</p>
    <p>FAST 2016</p>
  </div>
  <div class="page">
    <p>Model Construction</p>
    <p>Estimate AFRs  Various server and datacenter designs/conditions/locations</p>
    <p>CR(T,RH) = const e( Ea kT ) e(bRH)+(</p>
    <p>cRH kT</p>
    <p>)</p>
    <p>AFT = e Ea k (</p>
    <p>FAST 2016</p>
  </div>
  <div class="page">
    <p>Model Construction</p>
    <p>Lifetime Acceleration Factor (AF)  Compared to a baseline (AFR=1.5% @25C and 50% RH)  AF1 : Temperature - AF2: RH and Temperature</p>
    <p>Validation  Collect hourly environmentals in other datacenters  Use the model constructed in P1 to predict failure rates  Validated with P2, P3, P4, and CD3, HD1</p>
    <p>FAST 2016</p>
  </div>
  <div class="page">
    <p>Contributions and Roadmap</p>
    <p>FAST 2016</p>
  </div>
  <div class="page">
    <p>Design Considerations</p>
    <p>Disk placement affects HDD failure rates</p>
    <p>FAST 2016</p>
  </div>
  <div class="page">
    <p>Design Considerations</p>
    <p>A ir</p>
    <p>flo w</p>
    <p>D ir</p>
    <p>ec tio</p>
    <p>n</p>
    <p>FAST 2016</p>
    <p>Disk placement affects HDD failure rates</p>
  </div>
  <div class="page">
    <p>Design Considerations</p>
    <p>A ir</p>
    <p>flo w</p>
    <p>D ir</p>
    <p>ec tio</p>
    <p>n</p>
    <p>Disk at the front  Low Temp  High RH%</p>
    <p>FAST 2016</p>
    <p>Disk placement affects HDD failure rates</p>
  </div>
  <div class="page">
    <p>Design Considerations</p>
    <p>A ir</p>
    <p>flo w</p>
    <p>D ir</p>
    <p>ec tio</p>
    <p>n</p>
    <p>Disk at the back  High Temp  Low RH%</p>
    <p>FAST 2016</p>
    <p>Disk placement affects HDD failure rates</p>
  </div>
  <div class="page">
    <p>Design Considerations</p>
    <p>A ir</p>
    <p>flo w</p>
    <p>D ir</p>
    <p>ec tio</p>
    <p>n</p>
    <p>Disk at the side  Var. Temp  Var. RH%</p>
    <p>FAST 2016</p>
    <p>Disk placement affects HDD failure rates</p>
  </div>
  <div class="page">
    <p>Conclusions</p>
    <p>Explored HDD reliability vs environmentals  9 datacenters with 3 cooling technologies, 1M disks  AFRs impacted by enviromentals, especially high RH  Tradeoff favors free cooling: costs down, despite higher AFRs</p>
    <p>Developed an accurate model from real failure data  Combines corrosion and temperature</p>
    <p>Learned lessons  Server layout has a significant impact on HDD AFRs  More lessons in the paper</p>
    <p>FAST 2016</p>
  </div>
  <div class="page">
    <p>Thank you</p>
    <p>Questions?</p>
    <p>FAST 2016</p>
  </div>
</Presentation>

<?xml version="1.0" ?>
<Presentation>
  <div class="page">
    <p>Light-Weight Contexts An OS Abstraction for Safety and Performance</p>
    <p>Anjo Vahldiek-Oberwagner Deepak Garg</p>
    <p>Max Planck Institute for Software Systems</p>
    <p>Eslam Elnikety Bobby Bhattacharjee</p>
    <p>James Litton</p>
    <p>Peter Druschel</p>
  </div>
  <div class="page">
    <p>Process</p>
  </div>
  <div class="page">
    <p>Fork</p>
    <p>Used to achieve distinct isolation, privilege separation, and program state</p>
    <p>Imposes scheduling and coordination overhead</p>
  </div>
  <div class="page">
    <p>Light-Weight Context</p>
  </div>
  <div class="page">
    <p>Light-Weight Context</p>
  </div>
  <div class="page">
    <p>Creating lwCs</p>
  </div>
  <div class="page">
    <p>lwCreate</p>
  </div>
  <div class="page">
    <p>lwCreate</p>
  </div>
  <div class="page">
    <p>lwCreate</p>
    <p>new,caller,args  lwCreate(spec, options)</p>
  </div>
  <div class="page">
    <p>lwCreate</p>
    <p>new,caller,args  lwCreate(spec, options)</p>
    <p>The child is a copy (via COW) of the parent by default</p>
  </div>
  <div class="page">
    <p>lwCreate</p>
    <p>new,caller,args  lwCreate(spec, options)</p>
  </div>
  <div class="page">
    <p>lwCreate</p>
    <p>new,caller,args  lwCreate(spec, options)</p>
    <p>The child may share or omit parent resources</p>
  </div>
  <div class="page">
    <p>lwSwitch</p>
    <p>caller,args  lwSwitch(target, args)</p>
  </div>
  <div class="page">
    <p>lwSwitch</p>
    <p>caller,args  lwSwitch(target, args)</p>
  </div>
  <div class="page">
    <p>lwSwitch</p>
    <p>caller,args  lwSwitch(target, args)</p>
    <p>lwSwitch provides coroutine semantics</p>
  </div>
  <div class="page">
    <p>lwSwitch</p>
    <p>caller,args  lwSwitch(target, args)</p>
    <p>lwSwitch provides coroutine semantics</p>
  </div>
  <div class="page">
    <p>API Summary</p>
    <p>Create lwC new,caller,args  lwCreate(spec, options)</p>
    <p>Switch to lwC caller,args  lwSwitch(target, args)</p>
    <p>Resource Access status  lwRestrict(lwc, spec) status  lwOverlay(lwc, spec) status  lwSyscall(target, mask,</p>
    <p>syscall, args)</p>
  </div>
  <div class="page">
    <p>Common uses</p>
    <p>Session isolation</p>
  </div>
  <div class="page">
    <p>Common uses</p>
    <p>Session isolation</p>
    <p>Sensitive data isolation</p>
  </div>
  <div class="page">
    <p>Common uses</p>
    <p>Session isolation</p>
    <p>Sensitive data isolation</p>
    <p>Snapshot and rollback</p>
  </div>
  <div class="page">
    <p>Common uses</p>
    <p>Session isolation</p>
    <p>Sensitive data isolation</p>
    <p>Snapshot and rollback</p>
    <p>Reference monitoring</p>
  </div>
  <div class="page">
    <p>Snapshots</p>
  </div>
  <div class="page">
    <p>Snapshots</p>
  </div>
  <div class="page">
    <p>Snapshots</p>
  </div>
  <div class="page">
    <p>Snapshots</p>
  </div>
  <div class="page">
    <p>Snapshots</p>
  </div>
  <div class="page">
    <p>Snapshots</p>
  </div>
  <div class="page">
    <p>Snapshots</p>
  </div>
  <div class="page">
    <p>Snapshots</p>
  </div>
  <div class="page">
    <p>Snapshots</p>
  </div>
  <div class="page">
    <p>Snapshots</p>
  </div>
  <div class="page">
    <p>Snapshots</p>
  </div>
  <div class="page">
    <p>Snapshots</p>
  </div>
  <div class="page">
    <p>Snapshots</p>
  </div>
  <div class="page">
    <p>Snapshots</p>
  </div>
  <div class="page">
    <p>Snapshots</p>
  </div>
  <div class="page">
    <p>Snapshots</p>
  </div>
  <div class="page">
    <p>Reference Monitor</p>
  </div>
  <div class="page">
    <p>Reference Monitor</p>
  </div>
  <div class="page">
    <p>Reference Monitor</p>
  </div>
  <div class="page">
    <p>Reference Monitor</p>
  </div>
  <div class="page">
    <p>Reference Monitor</p>
  </div>
  <div class="page">
    <p>Reference Monitor</p>
  </div>
  <div class="page">
    <p>Reference Monitor</p>
  </div>
  <div class="page">
    <p>Reference Monitor</p>
  </div>
  <div class="page">
    <p>Reference Monitor</p>
  </div>
  <div class="page">
    <p>Reference Monitor</p>
  </div>
  <div class="page">
    <p>Reference Monitor</p>
  </div>
  <div class="page">
    <p>Reference Monitor</p>
  </div>
  <div class="page">
    <p>Reference Monitor</p>
  </div>
  <div class="page">
    <p>Reference Monitor</p>
  </div>
  <div class="page">
    <p>Evaluation  Microbenchmarks</p>
    <p>lwCreate  lwSwitch  Reference monitoring (systrap)</p>
    <p>Apache (v. 2.4.18)  Session isolation  Reference monitoring</p>
    <p>Nginx (v. 1.9.15)  Session isolation  Reference monitoring  SSL private key isolation</p>
    <p>PHP (v. 7.0.11)  Fast startup via snapshots</p>
  </div>
  <div class="page">
    <p>Creation/Destruction Cost</p>
    <p>No pages dirtied  87.7 microseconds</p>
    <p>Additional COW cost per page dirtied  ~ 3.4 microseconds</p>
  </div>
  <div class="page">
    <p>Switching Cost</p>
    <p>lwC process k-thread</p>
    <p>m ic</p>
    <p>ro se</p>
    <p>co nd</p>
    <p>s</p>
    <p>Switch target</p>
  </div>
  <div class="page">
    <p>Evaluation  nginx</p>
    <p>High performance web server  Asynchronous &amp; event-driven  No session isolation</p>
  </div>
  <div class="page">
    <p>nginx execution</p>
  </div>
  <div class="page">
    <p>nginx execution</p>
  </div>
  <div class="page">
    <p>nginx execution</p>
  </div>
  <div class="page">
    <p>nginx execution</p>
  </div>
  <div class="page">
    <p>nginx execution</p>
  </div>
  <div class="page">
    <p>nginx execution</p>
  </div>
  <div class="page">
    <p>nginx execution</p>
  </div>
  <div class="page">
    <p>Evaluation - nginx</p>
    <p>H T T P</p>
  </div>
  <div class="page">
    <p>Evaluation - nginx</p>
    <p>H T T P</p>
  </div>
  <div class="page">
    <p>Evaluation - nginx</p>
    <p>H T T P</p>
  </div>
  <div class="page">
    <p>Evaluation - PHP-FCGI</p>
    <p>Use lwC snapshots to speed up PHP  Evaluated using Zend MVC Framework</p>
  </div>
  <div class="page">
    <p>PHP Execution</p>
  </div>
  <div class="page">
    <p>PHP Execution</p>
  </div>
  <div class="page">
    <p>PHP Execution</p>
  </div>
  <div class="page">
    <p>PHP Execution</p>
  </div>
  <div class="page">
    <p>PHP Execution</p>
  </div>
  <div class="page">
    <p>PHP Fast Startup</p>
  </div>
  <div class="page">
    <p>PHP Fast Startup</p>
  </div>
  <div class="page">
    <p>PHP Fast Startup</p>
  </div>
  <div class="page">
    <p>Evaluation - PHP-FCGI</p>
    <p>Stock PHP lwC PHP</p>
    <p>Re qu</p>
    <p>es ts</p>
    <p>p er</p>
    <p>s ec</p>
    <p>on d</p>
    <p>opcode cache disabled opcode cache enabled</p>
  </div>
  <div class="page">
    <p>Light-Weight Contexts</p>
    <p>Source code will be available at http://www.cs.umd.edu/projects/lwc/</p>
    <p>Max Planck Institute for Software Systems</p>
  </div>
</Presentation>

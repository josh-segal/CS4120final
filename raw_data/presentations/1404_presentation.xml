<?xml version="1.0" ?>
<Presentation>
  <div class="page">
    <p>BNV : Enabling Scalable Experimentation through Bare-metal Network Virtualization</p>
    <p>Pravein Govindan Kannan, Ahmad Soltani, Mun Choon Chan Ee-Chien Chang</p>
  </div>
  <div class="page">
    <p>How to validate ideas over multiple topologies?</p>
    <p>Optimizing Topologies</p>
    <p>Congestion Control</p>
    <p>Resource Allocation</p>
    <p>No Single Topology is suitable for all use cases</p>
    <p>Forwarding</p>
    <p>Forwarding Forwarding</p>
    <p>Forwarding</p>
    <p>SDN Controller</p>
    <p>App 1</p>
    <p>App 2</p>
    <p>App n</p>
    <p>OpenFlow</p>
  </div>
  <div class="page">
    <p>Software Tools : Flexible</p>
    <p>Mininet, Maxinet: Elegant tools enabling functional testing/ learning.</p>
    <p>Container-based virtualization on a single machine or cluster of machines.</p>
    <p>Cannot achieve the peak line-rate for performance testing.</p>
  </div>
  <div class="page">
    <p>Network Testbeds  High Fidelity</p>
    <p>DeterLab, CloudLab, GENI, Staging Platforms:</p>
    <p>Can provide high fidelity emulation with Bare-Metal provisioning.</p>
    <p>Can provide only a fixed topology or subset for Software Defined Networks.</p>
    <p>Change in Topology might require a long time (sometimes in order of weeks).</p>
  </div>
  <div class="page">
    <p>How do we achieve the flexibility of software and fidelity of hardware (bare-metal)?</p>
    <p>Topology Scaling : One-to-Many Switch Virtualization</p>
  </div>
  <div class="page">
    <p>Virtual Topology</p>
    <p>Switch1 Switch2 Switch3</p>
    <p>Network Hypervisor</p>
    <p>OpenFlow</p>
    <p>Tenant 2</p>
    <p>ONOS Controller</p>
    <p>Tenant 1</p>
    <p>OpenDaylight Controller</p>
    <p>Tenant Mapping</p>
    <p>Tenant 3</p>
    <p>POX Controller</p>
    <p>FatTree, JellyFish, HyperCube, HyperX, Xpander, Arbitrary</p>
    <p>topologiesetc</p>
    <p>Tenant n</p>
    <p>Any SDN Controller</p>
  </div>
  <div class="page">
    <p>Virtual Topology</p>
    <p>Switch1 Switch2 Switch3</p>
    <p>BNV</p>
    <p>OpenFlow</p>
    <p>Flow Translation</p>
    <p>Topology Abstraction</p>
    <p>Tenant 2</p>
    <p>ONOS Controller</p>
    <p>Tenant 1</p>
    <p>OpenDaylight Controller</p>
    <p>BNV Mapper</p>
    <p>Tenant Mapping</p>
    <p>Tenant 3</p>
    <p>POX Controller</p>
    <p>FatTree, JellyFish, HyperCube, HyperX, Xpander, Arbitrary</p>
    <p>topologiesetc</p>
    <p>Tenant n</p>
    <p>Any SDN Controller</p>
  </div>
  <div class="page">
    <p>Flow Translation</p>
    <p>Topology Abstraction</p>
  </div>
  <div class="page">
    <p>Idea : Loopback links in substrate topology</p>
  </div>
  <div class="page">
    <p>Idea : Loopback links in substrate topology</p>
  </div>
  <div class="page">
    <p>Idea : Loopback links in substrate topology</p>
  </div>
  <div class="page">
    <p>Software-Configurable Loopbacks</p>
  </div>
  <div class="page">
    <p>Topology + Loopback link</p>
    <p>H1 H2 H5 H6</p>
    <p>pSwitch1 pSwitch2CLink1</p>
    <p>LoopLink1 LoopLink2</p>
    <p>Backbone link</p>
  </div>
  <div class="page">
    <p>H1 H2 H5 H6</p>
    <p>pSwitch1 pSwitch2CLink1</p>
    <p>V1 V31 2</p>
    <p>V2</p>
    <p>vS1</p>
    <p>vS2</p>
    <p>vS3</p>
    <p>Physical Topology</p>
    <p>Virtual Topology</p>
    <p>vL1</p>
    <p>vL2vL3 1G1G</p>
    <p>LoopLink1 LoopLink2</p>
  </div>
  <div class="page">
    <p>H1 H2 H5 H6</p>
    <p>pSwitch1 pSwitch2</p>
    <p>V1 V31 2</p>
    <p>V2</p>
    <p>vS1</p>
    <p>vS2</p>
    <p>vS3</p>
    <p>Physical Topology</p>
    <p>Virtual Topology</p>
    <p>CLink1</p>
    <p>vL1</p>
    <p>vL2vL2 1G1G</p>
    <p>LoopLink1 LoopLink2</p>
  </div>
  <div class="page">
    <p>H1 H2 H5 H6</p>
    <p>pSwitch1 pSwitch2</p>
    <p>V1 V31 2</p>
    <p>V2</p>
    <p>vS1</p>
    <p>vS2</p>
    <p>vS3</p>
    <p>Physical Topology</p>
    <p>Virtual Topology</p>
    <p>CLink1</p>
    <p>vL1 -&gt; CLink1</p>
    <p>vL2vL3 1G1G</p>
    <p>LoopLink1 LoopLink2</p>
  </div>
  <div class="page">
    <p>H1 H2 H5 H6</p>
    <p>pSwitch1 pSwitch2</p>
    <p>V1 V31 2</p>
    <p>V2</p>
    <p>vS1</p>
    <p>vS2</p>
    <p>vS3</p>
    <p>Physical Topology</p>
    <p>Virtual Topology</p>
    <p>CLink1</p>
    <p>vL1 -&gt; CLink1</p>
    <p>vL2vL3 1G1G</p>
    <p>LoopLink1 LoopLink2</p>
  </div>
  <div class="page">
    <p>H1 H2 H5 H6</p>
    <p>pSwitch1 pSwitch2</p>
    <p>V1 V31 3 2 3</p>
    <p>V2</p>
    <p>vS1</p>
    <p>vS2</p>
    <p>vS3</p>
    <p>Physical Topology</p>
    <p>Virtual Topology</p>
    <p>LoopLink1 LoopLink2</p>
    <p>vL1 -&gt; CLink1</p>
    <p>vL2 -&gt; CLink1vL3-&gt; LoopLink1 1G1G</p>
  </div>
  <div class="page">
    <p>H1 H2 H5 H6</p>
    <p>pSwitch1 pSwitch2</p>
    <p>V1 V31 3 2 3</p>
    <p>V2</p>
    <p>vS1</p>
    <p>vS2</p>
    <p>vS3</p>
    <p>Physical Topology</p>
    <p>Virtual Topology</p>
    <p>LoopLink1 LoopLink2</p>
    <p>vL1 -&gt; CLink1</p>
    <p>vL2 -&gt; CLink1vL3-&gt; LoopLink1 1G1G</p>
    <p>Final Mapping</p>
  </div>
  <div class="page">
    <p>H1 H2 H5 H6</p>
    <p>pSwitch1 pSwitch2CLink1</p>
    <p>V1 V31 2</p>
    <p>Tag 3</p>
    <p>vL1 : Tag 1</p>
    <p>Tag 2</p>
    <p>V2</p>
    <p>vS1</p>
    <p>vS2</p>
    <p>vS3</p>
    <p>Physical Topology</p>
    <p>Virtual Topology</p>
    <p>Link 1 using Packet Tagging</p>
    <p>PKT</p>
    <p>PKT</p>
    <p>PKT</p>
    <p>LoopLink1 LoopLink2</p>
  </div>
  <div class="page">
    <p>H1 H2 H5 H6</p>
    <p>pSwitch1 pSwitch2CLink1</p>
    <p>V1 V31 2</p>
    <p>Tag 3</p>
    <p>vL1: Tag 1</p>
    <p>vL2: Tag 2</p>
    <p>V2</p>
    <p>vS1</p>
    <p>vS2</p>
    <p>vS3</p>
    <p>Physical Topology</p>
    <p>Virtual Topology</p>
    <p>Link 2 PKT</p>
    <p>PKT</p>
    <p>LoopLink1 LoopLink2</p>
  </div>
  <div class="page">
    <p>H1 H2 H5 H6</p>
    <p>pSwitch1 pSwitch2CLink1</p>
    <p>H1 H51 2</p>
    <p>vL3: Tag 3</p>
    <p>VL1 : Tag 1</p>
    <p>H2</p>
    <p>vS1</p>
    <p>vS2</p>
    <p>vS3</p>
    <p>Physical Topology</p>
    <p>Virtual Topology</p>
    <p>Link3 : Loop Link</p>
    <p>PKT</p>
    <p>PKT</p>
    <p>vL2: Tag 2</p>
    <p>LoopLink1 LoopLink2</p>
    <p>Consistency &amp; Fidelity of mapping.</p>
  </div>
  <div class="page">
    <p>How to achieve buffer isolation between multiple virtual switches ?</p>
    <p>Burst Traffic</p>
    <p>S1 S2 S3</p>
    <p>A single virtual switch can fill up the entire shared Buffer !!</p>
    <p>Shared Buffer</p>
  </div>
  <div class="page">
    <p>How to achieve buffer isolation between multiple virtual switches ?</p>
    <p>Burst Traffic</p>
    <p>S1 S2 S3</p>
    <p>Shared Buffer</p>
    <p>Metering burst (burst-rate &lt; Approx Buffer Size)</p>
  </div>
  <div class="page">
    <p>How to achieve link isolation between multiple virtual links?</p>
    <p>pSwitch1</p>
    <p>S1 S2</p>
    <p>pSwitch2</p>
    <p>S3 S4</p>
    <p>Tenant 1 Tenant 2</p>
    <p>Metering Rate Metering Rate</p>
  </div>
  <div class="page">
    <p>Virtual Topology</p>
    <p>Switch1 Switch2 Switch3</p>
    <p>BNV</p>
    <p>OpenFlow</p>
    <p>Flow Translation</p>
    <p>Topology Abstraction</p>
    <p>Tenant 2</p>
    <p>ONOS Controller</p>
    <p>Tenant 1</p>
    <p>OpenDaylight Controller</p>
    <p>BNV Mapper</p>
    <p>Tenant Mapping</p>
    <p>Tenant 3</p>
    <p>POX Controller</p>
    <p>FatTree, JellyFish, HyperCube, HyperX, Xpander, Arbitrary</p>
    <p>topologiesetc</p>
    <p>Tenant n</p>
    <p>Any SDN Controller</p>
  </div>
  <div class="page">
    <p>BNV Mapper</p>
  </div>
  <div class="page">
    <p>BNV Mapper</p>
    <p>BNV Mapper</p>
    <p>Request</p>
    <p>Mapping1 1</p>
  </div>
  <div class="page">
    <p>BNV Mapper</p>
    <p>A Virtual Topology Consists of :  A set of hosts V,</p>
    <p>A set of (virtual) switches S, (feature: TCAM capacity, meter capacity, etc)</p>
    <p>A set of (virtual) links L (feature : Bandwidth)</p>
    <p>H1 H3 H5 H7H2 H4 H6 H8</p>
    <p>Host Link</p>
    <p>Core Link</p>
  </div>
  <div class="page">
    <p>Solved using ILP</p>
    <p>Variables :</p>
    <p>BNV Mapper</p>
    <p>, =   ;       ;</p>
    <p>, =   ;       ;</p>
    <p>Core Link::</p>
    <p>Host link:</p>
  </div>
  <div class="page">
    <p>BNV Mapper</p>
    <p>Objective is to Minimize the usage of Core-links:</p>
    <p>a) Maximizes isolation to the tenant, keeping links dedicated.</p>
    <p>b) Provides scope for dynamic expansions. (Adding/upgrading tenants)</p>
    <p>+     ,</p>
    <p>Inter-Switch Links</p>
    <p>Big-Switch abstraction</p>
    <p>More details in paper!</p>
  </div>
  <div class="page">
    <p>Implementation</p>
    <p>Implemented on top of</p>
    <p>Integrated with a Bare-metal provisioning service (Testbed).</p>
    <p>Deployed on National Cybersecurity Lab(NCL) Testbed.</p>
    <p>Support OpenFlow 1.0/ 1.3</p>
  </div>
  <div class="page">
    <p>Implementation</p>
    <p>Dynamic Loopback Wiring using L2 intermediate Switch</p>
    <p>Static loopback wiring 24-ports of SDN Switch</p>
  </div>
  <div class="page">
    <p>Evaluation</p>
    <p>Can BNV :</p>
  </div>
  <div class="page">
    <p>Evaluation : loopbacks &amp; Big Switch Abstraction</p>
  </div>
  <div class="page">
    <p>Evaluation : loopbacks &amp; Big Switch Abstraction</p>
  </div>
  <div class="page">
    <p>Star (Single Switch) Star (Multi Switch)</p>
    <p>Clos (Multi Switch) Clos (Single Switch)</p>
    <p>Evaluation : loopbacks &amp; Big Switch Abstraction</p>
  </div>
  <div class="page">
    <p>Mapping Complex Topologies</p>
  </div>
  <div class="page">
    <p>Evaluation : Fidelity of Complex Topologies</p>
    <p>Single-Rooted Tree Fat Tree</p>
    <p>Jellyfish Star</p>
  </div>
  <div class="page">
    <p>Evaluation : Fidelity of Complex Topologies</p>
    <p>Single-Rooted Tree Fat Tree</p>
    <p>Jellyfish Star</p>
    <p>Single-Rooted TreeSingle-Rooted TreeSingle-Rooted TreeSingle-Rooted Tree Single-Rooted TreeSingle-Rooted TreeSingle-Rooted TreeSingle-Rooted Tree</p>
    <p>Single-Rooted TreeSingle-Rooted TreeSingle-Rooted Tree Single-Rooted Tree</p>
    <p>Fat TreeFat TreeFat TreeFat Tree Fat TreeFat TreeFat TreeFat Tree</p>
    <p>Fat TreeFat TreeFat Tree Fat Tree</p>
    <p>Jellyfish Jellyfish</p>
    <p>Jellyfish Jellyfish</p>
    <p>Jellyfish Jellyfish</p>
    <p>Jellyfish Jellyfish</p>
    <p>Jellyfish Jellyfish</p>
    <p>Jellyfish</p>
    <p>Jellyfish</p>
    <p>Star Star</p>
    <p>Star Star</p>
    <p>Star Star</p>
    <p>Star Star</p>
    <p>Star Star</p>
    <p>Star</p>
    <p>Star</p>
  </div>
  <div class="page">
    <p>Evaluation : Fidelity of Complex Topologies</p>
    <p>Single-Rooted Tree Fat Tree</p>
    <p>Jellyfish Star</p>
  </div>
  <div class="page">
    <p>Evaluation : Fidelity of Complex Topologies</p>
    <p>Single-Rooted Tree Fat Tree</p>
    <p>Jellyfish Star</p>
  </div>
  <div class="page">
    <p>Evaluation : Fidelity of Complex Topologies</p>
    <p>Fat Tree Jellyfish</p>
    <p>Jellyfish 7-8% Lower</p>
    <p>Low Intra-pod locality Heavy cross rack traffic!!</p>
  </div>
  <div class="page">
    <p>Evaluation : Fidelity of Complex Topologies</p>
    <p>Fat Tree Jellyfish</p>
    <p>High Intra-pod locality Low cross rack traffic!!</p>
    <p>Jellyfish 8% Higher</p>
    <p>Take-away: BNV emulates the intrinsic characteristics of the topologies, otherwise observed with heavy wiring &amp; building costs</p>
    <p>This observation is backed by Tale of Two Topologies [SIGCOMM 17]</p>
  </div>
  <div class="page">
    <p>Evaluation : Isolation of multiple tenants</p>
    <p>Fat Tree</p>
    <p>Jellyfish</p>
    <p>Random (Rest of the nodes)</p>
    <p>Take-away: BNV can support multiple arbitrary tenants providing isolated &amp; repeatable environments.</p>
  </div>
  <div class="page">
    <p>Evaluation : Scale of Topologies</p>
  </div>
  <div class="page">
    <p>Evaluation : Scale of Topologies</p>
  </div>
  <div class="page">
    <p>Evaluation : Scale of Topologies</p>
    <p>Take-away: Addition of loopback links increases the scalability significantly. Can emulate topologies with 130 switches and 300 links with just 5 ToR switches</p>
    <p>Internet Topology Zoo dataset</p>
  </div>
  <div class="page">
    <p>Summary</p>
    <p>BNV provides High-fidelity network experimentation/cloud platform.</p>
    <p>BNV can scale a network to support arbitrary topologies using the existing network.</p>
    <p>Can emulate networks of more than 100 network devices with just 5 ToR Switches.</p>
    <p>Deployed in NCL testbed https://ncl.sg</p>
    <p>Code Available : https://github.com/praveingk/bnvirt</p>
  </div>
</Presentation>

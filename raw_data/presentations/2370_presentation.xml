<?xml version="1.0" ?>
<Presentation>
  <div class="page">
    <p>Sep 2006 Kameswari Chebrolu, Bhaskaran Raman, Sayandeep Sen, Indian Institute of Technology, Kanpur 1</p>
    <p>Long Distance 802.11b Links: Performance Measurement and</p>
    <p>Experience</p>
    <p>Kameswari Chebrolu Bhaskaran Raman</p>
    <p>Sayandeep Sen Indian Institute of Technology, Kanpur</p>
  </div>
  <div class="page">
    <p>Sep 2006 Kameswari Chebrolu, Bhaskaran Raman, Sayandeep Sen, Indian Institute of Technology, Kanpur 2</p>
    <p>Example Deployments  Akshaya, Kerala  Digital Gangetic Plains, Uttar Pradesh  Djurslands.Net, Denmark  Nepal Wireless</p>
    <p>Several commercial products exist  Important Issue</p>
    <p>Understand link performance</p>
    <p>Src: http://nepalwireless.net/</p>
  </div>
  <div class="page">
    <p>Sep 2006 Kameswari Chebrolu, Bhaskaran Raman, Sayandeep Sen, Indian Institute of Technology, Kanpur 3</p>
    <p>The Ashwini Project</p>
    <p>The antenna tower at Kasipadu</p>
    <p>West &amp; East Godavari, Andhra Pradesh, India</p>
    <p>Deployment by Byrraju Foundation</p>
    <p>One link used in our tests</p>
  </div>
  <div class="page">
    <p>Sep 2006 Kameswari Chebrolu, Bhaskaran Raman, Sayandeep Sen, Indian Institute of Technology, Kanpur 4</p>
    <p>Long Distance Link Setup</p>
    <p>Antennae (high-gain directional)</p>
    <p>Antenna tower (or tall building)</p>
    <p>Wireless link RF cable</p>
    <p>WiFi Radio</p>
    <p>c c</p>
    <p>WiFi Radio</p>
  </div>
  <div class="page">
    <p>Sep 2006 Kameswari Chebrolu, Bhaskaran Raman, Sayandeep Sen, Indian Institute of Technology, Kanpur 5</p>
    <p>Questions</p>
    <p>What is the effect of received signal strength on packet error rate?</p>
    <p>What is the effect of packet size and transmit rate on packet error rate?</p>
    <p>Is there time correlation of packet errors? If so, at what granularity?</p>
  </div>
  <div class="page">
    <p>Sep 2006 Kameswari Chebrolu, Bhaskaran Raman, Sayandeep Sen, Indian Institute of Technology, Kanpur 6</p>
    <p>Questions</p>
    <p>What is the maximum achievable application throughput?</p>
    <p>What is the effect of interference?  What is the effect of weather on link</p>
    <p>performance?  What is the effect of MAC ACK timeouts on</p>
    <p>application throughput?</p>
  </div>
  <div class="page">
    <p>Sep 2006 Kameswari Chebrolu, Bhaskaran Raman, Sayandeep Sen, Indian Institute of Technology, Kanpur 7</p>
    <p>Outline  Motivation &amp; Background  Methodology  Packet error studies  Throughput measurements  Interference Analysis  Some Lessons  Conclusion  Questions</p>
  </div>
  <div class="page">
    <p>Sep 2006 Kameswari Chebrolu, Bhaskaran Raman, Sayandeep Sen, Indian Institute of Technology, Kanpur 8</p>
    <p>Hardware Setup  Senao 2511CD plus ext2 PCMCIA cards</p>
    <p>Soekris platform with pebble Linux  Net 4521 and Net 4501</p>
    <p>12V battery with a capacity of 32AH</p>
    <p>with a voltage stabilizer circuit</p>
  </div>
  <div class="page">
    <p>Sep 2006 Kameswari Chebrolu, Bhaskaran Raman, Sayandeep Sen, Indian Institute of Technology, Kanpur 9</p>
    <p>Software Setup</p>
    <p>Open source HostAP driver  Export per packet information via /proc system</p>
    <p>PHY: Signal strength, noise level, data rate  MAC: CRC check status, MAC sequence, etc.</p>
    <p>Enable/disable MAC level Ack  Driver exports an interface for this</p>
  </div>
  <div class="page">
    <p>Sep 2006 Kameswari Chebrolu, Bhaskaran Raman, Sayandeep Sen, Indian Institute of Technology, Kanpur 10</p>
    <p>Digital Gangetic Plains</p>
    <p>River GangesIITK</p>
    <p>Mandhana</p>
    <p>Jun  02</p>
    <p>Safipur Sep  02</p>
    <p>End to end distance ~80 Km</p>
    <p>Mar  03 Rajajipuram/ Lucknow</p>
    <p>Lodhar</p>
    <p>Apr  02</p>
    <p>Dhaura</p>
    <p>Aug  04</p>
    <p>Nov  02</p>
    <p>Jun  02</p>
    <p>Not to scale</p>
    <p>Land-line access point (close to high-population</p>
    <p>density area)</p>
    <p>Point-to-Point 802.11 link</p>
    <p>Bithoor</p>
    <p>Sawayajpur Dec  03</p>
    <p>Rasoolabad Mar  04</p>
    <p>Mohanpur</p>
    <p>Sep  04 3.5 Km</p>
    <p>Dec  02 Sarauhan</p>
    <p>Antennae at Mandhana</p>
  </div>
  <div class="page">
    <p>Sep 2006 Kameswari Chebrolu, Bhaskaran Raman, Sayandeep Sen, Indian Institute of Technology, Kanpur 11</p>
    <p>The Ashwini Network</p>
    <p>Bhimavaram</p>
    <p>Korukollu</p>
    <p>Kesavaram</p>
    <p>Pippara</p>
    <p>Kasipadu</p>
    <p>Alampuram</p>
    <p>Lankala KoderuJuvvalapalem</p>
    <p>Cherukumilli</p>
    <p>IBhimavaram</p>
    <p>Point-to-Point 802.11 Links with Directional Antennas</p>
    <p>Land-line node</p>
    <p>Point-to-Multi-Point 802.11 Links using Sector Antennas</p>
    <p>Tadinada</p>
    <p>Jalli Kakinada</p>
    <p>Ardhavaram</p>
    <p>Tetali</p>
    <p>Jinnuru</p>
    <p>Polamuru</p>
    <p>Channel 2</p>
    <p>Channel 10</p>
    <p>Channel 6</p>
  </div>
  <div class="page">
    <p>Sep 2006 Kameswari Chebrolu, Bhaskaran Raman, Sayandeep Sen, Indian Institute of Technology, Kanpur 12</p>
    <p>Sites Used</p>
    <p>Site Name Notation Mains power supply</p>
    <p>IITK A 40m building Available mostly</p>
    <p>Mohanpur B 17m tower Not available</p>
    <p>Mandhana C 40m tower Available at times</p>
    <p>MS3 D 30m tower</p>
    <p>Bithoor E Available at times</p>
    <p>Banthar F 25m tower Available at times</p>
    <p>Sarauhan G 40m tower Not available</p>
    <p>Bhimavaram P 45m tower Available mostly</p>
    <p>Kesavaram Q 30m tower Available at times Battery + inverter</p>
    <p>Tower arrangement</p>
    <p>Alternate power supply</p>
    <p>Unreliable, huge voltage fluctuations</p>
    <p>solar panel</p>
  </div>
  <div class="page">
    <p>Sep 2006 Kameswari Chebrolu, Bhaskaran Raman, Sayandeep Sen, Indian Institute of Technology, Kanpur 13</p>
    <p>Long Distance Links Used</p>
    <p>Link Length (km) Antennae RF cables Remarks AB 3.5 ParGParG 50ft, 100ft  AC 5 SecParG 50ft, 150ft</p>
    <p>CD 1 ParGCan 125ft, 50ft Ant at 30m at C, 15m at D</p>
    <p>ED 7.5 ParGParG 125ft, 50ft  AF 23 ParGParG 50ft, 100ft  AG 37 ParGParG 50ft, 150ft  AE 12 ParGParG 50ft, 150ft</p>
    <p>PQ 16 SecParG 1ft, 1ft PoweroverEthernet for</p>
    <p>radio atop the tower</p>
  </div>
  <div class="page">
    <p>Sep 2006 Kameswari Chebrolu, Bhaskaran Raman, Sayandeep Sen, Indian Institute of Technology, Kanpur 14</p>
    <p>Measurement Methodology  Metrics</p>
    <p>Packet error rate  Signal Strength  Application throughput (UDP and TCP)</p>
    <p>Parameter space  Transmit power (4 settings)  Transmit rate (4 settings)  Packet size (3 settings) and inter-arrival (4 settings)  Broadcast vs unicast  Channel of operation: fixed for each link</p>
  </div>
  <div class="page">
    <p>Sep 2006 Kameswari Chebrolu, Bhaskaran Raman, Sayandeep Sen, Indian Institute of Technology, Kanpur 15</p>
    <p>Experiment Setup  UDP experiment</p>
    <p>Choose a specific value of transmit power, rate and packet size</p>
    <p>Inter arrival: Saturation, 2ms, 100ms, 500ms  MAC ACKs are off (broadcast)  Receiver in monitor mode</p>
    <p>TCP experiment  Choose a specific value of transmit power and rate  Data transfer for 25 sec  With and without MAC ACKs</p>
  </div>
  <div class="page">
    <p>Sep 2006 Kameswari Chebrolu, Bhaskaran Raman, Sayandeep Sen, Indian Institute of Technology, Kanpur 16</p>
    <p>Data Collection Procedure</p>
    <p>Two ends of link form link with default settings  One end determines which experiment to run</p>
    <p>and communicates the same to other end  Two ends change settings, perform the</p>
    <p>experiment and record results  Two ends store data collected during</p>
    <p>experiment via LAN or flash memory</p>
  </div>
  <div class="page">
    <p>Sep 2006 Kameswari Chebrolu, Bhaskaran Raman, Sayandeep Sen, Indian Institute of Technology, Kanpur 17</p>
    <p>Outline  Motivation &amp; Background  Methodology  Packet error studies  Throughput measurements  Interference Analysis  Some Lessons  Conclusion  Questions</p>
  </div>
  <div class="page">
    <p>Sep 2006 Kameswari Chebrolu, Bhaskaran Raman, Sayandeep Sen, Indian Institute of Technology, Kanpur 18</p>
    <p>Packet Error Rate Analysis</p>
  </div>
  <div class="page">
    <p>Sep 2006 Kameswari Chebrolu, Bhaskaran Raman, Sayandeep Sen, Indian Institute of Technology, Kanpur 19</p>
    <p>Error Rate Variation on</p>
    <p>Link A-C</p>
  </div>
  <div class="page">
    <p>Sep 2006 Kameswari Chebrolu, Bhaskaran Raman, Sayandeep Sen, Indian Institute of Technology, Kanpur 20</p>
    <p>Hardware Quirk</p>
  </div>
  <div class="page">
    <p>Sep 2006 Kameswari Chebrolu, Bhaskaran Raman, Sayandeep Sen, Indian Institute of Technology, Kanpur 21</p>
    <p>Time Correlation of Errors</p>
    <p>Allan Deviation  Given a series of values</p>
    <p>i=2</p>
    <p>N</p>
    <p>xi  xi  1 2</p>
  </div>
  <div class="page">
    <p>Sep 2006 Kameswari Chebrolu, Bhaskaran Raman, Sayandeep Sen, Indian Institute of Technology, Kanpur 22</p>
    <p>Time Correlation of Errors</p>
  </div>
  <div class="page">
    <p>Sep 2006 Kameswari Chebrolu, Bhaskaran Raman, Sayandeep Sen, Indian Institute of Technology, Kanpur 23</p>
    <p>A Few Other Results</p>
    <p>Error rate is independent of time  At high SNR, error rate variation is very small</p>
    <p>and under 0.1%  At low SNR, error rate variation is high:</p>
    <p>Steep region of Error-Rate vs. SNR curve  1.5% to 45%</p>
    <p>Weather does not seem to effect link performance!</p>
  </div>
  <div class="page">
    <p>Sep 2006 Kameswari Chebrolu, Bhaskaran Raman, Sayandeep Sen, Indian Institute of Technology, Kanpur 24</p>
    <p>Implications</p>
    <p>Link abstraction holds  Links can be planned such that error rates are low</p>
    <p>No sophisticated routing is required  Transmit rate adaptation based on SNR</p>
  </div>
  <div class="page">
    <p>Sep 2006 Kameswari Chebrolu, Bhaskaran Raman, Sayandeep Sen, Indian Institute of Technology, Kanpur 25 Theoretical Limit: 0.92(1Mbps), 1.79(2Mbps), 4.42(5.5Mbps), 7.63(11Mbps)</p>
    <p>UDP Throughput</p>
  </div>
  <div class="page">
    <p>Sep 2006 Kameswari Chebrolu, Bhaskaran Raman, Sayandeep Sen, Indian Institute of Technology, Kanpur 26</p>
    <p>Bottlenecks &amp; Implications</p>
    <p>Neither HostAP driver nor PCMCIA card support DMA</p>
    <p>Net4521 has a 133MHz processor  11Mbps, 100 byte packets</p>
    <p>Achieved: 0.77Mbps, Theoretical: 1.53Mbps  Rate of interrupt to clear buffer is small</p>
    <p>There are system bottlenecks other than wireless interface  VOIP calculations</p>
  </div>
  <div class="page">
    <p>Sep 2006 Kameswari Chebrolu, Bhaskaran Raman, Sayandeep Sen, Indian Institute of Technology, Kanpur 27</p>
    <p>TCP Throughput  Effect of ACK timeout on 37 km link</p>
    <p>MAC unicast: 0.5Mbps, MAC broadcast: 1.9Mbps  TCP evaluation</p>
    <p>Inter-packet gap was 10-20ms  Exponential rise in contention window  Collision between TCP Data and ACK</p>
    <p>Hardware quirk:  MAC receiving same sequence number packets</p>
    <p>Implications  Need selective acknowledgment mechanism</p>
  </div>
  <div class="page">
    <p>Sep 2006 Kameswari Chebrolu, Bhaskaran Raman, Sayandeep Sen, Indian Institute of Technology, Kanpur 28</p>
    <p>Outline  Motivation &amp; Background  Methodology  Packet error studies  Throughput measurements  Interference Analysis  Some Lessons  Conclusion  Questions</p>
  </div>
  <div class="page">
    <p>Sep 2006 Kameswari Chebrolu, Bhaskaran Raman, Sayandeep Sen, Indian Institute of Technology, Kanpur 29</p>
    <p>External Interference</p>
  </div>
  <div class="page">
    <p>Sep 2006 Kameswari Chebrolu, Bhaskaran Raman, Sayandeep Sen, Indian Institute of Technology, Kanpur 30</p>
    <p>Inter Link Interference: Setup</p>
    <p>Parabolic Grid Antennae</p>
  </div>
  <div class="page">
    <p>Sep 2006 Kameswari Chebrolu, Bhaskaran Raman, Sayandeep Sen, Indian Institute of Technology, Kanpur 31</p>
    <p>Setup Details  Transmitter</p>
    <p>Sends beacons every 100ms, txpower = 20dbm  Operates in Channel 1</p>
    <p>Sniffer  Listens in monitor mode, scans channel 1-11</p>
    <p>Four configurations  Both transmitter and sniffer are up the tower (20m)  Transmitter is up, Sniffer is down  Both transmitter and sniffer are down, 1m apart  Both transmitter and sniffer are down, 5m apart</p>
  </div>
  <div class="page">
    <p>Sep 2006 Kameswari Chebrolu, Bhaskaran Raman, Sayandeep Sen, Indian Institute of Technology, Kanpur 32</p>
    <p>Inter-Link Interference</p>
  </div>
  <div class="page">
    <p>Sep 2006 Kameswari Chebrolu, Bhaskaran Raman, Sayandeep Sen, Indian Institute of Technology, Kanpur 33</p>
    <p>Implications  External interference can significantly degrade</p>
    <p>application performance  Issue of RF pollution needs immediate attention</p>
    <p>Technical: Mechanisms to detect and diagnose causes of interference</p>
    <p>Non-Technical: Some legal or semi-legal mechanism to control interference across deployments</p>
    <p>Need to be aware of inter-link interference  Use of RF cables recommended</p>
  </div>
  <div class="page">
    <p>Sep 2006 Kameswari Chebrolu, Bhaskaran Raman, Sayandeep Sen, Indian Institute of Technology, Kanpur 34</p>
    <p>Outline  Motivation &amp; Background  Methodology  Packet error studies  Throughput measurements  Interference Analysis  Some Lessons  Conclusion  Questions</p>
  </div>
  <div class="page">
    <p>Sep 2006 Kameswari Chebrolu, Bhaskaran Raman, Sayandeep Sen, Indian Institute of Technology, Kanpur 35</p>
    <p>Some Lessons Learnt the Hard Way</p>
    <p>Tricky txpower/channel settings  Must be set after setting the mode</p>
    <p>Use hardware register directly for txpower  Cannot force association!  Check for possible interference at remote site</p>
    <p>Can affect log size  Beware of kernel UDP buffer  Account for RF leakage during calibration</p>
  </div>
  <div class="page">
    <p>Sep 2006 Kameswari Chebrolu, Bhaskaran Raman, Sayandeep Sen, Indian Institute of Technology, Kanpur 36</p>
    <p>Conclusion  Long distance links can be planned well for</p>
    <p>predictable performance  Interference can cause drastic reduction in</p>
    <p>performance: planning necessary  Beware of bottlenecks other than wireless</p>
    <p>interface  Future directions:</p>
    <p>Network planning  Detecting interference sources, network mgmt.  Link perf. in 200-3000m distances in village settings</p>
  </div>
  <div class="page">
    <p>Sep 2006 Kameswari Chebrolu, Bhaskaran Raman, Sayandeep Sen, Indian Institute of Technology, Kanpur 37</p>
    <p>Thanks You!</p>
    <p>Questions?</p>
  </div>
</Presentation>

<?xml version="1.0" ?>
<Presentation>
  <div class="page">
    <p>Toward Eidetic Distributed File</p>
    <p>Systems</p>
    <p>Xianzheng Dou, Jason Flinn, Peter M. Chen</p>
  </div>
  <div class="page">
    <p>Rich file system features</p>
    <p>Modern file systems store more than just data</p>
    <p>Versioning: retention of past state</p>
    <p>Provenance-aware: connections between file data</p>
    <p>Problem:</p>
    <p>High costs for providing these rich features</p>
    <p>Xianzheng Dou 1</p>
  </div>
  <div class="page">
    <p>Frequency of versioning</p>
    <p>Versioning FS tradeoffs</p>
    <p>Less frequent</p>
    <p>Lower storage cost</p>
    <p>More frequent</p>
    <p>Higher storage cost</p>
  </div>
  <div class="page">
    <p>Frequency of versioning</p>
    <p>Versioning FS tradeoffs</p>
    <p>Less frequent</p>
    <p>Lower storage cost</p>
    <p>More frequent</p>
    <p>Higher storage cost</p>
    <p>Ext4</p>
  </div>
  <div class="page">
    <p>Frequency of versioning</p>
    <p>Versioning FS tradeoffs</p>
    <p>Less frequent</p>
    <p>Lower storage cost</p>
    <p>More frequent</p>
    <p>Higher storage cost</p>
    <p>Versionfs WAFL</p>
  </div>
  <div class="page">
    <p>Frequency of versioning</p>
    <p>Versioning FS tradeoffs</p>
    <p>Less frequent</p>
    <p>Lower storage cost</p>
    <p>More frequent</p>
    <p>Higher storage cost</p>
    <p>Elephant FS</p>
  </div>
  <div class="page">
    <p>Frequency of versioning</p>
    <p>Versioning FS tradeoffs</p>
    <p>Less frequent</p>
    <p>Lower storage cost</p>
    <p>More frequent</p>
    <p>Higher storage cost</p>
    <p>CVFS Wayback</p>
  </div>
  <div class="page">
    <p>Frequency of versioning</p>
    <p>Versioning FS tradeoffs</p>
    <p>Less frequent</p>
    <p>Lower storage cost</p>
    <p>More frequent</p>
    <p>Higher storage cost</p>
    <p>Any past user-level state?</p>
  </div>
  <div class="page">
    <p>Frequency of versioning</p>
    <p>Versioning FS tradeoffs</p>
    <p>Less frequent</p>
    <p>Lower storage cost</p>
    <p>More frequent</p>
    <p>Higher storage cost</p>
    <p>Any past user-level state? Any past file system state and any transient state</p>
  </div>
  <div class="page">
    <p>Details of connection information</p>
    <p>Provenance FS tradeoffs</p>
    <p>Lower granulartiy</p>
    <p>Lower storage cost</p>
    <p>Higher granularity</p>
    <p>Higher storage cost</p>
  </div>
  <div class="page">
    <p>Details of connection information</p>
    <p>Provenance FS tradeoffs</p>
    <p>Lower granulartiy</p>
    <p>Lower storage cost</p>
    <p>Higher granularity</p>
    <p>Higher storage cost</p>
    <p>Ext4</p>
  </div>
  <div class="page">
    <p>Details of connection information</p>
    <p>Provenance FS tradeoffs</p>
    <p>Lower granulartiy</p>
    <p>Lower storage cost</p>
    <p>Higher granularity</p>
    <p>Higher storage cost</p>
    <p>Connections</p>
  </div>
  <div class="page">
    <p>Details of connection information</p>
    <p>Provenance FS tradeoffs</p>
    <p>Lower granulartiy</p>
    <p>Lower storage cost</p>
    <p>Higher granularity</p>
    <p>Higher storage cost</p>
    <p>PASS</p>
  </div>
  <div class="page">
    <p>Details of connection information</p>
    <p>Provenance FS tradeoffs</p>
    <p>Lower granulartiy</p>
    <p>Lower storage cost</p>
    <p>Higher granularity</p>
    <p>Higher storage cost</p>
    <p>Complete byte-level provenance?</p>
  </div>
  <div class="page">
    <p>Background: eidetic systems[OSDI14]</p>
    <p>Recall any past user-level state</p>
    <p>By pervasive deterministic record and replay</p>
    <p>Xianzheng Dou 4</p>
    <p>Latency Metric</p>
    <p>Mail</p>
    <p>Request</p>
    <p>debug_peer_list</p>
    <p>mydomain.com queue_directory</p>
    <p>How to use X-ray</p>
    <p>List of root causes:</p>
    <p>Scope</p>
    <p>PLAY RECORD</p>
    <p>Michael Chow 12</p>
    <p>Log</p>
    <p>Latency Metric</p>
    <p>Mail</p>
    <p>Request</p>
    <p>debug_peer_list</p>
    <p>mydomain.com queue_directory</p>
    <p>How to use X-ray</p>
    <p>List of root causes:</p>
    <p>Scope</p>
    <p>PLAY RECORD</p>
    <p>Michael Chow 12</p>
    <p>Log Replay Record Logs of</p>
    <p>non-deterministic events</p>
  </div>
  <div class="page">
    <p>Background: eidetic systems[OSDI14]</p>
    <p>Recall any past user-level state</p>
    <p>By pervasive deterministic record and replay</p>
    <p>Provenance at the byte granularity</p>
    <p>Intra-process lineage: dynamic information tracking</p>
    <p>Inter-process lineage: data flow dependency graph Xianzheng Dou 4</p>
    <p>Latency Metric</p>
    <p>Mail</p>
    <p>Request</p>
    <p>debug_peer_list</p>
    <p>mydomain.com queue_directory</p>
    <p>How to use X-ray</p>
    <p>List of root causes:</p>
    <p>Scope</p>
    <p>PLAY RECORD</p>
    <p>Michael Chow 12</p>
    <p>Log</p>
    <p>Latency Metric</p>
    <p>Mail</p>
    <p>Request</p>
    <p>debug_peer_list</p>
    <p>mydomain.com queue_directory</p>
    <p>How to use X-ray</p>
    <p>List of root causes:</p>
    <p>Scope</p>
    <p>PLAY RECORD</p>
    <p>Michael Chow 12</p>
    <p>Log Replay Record Logs of</p>
    <p>non-deterministic events</p>
  </div>
  <div class="page">
    <p>A clean-sheet design of FS</p>
    <p>Eidetic systems prototype</p>
    <p>Graft eidetic support onto an existing FS</p>
    <p>Consider only local storage</p>
    <p>An eidetic distributed file system</p>
    <p>A small number of personal devices + cloud servers</p>
    <p>New design choices</p>
    <p>Fundamental unit of persistent storage</p>
    <p>File transfer</p>
    <p>Xianzheng Dou 5</p>
  </div>
  <div class="page">
    <p>Traditional distributed FS</p>
    <p>Xianzheng Dou 6</p>
  </div>
  <div class="page">
    <p>Traditional distributed FS</p>
    <p>Xianzheng Dou 6</p>
  </div>
  <div class="page">
    <p>Traditional distributed FS</p>
    <p>Xianzheng Dou 6</p>
  </div>
  <div class="page">
    <p>Traditional distributed FS</p>
    <p>Xianzheng Dou 6</p>
  </div>
  <div class="page">
    <p>Eidetic distributed file systems</p>
    <p>Xianzheng Dou 7</p>
  </div>
  <div class="page">
    <p>Eidetic distributed file systems</p>
    <p>Xianzheng Dou 7</p>
  </div>
  <div class="page">
    <p>Fundamental unit</p>
    <p>What is the fundamental unit of persistent storage?</p>
    <p>Xianzheng Dou 8</p>
  </div>
  <div class="page">
    <p>Fundamental unit</p>
    <p>What is the fundamental unit of persistent storage?</p>
    <p>Xianzheng Dou 8</p>
  </div>
  <div class="page">
    <p>Fundamental unit</p>
    <p>What is the fundamental unit of persistent storage?</p>
    <p>Xianzheng Dou 8</p>
    <p>Replay</p>
  </div>
  <div class="page">
    <p>Fundamental unit</p>
    <p>What is the fundamental unit of persistent storage?</p>
    <p>Xianzheng Dou 9</p>
  </div>
  <div class="page">
    <p>Fundamental unit</p>
    <p>What is the fundamental unit of persistent storage?</p>
    <p>Xianzheng Dou 9</p>
  </div>
  <div class="page">
    <p>Fundamental unit</p>
    <p>What is the fundamental unit of persistent storage?</p>
    <p>Xianzheng Dou 9</p>
    <p>Fundamental unit: Logs of non-determinism</p>
    <p>Files are only considered as caches</p>
  </div>
  <div class="page">
    <p>File persistency</p>
    <p>When is a file considered persistent on the server?</p>
    <p>Xianzheng Dou 10</p>
  </div>
  <div class="page">
    <p>File persistency</p>
    <p>When is a file considered persistent on the server?</p>
    <p>Xianzheng Dou 10</p>
    <p>As long as logs generating the data are persistent</p>
  </div>
  <div class="page">
    <p>File persistency</p>
    <p>When is a file considered persistent on the server?</p>
    <p>Xianzheng Dou 10</p>
  </div>
  <div class="page">
    <p>Updating server cache</p>
    <p>Should the server cache the file version?</p>
    <p>Xianzheng Dou 11</p>
    <p>?</p>
  </div>
  <div class="page">
    <p>Updating server cache</p>
    <p>Should the server cache the file version?</p>
    <p>Xianzheng Dou 11</p>
    <p>? Probability of future access</p>
    <p>Costs for regeneration</p>
  </div>
  <div class="page">
    <p>File transfer methods</p>
    <p>How are files transferred to the server?</p>
    <p>Xianzheng Dou 12</p>
  </div>
  <div class="page">
    <p>File transfer methods</p>
    <p>How are files transferred to the server?</p>
    <p>Xianzheng Dou 12</p>
  </div>
  <div class="page">
    <p>File transfer methods</p>
    <p>How are files transferred to the server?</p>
    <p>Xianzheng Dou 13</p>
  </div>
  <div class="page">
    <p>File transfer methods</p>
    <p>How are files transferred to the server?</p>
    <p>Xianzheng Dou 13</p>
  </div>
  <div class="page">
    <p>File transfer methods</p>
    <p>How are files transferred to the server?</p>
    <p>Xianzheng Dou 13</p>
    <p>Compare computation costs with communication costs</p>
    <p>- by value (file data)</p>
    <p>- or by replay</p>
  </div>
  <div class="page">
    <p>Read path</p>
    <p>How should a client read a particular version?</p>
    <p>Xianzheng Dou 14</p>
  </div>
  <div class="page">
    <p>Read path</p>
    <p>How should a client read a particular version?</p>
    <p>Xianzheng Dou 14</p>
  </div>
  <div class="page">
    <p>Available transfer methods</p>
    <p>How should a client read a particular version?</p>
    <p>Xianzheng Dou 15</p>
  </div>
  <div class="page">
    <p>Available transfer methods</p>
    <p>How should a client read a particular version?</p>
    <p>Xianzheng Dou 15</p>
  </div>
  <div class="page">
    <p>Available transfer methods</p>
    <p>How should a client read a particular version?</p>
    <p>Xianzheng Dou 15</p>
  </div>
  <div class="page">
    <p>Available transfer methods</p>
    <p>How should a client read a particular version?</p>
    <p>Xianzheng Dou 16</p>
  </div>
  <div class="page">
    <p>Available transfer methods</p>
    <p>How should a client read a particular version?</p>
    <p>Xianzheng Dou 16</p>
  </div>
  <div class="page">
    <p>Available transfer methods</p>
    <p>How should a client read a particular version?</p>
    <p>Xianzheng Dou 16</p>
  </div>
  <div class="page">
    <p>Available transfer methods</p>
    <p>How should a client read a particular version?</p>
    <p>Xianzheng Dou 17</p>
  </div>
  <div class="page">
    <p>Available transfer methods</p>
    <p>How should a client read a particular version?</p>
    <p>Xianzheng Dou 17</p>
    <p>By value</p>
    <p>By replay on the client</p>
    <p>By replay on the server</p>
    <p>From peers</p>
  </div>
  <div class="page">
    <p>Choosing the right method</p>
    <p>How should a client read a particular version?</p>
    <p>Server has the most complete knowledge</p>
    <p>Metrics</p>
    <p>User waiting time</p>
    <p>Monetary cost</p>
    <p>Client energy consumption</p>
    <p>Xianzheng Dou 18</p>
  </div>
  <div class="page">
    <p>Feasibility</p>
    <p>Eidetic system overheads</p>
    <p>Record 4 years of workstation data on a 4TB hard disk</p>
    <p>Under 8% performance overhead on most benchmarks</p>
    <p>Applications (log size vs. diff size)</p>
    <p>Logs are smaller</p>
    <p>image/audio editing, latex, make, slides editing</p>
    <p>Diffs are smaller: text editing</p>
    <p>File sharing</p>
    <p>Most files are not shared</p>
    <p>Xianzheng Dou 19</p>
  </div>
  <div class="page">
    <p>Conclusions</p>
    <p>A new point in the design space of</p>
    <p>Versioning file systems</p>
    <p>Provenance-aware file systems</p>
    <p>Hypothesis</p>
    <p>More effective in versioning and provenance</p>
    <p>Achieving reasonable overheads</p>
    <p>Under implementation</p>
    <p>Xianzheng Dou 20</p>
  </div>
  <div class="page">
    <p>Thank you!</p>
    <p>Xianzheng Dou 21</p>
  </div>
</Presentation>

<?xml version="1.0" ?>
<Presentation>
  <div class="page">
    <p>Area Reclamation Strategies Area Reclamation Strategies and Metrics for SRAM-Based and Metrics for SRAM-Based</p>
    <p>Reconfigurable DevicesReconfigurable Devices</p>
    <p>Abdel EjniouiAbdel Ejnioui Ronald F. DeMaraRonald F. DeMara</p>
    <p>Department of Electrical and Computer Department of Electrical and Computer EngineeringEngineering</p>
    <p>University of Central FloridaUniversity of Central Florida</p>
  </div>
  <div class="page">
    <p>OutlineOutline</p>
    <p>Reconfigurable Computing Systems (RCSs)Reconfigurable Computing Systems (RCSs)</p>
    <p>FPGA Defragmentation in RCSsFPGA Defragmentation in RCSs</p>
    <p>Performance Issues in DefragmentationPerformance Issues in Defragmentation</p>
    <p>Experimental ResearchExperimental Research</p>
    <p>ConclusionConclusion</p>
  </div>
  <div class="page">
    <p>Reconfigurable Computing Reconfigurable Computing SystemsSystems</p>
    <p>(1)(2)(3)</p>
    <p>(4)</p>
  </div>
  <div class="page">
    <p>Online Dynamic ReconfigurationOnline Dynamic Reconfiguration</p>
    <p>Mission Time</p>
    <p>Phase 1 Phase 2 Phase 3</p>
    <p>MMSI Remote Terminal  Utility Processing</p>
    <p>Elements</p>
    <p>Control Datalink  Image Datalink  Utility Processing</p>
    <p>Elements</p>
    <p>Control Datalink  Matched Filtering  Utility Processing</p>
    <p>Elements</p>
    <p>FPGA Slices</p>
    <p>FPGA Memory Blocks</p>
    <p>External Memory</p>
    <p>R e c o n f i g u r e</p>
    <p>R e c o n f i g u r e</p>
    <p>Resource Requirements</p>
    <p>Weapon Application</p>
    <p>Captive Carry Flight To Target Area Loitering In Target Area</p>
    <p>R. L. Riley, D. A. Perkins, Gateware Munition Interface Processor (GMIP), Military Applications of Programmable Logic Devices, 2004</p>
  </div>
  <div class="page">
    <p>OutlineOutline</p>
    <p>Reconfigurable Computing Systems (RCSs)Reconfigurable Computing Systems (RCSs)</p>
    <p>FPGA Defragmentation in RCSsFPGA Defragmentation in RCSs</p>
    <p>Performance Issues in DefragmentationPerformance Issues in Defragmentation</p>
    <p>Experimental ResearchExperimental Research</p>
    <p>ConclusionConclusion</p>
  </div>
  <div class="page">
    <p>FPGA Defragmentation in RCSsFPGA Defragmentation in RCSs</p>
  </div>
  <div class="page">
    <p>Placement ExamplePlacement Example</p>
  </div>
  <div class="page">
    <p>Defragmentation-Driven Defragmentation-Driven PlacementPlacement</p>
  </div>
  <div class="page">
    <p>Performance SustainmentPerformance Sustainment</p>
    <p>ConstraintsConstraints The reconfigurable fabric will The reconfigurable fabric will eventually reach an advanced eventually reach an advanced fragmented state where task fragmented state where task placement fails.placement fails.</p>
    <p>RequirementsRequirements Tasks need to be compacted as fast Tasks need to be compacted as fast as possible to minimize the as possible to minimize the interruption of the application interruption of the application progress.progress.</p>
    <p>ObjectivesObjectives To bring application performance To bring application performance back to its level before back to its level before defragmentation started. defragmentation started.</p>
  </div>
  <div class="page">
    <p>OutlineOutline</p>
    <p>Reconfigurable Computing Systems (RCSs)Reconfigurable Computing Systems (RCSs)</p>
    <p>FPGA Defragmentation in RCSsFPGA Defragmentation in RCSs</p>
    <p>Performance Issues in DefragmentationPerformance Issues in Defragmentation</p>
    <p>Experimental ResearchExperimental Research</p>
    <p>ConclusionConclusion</p>
  </div>
  <div class="page">
    <p>Performance Issues in Performance Issues in DefragmentationDefragmentation</p>
    <p>QuantificationQuantification: How can defragmentation be accurately quantified and : How can defragmentation be accurately quantified and measured? measured?</p>
    <p>Temporal ManagementTemporal Management: What is the best time to perform : What is the best time to perform defragmentation? defragmentation?</p>
    <p>Spatial ManagementSpatial Management: Where in the fabric of the FPGA can : Where in the fabric of the FPGA can defragmentation be performed? defragmentation be performed?</p>
    <p>ResolutionResolution: How much of the fabric need to be defragmented at a time?: How much of the fabric need to be defragmented at a time?</p>
    <p>MechanismMechanism: What is the best way to perform defragmentation?: What is the best way to perform defragmentation?</p>
    <p>System ArchitectureSystem Architecture: What is the best place to incorporate : What is the best place to incorporate defragmentation in system architecture?defragmentation in system architecture?</p>
  </div>
  <div class="page">
    <p>Quantification of Quantification of DefragmentationDefragmentation</p>
    <p>A targeted fragmentation strategy needs a reliable measure to A targeted fragmentation strategy needs a reliable measure to assess fragmentation severity in the reconfigurable fabric of assess fragmentation severity in the reconfigurable fabric of the FPGA chip.the FPGA chip.</p>
    <p>For instance, storage systems, such as primary memory and For instance, storage systems, such as primary memory and disk drives, have been using various fragmentation metrics to disk drives, have been using various fragmentation metrics to assess the state of fragmentation of their hardware resources. assess the state of fragmentation of their hardware resources.</p>
    <p>One can extend this approach to using a fragmentation metric One can extend this approach to using a fragmentation metric as the basis to guide the defragmentation process in FPGA as the basis to guide the defragmentation process in FPGA chips. chips.</p>
    <p>In fact, an accurate fragmentation metric can help answer In fact, an accurate fragmentation metric can help answer questions (i), (ii), and (iii) listed before. questions (i), (ii), and (iii) listed before.</p>
  </div>
  <div class="page">
    <p>Quantification of DefragmentationQuantification of Defragmentation</p>
    <p>At first examination, one is At first examination, one is</p>
    <p>tempted to use the empty area tempted to use the empty area</p>
    <p>as a measure of fragmentation. as a measure of fragmentation.</p>
    <p>This approach is too simplistic This approach is too simplistic</p>
    <p>to account for the two to account for the two</p>
    <p>dimensional properties of dimensional properties of</p>
    <p>fragmentation. fragmentation.</p>
  </div>
  <div class="page">
    <p>Intricacies of QuantificationIntricacies of Quantification</p>
  </div>
  <div class="page">
    <p>Defragmentation MetricsDefragmentation Metrics</p>
    <p>In general, fragmentation metrics can be In general, fragmentation metrics can be absolute or relative. absolute or relative.</p>
    <p>Relative metrics considerRelative metrics consider the state of the the state of the reconfigurable resource reconfigurable resource in relation to the sizes of in relation to the sizes of the incoming tasks. the incoming tasks.</p>
    <p>Absolute metrics take in Absolute metrics take in consideration only the consideration only the physical state of the physical state of the reconfigurable resource.reconfigurable resource.</p>
  </div>
  <div class="page">
    <p>Fragmentation SemanticsFragmentation Semantics</p>
    <p>A metric facing a highly fragmented chip ought not to give any A metric facing a highly fragmented chip ought not to give any indication on how full or empty the chip area is. indication on how full or empty the chip area is.</p>
    <p>Instead, it should give an indication on the degree of scattering Instead, it should give an indication on the degree of scattering of the holes (or empty areas) across the chip area. of the holes (or empty areas) across the chip area.</p>
    <p>In this context, a In this context, a highly fragmentedhighly fragmented chip is a chip which chip is a chip which contains a number as large as possible of holes separated by as contains a number as large as possible of holes separated by as many occupied areas as possible. many occupied areas as possible.</p>
    <p>In this case, the degree of dispersion of the holes is at its In this case, the degree of dispersion of the holes is at its maximum (100%), and subsequently the chip is neither maximum (100%), and subsequently the chip is neither completely empty nor completely full. completely empty nor completely full.</p>
  </div>
  <div class="page">
    <p>Minimum and Maximum Minimum and Maximum FragmentationFragmentation</p>
  </div>
  <div class="page">
    <p>Fragmentation FactorFragmentation Factor</p>
    <p>Let Let aa and and AA be the area of a single empty cell be the area of a single empty cell and the entire chip respectively. and the entire chip respectively.</p>
    <p>Let Let NN x x NN be the number of cells in an FPGA be the number of cells in an FPGA chip. chip.</p>
    <p>Assume that a hole Assume that a hole ii consists of consists of kk cells. cells.</p>
    <p>This hole yields a fragmentation factorThis hole yields a fragmentation factor</p>
    <p>k</p>
    <p>j</p>
    <p>ka k f</p>
    <p>N a N a</p>
    <p>A</p>
  </div>
  <div class="page">
    <p>Fragmentation FactorFragmentation Factor</p>
    <p>NN = 5; A = 25; = 5; A = 25; HH11 = 4; = 4; HH22 = 7; = 7;</p>
    <p>k</p>
    <p>j j</p>
    <p>f</p>
    <p>a f</p>
    <p>a</p>
    <p>a a A a</p>
    <p>k</p>
    <p>j j</p>
    <p>f</p>
    <p>a f</p>
    <p>a</p>
    <p>a a A a</p>
  </div>
  <div class="page">
    <p>Fragmentation MetricFragmentation Metric Since the factor gets smaller as many cells are made empty in the Since the factor gets smaller as many cells are made empty in the chip, it is scaled to reflect maximum fragmentation by subtracting it chip, it is scaled to reflect maximum fragmentation by subtracting it from 1.from 1.</p>
    <p>F F represents the fragmentation metric of the chip at any one time.represents the fragmentation metric of the chip at any one time.</p>
    <p>Any event that modifies the state of the reconfigurable fabric of the Any event that modifies the state of the reconfigurable fabric of the chip can affect the value of chip can affect the value of FF. .</p>
    <p>Events which can do so consist of placing a task on the chip, Events which can do so consist of placing a task on the chip, purging a task from the chip, or moving a task from location to purging a task from the chip, or moving a task from location to location on the chip. location on the chip.</p>
    <p>i</p>
    <p>F f</p>
  </div>
  <div class="page">
    <p>Fragmentation MetricFragmentation Metric</p>
    <p>NN = 5; A = 25; = 5; A = 25; HH11 = 4; = 4; HH22 = 7; = 7;</p>
    <p>i</p>
    <p>i i</p>
    <p>F f</p>
    <p>F f f</p>
    <p>F</p>
    <p>f</p>
  </div>
  <div class="page">
    <p>Lowest Possible FragmentationLowest Possible Fragmentation</p>
    <p>An empty chip An empty chip represents the lowest represents the lowest possible degree of possible degree of fragmentation. fragmentation.</p>
    <p>i</p>
    <p>i</p>
    <p>F f</p>
    <p>N a F f</p>
    <p>N a</p>
  </div>
  <div class="page">
    <p>Highest Possible FragmentationHighest Possible Fragmentation</p>
    <p>A highly fragmented chip A highly fragmented chip resembles the checkerboard resembles the checkerboard layout.layout.</p>
    <p>Assume Assume NN is even, the is even, the number of holes in the chip number of holes in the chip is where each hole occupies is where each hole occupies a single cell. a single cell.</p>
    <p>N N N</p>
    <p>i N i i i</p>
    <p>a a F f</p>
    <p>A N a N</p>
  </div>
  <div class="page">
    <p>Performance Issues in Performance Issues in DefragmentationDefragmentation</p>
    <p>QuantificationQuantification: How can defragmentation be accurately quantified and : How can defragmentation be accurately quantified and measured? measured?</p>
    <p>Temporal ManagementTemporal Management: What is the best time to perform : What is the best time to perform defragmentation? defragmentation?</p>
    <p>Spatial ManagementSpatial Management: Where in the fabric of the FPGA can : Where in the fabric of the FPGA can defragmentation be performed? defragmentation be performed?</p>
    <p>ResolutionResolution: How much of the fabric need to be defragmented at a time?: How much of the fabric need to be defragmented at a time?</p>
    <p>MechanismMechanism: What is the best way to perform defragmentation?: What is the best way to perform defragmentation?</p>
    <p>System ArchitectureSystem Architecture: What is the best place to incorporate : What is the best place to incorporate defragmentation in system architecture?defragmentation in system architecture?</p>
  </div>
  <div class="page">
    <p>Task QueueTask Queue</p>
    <p>Assume that the runtime queue consists of a set of incoming Assume that the runtime queue consists of a set of incoming tasks tasks TT = { = {ttii: : ii = 1, 2, , | = 1, 2, , |TT|} where each task |} where each task ttii requires a time requires a time eeii to execute on the FPGA chip, and may wait a given time to execute on the FPGA chip, and may wait a given time wwii in in TT before being placed on the chip. before being placed on the chip.</p>
    <p>While a task While a task ttii is executing on the FPGA, it may be interrupted, is executing on the FPGA, it may be interrupted, so it can be copied (or moved) to another location if the so it can be copied (or moved) to another location if the defragmentation process decides to move it away from other defragmentation process decides to move it away from other tasks. Let tasks. Let ccii be the time it takes to copy task be the time it takes to copy task ttii..</p>
  </div>
  <div class="page">
    <p>Task QueueTask Queue</p>
    <p>Hence, one can associate with Hence, one can associate with TT a set a set EE = { = {eeii &gt; 0: &gt; 0: ii = 1, 2, , | = 1, 2, , | TT|}, a set |}, a set WW = { = {wwii  0:  0: ii = 1, 2, , | = 1, 2, , |TT|}, and a set |}, and a set CC = { = {ccii  0:  0: ii = 1, 2, , |= 1, 2, , |TT|}. |}.</p>
    <p>A task A task ttii remains in the RCS for a lifetime of remains in the RCS for a lifetime of llii = = wwii + + eeii + + cci i before it dies away.before it dies away.</p>
  </div>
  <div class="page">
    <p>Task LifetimeTask Lifetime</p>
    <p>When defragmentation is being performed, the When defragmentation is being performed, the waiting times of the queued tasks may increase. waiting times of the queued tasks may increase.</p>
    <p>This means that This means that wwii for each task will increase while for each task will increase while ccii will increase for some tasks, thus increasing the will increase for some tasks, thus increasing the average task waiting time (average task waiting time (wwavgavg) and the average task ) and the average task copying time (copying time (ccavgavg).).</p>
    <p>Effective temporal management of defragmentation Effective temporal management of defragmentation should minimize wshould minimize wavgavg, c, cavgavg, and subsequently the , and subsequently the average task lifetime average task lifetime ((llavgavg))..</p>
  </div>
  <div class="page">
    <p>Scheduling of DefragmentationScheduling of Defragmentation</p>
    <p>To this end, there are two approaches to To this end, there are two approaches to deciding when to perform defragmentation: deciding when to perform defragmentation:</p>
    <p>(1) (1) On-DemandOn-Demand defragmentationdefragmentation,, and and</p>
    <p>(2) (2) Scheduled defragmentationScheduled defragmentation. .</p>
  </div>
  <div class="page">
    <p>On-Demand vs. Scheduled On-Demand vs. Scheduled DefragmentationDefragmentation</p>
    <p>On-Demand On-Demand DefragmentationDefragmentation</p>
    <p>Scheduled Scheduled DefragmentationDefragmentation</p>
    <p>Trigger TimeTrigger Time After placement After placement failurefailure</p>
    <p>Before placement Before placement failurefailure</p>
    <p>Reconfigurable Reconfigurable Fabric StateFabric State</p>
    <p>Highly fragmentedHighly fragmented Moderately fragmentedModerately fragmented</p>
    <p>Defragmentation Defragmentation TimeTime</p>
    <p>Long Long Moderate Moderate</p>
    <p>Task lifetimesTask lifetimes High High llavgavg Low to moderate Low to moderate llavgavg</p>
  </div>
  <div class="page">
    <p>Fragmentation ThresholdFragmentation Threshold</p>
    <p>One can monitor the fragmentation metric One can monitor the fragmentation metric FF and and decide to schedule fragmentation when decide to schedule fragmentation when FF  FFthresholdthreshold. .</p>
    <p>FFthresholdthreshold can be adjusted in real-time based on can be adjusted in real-time based on llavgavg. .</p>
    <p>As As llavgavg increases, increases, FFthresholdthreshold can be increased until can be increased until llavgavg is is restored to a value that is indicative of a desired restored to a value that is indicative of a desired performance.performance.</p>
  </div>
  <div class="page">
    <p>Fragmentation Rate of ChangeFragmentation Rate of Change A rate of change in A rate of change in FF can be defined as: can be defined as:</p>
    <p>where where FF11 and and FF22 are the metric values at time are the metric values at time tt11and and tt22 respectively.respectively.</p>
    <p>It is assumed that event 1 and 2 occur at It is assumed that event 1 and 2 occur at tt11 and and tt22 respectively where respectively where tt11 &lt;&lt; tt22. .</p>
    <p>F F F</p>
    <p>t t</p>
  </div>
  <div class="page">
    <p>Average Rate of ChangeAverage Rate of Change The average rate of change in The average rate of change in FF can be informative if it is can be informative if it is monitored over a given time window.monitored over a given time window.</p>
    <p>For instance, the average of fragmentation rate of change can be For instance, the average of fragmentation rate of change can be defined asdefined as</p>
    <p>over a window of over a window of nn events. events.</p>
    <p>A reasonable window would be the time lapse between A reasonable window would be the time lapse between two successive defragmentations of the chip.two successive defragmentations of the chip.</p>
    <p>i</p>
    <p>i</p>
    <p>avg F n</p>
    <p>F</p>
  </div>
  <div class="page">
    <p>Average Rate of ChangeAverage Rate of Change</p>
    <p>As As FFavgavg increases, the fragmentation state of the increases, the fragmentation state of the fabric deteriorates rapidly which should trigger fabric deteriorates rapidly which should trigger defragmentation. defragmentation.</p>
    <p>When defragmentation is being performed, When defragmentation is being performed, FFavgavg will will decrease gradually until decrease gradually until llavgavg reaches a desired value at reaches a desired value at which point defragmentation can stop.which point defragmentation can stop.</p>
  </div>
  <div class="page">
    <p>Performance Issues in Performance Issues in DefragmentationDefragmentation</p>
    <p>Temporal ManagementTemporal Management:: What is the best time to perform What is the best time to perform defragmentation? defragmentation?</p>
    <p>Spatial ManagementSpatial Management: : Where in the fabric of the FPGA can Where in the fabric of the FPGA can defragmentation be performed? defragmentation be performed?</p>
    <p>ResolutionResolution: How much of the fabric need to be defragmented at a time?: How much of the fabric need to be defragmented at a time?</p>
    <p>MechanismMechanism: What is the best way to perform defragmentation?: What is the best way to perform defragmentation?</p>
    <p>System ArchitectureSystem Architecture: What is the best place to incorporate : What is the best place to incorporate defragmentation in system architecture?defragmentation in system architecture?</p>
    <p>QuantificationQuantification: How can defragmentation be accurately quantified and : How can defragmentation be accurately quantified and measured? measured?</p>
  </div>
  <div class="page">
    <p>Spatial Management of Spatial Management of DefragmentationDefragmentation</p>
    <p>StrategyStrategy Greedy approach based on Greedy approach based on F.F.</p>
    <p>RequirementsRequirements (1)(1) Identify candidate tasks to move.Identify candidate tasks to move.</p>
    <p>(2)(2) Select destination empty areas on the fabric. Select destination empty areas on the fabric.</p>
    <p>ProcedureProcedure (1)(1) Sort candidate tasks by decreasing values of Sort candidate tasks by decreasing values of F.F.</p>
    <p>(2)(2) From the first task to the last task in the From the first task to the last task in the sorted list, move each task until sorted list, move each task until FF decreases decreases below a specified threshold. below a specified threshold.</p>
  </div>
  <div class="page">
    <p>Performance Issues in Performance Issues in DefragmentationDefragmentation</p>
    <p>Temporal ManagementTemporal Management:: What is the best time to perform What is the best time to perform defragmentation? defragmentation?</p>
    <p>Spatial ManagementSpatial Management:: Where in the fabric of the FPGA can Where in the fabric of the FPGA can defragmentation be performed? defragmentation be performed?</p>
    <p>ResolutionResolution: : How much of the fabric need to be defragmented at a time?How much of the fabric need to be defragmented at a time?</p>
    <p>MechanismMechanism: What is the best way to perform defragmentation?: What is the best way to perform defragmentation?</p>
    <p>System ArchitectureSystem Architecture: What is the best place to incorporate : What is the best place to incorporate defragmentation in system architecture?defragmentation in system architecture?</p>
    <p>QuantificationQuantification: How can defragmentation be accurately quantified and : How can defragmentation be accurately quantified and measured? measured?</p>
  </div>
  <div class="page">
    <p>Resolution of DefragmentationResolution of Defragmentation</p>
    <p>On-Demand On-Demand DefragmentationDefragmentation</p>
    <p>Scheduled Scheduled DefragmentationDefragmentation</p>
    <p>Reconfigurable Reconfigurable Fabric StateFabric State</p>
    <p>Highly fragmentedHighly fragmented Moderately fragmentedModerately fragmented</p>
    <p>Defragmentation Defragmentation TimeTime</p>
    <p>Long Long Moderate Moderate</p>
    <p>ResolutionResolution HighHigh Low to moderateLow to moderate</p>
    <p>The amount of defragmentation needed, called The amount of defragmentation needed, called resolution of resolution of defragmentationdefragmentation, can be determined based on the strategy used to schedule , can be determined based on the strategy used to schedule defragmentation. defragmentation.</p>
  </div>
  <div class="page">
    <p>Performance Issues in Performance Issues in DefragmentationDefragmentation</p>
    <p>Temporal ManagementTemporal Management: What is the best time to perform : What is the best time to perform defragmentation? defragmentation?</p>
    <p>Spatial ManagementSpatial Management: : Where in the fabric of the FPGA can Where in the fabric of the FPGA can defragmentation be performed? defragmentation be performed?</p>
    <p>ResolutionResolution: : How much of the fabric need to be defragmented at a time?How much of the fabric need to be defragmented at a time?</p>
    <p>MechanismMechanism: : What is the best way to perform defragmentation?What is the best way to perform defragmentation?</p>
    <p>System ArchitectureSystem Architecture: What is the best place to incorporate : What is the best place to incorporate defragmentation in system architecture?defragmentation in system architecture?</p>
    <p>QuantificationQuantification: How can defragmentation be accurately quantified and : How can defragmentation be accurately quantified and measured? measured?</p>
  </div>
  <div class="page">
    <p>Mechanism of DefragmentationMechanism of Defragmentation</p>
    <p>ProcedureProcedure (1)(1) Pause the tasks. Pause the tasks.</p>
    <p>(2)(2) Relocate the task blocks.Relocate the task blocks.</p>
    <p>(3)(3) Restart the tasks.Restart the tasks.</p>
    <p>Note that tasks can be relocated without being stopped if theyNote that tasks can be relocated without being stopped if they</p>
    <p>implement combinational logic, synchronous and asynchronousimplement combinational logic, synchronous and asynchronous</p>
    <p>logic. This is not true for LUT-based shift register tasks.logic. This is not true for LUT-based shift register tasks.</p>
    <p>RelocationRelocation Space independentSpace independent</p>
    <p>Depends on the task sizeDepends on the task size</p>
    <p>ImpactImpact Relocating a large task may decrease Relocating a large task may decrease F F quickly, but quickly, but will increase significantly will increase significantly llavgavg. .</p>
  </div>
  <div class="page">
    <p>Relocation SupportRelocation Support</p>
    <p>Off-chip StorageOff-chip Storage In-chip In-chip</p>
    <p>ProcedureProcedure Download the task Download the task bitstreambitstream</p>
    <p>Copy the task blocks Copy the task blocks from one location to from one location to another within the another within the fabricfabric</p>
    <p>OperationsOperations WritesWrites Reads and writesReads and writes</p>
    <p>ImpactImpact Moderate to low Moderate to low llavgavg Long Long llavgavg</p>
  </div>
  <div class="page">
    <p>Performance Issues in Performance Issues in DefragmentationDefragmentation</p>
    <p>Temporal ManagementTemporal Management: What is the best time to perform : What is the best time to perform defragmentation? defragmentation?</p>
    <p>Spatial ManagementSpatial Management: : Where in the fabric of the FPGA can Where in the fabric of the FPGA can defragmentation be performed? defragmentation be performed?</p>
    <p>ResolutionResolution: : How much of the fabric need to be defragmented at a time?How much of the fabric need to be defragmented at a time?</p>
    <p>MechanismMechanism: : What is the best way to perform defragmentation?What is the best way to perform defragmentation?</p>
    <p>System ArchitectureSystem Architecture: What is the best place to incorporate : What is the best place to incorporate defragmentation in system architecture?defragmentation in system architecture?</p>
    <p>QuantificationQuantification: How can defragmentation be accurately quantified and : How can defragmentation be accurately quantified and measured? measured?</p>
  </div>
  <div class="page">
    <p>Place of Place of Defragmentation Defragmentation in System in System ArchitectureArchitecture</p>
  </div>
  <div class="page">
    <p>OutlineOutline</p>
    <p>Reconfigurable Computing Systems (RCSs)Reconfigurable Computing Systems (RCSs)</p>
    <p>FPGA Defragmentation in RCSsFPGA Defragmentation in RCSs</p>
    <p>Performance Issues in DefragmentationPerformance Issues in Defragmentation</p>
    <p>Experimental ResearchExperimental Research</p>
    <p>ConclusionConclusion</p>
  </div>
  <div class="page">
    <p>Experimental ResearchExperimental Research</p>
    <p>Since there are numerous parameters that can impact Since there are numerous parameters that can impact defragmentation and its capability to sustain performance, it is defragmentation and its capability to sustain performance, it is difficult to model the interactions of these parameters in a difficult to model the interactions of these parameters in a coherent mathematical model suitable for tractable analysis. coherent mathematical model suitable for tractable analysis.</p>
    <p>Because of this difficulty, simulative experimentation seems to Because of this difficulty, simulative experimentation seems to be the best approach to evaluate defragmentation within the be the best approach to evaluate defragmentation within the context of system performance. context of system performance.</p>
    <p>The runtime environment of the RCS can be viewed as a The runtime environment of the RCS can be viewed as a single-queue single-server model in which incoming tasks single-queue single-server model in which incoming tasks arrive in a given order determined by the scheduler, and move arrive in a given order determined by the scheduler, and move through the queue before being serviced by the server through the queue before being serviced by the server represented by the FPGA chip. represented by the FPGA chip.</p>
  </div>
  <div class="page">
    <p>Simulation ModelSimulation Model</p>
  </div>
  <div class="page">
    <p>Simulation ModelSimulation Model</p>
  </div>
  <div class="page">
    <p>Task StatisticsTask Statistics</p>
    <p>Examples of task statistics are:Examples of task statistics are:</p>
    <p>average waiting times of all tasks average waiting times of all tasks</p>
    <p>average waiting times of waiting tasksaverage waiting times of waiting tasks</p>
    <p>maximum waiting timemaximum waiting time</p>
    <p>average copying time of relocated tasksaverage copying time of relocated tasks</p>
    <p>maximum copying timemaximum copying time</p>
    <p>average lifetimeaverage lifetime</p>
    <p>maximum lifetimemaximum lifetime</p>
  </div>
  <div class="page">
    <p>Queue StatisticsQueue Statistics</p>
    <p>Examples of queue statistics are:Examples of queue statistics are:</p>
    <p>average queue length average queue length</p>
    <p>maximum queue length maximum queue length</p>
  </div>
  <div class="page">
    <p>Server StatisticsServer Statistics</p>
    <p>Examples of server statistics are:Examples of server statistics are:</p>
    <p>total idle time total idle time</p>
    <p>total busy timetotal busy time</p>
    <p>average utilizationaverage utilization</p>
    <p>maximum utilizationmaximum utilization</p>
    <p>average capacityaverage capacity</p>
    <p>maximum capacity maximum capacity</p>
  </div>
  <div class="page">
    <p>OutlineOutline</p>
    <p>Reconfigurable Computing Systems (RCSs)Reconfigurable Computing Systems (RCSs)</p>
    <p>FPGA Defragmentation in RCSsFPGA Defragmentation in RCSs</p>
    <p>Performance Issues in DefragmentationPerformance Issues in Defragmentation</p>
    <p>Experimental ResearchExperimental Research</p>
    <p>ConclusionConclusion</p>
  </div>
  <div class="page">
    <p>ConclusionConclusion</p>
    <p>In this presentation, the problem of defragmentation of computation In this presentation, the problem of defragmentation of computation tasks on FPGA chips embedded within RCSs has been presented. tasks on FPGA chips embedded within RCSs has been presented.</p>
    <p>The presentation proposes a methodology to study the impact of The presentation proposes a methodology to study the impact of defragmentation on performance sustainment by providing tentative defragmentation on performance sustainment by providing tentative answers to a six performance-related questions. answers to a six performance-related questions.</p>
    <p>This methodology is based on extensive simulations in which This methodology is based on extensive simulations in which various factors of defragmentation will be modulated in order to various factors of defragmentation will be modulated in order to tally their impact on a set of defined system responses. tally their impact on a set of defined system responses.</p>
    <p>A thorough understanding of this impact can help in formulating a A thorough understanding of this impact can help in formulating a broad theory in which task scheduling, placement, and broad theory in which task scheduling, placement, and defragmentation are accurately coupled with the objective of defragmentation are accurately coupled with the objective of sustaining maximum application performance. sustaining maximum application performance.</p>
  </div>
  <div class="page">
    <p>Reconfigurable Computing Reconfigurable Computing SystemsSystems</p>
    <p>Reconfigurable Computing Systems (RCSs) contain hardware that can be Reconfigurable Computing Systems (RCSs) contain hardware that can be reconfigured to implement specific functionality more suitable for specially reconfigured to implement specific functionality more suitable for specially tailored hardware than on a simple processor.tailored hardware than on a simple processor.</p>
    <p>RCSs join microprocessors and programmable hardware in order to take RCSs join microprocessors and programmable hardware in order to take advantage of the combined strengths of hardware and software. advantage of the combined strengths of hardware and software.</p>
    <p>They have been used in applications ranging from embedded systems to They have been used in applications ranging from embedded systems to high performance computing.high performance computing.</p>
    <p>Although the basic concept was proposed in the 1960s, RC has only Although the basic concept was proposed in the 1960s, RC has only recently been feasible thanks to the availability of high-density recently been feasible thanks to the availability of high-density reconfigurable devices such as FPGAs. reconfigurable devices such as FPGAs.</p>
    <p>During the past 5 years a large number of RCSs developed by the research During the past 5 years a large number of RCSs developed by the research community have demonstrated the potential for achieving high community have demonstrated the potential for achieving high performance for a range of applications.performance for a range of applications.</p>
  </div>
  <div class="page">
    <p>RCS Runtime EnvironmentRCS Runtime Environment</p>
    <p>Configuration and Control</p>
    <p>Host</p>
    <p>FPGA</p>
    <p>Users</p>
    <p>Applications</p>
    <p>Task Extraction</p>
    <p>Online Scheduling</p>
    <p>Online Placement</p>
    <p>Tasks</p>
    <p>Task 1</p>
    <p>Ta sk 2</p>
    <p>Task 3</p>
    <p>Ta sk 4</p>
    <p>Runtime Environment</p>
  </div>
  <div class="page">
    <p>Defragmentation of FPGA Chips in Defragmentation of FPGA Chips in RCSsRCSs</p>
    <p>The reconfigurable fabric of the FPGA chip can be The reconfigurable fabric of the FPGA chip can be viewed as an array of viewed as an array of cellscells..</p>
    <p>In the context of FPGAs, these cells are equivalent toIn the context of FPGAs, these cells are equivalent to</p>
    <p>configurable logic blocks.configurable logic blocks.</p>
    <p>After repetitive addition an deletion of tasks to and After repetitive addition an deletion of tasks to and from the FPGA chip, the reconfigurable fabric from the FPGA chip, the reconfigurable fabric becomes fragmented.becomes fragmented.</p>
  </div>
  <div class="page">
    <p>Absolute vs. Relative MetricsAbsolute vs. Relative Metrics</p>
    <p>While a relative metric seems more accurate, it While a relative metric seems more accurate, it remains sensitive to the size distributions of the remains sensitive to the size distributions of the incoming tasks at any one time. incoming tasks at any one time.</p>
    <p>It is possible to obtain two different fragmentation It is possible to obtain two different fragmentation measures at different times for the same physical state measures at different times for the same physical state of fragmentation of the chip as long as size of fragmentation of the chip as long as size distributions are highly variable.distributions are highly variable.</p>
    <p>If an absolute metric is adopted, this ambiguous If an absolute metric is adopted, this ambiguous situation could be avoided. situation could be avoided.</p>
  </div>
  <div class="page">
    <p>OutlineOutline</p>
    <p>Reconfigurable Computing Systems (RCSs)Reconfigurable Computing Systems (RCSs)</p>
    <p>FPGA Defragmentation in RCSsFPGA Defragmentation in RCSs</p>
    <p>Performance Issues in DefragmentationPerformance Issues in Defragmentation</p>
    <p>Problem FormulationProblem Formulation</p>
    <p>Experimental ResearchExperimental Research</p>
    <p>ConclusionConclusion</p>
  </div>
  <div class="page">
    <p>Problem FormulationProblem Formulation</p>
    <p>Let Let T T be the set of placed tasks on the FPGA chip, at any given moment, be the set of placed tasks on the FPGA chip, at any given moment, TT = { = {ttii: : ii = 1, 2, , | = 1, 2, , |TT|}.|}.</p>
    <p>Associated with Associated with TT is a set is a set AA = {( = {(wwii, , hhii): ): ii = 1, 2, , | = 1, 2, , |TT|} where |} where wwii and and hhii represent the width and height of task represent the width and height of task ttii. .</p>
    <p>Assume that each cell contained in the reconfigurable fabric of the FPGA Assume that each cell contained in the reconfigurable fabric of the FPGA chip is characterized by its coordinate (chip is characterized by its coordinate (xx, , yy) where 1  ) where 1  xx   NN and 1  and 1  yy   NN. . In that case, the cell In that case, the cell cc located at ( located at (xx, , yy) can be denoted by ) can be denoted by ccx,yx,y. .</p>
    <p>As such, the cell located in the leftmost lower corner has (1, 1) as its As such, the cell located in the leftmost lower corner has (1, 1) as its coordinates and can be represented as coordinates and can be represented as cc1,11,1. .</p>
    <p>A task A task ttii is placed at ( is placed at (xx, , yy) if its leftmost lower corner starts at ) if its leftmost lower corner starts at ccx,yx,y..</p>
  </div>
  <div class="page">
    <p>Task Placement FormulationTask Placement Formulation</p>
    <p>Definition 1Definition 1:: The placement of a task The placement of a task ttii at ( at (xx, , yy) is denoted by ) is denoted by ((ttii) = () = (xx, , yy). ).</p>
    <p>In this case, In this case, ttii occupies an area that contains the set of cells occupies an area that contains the set of cells CCii = { = {ccuu,,vv: : uu = = xx, , xx+1, , +1, , xx++ww-1 and -1 and vv = = yy, , yy+1, , +1, , yy++hh-1}. -1}.</p>
    <p>It is obvious that two tasks are placed correctly if they do not overlap. It is obvious that two tasks are placed correctly if they do not overlap.</p>
    <p>Definition 2Definition 2:: The respective placements The respective placements ((ttii) and ) and ((ttjj) of two tasks ) of two tasks ttii and and ttjj on the FPGA chip are on the FPGA chip are functionally correct functionally correct if and only if if and only if CCii  CCjj = = . .</p>
    <p>At any moment, no two tasks should overlap if they are correctly placed on At any moment, no two tasks should overlap if they are correctly placed on the FPGA chip.the FPGA chip.</p>
  </div>
  <div class="page">
    <p>Defragmentation FormulationDefragmentation Formulation</p>
    <p>Definition 3Definition 3:: A placement of the task set A placement of the task set TT = { = {ttii: : ii = 1, 2, , | = 1, 2, , | TT|} on the FPGA chip is |} on the FPGA chip is functionally correctfunctionally correct if and only if if and only if</p>
    <p>CCii  CCjj = =  for each ( for each (jj, , kk) )  | |TT| x || x |TT| and | and jj  kk..</p>
    <p>A functionally correct placement will leave holes between the A functionally correct placement will leave holes between the placed tasks unless the placement produces a completely full placed tasks unless the placement produces a completely full chip. These holes represent a specific fragmented state of the chip. These holes represent a specific fragmented state of the FPGA chip which can be quantified by the fragmentation FPGA chip which can be quantified by the fragmentation metric metric FF. .</p>
    <p>Definition 4Definition 4:: DefragmentationDefragmentation of an FPGA chip is a of an FPGA chip is a functionally correct placement functionally correct placement 22 of the task set of the task set TT characterized by a fragmentation value characterized by a fragmentation value FF22 obtained from an obtained from an initial functionally correct placement initial functionally correct placement 11 of the task set of the task set TT characterized by a fragmentation value characterized by a fragmentation value FF11 such that such that FF22 &lt; &lt; FF11..</p>
  </div>
  <div class="page">
    <p>Defragmentation AlgorithmDefragmentation Algorithm</p>
    <p>Input: initial initial task placement of task set T = {ti: i = 1, 2, , |T|} Hinitial initial set of holes embedded within initial Finitial initial fragmentation value associated with initial Ftarget target fragmentation value where Ftarget &lt; Finitial</p>
    <p>Output: target target task placement of task set T = {ti: i = 1, 2, , |T|} with F  Ftarget</p>
    <p>Let current = initial; Let Hcurrent = Hinitial; Let Fcurrent = Finitial;</p>
    <p>while (Ftarget &lt; Fcurrent) begin Pick the closest task ti to the lower leftmost corner of the chip from T; Perform a maximum possible translation on ti; Update current and Hcurrent; Compute Fcurrent; end</p>
    <p>Assign target = current;</p>
  </div>
  <div class="page">
    <p>Place of Defragmentation in System Place of Defragmentation in System ArchitectureArchitecture</p>
    <p>Although defragmentation can be used to sustain application Although defragmentation can be used to sustain application performance in an RCS, it is not clear where between the performance in an RCS, it is not clear where between the general purpose processor of the RCS and the FPGA chip it general purpose processor of the RCS and the FPGA chip it can be integrated.can be integrated.</p>
    <p>Essentially, one can view the integration of defragmentation in Essentially, one can view the integration of defragmentation in an RCS as a software/hardware co-design problem. an RCS as a software/hardware co-design problem.</p>
    <p>In this problem, the management of defragmentation can be In this problem, the management of defragmentation can be implemented (i) completely in a software layer, (ii) completely implemented (i) completely in a software layer, (ii) completely in hardware, or (iii) partially in software and partially in in hardware, or (iii) partially in software and partially in hardware.hardware.</p>
  </div>
</Presentation>

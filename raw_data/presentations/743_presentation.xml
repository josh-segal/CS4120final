<?xml version="1.0" ?>
<Presentation>
  <div class="page">
    <p>Selector-based View Composition</p>
    <p>William Zeller and Edward Felten</p>
    <p>Princeton University</p>
    <p>http://svc.from.bz</p>
  </div>
  <div class="page">
    <p>What is SVC?</p>
    <p>Modification to Model-View-Controller (MVC) architecture</p>
    <p>Provides automatic progressive enhancement (Ajaxification) of web pages.</p>
    <p>WebApps '10 - June 24, 2010 2</p>
  </div>
  <div class="page">
    <p>State of Ajax on the Web</p>
    <p>Allows interactivity</p>
    <p>Expected by users</p>
    <p>Only works if browser supports JavaScript</p>
    <p>WebApps '10 - June 24, 2010 3</p>
  </div>
  <div class="page">
    <p>Ajax and Non-JavaScript Browsers</p>
    <p>Why support non-JavaScript browsers?</p>
    <p>JS may be disabled</p>
    <p>Users with disabilities</p>
    <p>Search engines</p>
    <p>Other annoyances if only JS supported</p>
    <p>E.g., Open in new tab may not work</p>
    <p>WebApps '10 - June 24, 2010 4</p>
  </div>
  <div class="page">
    <p>Progressive Enhancement</p>
    <p>Standard &quot;best practice&quot; for supporting both JS and non-JS browsers</p>
    <p>Idea:</p>
    <p>Difficult</p>
    <p>All Ajax functionality needs to be duplicated</p>
    <p>WebApps '10 - June 24, 2010 5</p>
  </div>
  <div class="page">
    <p>MVC before Progressive Enhancement</p>
    <p>Controller</p>
    <p>Request</p>
    <p>View</p>
    <p>Models</p>
    <p>Browser</p>
    <p>HTML</p>
    <p>Server</p>
    <p>Client</p>
    <p>WebApps '10 - June 24, 2010 6</p>
  </div>
  <div class="page">
    <p>MVC after Progressive Enhancement</p>
    <p>Controller</p>
    <p>Request</p>
    <p>Non-Ajax View</p>
    <p>Models</p>
    <p>Browser</p>
    <p>HTML</p>
    <p>Ajax? Ajax View</p>
    <p>JSON/XML</p>
    <p>JavaScript</p>
    <p>Client</p>
    <p>Server</p>
    <p>Yes No</p>
    <p>WebApps '10 - June 24, 2010 7</p>
  </div>
  <div class="page">
    <p>SVC</p>
    <p>Provided as server-side API</p>
    <p>API is used to compose views together</p>
    <p>(CSS) selectors are used to identify the point of composition</p>
    <p>Advantages:  Write view update code once</p>
    <p>No need to write JavaScript (for actions supported by SVC)</p>
    <p>Language agnostic</p>
    <p>Existing template code and JavaScript unaffected</p>
    <p>WebApps '10 - June 24, 2010 8</p>
  </div>
  <div class="page">
    <p>Why Selectors?</p>
    <p>Selectors, e.g.,</p>
    <p>#foo (element with id &quot;foo&quot;)</p>
    <p>.foo (elements with class &quot;foo&quot;)</p>
    <p>div &gt; a (select all 'a' elements that are children of 'div' elements)</p>
    <p>Familiar to developers (CSS)</p>
    <p>Becoming more common in JS frameworks</p>
    <p>Closure, Dojo, jQuery, MooTools, Prototype, YUI</p>
    <p>WebApps '10 - June 24, 2010 9</p>
  </div>
  <div class="page">
    <p>SVC</p>
    <p>Controller</p>
    <p>Request</p>
    <p>Models</p>
    <p>Browser</p>
    <p>HTMLJSON</p>
    <p>SVC JS</p>
    <p>ViewsView Composition</p>
    <p>SVC</p>
    <p>Server</p>
    <p>Client</p>
    <p>WebApps '10 - June 24, 2010 10</p>
  </div>
  <div class="page">
    <p>What does SVC look like?</p>
    <p>$svc-&gt;initial('example'); // assume example is</p>
    <p>//&lt;p id=&quot;msg&quot;&gt;&lt;/p&gt;</p>
    <p>$svc-&gt;text('#msg', 'My message');</p>
    <p>$svc-&gt;addClass('p', 'highlight');</p>
    <p>Non-Ajax request response (HTML): &lt;p id=&quot;msg&quot; class=&quot;highlight&quot;&gt;My message&lt;/p&gt;</p>
    <p>Ajax Request response (JSON) [['text', ['#msg', 'My message']],</p>
    <p>['addClass', ['p', 'highlight']]]</p>
    <p>WebApps '10 - June 24, 2010 11</p>
  </div>
  <div class="page">
    <p>SVC</p>
    <p>Controller</p>
    <p>Request</p>
    <p>Models</p>
    <p>Browser</p>
    <p>HTMLJSON</p>
    <p>SVC JS</p>
    <p>ViewsView Composition</p>
    <p>SVC</p>
    <p>Server</p>
    <p>Client</p>
    <p>WebApps '10 - June 24, 2010 12</p>
  </div>
  <div class="page">
    <p>SVC Client-side JavaScript</p>
    <p>SVC client-side JS applies JSON to current document</p>
    <p>In previous example: [['text', ['#msg', 'My message']],</p>
    <p>['addClass', ['p', 'highlight']]]</p>
    <p>Sets the text of any element with ID 'msg'</p>
    <p>Adds class &quot;highlight&quot; to any paragraph tag.</p>
    <p>Size: 1.7KB, requires jQuery (could be written on top of other libraries as well)</p>
    <p>WebApps '10 - June 24, 2010 13</p>
  </div>
  <div class="page">
    <p>SVC</p>
    <p>Controller</p>
    <p>Request</p>
    <p>Models</p>
    <p>Browser</p>
    <p>HTMLJSON</p>
    <p>SVC JS</p>
    <p>ViewsView Composition</p>
    <p>SVC</p>
    <p>Server</p>
    <p>Client</p>
    <p>WebApps '10 - June 24, 2010 14</p>
  </div>
  <div class="page">
    <p>How does SVC perform actions on server-side?</p>
    <p>JavaScript is used to update view on clientside, but what about server?</p>
    <p>Need to compose view on server-side for nonJS requests</p>
    <p>Requires selector support and DOM manipulation</p>
    <p>Our version of SVC uses WebKit (WebCore)</p>
    <p>Actions implemented in C++ extension to PHP</p>
    <p>WebApps '10 - June 24, 2010 15</p>
  </div>
  <div class="page">
    <p>How does SVC Progressively Enhance?</p>
    <p>SVC can now respond to both Ajax and nonAjax requests</p>
    <p>But how are Ajax requests generated?</p>
    <p>Developer has used SVC on server</p>
    <p>Writes HTML without JavaScript in mind (e.g., ...a href=&quot;/foo&quot;&gt;Link&lt;/a&gt;)</p>
    <p>WebApps '10 - June 24, 2010 16</p>
  </div>
  <div class="page">
    <p>How does SVC Progressively Enhance?</p>
    <p>On server-side, SVC adds the class &quot;svc_rewrite&quot; to any element which should use JavaScript to load request</p>
    <p>On client-side, SVC adds onclick or onsubmit event handlers to any element with the class &quot;svc_rewrite&quot;</p>
    <p>WebApps '10 - June 24, 2010 17</p>
  </div>
  <div class="page">
    <p>When does SVC Progressively Enhance Pages?</p>
    <p>SVC does not know when loading a link using Ajax is appropriate</p>
    <p>We do not want to transmit page to server to see if manipulating the DOM makes sense</p>
    <p>SVC provides API to define which links should be rewritten to use Ajax</p>
    <p>$svc-&gt;rewrite('a', 'b')</p>
    <p>(On page &quot;b&quot;, rewrite all links to &quot;a&quot;)</p>
    <p>WebApps '10 - June 24, 2010 18</p>
  </div>
  <div class="page">
    <p>What can be done with SVC?</p>
    <p>We implemented the following actions:  addClass</p>
    <p>append</p>
    <p>attr</p>
    <p>css</p>
    <p>html</p>
    <p>prepend</p>
    <p>remove</p>
    <p>removeClass</p>
    <p>text</p>
    <p>WebApps '10 - June 24, 2010 19</p>
  </div>
  <div class="page">
    <p>What can be done with SVC?</p>
    <p>SVC can be easily extended.</p>
    <p>Could be written once and distributed as SVC plugins</p>
    <p>Only requirement is that action can be performed on client and server.</p>
    <p>WebApps '10 - June 24, 2010 20</p>
  </div>
  <div class="page">
    <p>How are Actions Added to SVC?</p>
    <p>Implement action on client and server.</p>
    <p>E.g., add before action</p>
    <p>On server, use PHP or scripting language to perform update to view</p>
    <p>On client, use JavaScript to perform equivalent action</p>
    <p>SVC users can then call before in any of their code.</p>
    <p>WebApps '10 - June 24, 2010 21</p>
  </div>
  <div class="page">
    <p>Adding non-DOM Actions to SVC</p>
    <p>Actions we've seen manipulate the DOM</p>
    <p>SVC actions not limited to DOM manipulation</p>
    <p>Only requirement is to server/client equivalence</p>
    <p>E.g., redirect</p>
    <p>On server, output HTTP header</p>
    <p>On client, call window.location</p>
    <p>WebApps '10 - June 24, 2010 22</p>
  </div>
  <div class="page">
    <p>SVC Overhead</p>
    <p>Non-Ajax requests (initial and non-JS requests)</p>
    <p>Page needs to be constructed on server</p>
    <p>Requires parsing, running selectors and actions</p>
    <p>DOM output can be cached.</p>
    <p>Ajax requests</p>
    <p>List of SVC actions sent directly to client</p>
    <p>Modifications performed by client JS</p>
    <p>Essentially no server overhead</p>
    <p>WebApps '10 - June 24, 2010 23</p>
  </div>
  <div class="page">
    <p>SVC Server-side Parsing Overhead</p>
    <p>E.g., SVC parsed 80% of the sites in 15ms  DomDocument is an alternative PHP HTML parser  10,000 most popular websites parsed WebApps '10 - June 24, 2010 24</p>
  </div>
  <div class="page">
    <p>SVC Server-side Selector Overhead</p>
    <p>Our SVC implementation uses WebCore's querySelectorAll</p>
    <p>Translated SlickSpeed test to PHP</p>
    <p>Ran 40 selectors against standard 108KB webpage</p>
    <p>Ran test 1000 times, mean time of 1.49ms per selector</p>
    <p>More details in paper</p>
    <p>WebApps '10 - June 24, 2010 25</p>
  </div>
  <div class="page">
    <p>SVC Server-side Action Overhead</p>
    <p>Mean time to insert 0-1MB (64KB increments)</p>
    <p>100 runs per size WebApps '10 - June 24, 2010 26</p>
  </div>
  <div class="page">
    <p>SVC Client-side Overhead</p>
    <p>Our SVC JavaScript wraps jQuery functionality</p>
    <p>E.g., the literal implementation of addClass addClass: function(selector, className){</p>
    <p>$(selector).addClass(className);</p>
    <p>},</p>
    <p>Depends on browser, underlying JS library, action complexity</p>
    <p>WebApps '10 - June 24, 2010 27</p>
  </div>
  <div class="page">
    <p>Alternatives to SVC</p>
    <p>GWT, Cappuccino, SproutCore and RJS (Rails JS)</p>
    <p>Allow server-side creation of JS</p>
    <p>Do not provide non-JS browser support</p>
    <p>Not aware of any other solution that provides automatic progressive enhancement of pages</p>
    <p>More comparisons in paper</p>
    <p>WebApps '10 - June 24, 2010 28</p>
  </div>
  <div class="page">
    <p>Extending SVC</p>
    <p>Additional Language Support</p>
    <p>Python prototype has been written</p>
    <p>Simpler than PHP  only requires lxml library</p>
    <p>Additional client-side libraries</p>
    <p>Currently based on jQuery</p>
    <p>Versions could be written for Prototype, Closure, Dojo, etc.</p>
    <p>WebApps '10 - June 24, 2010 29</p>
  </div>
  <div class="page">
    <p>Conclusion</p>
    <p>SVC provides automatic progressive enhancement and compatibility with older browsers</p>
    <p>SVC allows composition of views using selectors</p>
    <p>More info: http://svc.from.bz</p>
    <p>Thanks! Questions? WebApps '10 - June 24, 2010 30</p>
  </div>
  <div class="page">
    <p>WebApps '10 - June 24, 2010 31</p>
  </div>
  <div class="page">
    <p>Addendum Example: Tabs</p>
    <p>Page consisting of multiple tabs</p>
    <p>Tabs should load using Ajax when available</p>
    <p>But work without JavaScript</p>
    <p>Changing tab requires changing:</p>
    <p>Tab content</p>
    <p>CSS class in tab header</p>
    <p>Page title</p>
    <p>WebApps '10 - June 24, 2010 32</p>
  </div>
  <div class="page">
    <p>Tabs Screenshots</p>
    <p>Tab 1</p>
    <p>Tab 2</p>
    <p>WebApps '10 - June 24, 2010 33</p>
  </div>
  <div class="page">
    <p>Tabs Screenshots</p>
    <p>Tab 1</p>
    <p>Tab 2</p>
    <p>WebApps '10 - June 24, 2010 34</p>
  </div>
  <div class="page">
    <p>Tabs Screenshots</p>
    <p>Tab 1</p>
    <p>Tab 2</p>
    <p>WebApps '10 - June 24, 2010 35</p>
  </div>
  <div class="page">
    <p>Tabs Screenshots</p>
    <p>Tab 1</p>
    <p>Tab 2</p>
    <p>WebApps '10 - June 24, 2010 36</p>
  </div>
  <div class="page">
    <p>First Tab Page HTML</p>
    <p>&lt;html&gt;</p>
    <p>&lt;head&gt;</p>
    <p>&lt;title&gt;First tab page&lt;/title&gt;</p>
    <p>&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;style.css&quot;/&gt;</p>
    <p>&lt;/head&gt;</p>
    <p>&lt;body&gt;</p>
    <p>&lt;div id=&quot;tab_header&quot;&gt;</p>
    <p>&lt;h1&gt;Tabs Example&lt;/h1&gt;</p>
    <p>&lt;ul&gt;</p>
    <p>&lt;li class=&quot;selected&quot;&gt;&lt;a href=&quot;/tab1&quot;&gt;First Tab&lt;/a&gt;&lt;/li&gt;</p>
    <p>&lt;li&gt;&lt;a href=&quot;/tab2&quot;&gt;Second Tab&lt;/a&gt;&lt;/li&gt;</p>
    <p>&lt;li&gt;&lt;a href=&quot;/tab3&quot;&gt;Third Tab&lt;/a&gt;&lt;/li&gt;</p>
    <p>&lt;/ul&gt;</p>
    <p>&lt;/div&gt;</p>
    <p>(continued on next page...) WebApps '10 - June 24, 2010 37</p>
  </div>
  <div class="page">
    <p>First Tab Page HTML</p>
    <p>&lt;html&gt;</p>
    <p>&lt;head&gt;</p>
    <p>&lt;title&gt;First tab page&lt;/title&gt;</p>
    <p>&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;style.css&quot;/&gt;</p>
    <p>&lt;/head&gt;</p>
    <p>&lt;body&gt;</p>
    <p>&lt;div id=&quot;tab_header&quot;&gt;</p>
    <p>&lt;h1&gt;Tabs Example&lt;/h1&gt;</p>
    <p>&lt;ul&gt;</p>
    <p>&lt;li class=&quot;selected&quot;&gt;&lt;a href=&quot;/tab1&quot;&gt;First Tab&lt;/a&gt;&lt;/li&gt;</p>
    <p>&lt;li&gt;&lt;a href=&quot;/tab2&quot;&gt;Second Tab&lt;/a&gt;&lt;/li&gt;</p>
    <p>&lt;li&gt;&lt;a href=&quot;/tab3&quot;&gt;Third Tab&lt;/a&gt;&lt;/li&gt;</p>
    <p>&lt;/ul&gt;</p>
    <p>&lt;/div&gt;</p>
    <p>(continued on next page...)</p>
    <p>Page title</p>
    <p>WebApps '10 - June 24, 2010 38</p>
  </div>
  <div class="page">
    <p>First Tab Page HTML</p>
    <p>&lt;html&gt;</p>
    <p>&lt;head&gt;</p>
    <p>&lt;title&gt;First tab page&lt;/title&gt;</p>
    <p>&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;style.css&quot;/&gt;</p>
    <p>&lt;/head&gt;</p>
    <p>&lt;body&gt;</p>
    <p>&lt;div id=&quot;tab_header&quot;&gt;</p>
    <p>&lt;h1&gt;Tabs Example&lt;/h1&gt;</p>
    <p>&lt;ul&gt;</p>
    <p>&lt;li class=&quot;selected&quot;&gt;&lt;a href=&quot;/tab1&quot;&gt;First Tab&lt;/a&gt;&lt;/li&gt;</p>
    <p>&lt;li&gt;&lt;a href=&quot;/tab2&quot;&gt;Second Tab&lt;/a&gt;&lt;/li&gt;</p>
    <p>&lt;li&gt;&lt;a href=&quot;/tab3&quot;&gt;Third Tab&lt;/a&gt;&lt;/li&gt;</p>
    <p>&lt;/ul&gt;</p>
    <p>&lt;/div&gt;</p>
    <p>(continued on next page...)</p>
    <p>Tabs header</p>
    <p>WebApps '10 - June 24, 2010 39</p>
  </div>
  <div class="page">
    <p>First Tab Page HTML</p>
    <p>&lt;html&gt;</p>
    <p>&lt;head&gt;</p>
    <p>&lt;title&gt;First tab page&lt;/title&gt;</p>
    <p>&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;style.css&quot;/&gt;</p>
    <p>&lt;/head&gt;</p>
    <p>&lt;body&gt;</p>
    <p>&lt;div id=&quot;tab_header&quot;&gt;</p>
    <p>&lt;h1&gt;Tabs Example&lt;/h1&gt;</p>
    <p>&lt;ul&gt;</p>
    <p>&lt;li class=&quot;selected&quot;&gt;&lt;a href=&quot;/tab1&quot;&gt;First Tab&lt;/a&gt;&lt;/li&gt;</p>
    <p>&lt;li&gt;&lt;a href=&quot;/tab2&quot;&gt;Second Tab&lt;/a&gt;&lt;/li&gt;</p>
    <p>&lt;li&gt;&lt;a href=&quot;/tab3&quot;&gt;Third Tab&lt;/a&gt;&lt;/li&gt;</p>
    <p>&lt;/ul&gt;</p>
    <p>&lt;/div&gt;</p>
    <p>(continued on next page...)</p>
    <p>CSS class showing selected tab</p>
    <p>WebApps '10 - June 24, 2010 40</p>
  </div>
  <div class="page">
    <p>First Tab Page HTML</p>
    <p>(continued...)</p>
    <p>&lt;div id=&quot;content&quot;&gt;</p>
    <p>First tab content &lt;br/&gt;&lt;br/&gt;</p>
    <p>&lt;b&gt;Bold&lt;/b&gt; first tab message.</p>
    <p>&lt;/div&gt;</p>
    <p>&lt;/body&gt;</p>
    <p>&lt;/html&gt;</p>
    <p>WebApps '10 - June 24, 2010 41</p>
  </div>
  <div class="page">
    <p>First Tab Page HTML</p>
    <p>(continued...)</p>
    <p>&lt;div id=&quot;content&quot;&gt;</p>
    <p>First tab content &lt;br/&gt;&lt;br/&gt;</p>
    <p>&lt;b&gt;Bold&lt;/b&gt; first tab message.</p>
    <p>&lt;/div&gt;</p>
    <p>&lt;/body&gt;</p>
    <p>&lt;/html&gt;</p>
    <p>Tab content</p>
    <p>WebApps '10 - June 24, 2010 42</p>
  </div>
  <div class="page">
    <p>Tabs Page without SVC</p>
    <p>Create site without JavaScript</p>
    <p>Use JavaScript to add Ajax support</p>
    <p>This is the Progressive Enhancement step</p>
    <p>WebApps '10 - June 24, 2010 43</p>
  </div>
  <div class="page">
    <p>Tabs Controller</p>
    <p>&lt;?php</p>
    <p>class TabsExample extends Controller {</p>
    <p>function tab1() {</p>
    <p>}</p>
    <p>function tab2() {</p>
    <p>}</p>
    <p>function tab3() {</p>
    <p>}</p>
    <p>}</p>
    <p>WebApps '10 - June 24, 2010 44</p>
  </div>
  <div class="page">
    <p>Tabs Controller</p>
    <p>&lt;?php</p>
    <p>class TabsExample extends Controller {</p>
    <p>function tab1() {</p>
    <p>}</p>
    <p>function tab2() {</p>
    <p>}</p>
    <p>function tab3() {</p>
    <p>}</p>
    <p>}</p>
    <p>tab1() runs when /tab1 is requested, etc</p>
    <p>WebApps '10 - June 24, 2010 45</p>
  </div>
  <div class="page">
    <p>Tabs Controller</p>
    <p>&lt;?php</p>
    <p>class TabsExample extends Controller {</p>
    <p>function tab1() {</p>
    <p>}</p>
    <p>function tab2() {</p>
    <p>}</p>
    <p>function tab3() {</p>
    <p>}</p>
    <p>}</p>
    <p>We don't show tab3() due to space limitations.</p>
    <p>WebApps '10 - June 24, 2010 46</p>
  </div>
  <div class="page">
    <p>Tabs Controller</p>
    <p>&lt;?php</p>
    <p>class TabsExample extends Controller {</p>
    <p>function tab1() {</p>
    <p>}</p>
    <p>function tab2() {</p>
    <p>}</p>
    <p>}</p>
    <p>WebApps '10 - June 24, 2010 47</p>
  </div>
  <div class="page">
    <p>Tabs Controller</p>
    <p>&lt;?php</p>
    <p>class TabsExample extends Controller {</p>
    <p>function tab1() {</p>
    <p>$data = array('title' =&gt; 'First tab page',</p>
    <p>'tab_num' =&gt; 1,</p>
    <p>'content' =&gt; view('tab1_content'));</p>
    <p>}</p>
    <p>function tab2() {</p>
    <p>}</p>
    <p>}</p>
    <p>WebApps '10 - June 24, 2010 48</p>
  </div>
  <div class="page">
    <p>Tabs Controller</p>
    <p>&lt;?php</p>
    <p>class TabsExample extends Controller {</p>
    <p>function tab1() {</p>
    <p>$data = array('title' =&gt; 'First tab page',</p>
    <p>'tab_num' =&gt; 1,</p>
    <p>'content' =&gt; view('tab1_content'));</p>
    <p>}</p>
    <p>function tab2() {</p>
    <p>}</p>
    <p>}</p>
    <p>Define array with data which will be sent to the view</p>
    <p>WebApps '10 - June 24, 2010 49</p>
  </div>
  <div class="page">
    <p>Tabs Controller</p>
    <p>&lt;?php</p>
    <p>class TabsExample extends Controller {</p>
    <p>function tab1() {</p>
    <p>$data = array('title' =&gt; 'First tab page',</p>
    <p>'tab_num' =&gt; 1,</p>
    <p>'content' =&gt; view('tab1_content'));</p>
    <p>}</p>
    <p>function tab2() {</p>
    <p>$data = array('title' =&gt; 'Second tab page',</p>
    <p>'tab_num' =&gt; 2,</p>
    <p>'content' =&gt; view('tab2_content'));</p>
    <p>}</p>
    <p>}</p>
    <p>WebApps '10 - June 24, 2010 50</p>
  </div>
  <div class="page">
    <p>Tabs Controller</p>
    <p>&lt;?php</p>
    <p>class TabsExample extends Controller {</p>
    <p>function tab1() {</p>
    <p>$data = array('title' =&gt; 'First tab page',</p>
    <p>'tab_num' =&gt; 1,</p>
    <p>'content' =&gt; view('tab1_content'));</p>
    <p>return view('tab_template', $data);</p>
    <p>}</p>
    <p>function tab2() {</p>
    <p>$data = array('title' =&gt; 'Second tab page',</p>
    <p>'tab_num' =&gt; 2,</p>
    <p>'content' =&gt; view('tab2_content'));</p>
    <p>return view('tab_template', $data);</p>
    <p>}</p>
    <p>} WebApps '10 - June 24, 2010 51</p>
  </div>
  <div class="page">
    <p>Tabs Controller</p>
    <p>&lt;?php</p>
    <p>class TabsExample extends Controller {</p>
    <p>function tab1() {</p>
    <p>$data = array('title' =&gt; 'First tab page',</p>
    <p>'tab_num' =&gt; 1,</p>
    <p>'content' =&gt; view('tab1_content'));</p>
    <p>return view('tab_template', $data);</p>
    <p>}</p>
    <p>function tab2() {</p>
    <p>$data = array('title' =&gt; 'Second tab page',</p>
    <p>'tab_num' =&gt; 2,</p>
    <p>'content' =&gt; view('tab2_content'));</p>
    <p>return view('tab_template', $data);</p>
    <p>}</p>
    <p>}</p>
    <p>Call view &quot;tab_template&quot; with data array.</p>
    <p>WebApps '10 - June 24, 2010 52</p>
  </div>
  <div class="page">
    <p>Tabs Controller</p>
    <p>&lt;?php</p>
    <p>class TabsExample extends Controller {</p>
    <p>function tab1() {</p>
    <p>$data = array('title' =&gt; 'First tab page',</p>
    <p>'tab_num' =&gt; 1,</p>
    <p>'content' =&gt; view('tab1_content'));</p>
    <p>return view('tab_template', $data);</p>
    <p>}</p>
    <p>function tab2() {</p>
    <p>$data = array('title' =&gt; 'Second tab page',</p>
    <p>'tab_num' =&gt; 2,</p>
    <p>'content' =&gt; view('tab2_content'));</p>
    <p>return view('tab_template', $data);</p>
    <p>}</p>
    <p>}</p>
    <p>Output interpreted view.</p>
    <p>WebApps '10 - June 24, 2010 53</p>
  </div>
  <div class="page">
    <p>Tabs Controller</p>
    <p>&lt;?php</p>
    <p>class TabsExample extends Controller {</p>
    <p>function tab1() {</p>
    <p>$data = array('title' =&gt; 'First tab page',</p>
    <p>'tab_num' =&gt; 1,</p>
    <p>'content' =&gt; view('tab1_content'));</p>
    <p>return view('tab_template', $data);</p>
    <p>}</p>
    <p>function tab2() {</p>
    <p>$data = array('title' =&gt; 'Second tab page',</p>
    <p>'tab_num' =&gt; 2,</p>
    <p>'content' =&gt; view('tab2_content'));</p>
    <p>return view('tab_template', $data);</p>
    <p>}</p>
    <p>} WebApps '10 - June 24, 2010 54</p>
  </div>
  <div class="page">
    <p>Template (tab_template)</p>
    <p>&lt;html&gt;</p>
    <p>&lt;head&gt;</p>
    <p>&lt;title&gt;&lt;?=$title?&gt;&lt;/title&gt;</p>
    <p>&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;style.css&quot;/&gt;</p>
    <p>&lt;/head&gt;</p>
    <p>&lt;body&gt;</p>
    <p>&lt;div id=&quot;tab_header&quot;&gt;</p>
    <p>&lt;h1&gt;Tabs Example&lt;/h1&gt;</p>
    <p>&lt;ul&gt;</p>
    <p>&lt;li &lt;? if ($tab_num == 1) { ?&gt; class=&quot;selected&quot; &lt;? } ?&gt;</p>
    <p>id=&quot;tab_1&quot;&gt;&lt;a href=&quot;/tab1&quot;&gt;First Tab&lt;/a&gt;&lt;/li&gt;</p>
    <p>&lt;li &lt;? if ($tab_num == 2) { ?&gt; class=&quot;selected&quot; &lt;? } ?&gt;</p>
    <p>id=&quot;tab_2&quot;&gt;&lt;a href=&quot;/tab2&quot;&gt;Second Tab&lt;/a&gt;&lt;/li&gt;</p>
    <p>(continued on next page...) WebApps '10 - June 24, 2010 55</p>
  </div>
  <div class="page">
    <p>Template (tab_template)</p>
    <p>&lt;html&gt;</p>
    <p>&lt;head&gt;</p>
    <p>&lt;title&gt;&lt;?=$title?&gt;&lt;/title&gt;</p>
    <p>&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;style.css&quot;/&gt;</p>
    <p>&lt;/head&gt;</p>
    <p>&lt;body&gt;</p>
    <p>&lt;div id=&quot;tab_header&quot;&gt;</p>
    <p>&lt;h1&gt;Tabs Example&lt;/h1&gt;</p>
    <p>&lt;ul&gt;</p>
    <p>&lt;li &lt;? if ($tab_num == 1) { ?&gt; class=&quot;selected&quot; &lt;? } ?&gt;</p>
    <p>id=&quot;tab_1&quot;&gt;&lt;a href=&quot;/tab1&quot;&gt;First Tab&lt;/a&gt;&lt;/li&gt;</p>
    <p>&lt;li &lt;? if ($tab_num == 2) { ?&gt; class=&quot;selected&quot; &lt;? } ?&gt;</p>
    <p>id=&quot;tab_2&quot;&gt;&lt;a href=&quot;/tab2&quot;&gt;Second Tab&lt;/a&gt;&lt;/li&gt;</p>
    <p>(continued on next page...)</p>
    <p>Output Title</p>
    <p>WebApps '10 - June 24, 2010 56</p>
  </div>
  <div class="page">
    <p>Template (tab_template)</p>
    <p>&lt;html&gt;</p>
    <p>&lt;head&gt;</p>
    <p>&lt;title&gt;&lt;?=$title?&gt;&lt;/title&gt;</p>
    <p>&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;style.css&quot;/&gt;</p>
    <p>&lt;/head&gt;</p>
    <p>&lt;body&gt;</p>
    <p>&lt;div id=&quot;tab_header&quot;&gt;</p>
    <p>&lt;h1&gt;Tabs Example&lt;/h1&gt;</p>
    <p>&lt;ul&gt;</p>
    <p>&lt;li &lt;? if ($tab_num == 1) { ?&gt; class=&quot;selected&quot; &lt;? } ?&gt;</p>
    <p>id=&quot;tab_1&quot;&gt;&lt;a href=&quot;/tab1&quot;&gt;First Tab&lt;/a&gt;&lt;/li&gt;</p>
    <p>&lt;li &lt;? if ($tab_num == 2) { ?&gt; class=&quot;selected&quot; &lt;? } ?&gt;</p>
    <p>id=&quot;tab_2&quot;&gt;&lt;a href=&quot;/tab2&quot;&gt;Second Tab&lt;/a&gt;&lt;/li&gt;</p>
    <p>(continued on next page...)</p>
    <p>Set CSS class if appropriate</p>
    <p>WebApps '10 - June 24, 2010 57</p>
  </div>
  <div class="page">
    <p>Template (tab_template)</p>
    <p>(continued...)</p>
    <p>&lt;li &lt;? if ($tab_num == 3) { ?&gt; class=&quot;selected&quot; &lt;? } ?&gt;</p>
    <p>id=&quot;tab_3&quot;&gt;&lt;a href=&quot;/tab3&quot;&gt;Third Tab&lt;/a&gt;&lt;/li&gt;</p>
    <p>&lt;/ul&gt;</p>
    <p>&lt;/div&gt;</p>
    <p>&lt;div id=&quot;content&quot;&gt;&lt;?=$content?&gt;&lt;/div&gt;</p>
    <p>&lt;/body&gt;</p>
    <p>&lt;/html&gt;</p>
    <p>WebApps '10 - June 24, 2010 58</p>
  </div>
  <div class="page">
    <p>Template (tab_template)</p>
    <p>(continued...)</p>
    <p>&lt;li &lt;? if ($tab_num == 3) { ?&gt; class=&quot;selected&quot; &lt;? } ?&gt;</p>
    <p>id=&quot;tab_3&quot;&gt;&lt;a href=&quot;/tab3&quot;&gt;Third Tab&lt;/a&gt;&lt;/li&gt;</p>
    <p>&lt;/ul&gt;</p>
    <p>&lt;/div&gt;</p>
    <p>&lt;div id=&quot;content&quot;&gt;&lt;?=$content?&gt;&lt;/div&gt;</p>
    <p>&lt;/body&gt;</p>
    <p>&lt;/html&gt;</p>
    <p>Set CSS class if appropriate</p>
    <p>WebApps '10 - June 24, 2010 59</p>
  </div>
  <div class="page">
    <p>Template (tab_template)</p>
    <p>(continued...)</p>
    <p>&lt;li &lt;? if ($tab_num == 3) { ?&gt; class=&quot;selected&quot; &lt;? } ?&gt;</p>
    <p>id=&quot;tab_3&quot;&gt;&lt;a href=&quot;/tab3&quot;&gt;Third Tab&lt;/a&gt;&lt;/li&gt;</p>
    <p>&lt;/ul&gt;</p>
    <p>&lt;/div&gt;</p>
    <p>&lt;div id=&quot;content&quot;&gt;&lt;?=$content?&gt;&lt;/div&gt;</p>
    <p>&lt;/body&gt;</p>
    <p>&lt;/html&gt;</p>
    <p>Output content</p>
    <p>WebApps '10 - June 24, 2010 60</p>
  </div>
  <div class="page">
    <p>Tabs Controller</p>
    <p>&lt;?php</p>
    <p>class TabsExample extends Controller {</p>
    <p>function tab1() {</p>
    <p>$data = array('title' =&gt; 'First tab page',</p>
    <p>'tab_num' =&gt; 1,</p>
    <p>'content' =&gt; view('tab1_content'));</p>
    <p>return view('tab_template', $data);</p>
    <p>}</p>
    <p>function tab2() {</p>
    <p>$data = array('title' =&gt; 'Second tab page',</p>
    <p>'tab_num' =&gt; 2,</p>
    <p>'content' =&gt; view('tab2_content'));</p>
    <p>return view('tab_template', $data);</p>
    <p>}</p>
    <p>} WebApps '10 - June 24, 2010 61</p>
  </div>
  <div class="page">
    <p>Content Templates</p>
    <p>tab1_content First tab content &lt;br/&gt;&lt;br/&gt;</p>
    <p>&lt;b&gt;Bold&lt;/b&gt; first tab message.</p>
    <p>Some content for the second tab.tab2_content</p>
    <p>WebApps '10 - June 24, 2010 62</p>
  </div>
  <div class="page">
    <p>Non-Ajax Tabs Example Complete</p>
    <p>Site works (but no Ajax)</p>
    <p>Let's enhance!</p>
    <p>WebApps '10 - June 24, 2010 63</p>
  </div>
  <div class="page">
    <p>Adding Ajax (Main Template)</p>
    <p>&lt;html&gt;</p>
    <p>&lt;head&gt;</p>
    <p>&lt;title&gt;&lt;?=$title?&gt;&lt;/title&gt;</p>
    <p>&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;style.css&quot;/&gt;</p>
    <p>&lt;/head&gt;</p>
    <p>&lt;body&gt;</p>
    <p>&lt;div id=&quot;tab_header&quot;&gt;</p>
    <p>&lt;h1&gt;Tabs Example&lt;/h1&gt;</p>
    <p>&lt;ul&gt;</p>
    <p>&lt;li &lt;? if ($tab_num == 1) { ?&gt; class=&quot;selected&quot; &lt;? } ?&gt;</p>
    <p>id=&quot;tab_1&quot;&gt;&lt;a href=&quot;/tab1&quot;&gt;First Tab&lt;/a&gt;&lt;/li&gt;</p>
    <p>...</p>
    <p>WebApps '10 - June 24, 2010 64</p>
  </div>
  <div class="page">
    <p>Adding Ajax (Main Template)</p>
    <p>&lt;html&gt;</p>
    <p>&lt;head&gt;</p>
    <p>&lt;title&gt;&lt;?=$title?&gt;&lt;/title&gt;</p>
    <p>&lt;script type=&quot;text/javascript&quot; src=&quot;jQuery.js&quot;&gt;&lt;/script&gt;</p>
    <p>&lt;script type=&quot;text/javascript&quot; src=&quot;tabs.js&quot;&gt;&lt;/script&gt;</p>
    <p>&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;style.css&quot;/&gt;</p>
    <p>&lt;/head&gt;</p>
    <p>&lt;body&gt;</p>
    <p>&lt;div id=&quot;tab_header&quot;&gt;</p>
    <p>&lt;h1&gt;Tabs Example&lt;/h1&gt;</p>
    <p>&lt;ul&gt;</p>
    <p>&lt;li &lt;? if ($tab_num == 1) { ?&gt; class=&quot;selected&quot; &lt;? } ?&gt;</p>
    <p>id=&quot;tab_1&quot;&gt;&lt;a href=&quot;/tab1&quot;&gt;First Tab&lt;/a&gt;&lt;/li&gt;</p>
    <p>...</p>
    <p>Add scripts to progressively enhance</p>
    <p>WebApps '10 - June 24, 2010 65</p>
  </div>
  <div class="page">
    <p>Add Ajax to Controller</p>
    <p>&lt;?php</p>
    <p>class TabsExample extends Controller {</p>
    <p>function tab1() {</p>
    <p>$data = array('title' =&gt; 'First tab page',</p>
    <p>'tab_num' =&gt; 1,</p>
    <p>'content' =&gt; view('tab1_content'));</p>
    <p>return view('tab_template', $data);</p>
    <p>}</p>
    <p>...</p>
    <p>}</p>
    <p>WebApps '10 - June 24, 2010 66</p>
  </div>
  <div class="page">
    <p>Add Ajax to Controller</p>
    <p>&lt;?php</p>
    <p>class TabsExample extends Controller {</p>
    <p>function tab1() {</p>
    <p>$data = array('title' =&gt; 'First tab page',</p>
    <p>'tab_num' =&gt; 1,</p>
    <p>'content' =&gt; view('tab1_content'));</p>
    <p>if (is_ajax()) {</p>
    <p>return json_encode($data);</p>
    <p>} else {</p>
    <p>return view('tab_template', $data);</p>
    <p>}</p>
    <p>}</p>
    <p>...</p>
    <p>} WebApps '10 - June 24, 2010 67</p>
  </div>
  <div class="page">
    <p>Add Ajax to Controller</p>
    <p>&lt;?php</p>
    <p>class TabsExample extends Controller {</p>
    <p>function tab1() {</p>
    <p>$data = array('title' =&gt; 'First tab page',</p>
    <p>'tab_num' =&gt; 1,</p>
    <p>'content' =&gt; view('tab1_content'));</p>
    <p>if (is_ajax()) {</p>
    <p>return json_encode($data);</p>
    <p>} else {</p>
    <p>return view('tab_template', $data);</p>
    <p>}</p>
    <p>}</p>
    <p>...</p>
    <p>}</p>
    <p>If Ajax request, return JSON</p>
    <p>WebApps '10 - June 24, 2010 68</p>
  </div>
  <div class="page">
    <p>Add Ajax to Controller</p>
    <p>&lt;?php</p>
    <p>class TabsExample extends Controller {</p>
    <p>function tab1() {</p>
    <p>$data = array('title' =&gt; 'First tab page',</p>
    <p>'tab_num' =&gt; 1,</p>
    <p>'content' =&gt; view('tab1_content'));</p>
    <p>if (is_ajax()) {</p>
    <p>return json_encode($data);</p>
    <p>} else {</p>
    <p>return view('tab_template', $data);</p>
    <p>}</p>
    <p>}</p>
    <p>...</p>
    <p>}</p>
    <p>Otherwise, output HTML</p>
    <p>WebApps '10 - June 24, 2010 69</p>
  </div>
  <div class="page">
    <p>Example: Adding Ajax (tabs.js)</p>
    <p>$(function() {</p>
    <p>});</p>
    <p>WebApps '10 - June 24, 2010 70</p>
  </div>
  <div class="page">
    <p>Example: Adding Ajax (tabs.js)</p>
    <p>$(function() {</p>
    <p>var onTabClk = function() {</p>
    <p>// ...</p>
    <p>};</p>
    <p>$('#tab_header a').click(onTabClk);</p>
    <p>});</p>
    <p>Add click handler to tab links</p>
    <p>WebApps '10 - June 24, 2010 71</p>
  </div>
  <div class="page">
    <p>Example: Adding Ajax (tabs.js)</p>
    <p>$(function() {</p>
    <p>var onTabClk = function() {</p>
    <p>// ...</p>
    <p>};</p>
    <p>$('#tab_header a').click(onTabClk);</p>
    <p>});</p>
    <p>Function to be called when tab link is clicked</p>
    <p>WebApps '10 - June 24, 2010 72</p>
  </div>
  <div class="page">
    <p>Example: Adding Ajax (tabs.js)</p>
    <p>$(function() {</p>
    <p>var onTabClk = function() {</p>
    <p>return false;</p>
    <p>};</p>
    <p>$('#tab_header a').click(onTabClk);</p>
    <p>});</p>
    <p>Return false to prevent normal link load</p>
    <p>WebApps '10 - June 24, 2010 73</p>
  </div>
  <div class="page">
    <p>Example: Adding Ajax (tabs.js)</p>
    <p>$(function() {</p>
    <p>var onTabClk = function() {</p>
    <p>var href = $(this).attr('href');</p>
    <p>return false;</p>
    <p>};</p>
    <p>$('#tab_header a').click(onTabClk);</p>
    <p>});</p>
    <p>Extract link URL</p>
    <p>WebApps '10 - June 24, 2010 74</p>
  </div>
  <div class="page">
    <p>Example: Adding Ajax (tabs.js)</p>
    <p>$(function() {</p>
    <p>var onTabClk = function() {</p>
    <p>var href = $(this).attr('href');</p>
    <p>$.getJSON(href, function(data) {</p>
    <p>// ... process JSON response</p>
    <p>});</p>
    <p>return false;</p>
    <p>};</p>
    <p>$('#tab_header a').click(onTabClk);</p>
    <p>});</p>
    <p>Make JSON request</p>
    <p>WebApps '10 - June 24, 2010 75</p>
  </div>
  <div class="page">
    <p>Example: Adding Ajax (tabs.js)</p>
    <p>$(function() {</p>
    <p>var onTabClk = function() {</p>
    <p>var href = $(this).attr('href');</p>
    <p>$.getJSON(href, function(data) {</p>
    <p>document.title = data.title;</p>
    <p>});</p>
    <p>return false;</p>
    <p>};</p>
    <p>$('#tab_header a').click(onTabClk);</p>
    <p>});</p>
    <p>Set page title</p>
    <p>WebApps '10 - June 24, 2010 76</p>
  </div>
  <div class="page">
    <p>Example: Adding Ajax (tabs.js)</p>
    <p>$(function() {</p>
    <p>var onTabClk = function() {</p>
    <p>var href = $(this).attr('href');</p>
    <p>$.getJSON(href, function(data) {</p>
    <p>document.title = data.title;</p>
    <p>$('#tab_' + data.tabNum).addClass('selected');</p>
    <p>});</p>
    <p>return false;</p>
    <p>};</p>
    <p>$('#tab_header a').click(onTabClk);</p>
    <p>});</p>
    <p>Set CSS class of new tab</p>
    <p>WebApps '10 - June 24, 2010 77</p>
  </div>
  <div class="page">
    <p>Example: Adding Ajax (tabs.js)</p>
    <p>$(function() {</p>
    <p>var onTabClk = function() {</p>
    <p>var href = $(this).attr('href');</p>
    <p>$.getJSON(href, function(data) {</p>
    <p>document.title = data.title;</p>
    <p>$('#tab_' + data.tabNum).addClass('selected');</p>
    <p>$('#content').html(data.content);</p>
    <p>});</p>
    <p>return false;</p>
    <p>};</p>
    <p>$('#tab_header a').click(onTabClk);</p>
    <p>});</p>
    <p>Set tab content</p>
    <p>WebApps '10 - June 24, 2010 78</p>
  </div>
  <div class="page">
    <p>Example: Adding Ajax (tabs.js)</p>
    <p>$(function() {</p>
    <p>var onTabClk = function() {</p>
    <p>var href = $(this).attr('href');</p>
    <p>$.getJSON(href, function(data) {</p>
    <p>document.title = data.title;</p>
    <p>$('.selected').removeClass('selected');</p>
    <p>$('#tab_' + data.tabNum).addClass('selected');</p>
    <p>$('#content').html(data.content);</p>
    <p>});</p>
    <p>return false;</p>
    <p>};</p>
    <p>$('#tab_header a').click(onTabClk);</p>
    <p>});</p>
    <p>Remove &quot;selected&quot; CSS class from all elements</p>
    <p>WebApps '10 - June 24, 2010 79</p>
  </div>
  <div class="page">
    <p>Example: Adding Ajax (tabs.js)</p>
    <p>$(function() {</p>
    <p>var onTabClk = function() {</p>
    <p>var href = $(this).attr('href');</p>
    <p>$.getJSON(href, function(data) {</p>
    <p>document.title = data.title;</p>
    <p>$('.selected').removeClass('selected');</p>
    <p>$('#tab_' + data.tabNum).addClass('selected');</p>
    <p>$('#content').html(data.content);</p>
    <p>});</p>
    <p>return false;</p>
    <p>};</p>
    <p>$('#tab_header a').click(onTabClk);</p>
    <p>});</p>
    <p>WebApps '10 - June 24, 2010 80</p>
  </div>
  <div class="page">
    <p>Tabs Example Now Progressively Enhanced</p>
    <p>Tabs will load using Ajax in JS browsers</p>
    <p>WebApps '10 - June 24, 2010 81</p>
  </div>
  <div class="page">
    <p>Cost of Progressive Enhancement</p>
    <p>Requires duplication of view updates.</p>
    <p>Server-side using templates.</p>
    <p>Client-side using JavaScript</p>
    <p>WebApps '10 - June 24, 2010 82</p>
  </div>
  <div class="page">
    <p>Examples of Duplication: Page Title</p>
    <p>Server-side code</p>
    <p>Client-side code</p>
    <p>&lt;title&gt;&lt;?=$title?&gt;&lt;/title&gt;</p>
    <p>document.title = data.title;</p>
    <p>WebApps '10 - June 24, 2010 83</p>
  </div>
  <div class="page">
    <p>Examples of Duplication: Tab Headers</p>
    <p>Server-side code</p>
    <p>Client-side code</p>
    <p>&lt;li &lt;? if ($tab_num == 1) { ?&gt; class=&quot;selected&quot; &lt;? } ?&gt;</p>
    <p>id=&quot;tab_1&quot;&gt;&lt;a href=&quot;/tab1&quot;&gt;First Tab&lt;/a&gt;&lt;/li&gt;</p>
    <p>&lt;li &lt;? if ($tab_num == 2) { ?&gt; class=&quot;selected&quot; &lt;? } ?&gt;</p>
    <p>id=&quot;tab_2&quot;&gt;&lt;a href=&quot;/tab2&quot;&gt;Second Tab&lt;/a&gt;&lt;/li&gt;</p>
    <p>&lt;li &lt;? if ($tab_num == 3) { ?&gt; class=&quot;selected&quot; &lt;? } ?&gt;</p>
    <p>id=&quot;tab_3&quot;&gt;&lt;a href=&quot;/tab3&quot;&gt;Third Tab&lt;/a&gt;&lt;/li&gt;</p>
    <p>$('.selected').removeClass('selected');</p>
    <p>$('#tab_' + data.tabNum).addClass('selected');</p>
    <p>WebApps '10 - June 24, 2010 84</p>
  </div>
  <div class="page">
    <p>Examples of Duplication: Page Content</p>
    <p>Server-side code</p>
    <p>Client-side code</p>
    <p>&lt;div id=&quot;content&quot;&gt;&lt;?=$content?&gt;&lt;/div&gt;</p>
    <p>$('#content).html(data.content);</p>
    <p>WebApps '10 - June 24, 2010 85</p>
  </div>
  <div class="page">
    <p>Tabs Example Using SVC</p>
    <p>Instead of duplicating view update code, use SVC API to describe how to compose views</p>
    <p>WebApps '10 - June 24, 2010 86</p>
  </div>
  <div class="page">
    <p>Example: Non-SVC Controller</p>
    <p>&lt;?php</p>
    <p>class TabsExample extends Controller {</p>
    <p>function tab1() {</p>
    <p>$data = array('title' =&gt; 'First tab page',</p>
    <p>'tab_num' =&gt; 1,</p>
    <p>'content' =&gt; view('tab1_content'));</p>
    <p>return view('tab_template', $data);</p>
    <p>}</p>
    <p>function tab2() {</p>
    <p>$data = array('title' =&gt; 'Second tab page',</p>
    <p>'tab_num' =&gt; 2,</p>
    <p>'content' =&gt; view('tab2_content'));</p>
    <p>return view('tab_template', $data);</p>
    <p>}</p>
    <p>} WebApps '10 - June 24, 2010 87</p>
  </div>
  <div class="page">
    <p>Example: SVC Controller</p>
    <p>&lt;?php</p>
    <p>class TabsExample extends Controller {</p>
    <p>function tabbase() {</p>
    <p>$this-&gt;svc-&gt;initial(view('tabbase_template'));</p>
    <p>}</p>
    <p>function tab1() {</p>
    <p>//</p>
    <p>}</p>
    <p>function tab2() {</p>
    <p>// ...</p>
    <p>}</p>
    <p>}</p>
    <p>WebApps '10 - June 24, 2010 88</p>
  </div>
  <div class="page">
    <p>Example: SVC Controller</p>
    <p>&lt;?php</p>
    <p>class TabsExample extends Controller {</p>
    <p>function tabbase() {</p>
    <p>$this-&gt;svc-&gt;initial(view('tabbase_template'));</p>
    <p>}</p>
    <p>function tab1() {</p>
    <p>//</p>
    <p>}</p>
    <p>function tab2() {</p>
    <p>// ...</p>
    <p>}</p>
    <p>}</p>
    <p>tabbase() creates an SVC list consisting of only the template</p>
    <p>&quot;tabbase_template&quot;</p>
    <p>WebApps '10 - June 24, 2010 89</p>
  </div>
  <div class="page">
    <p>Example: Template (tabbase)</p>
    <p>&lt;html&gt;&lt;head&gt;</p>
    <p>&lt;title&gt;&lt;/title&gt;</p>
    <p>&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;style.css&quot;/&gt;</p>
    <p>&lt;/head&gt;&lt;body&gt;</p>
    <p>&lt;div id=&quot;tab_header&quot;&gt;</p>
    <p>&lt;h1&gt;Tabs Example&lt;/h1&gt;</p>
    <p>&lt;ul&gt;</p>
    <p>&lt;li id=&quot;tab_1&quot;&gt;&lt;a href=&quot;/tab1&quot;&gt;First Tab&lt;/a&gt;&lt;/li&gt;</p>
    <p>&lt;li id=&quot;tab_2&quot;&gt;&lt;a href=&quot;/tab2&quot;&gt;Second Tab&lt;/a&gt;&lt;/li&gt;</p>
    <p>&lt;li id=&quot;tab_3&quot;&gt;&lt;a href=&quot;/tab3&quot;&gt;Third Tab&lt;/a&gt;&lt;/li&gt;</p>
    <p>&lt;/ul&gt;</p>
    <p>&lt;/div&gt;</p>
    <p>&lt;div id=&quot;content&quot;&gt;&lt;/div&gt;</p>
    <p>&lt;/body&gt;&lt;/html&gt;</p>
    <p>WebApps '10 - June 24, 2010 90</p>
  </div>
  <div class="page">
    <p>Example: Template (tabbase)</p>
    <p>&lt;html&gt;&lt;head&gt;</p>
    <p>&lt;title&gt;&lt;/title&gt;</p>
    <p>&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;style.css&quot;/&gt;</p>
    <p>&lt;/head&gt;&lt;body&gt;</p>
    <p>&lt;div id=&quot;tab_header&quot;&gt;</p>
    <p>&lt;h1&gt;Tabs Example&lt;/h1&gt;</p>
    <p>&lt;ul&gt;</p>
    <p>&lt;li id=&quot;tab_1&quot;&gt;&lt;a href=&quot;/tab1&quot;&gt;First Tab&lt;/a&gt;&lt;/li&gt;</p>
    <p>&lt;li id=&quot;tab_2&quot;&gt;&lt;a href=&quot;/tab2&quot;&gt;Second Tab&lt;/a&gt;&lt;/li&gt;</p>
    <p>&lt;li id=&quot;tab_3&quot;&gt;&lt;a href=&quot;/tab3&quot;&gt;Third Tab&lt;/a&gt;&lt;/li&gt;</p>
    <p>&lt;/ul&gt;</p>
    <p>&lt;/div&gt;</p>
    <p>&lt;div id=&quot;content&quot;&gt;&lt;/div&gt;</p>
    <p>&lt;/body&gt;&lt;/html&gt;</p>
    <p>Like &quot;tab_template&quot;, but all content is empty.</p>
    <p>WebApps '10 - June 24, 2010 91</p>
  </div>
  <div class="page">
    <p>Example: SVC Controller</p>
    <p>&lt;?php</p>
    <p>class TabsExample extends Controller {</p>
    <p>function tabbase() {</p>
    <p>$this-&gt;svc-&gt;initial(view('tabbase_template'));</p>
    <p>}</p>
    <p>function tab1() {</p>
    <p>//</p>
    <p>}</p>
    <p>function tab2() {</p>
    <p>// ...</p>
    <p>}</p>
    <p>}</p>
    <p>WebApps '10 - June 24, 2010 92</p>
  </div>
  <div class="page">
    <p>Example: SVC Controller</p>
    <p>&lt;?php</p>
    <p>class TabsExample extends Controller {</p>
    <p>function tabbase() {</p>
    <p>$this-&gt;svc-&gt;initial(view('tabbase_template'));</p>
    <p>}</p>
    <p>function tab1() {</p>
    <p>$this-&gt;svc-&gt;initial('tabbase');</p>
    <p>}</p>
    <p>function tab2() {</p>
    <p>// ...</p>
    <p>}</p>
    <p>}</p>
    <p>WebApps '10 - June 24, 2010 93</p>
  </div>
  <div class="page">
    <p>Example: SVC Controller</p>
    <p>&lt;?php</p>
    <p>class TabsExample extends Controller {</p>
    <p>function tabbase() {</p>
    <p>$this-&gt;svc-&gt;initial(view('tabbase_template'));</p>
    <p>}</p>
    <p>function tab1() {</p>
    <p>$this-&gt;svc-&gt;initial('tabbase');</p>
    <p>}</p>
    <p>function tab2() {</p>
    <p>// ...</p>
    <p>}</p>
    <p>}</p>
    <p>Start with output of tabbase()</p>
    <p>WebApps '10 - June 24, 2010 94</p>
  </div>
  <div class="page">
    <p>Example: SVC Controller</p>
    <p>&lt;?php</p>
    <p>class TabsExample extends Controller {</p>
    <p>function tabbase() {</p>
    <p>$this-&gt;svc-&gt;initial(view('tabbase_template'));</p>
    <p>}</p>
    <p>function tab1() {</p>
    <p>$this-&gt;svc-&gt;initial('tabbase');</p>
    <p>$this-&gt;svc-&gt;text('title', 'First tab page');</p>
    <p>}</p>
    <p>function tab2() {</p>
    <p>// ...</p>
    <p>}</p>
    <p>} WebApps '10 - June 24, 2010 95</p>
  </div>
  <div class="page">
    <p>Example: SVC Controller</p>
    <p>&lt;?php</p>
    <p>class TabsExample extends Controller {</p>
    <p>function tabbase() {</p>
    <p>$this-&gt;svc-&gt;initial(view('tabbase_template'));</p>
    <p>}</p>
    <p>function tab1() {</p>
    <p>$this-&gt;svc-&gt;initial('tabbase');</p>
    <p>$this-&gt;svc-&gt;text('title', 'First tab page');</p>
    <p>}</p>
    <p>function tab2() {</p>
    <p>// ...</p>
    <p>}</p>
    <p>}</p>
    <p>Update the title</p>
    <p>WebApps '10 - June 24, 2010 96</p>
  </div>
  <div class="page">
    <p>Example: SVC Controller</p>
    <p>&lt;?php</p>
    <p>class TabsExample extends Controller {</p>
    <p>function tabbase() {</p>
    <p>$this-&gt;svc-&gt;initial(view('tabbase_template'));</p>
    <p>}</p>
    <p>function tab1() {</p>
    <p>$this-&gt;svc-&gt;initial('tabbase');</p>
    <p>$this-&gt;svc-&gt;text('title', 'First tab page');</p>
    <p>$this-&gt;svc-&gt;removeClass('.selected', 'selected');</p>
    <p>}</p>
    <p>...</p>
    <p>}</p>
    <p>WebApps '10 - June 24, 2010 97</p>
  </div>
  <div class="page">
    <p>Example: SVC Controller</p>
    <p>&lt;?php</p>
    <p>class TabsExample extends Controller {</p>
    <p>function tabbase() {</p>
    <p>$this-&gt;svc-&gt;initial(view('tabbase_template'));</p>
    <p>}</p>
    <p>function tab1() {</p>
    <p>$this-&gt;svc-&gt;initial('tabbase');</p>
    <p>$this-&gt;svc-&gt;text('title', 'First tab page');</p>
    <p>$this-&gt;svc-&gt;removeClass('.selected', 'selected');</p>
    <p>}</p>
    <p>...</p>
    <p>} Remove the &quot;selected&quot;' class from all elements to clear tab highlighting</p>
    <p>WebApps '10 - June 24, 2010 98</p>
  </div>
  <div class="page">
    <p>Example: SVC Controller</p>
    <p>&lt;?php</p>
    <p>class TabsExample extends Controller {</p>
    <p>function tabbase() {</p>
    <p>$this-&gt;svc-&gt;initial(view('tabbase_template'));</p>
    <p>}</p>
    <p>function tab1() {</p>
    <p>$this-&gt;svc-&gt;initial('tabbase');</p>
    <p>$this-&gt;svc-&gt;text('title', 'First tab page');</p>
    <p>$this-&gt;svc-&gt;removeClass('.selected', 'selected');</p>
    <p>$this-&gt;svc-&gt;addClass('#tab_1', 'selected');</p>
    <p>}</p>
    <p>...</p>
    <p>}</p>
    <p>WebApps '10 - June 24, 2010 99</p>
  </div>
  <div class="page">
    <p>Example: SVC Controller</p>
    <p>&lt;?php</p>
    <p>class TabsExample extends Controller {</p>
    <p>function tabbase() {</p>
    <p>$this-&gt;svc-&gt;initial(view('tabbase_template'));</p>
    <p>}</p>
    <p>function tab1() {</p>
    <p>$this-&gt;svc-&gt;initial('tabbase');</p>
    <p>$this-&gt;svc-&gt;text('title', 'First tab page');</p>
    <p>$this-&gt;svc-&gt;removeClass('.selected', 'selected');</p>
    <p>$this-&gt;svc-&gt;addClass('#tab_1', 'selected');</p>
    <p>}</p>
    <p>...</p>
    <p>} Add &quot;selected&quot; class to the first tab.</p>
    <p>WebApps '10 - June 24, 2010 100</p>
  </div>
  <div class="page">
    <p>Example: SVC Controller</p>
    <p>&lt;?php</p>
    <p>class TabsExample extends Controller {</p>
    <p>function tabbase() {</p>
    <p>$this-&gt;svc-&gt;initial(view('tabbase_template'));</p>
    <p>}</p>
    <p>function tab1() {</p>
    <p>$this-&gt;svc-&gt;initial('tabbase');</p>
    <p>$this-&gt;svc-&gt;text('title', 'First tab page');</p>
    <p>$this-&gt;svc-&gt;removeClass('.selected', 'selected');</p>
    <p>$this-&gt;svc-&gt;addClass('#tab_1', 'selected');</p>
    <p>$this-&gt;svc-&gt;html('#content', view('tab1_content'));</p>
    <p>}</p>
    <p>...</p>
    <p>} WebApps '10 - June 24, 2010 101</p>
  </div>
  <div class="page">
    <p>Example: SVC Controller</p>
    <p>&lt;?php</p>
    <p>class TabsExample extends Controller {</p>
    <p>function tabbase() {</p>
    <p>$this-&gt;svc-&gt;initial(view('tabbase_template'));</p>
    <p>}</p>
    <p>function tab1() {</p>
    <p>$this-&gt;svc-&gt;initial('tabbase');</p>
    <p>$this-&gt;svc-&gt;text('title', 'First tab page');</p>
    <p>$this-&gt;svc-&gt;removeClass('.selected', 'selected');</p>
    <p>$this-&gt;svc-&gt;addClass('#tab_1', 'selected');</p>
    <p>$this-&gt;svc-&gt;html('#content', view('tab1_content'));</p>
    <p>}</p>
    <p>...</p>
    <p>} Update tab content</p>
    <p>WebApps '10 - June 24, 2010 102</p>
  </div>
  <div class="page">
    <p>Example: SVC Controller</p>
    <p>function tab1() {</p>
    <p>$this-&gt;svc-&gt;initial('tabbase');</p>
    <p>$this-&gt;svc-&gt;text('title', 'First tab page');</p>
    <p>$this-&gt;svc-&gt;removeClass('.selected', 'selected');</p>
    <p>$this-&gt;svc-&gt;addClass('#tab_1', 'selected');</p>
    <p>$this-&gt;svc-&gt;html('#content', view('tab1_content'));</p>
    <p>}</p>
    <p>function tab2() {</p>
    <p>$this-&gt;svc-&gt;initial('tabbase');</p>
    <p>$this-&gt;svc-&gt;text('title', 'Second tab page');</p>
    <p>$this-&gt;svc-&gt;removeClass('.selected', 'selected');</p>
    <p>$this-&gt;svc-&gt;addClass('#tab_2', 'selected');</p>
    <p>$this-&gt;svc-&gt;html('#content', view('tab2_content'));</p>
    <p>}</p>
    <p>} WebApps '10 - June 24, 2010 103</p>
  </div>
  <div class="page">
    <p>Example: SVC Controller</p>
    <p>function tab1() {</p>
    <p>$this-&gt;svc-&gt;initial('tabbase');</p>
    <p>$this-&gt;svc-&gt;text('title', 'First tab page');</p>
    <p>$this-&gt;svc-&gt;removeClass('.selected', 'selected');</p>
    <p>$this-&gt;svc-&gt;addClass('#tab_1', 'selected');</p>
    <p>$this-&gt;svc-&gt;html('#content', view('tab1_content'));</p>
    <p>}</p>
    <p>function tab2() {</p>
    <p>$this-&gt;svc-&gt;initial('tabbase');</p>
    <p>$this-&gt;svc-&gt;text('title', 'Second tab page');</p>
    <p>$this-&gt;svc-&gt;removeClass('.selected', 'selected');</p>
    <p>$this-&gt;svc-&gt;addClass('#tab_2', 'selected');</p>
    <p>$this-&gt;svc-&gt;html('#content', view('tab2_content'));</p>
    <p>}</p>
    <p>}</p>
    <p>Update second tab in the same way</p>
    <p>WebApps '10 - June 24, 2010 104</p>
  </div>
  <div class="page">
    <p>Example: SVC Controller</p>
    <p>function tab1() {</p>
    <p>$this-&gt;svc-&gt;initial('tabbase');</p>
    <p>$this-&gt;svc-&gt;text('title', 'First tab page');</p>
    <p>$this-&gt;svc-&gt;removeClass('.selected', 'selected');</p>
    <p>$this-&gt;svc-&gt;addClass('#tab_1', 'selected');</p>
    <p>$this-&gt;svc-&gt;html('#content', view('tab1_content'));</p>
    <p>}</p>
    <p>function tab2() {</p>
    <p>$this-&gt;svc-&gt;initial('tabbase');</p>
    <p>$this-&gt;svc-&gt;text('title', 'Second tab page');</p>
    <p>$this-&gt;svc-&gt;removeClass('.selected', 'selected');</p>
    <p>$this-&gt;svc-&gt;addClass('#tab_2', 'selected');</p>
    <p>$this-&gt;svc-&gt;html('#content', view('tab2_content'));</p>
    <p>}</p>
    <p>}</p>
    <p>Duplicated code! We can factor it out.</p>
    <p>WebApps '10 - June 24, 2010 105</p>
  </div>
  <div class="page">
    <p>Example: SVC Controller</p>
    <p>function tab1() {</p>
    <p>this-&gt;_updateTab('First tab page', 1, 'tab1_content');</p>
    <p>}</p>
    <p>function tab2() {</p>
    <p>$this-&gt;_updateTab('Second tab page', 1, 'tab2_content');</p>
    <p>}</p>
    <p>function _updateTab($title, $num, $content) {</p>
    <p>$this-&gt;svc-&gt;initial('tabbase');</p>
    <p>$this-&gt;svc-&gt;text('title', $title);</p>
    <p>$this-&gt;svc-&gt;removeClass('.selected', 'selected');</p>
    <p>$this-&gt;svc-&gt;addClass('#tab_' . $num, 'selected');</p>
    <p>$this-&gt;svc-&gt;html('#content', view($content));</p>
    <p>}</p>
    <p>}</p>
    <p>WebApps '10 - June 24, 2010 106</p>
  </div>
  <div class="page">
    <p>SVC Tabs Example: Done!</p>
    <p>SVC framework will automatically Ajaxify tab loads.</p>
    <p>SVC outputs JSON in response to Ajax requests</p>
    <p>Transformations are applied on client by SVC JS code</p>
    <p>SVC outputs HTML in response to non-Ajax requests</p>
    <p>Transformations are applied on server-side by SVC code.</p>
    <p>No JavaScript needs to be written</p>
    <p>WebApps '10 - June 24, 2010 107</p>
  </div>
</Presentation>

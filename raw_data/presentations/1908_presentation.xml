<?xml version="1.0" ?>
<Presentation>
  <div class="page">
    <p>Towards Fast and Scalable Graph Pattern Mining</p>
    <p>Anand Iyer , Zaoxing Liu , Xin Jin , Shivaram Venkataraman, Vladimir Braverman , Ion Stoica</p>
    <p>UC Berkeley  Johns Hopkins University  Microsoft Research / University of Wisconsin</p>
    <p>HotCloud, July 09, 2018</p>
  </div>
  <div class="page">
    <p>Graphs popular in big data analytics</p>
  </div>
  <div class="page">
    <p>Graphs popular in big data analytics</p>
  </div>
  <div class="page">
    <p>Graphs popular in big data analytics</p>
  </div>
  <div class="page"/>
  <div class="page">
    <p>Graph Analytics</p>
  </div>
  <div class="page">
    <p>Graph Analytics</p>
    <p>Processing Algorithms</p>
  </div>
  <div class="page">
    <p>Graph Analytics</p>
    <p>Processing Algorithms</p>
    <p>PageRank</p>
    <p>Connected Components</p>
  </div>
  <div class="page">
    <p>Graph Analytics</p>
    <p>Processing Algorithms Mining Algorithms</p>
    <p>PageRank</p>
    <p>Connected Components</p>
  </div>
  <div class="page">
    <p>Graph Analytics</p>
    <p>Processing Algorithms Mining Algorithms</p>
    <p>PageRank</p>
    <p>Connected Components Motifs</p>
    <p>Cliques</p>
  </div>
  <div class="page">
    <p>Graph Analytics</p>
    <p>Processing Algorithms Mining Algorithms</p>
    <p>PageRank</p>
    <p>Connected Components Motifs</p>
    <p>Cliques</p>
  </div>
  <div class="page">
    <p>Graph Analytics: State-of-the-Art</p>
    <p>Processing Algorithms Mining Algorithms</p>
    <p>PageRank</p>
    <p>Connected Components Motifs</p>
    <p>Cliques</p>
    <p>Computes properties of the underlying graph</p>
    <p>Discovers structural patterns in the underlying graph</p>
  </div>
  <div class="page">
    <p>Graph Analytics: State-of-the-Art</p>
    <p>Processing Algorithms Mining Algorithms</p>
    <p>PageRank</p>
    <p>Connected Components Motifs</p>
    <p>Cliques</p>
    <p>Easy to implement  Massively parallelizable  Can handle large graphs</p>
    <p>Computes properties of the underlying graph</p>
    <p>Discovers structural patterns in the underlying graph</p>
  </div>
  <div class="page">
    <p>Graph Analytics: State-of-the-Art</p>
    <p>Processing Algorithms Mining Algorithms</p>
    <p>PageRank</p>
    <p>Connected Components Motifs</p>
    <p>Cliques</p>
    <p>Easy to implement  Massively parallelizable  Can handle large graphs</p>
    <p>Efficient custom algorithms  Exponential intermediate data  Limited to small graphs</p>
    <p>Computes properties of the underlying graph</p>
    <p>Discovers structural patterns in the underlying graph</p>
  </div>
  <div class="page">
    <p>Graph Analytics: State-of-the-Art</p>
    <p>Processing Algorithms Mining Algorithms</p>
    <p>PageRank</p>
    <p>Connected Components Motifs</p>
    <p>Cliques</p>
    <p>Easy to implement  Massively parallelizable  Can handle large graphs</p>
    <p>Efficient custom algorithms  Exponential intermediate data  Limited to small graphs</p>
    <p>Challenging to mine patterns in large graphs</p>
    <p>Computes properties of the underlying graph</p>
    <p>Discovers structural patterns in the underlying graph</p>
  </div>
  <div class="page">
    <p>Graph Analytics: Processing vs Mining Lo</p>
    <p>g sc</p>
    <p>al e</p>
    <p># Edges Computation Time</p>
  </div>
  <div class="page">
    <p>Graph Analytics: Processing vs Mining</p>
    <p>ill io</p>
    <p>n</p>
    <p>s</p>
    <p>PageRank</p>
    <p>Lo g</p>
    <p>sc al</p>
    <p>e</p>
    <p># Edges Computation Time</p>
  </div>
  <div class="page">
    <p>Graph Analytics: Processing vs Mining</p>
    <p>ill io</p>
    <p>n</p>
    <p>s</p>
    <p>PageRank</p>
    <p>Lo g</p>
    <p>sc al</p>
    <p>e</p>
    <p># Edges Computation Time</p>
  </div>
  <div class="page">
    <p>Graph Analytics: Processing vs Mining</p>
    <p>ill io</p>
    <p>n</p>
    <p>s</p>
    <p>PageRank</p>
    <p>~1 b</p>
    <p>ill io</p>
    <p>n</p>
    <p>ou rs</p>
    <p>Motifs with size = 3</p>
    <p>Lo g</p>
    <p>sc al</p>
    <p>e</p>
    <p># Edges Computation Time</p>
    <p>Arabesque (SOSP15)</p>
  </div>
  <div class="page">
    <p>Graph Analytics: Processing vs Mining</p>
    <p>ill io</p>
    <p>n</p>
    <p>s</p>
    <p>PageRank</p>
    <p>~1 b</p>
    <p>ill io</p>
    <p>n</p>
    <p>ou rs</p>
    <p>Motifs with size = 3</p>
    <p>Lo g</p>
    <p>sc al</p>
    <p>e</p>
    <p># Edges Computation Time</p>
    <p>Can graph pattern mining be made both fast and scalable?</p>
    <p>Arabesque (SOSP15)</p>
  </div>
  <div class="page">
    <p>Many mining tasks ask for the number of occurrences and do not need exact answers</p>
  </div>
  <div class="page">
    <p>Leverage approximation for graph pattern mining</p>
    <p>Many mining tasks ask for the number of occurrences and do not need exact answers</p>
  </div>
  <div class="page">
    <p>General approach: Apply algorithm on subset(s) (sample) of the input data</p>
    <p>Approximate Analytics</p>
  </div>
  <div class="page">
    <p>General approach: Apply algorithm on subset(s) (sample) of the input data</p>
    <p>Approximate Analytics</p>
    <p>graph</p>
  </div>
  <div class="page">
    <p>General approach: Apply algorithm on subset(s) (sample) of the input data</p>
    <p>Approximate Analytics</p>
    <p>edge sampling (p=0.5)</p>
    <p>graph</p>
  </div>
  <div class="page">
    <p>General approach: Apply algorithm on subset(s) (sample) of the input data</p>
    <p>Approximate Analytics</p>
    <p>edge sampling (p=0.5)</p>
    <p>graph</p>
    <p>e = 1</p>
    <p>triangle counting</p>
  </div>
  <div class="page">
    <p>General approach: Apply algorithm on subset(s) (sample) of the input data</p>
    <p>Approximate Analytics</p>
    <p>edge sampling (p=0.5)</p>
    <p>graph</p>
    <p>e = 1</p>
    <p>triangle counting</p>
    <p>result</p>
    <p>$ % 2 = 2</p>
  </div>
  <div class="page">
    <p>Answer: 10</p>
    <p>General approach: Apply algorithm on subset(s) (sample) of the input data</p>
    <p>Approximate Analytics</p>
    <p>edge sampling (p=0.5)</p>
    <p>graph</p>
    <p>e = 1</p>
    <p>triangle counting</p>
    <p>result</p>
    <p>$ % 2 = 2</p>
  </div>
  <div class="page">
    <p>Answer: 10</p>
    <p>General approach: Apply algorithm on subset(s) (sample) of the input data</p>
    <p>Approximate Analytics</p>
    <p>edge sampling (p=0.5)</p>
    <p>graph</p>
    <p>e = 1</p>
    <p>triangle counting</p>
    <p>result</p>
    <p>$ % 2 = 2</p>
    <p>Applying exact algorithm on sampled graph(s) not the right approach for pattern mining</p>
  </div>
  <div class="page">
    <p>Approximation by Sampling Patterns</p>
    <p>graph</p>
    <p>edge stream: (0,1), (0,2), (0,3), (0,4), (1,2), (1,3), (1,4), (2,3), (2,4), (3,4) Pavan et al. Counting and sampling triangles from a graph stream, VLDB 2013</p>
  </div>
  <div class="page">
    <p>E0</p>
    <p>Approximation by Sampling Patterns</p>
    <p>graph</p>
    <p>edge stream: (0,1), (0,2), (0,3), (0,4), (1,2), (1,3), (1,4), (2,3), (2,4), (3,4) Pavan et al. Counting and sampling triangles from a graph stream, VLDB 2013</p>
  </div>
  <div class="page">
    <p>E0</p>
    <p>Approximation by Sampling Patterns</p>
    <p>graph</p>
    <p>edge stream: (0,1), (0,2), (0,3), (0,4), (1,2), (1,3), (1,4), (2,3), (2,4), (3,4) Pavan et al. Counting and sampling triangles from a graph stream, VLDB 2013</p>
  </div>
  <div class="page">
    <p>E0</p>
    <p>Approximation by Sampling Patterns</p>
    <p>graph</p>
    <p>edge stream: (0,1), (0,2), (0,3), (0,4), (1,2), (1,3), (1,4), (2,3), (2,4), (3,4) Pavan et al. Counting and sampling triangles from a graph stream, VLDB 2013</p>
  </div>
  <div class="page">
    <p>E0</p>
    <p>Approximation by Sampling Patterns</p>
    <p>graph</p>
    <p>edge stream: (0,1), (0,2), (0,3), (0,4), (1,2), (1,3), (1,4), (2,3), (2,4), (3,4) Pavan et al. Counting and sampling triangles from a graph stream, VLDB 2013</p>
  </div>
  <div class="page">
    <p>E0</p>
    <p>Approximation by Sampling Patterns</p>
    <p>graph</p>
    <p>edge stream: (0,1), (0,2), (0,3), (0,4), (1,2), (1,3), (1,4), (2,3), (2,4), (3,4) Pavan et al. Counting and sampling triangles from a graph stream, VLDB 2013</p>
  </div>
  <div class="page">
    <p>E0</p>
    <p>Approximation by Sampling Patterns</p>
    <p>graph</p>
    <p>edge stream: (0,1), (0,2), (0,3), (0,4), (1,2), (1,3), (1,4), (2,3), (2,4), (3,4) Pavan et al. Counting and sampling triangles from a graph stream, VLDB 2013</p>
  </div>
  <div class="page">
    <p>E0</p>
    <p>Approximation by Sampling Patterns</p>
    <p>graph</p>
    <p>edge stream: (0,1), (0,2), (0,3), (0,4), (1,2), (1,3), (1,4), (2,3), (2,4), (3,4) Pavan et al. Counting and sampling triangles from a graph stream, VLDB 2013</p>
  </div>
  <div class="page">
    <p>E0</p>
    <p>Approximation by Sampling Patterns</p>
    <p>graph</p>
    <p>edge stream: (0,1), (0,2), (0,3), (0,4), (1,2), (1,3), (1,4), (2,3), (2,4), (3,4) Pavan et al. Counting and sampling triangles from a graph stream, VLDB 2013</p>
  </div>
  <div class="page">
    <p>E0</p>
    <p>Approximation by Sampling Patterns</p>
    <p>graph</p>
    <p>edge stream: (0,1), (0,2), (0,3), (0,4), (1,2), (1,3), (1,4), (2,3), (2,4), (3,4) Pavan et al. Counting and sampling triangles from a graph stream, VLDB 2013</p>
  </div>
  <div class="page">
    <p>E0</p>
    <p>Approximation by Sampling Patterns</p>
    <p>graph</p>
    <p>edge stream: (0,1), (0,2), (0,3), (0,4), (1,2), (1,3), (1,4), (2,3), (2,4), (3,4) Pavan et al. Counting and sampling triangles from a graph stream, VLDB 2013</p>
  </div>
  <div class="page">
    <p>E0</p>
    <p>Approximation by Sampling Patterns</p>
    <p>graph</p>
    <p>edge stream: (0,1), (0,2), (0,3), (0,4), (1,2), (1,3), (1,4), (2,3), (2,4), (3,4) Pavan et al. Counting and sampling triangles from a graph stream, VLDB 2013</p>
  </div>
  <div class="page">
    <p>! = 1 10</p>
    <p>E0</p>
    <p>Approximation by Sampling Patterns</p>
    <p>graph</p>
    <p>edge stream: (0,1), (0,2), (0,3), (0,4), (1,2), (1,3), (1,4), (2,3), (2,4), (3,4) Pavan et al. Counting and sampling triangles from a graph stream, VLDB 2013</p>
  </div>
  <div class="page">
    <p>! = 1 10</p>
    <p>E0</p>
    <p>Approximation by Sampling Patterns</p>
    <p>graph</p>
    <p>edge stream: (0,1), (0,2), (0,3), (0,4), (1,2), (1,3), (1,4), (2,3), (2,4), (3,4)</p>
    <p>'( = 40</p>
    <p>Pavan et al. Counting and sampling triangles from a graph stream, VLDB 2013</p>
  </div>
  <div class="page">
    <p>! = 1 10</p>
    <p>E0</p>
    <p>Approximation by Sampling Patterns</p>
    <p>neighborhood sampling</p>
    <p>graph</p>
    <p>edge stream: (0,1), (0,2), (0,3), (0,4), (1,2), (1,3), (1,4), (2,3), (2,4), (3,4)</p>
    <p>'( = 40</p>
    <p>Pavan et al. Counting and sampling triangles from a graph stream, VLDB 2013</p>
  </div>
  <div class="page">
    <p>! = 1 10</p>
    <p>E0</p>
    <p>Approximation by Sampling Patterns</p>
    <p>neighborhood sampling</p>
    <p>graph</p>
    <p>E1</p>
    <p>E2</p>
    <p>E3</p>
    <p>edge stream: (0,1), (0,2), (0,3), (0,4), (1,2), (1,3), (1,4), (2,3), (2,4), (3,4)</p>
    <p>'( = 40</p>
    <p>Pavan et al. Counting and sampling triangles from a graph stream, VLDB 2013</p>
  </div>
  <div class="page">
    <p>! = 1 10</p>
    <p>E0</p>
    <p>Approximation by Sampling Patterns</p>
    <p>estimator (r=4)</p>
    <p>neighborhood sampling</p>
    <p>graph</p>
    <p>E1</p>
    <p>E2</p>
    <p>E3</p>
    <p>edge stream: (0,1), (0,2), (0,3), (0,4), (1,2), (1,3), (1,4), (2,3), (2,4), (3,4)</p>
    <p>'( = 40</p>
    <p>result</p>
    <p>-./ '+ = 10</p>
    <p>'/ = 0</p>
    <p>'0 = 0</p>
    <p>'1 = 0</p>
    <p>Pavan et al. Counting and sampling triangles from a graph stream, VLDB 2013</p>
  </div>
  <div class="page">
    <p>Potential Benefits  16 node Apache Spark cluster  Two graphs: Live Journal (68.9B), Twitter (1.47B)  Count 3-Motifs (2 patterns: triangle, 3-chain)  Set error to 5%</p>
  </div>
  <div class="page">
    <p>Potential Benefits  16 node Apache Spark cluster  Two graphs: Live Journal (68.9B), Twitter (1.47B)  Count 3-Motifs (2 patterns: triangle, 3-chain)  Set error to 5%</p>
  </div>
  <div class="page">
    <p>Potential Benefits  16 node Apache Spark cluster  Two graphs: Live Journal (68.9B), Twitter (1.47B)  Count 3-Motifs (2 patterns: triangle, 3-chain)  Set error to 5%</p>
  </div>
  <div class="page">
    <p>Potential Benefits  16 node Apache Spark cluster  Two graphs: Live Journal (68.9B), Twitter (1.47B)  Count 3-Motifs (2 patterns: triangle, 3-chain)  Set error to 5%</p>
  </div>
  <div class="page">
    <p>Challenges</p>
    <p>Building a General Purpose Approximate Graph Mining System</p>
  </div>
  <div class="page">
    <p>Challenges</p>
    <p>Building a General Purpose Approximate Graph Mining System</p>
    <p>General Patterns</p>
  </div>
  <div class="page">
    <p>Challenges</p>
    <p>Building a General Purpose Approximate Graph Mining System</p>
    <p>General Patterns</p>
    <p>Distributed Settings</p>
  </div>
  <div class="page">
    <p>Challenges</p>
    <p>Building a General Purpose Approximate Graph Mining System</p>
    <p>General Patterns</p>
    <p>Distributed Settings</p>
    <p>Error Estimation</p>
  </div>
  <div class="page">
    <p>Challenges</p>
    <p>Building a General Purpose Approximate Graph Mining System</p>
    <p>General Patterns</p>
    <p>Distributed Settings</p>
    <p>Error Estimation</p>
    <p>Handling Updates</p>
  </div>
  <div class="page">
    <p>Challenge #1: General Patterns Problem: Neighborhood sampling is for triangle counting Break down neighborhood sampling into two phases:  Sampling phase  Closing phase</p>
    <p>! = 1 10</p>
    <p>E0 0</p>
    <p>estimator (r=4)</p>
    <p>neighborhood sampling</p>
    <p>graph</p>
    <p>E1</p>
    <p>E2</p>
    <p>E3</p>
    <p>'( = 40</p>
    <p>result</p>
    <p>-./ '+ = 10</p>
    <p>'/ = 0</p>
    <p>'0 = 0</p>
    <p>'1 = 0</p>
  </div>
  <div class="page">
    <p>Challenge #1: General Patterns Problem: Neighborhood sampling is for triangle counting Break down neighborhood sampling into two phases:  Sampling phase  Closing phase</p>
    <p>! = 1 10</p>
    <p>E0 0</p>
    <p>estimator (r=4)</p>
    <p>neighborhood sampling</p>
    <p>graph</p>
    <p>E1</p>
    <p>E2</p>
    <p>E3</p>
    <p>'( = 40</p>
    <p>result</p>
    <p>-./ '+ = 10</p>
    <p>'/ = 0</p>
    <p>'0 = 0</p>
    <p>'1 = 0 Can we restrict the implementation using a simple API ?</p>
    <p>How can we analyze programs written using the API?</p>
  </div>
  <div class="page">
    <p>Challenge #2: Distributed Setting Problem: Neighborhood sampling is for a single machine</p>
  </div>
  <div class="page">
    <p>Challenge #2: Distributed Setting</p>
    <p>graph</p>
    <p>Problem: Neighborhood sampling is for a single machine</p>
  </div>
  <div class="page">
    <p>Challenge #2: Distributed Setting</p>
    <p>graph</p>
    <p>subgraph 0</p>
    <p>partial count c0 (using r estimators)</p>
    <p>subgraph 1</p>
    <p>partial count c1 (using r estimators)</p>
    <p>subgraph 2</p>
    <p>partial count c2 (using r estimators)</p>
    <p>Problem: Neighborhood sampling is for a single machine</p>
  </div>
  <div class="page">
    <p>Challenge #2: Distributed Setting</p>
    <p>graph</p>
    <p>map: w(=3) workers</p>
    <p>subgraph 0</p>
    <p>partial count c0 (using r estimators)</p>
    <p>subgraph 1</p>
    <p>partial count c1 (using r estimators)</p>
    <p>subgraph 2</p>
    <p>partial count c2 (using r estimators)</p>
    <p>Problem: Neighborhood sampling is for a single machine</p>
  </div>
  <div class="page">
    <p>Challenge #2: Distributed Setting</p>
    <p>graph</p>
    <p>map: w(=3) workers</p>
    <p>subgraph 0</p>
    <p>partial count c0 (using r estimators)</p>
    <p>subgraph 1</p>
    <p>partial count c1 (using r estimators)</p>
    <p>subgraph 2</p>
    <p>partial count c2 (using r estimators)</p>
    <p>Problem: Neighborhood sampling is for a single machine</p>
  </div>
  <div class="page">
    <p>Challenge #2: Distributed Setting</p>
    <p>graph ! &quot;#$</p>
    <p>%&amp;' (&quot;</p>
    <p>map: w(=3) workers</p>
    <p>subgraph 0</p>
    <p>partial count c0 (using r estimators)</p>
    <p>subgraph 1</p>
    <p>partial count c1 (using r estimators)</p>
    <p>subgraph 2</p>
    <p>partial count c2 (using r estimators)</p>
    <p>Problem: Neighborhood sampling is for a single machine</p>
  </div>
  <div class="page">
    <p>Challenge #2: Distributed Setting</p>
    <p>graph ! &quot;#$</p>
    <p>%&amp;' (&quot;</p>
    <p>map: w(=3) workers reduce</p>
    <p>subgraph 0</p>
    <p>partial count c0 (using r estimators)</p>
    <p>subgraph 1</p>
    <p>partial count c1 (using r estimators)</p>
    <p>subgraph 2</p>
    <p>partial count c2 (using r estimators)</p>
    <p>Problem: Neighborhood sampling is for a single machine</p>
  </div>
  <div class="page">
    <p>Challenge #2: Distributed Setting</p>
    <p>graph ! &quot;#$</p>
    <p>%&amp;' (&quot;</p>
    <p>map: w(=3) workers reduce</p>
    <p>subgraph 0</p>
    <p>partial count c0 (using r estimators)</p>
    <p>subgraph 1</p>
    <p>partial count c1 (using r estimators)</p>
    <p>subgraph 2</p>
    <p>partial count c2 (using r estimators)</p>
    <p>)(+)</p>
    <p>Problem: Neighborhood sampling is for a single machine</p>
  </div>
  <div class="page">
    <p>Challenge #2: Distributed Setting</p>
    <p>graph ! &quot;#$</p>
    <p>%&amp;' (&quot;</p>
    <p>map: w(=3) workers reduce</p>
    <p>subgraph 0</p>
    <p>partial count c0 (using r estimators)</p>
    <p>subgraph 1</p>
    <p>partial count c1 (using r estimators)</p>
    <p>subgraph 2</p>
    <p>partial count c2 (using r estimators)</p>
    <p>)(+)</p>
    <p>Problem: Neighborhood sampling is for a single machine</p>
    <p>How do we compute f(w) for any pattern? How does f(w) affect error?</p>
  </div>
  <div class="page">
    <p>Challenge #3: Building Error-Latency Profile Problem: Given a time / error bound, how many estimators should we use? Need to build two profiles:  Time vs #estimators  Error vs #estimators Nave approach:  Exhaustively run every possible point (infeasible)</p>
  </div>
  <div class="page">
    <p>Building Estimators vs Time Profile</p>
    <p>R u n ti m</p>
    <p>e (</p>
    <p>m in</p>
    <p>)</p>
    <p>No. of Estimators</p>
    <p>Twitter Graph</p>
    <p>Time complexity linear in number of estimators</p>
  </div>
  <div class="page">
    <p>Building Estimators vs Error Profile</p>
    <p>E rr</p>
    <p>o r</p>
    <p>R a te</p>
    <p>( %</p>
    <p>)</p>
    <p>No. of Estimators</p>
    <p>Twitter Graph</p>
    <p>Error complexity non-linear in number of estimators</p>
  </div>
  <div class="page">
    <p>Building Estimators vs Error Profile</p>
    <p>E rr</p>
    <p>o r</p>
    <p>R a te</p>
    <p>( %</p>
    <p>)</p>
    <p>No. of Estimators</p>
    <p>Twitter Graph</p>
    <p>Error complexity non-linear in number of estimators</p>
    <p>Leverage techniques like experiment design/Bayesian optimization? How do we avoid the need to know the ground truth?</p>
  </div>
  <div class="page">
    <p>Challenge #4: Updates Problem: Graphs and queries can be updated/refined Several systems challenges:  Incremental pattern mining</p>
    <p>Can the error-latency profiles be updated?</p>
    <p>Caching  Re-use results  Pre-computation</p>
  </div>
  <div class="page">
    <p>Conclusion  Approximation is a promising solution for pattern mining</p>
    <p>Significant benefits, and can handle much larger graphs   but cannot output all instances of the pattern</p>
    <p>Several challenges in realizing it  How to extend the technique to general patterns?  How to do approximate pattern mining in a distributed setting?  How do we estimate the error?  How do we handle updates?</p>
    <p>http://www.cs.berkeley.edu/~api api@cs.berkeley.edu</p>
  </div>
</Presentation>

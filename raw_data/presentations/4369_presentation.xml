<?xml version="1.0" ?>
<Presentation>
  <div class="page">
    <p>The Cutting EDGE of Router Configuration</p>
    <p>D. Caldwell, A. Gilbert, J. Gottlieb, A. Greenberg, G. Hjalmtysson, and J.</p>
    <p>Rexford AT&amp;T LabsResearch; Florham Park, NJ</p>
    <p>Manual configuration: Type first, and ask questions later</p>
  </div>
  <div class="page">
    <p>Manual Configuration</p>
    <p>Dangerous  Typo in routing policy: black hole  Wrong OSPF area: no traffic on link  Missing packet filter: DoS vulnerability</p>
    <p>Expensive  Delays in deploying equipment  Hiring &amp; training skilled engineers  Lock-in to the router vendor</p>
    <p>Disruptive  Half of network outages (Yankee Group)  BGP routing anomalies (SIGCOMM02)  Failures of Internet services (USITS03)</p>
  </div>
  <div class="page">
    <p>Why is the Situation So Bad?</p>
    <p>Networking field: emphasis on speed &amp; features  Not manageability and simplicity  Constant change, without revisiting the design  Oodles of complex protocols and tunable parameters</p>
    <p>Router vendors: lack of abstraction  Assembly language commands  Element-level configuration  Low-level mechanisms, not intent</p>
    <p>Network administrators: melting under complexity  Learning on the job  Struggling just to keep up  The path to automation is overwhelming</p>
  </div>
  <div class="page">
    <p>Whats a Networking Researcher to Do?</p>
    <p>Myth: Only large service providers care.  Large enterprise networks care, big time  Other networks problems affect the user</p>
    <p>Myth: No research lives here.  The state-of-the-art is really pitiful (please help!)  Config languages, protocol modeling, data mining,</p>
    <p>Myth: I cant play without special access.  Router testbeds, protocol modeling, simplicity, etc.  Get data from your campus/regional administrator</p>
    <p>Myth: Campus/regional networks are too easy.  Maybe it is harder than we think  If easy, please scale this simplicity to larger networks!</p>
  </div>
  <div class="page">
    <p>Our Goal: Automated Configuration</p>
    <p>How to transition an existing network?  How to get value as you move from here to there?  Our approach: detailed analysis of configuration data</p>
    <p>DB interface Serial10/1/0/12:0 description CBB Customer ip address 12.7.35.1 255.255.255.252 ip access-group 666 in ! router bgp 7018 neighbor 12.7.35.2 remote-as 18585 neighbor 12.7.35.2 route-map CUST-FACE in neighbor 12.7.35.2 route-map FULL-ROUTES out neighbor 12.7.35.2 distribute-list 13 in neighbor 12.7.35.2 soft-reconfigurationinbound !</p>
    <p>What is your AS number? What export policy do you want? Do you want a dynamic default? What are your address blocks? Do you need to receive communities?</p>
    <p>query</p>
    <p>template</p>
    <p>R U L E S</p>
    <p>configlet</p>
    <p>Technical Questions (TQ)</p>
    <p>interface &lt;name&gt; description &lt;cust name&gt; ip address &lt;addr&gt; &lt;mask&gt; ip access-group &lt;acl&gt; in ! router bgp 7018 neighbor &lt;ip&gt; remote-as &lt;asn&gt; neighbor &lt;ip&gt; route-map CUST-FACE in neighbor &lt;ip&gt; route-map &lt;outmap&gt; out neighbor &lt;ip&gt; distribute-list &lt;racl&gt; in neighbor &lt;ip&gt; soft-reconfigurationinbound [neighbor &lt;ip&gt; send-community] !</p>
    <p>router</p>
  </div>
  <div class="page">
    <p>Lowering Barrier-to-Automation for Enterprises</p>
    <p>Large enterprise networks  Large stand-alone data networks  Retail, financial, health, business, etc.  Heterogeneity due to mergers and acquisitions  Stringent reliability and performance demands</p>
    <p>Today EDGE Inventory database</p>
    <p>The network is the database</p>
    <p>Extracted from the configuration files</p>
    <p>Existing network</p>
    <p>Mistakes and inconsistencie s</p>
    <p>Discord reports from analyzing config files</p>
    <p>Local config rules</p>
    <p>Poor (or no) documentation , policy violations</p>
    <p>Reverse-engineered by data mining on the configuration files</p>
  </div>
  <div class="page">
    <p>Enablement and Debugging of Growing Enterprises</p>
    <p>BOTTOM-UP APPROACH 1. Inventory database</p>
    <p>Extract summary information  Bootstrap the database</p>
    <p>Web reports</p>
    <p>Discords Low level</p>
    <p>standard form (tables)</p>
    <p>Abstract network database</p>
    <p>polled</p>
    <p>queries</p>
    <p>Router configuration</p>
    <p>Automation</p>
    <p>fix Runs on many thousands of configs a day.</p>
  </div>
  <div class="page">
    <p>Bootstrapping the Inventory Database</p>
    <p>Extracting summaries  Routers &amp; interfaces  Routing protocols  IP address usage  Configuration</p>
    <p>commands</p>
    <p>Network visualization  Routers and links  Attributes (capacity,</p>
    <p>routing parameters)  Layout (spring model)  Graph compression  Geographical info</p>
    <p>Dual hub-and-spoke</p>
  </div>
  <div class="page">
    <p>Pinpointing Configuration Mistakes</p>
    <p>Referential integrity  Multiple interfaces with same IP address  Items used but not defined, and vice versa</p>
    <p>Packet/route filters, route-maps, QoS policy,</p>
    <p>Routing protocol (e.g., OSPF)  Local integrity checks (warnings)</p>
    <p>Network statement matches no interfaces  Interface enabled in OSPF has no cost metric  Interface not enabled in OSPF has a cost metric</p>
    <p>Correct adjacencies (errors)  OSPF interface is not part of a complete link  Remote end of link does not participate in OSPF  Interfaces on same link have different OSPF areas</p>
  </div>
  <div class="page">
    <p>Example: Joining Parts of OSPF Config Together</p>
    <p>hostname MyRouter</p>
    <p>! interface POS7/0</p>
    <p>ip address 12.123.36.74 255.255.255.252</p>
    <p>ip ospf cost 50 !</p>
    <p>router ospf 2</p>
    <p>network 12.123.36.0 255.255.255.0 area 9 passive-interface Serial2/1/0/3.1</p>
    <p>!</p>
    <p>Remote end is in 12.123.36.72/30</p>
    <p>Interface participates in OSPF</p>
  </div>
  <div class="page">
    <p>Example: Remote End in Different OSPF Area</p>
    <p>interface OSPF network OSPF passive interface</p>
    <p>link OSPF interface</p>
    <p>Extracted tables</p>
    <p>active OSPF interface</p>
    <p>OSPF link with area mismatch</p>
    <p>Intermediate tables</p>
    <p>Presentation query result</p>
    <p>Simple SQL queries</p>
  </div>
  <div class="page">
    <p>Using Data Mining to Infer Local Policies</p>
    <p>Pattern matching across routers  Equivalence: same configuration, same names  Synonym: same configuration, different names  Homonym: same name, different configuration</p>
    <p>Infer rules and report exceptions  Finger daemon disabled  Edge interfaces have inbound packet filters  OSPF costs of 100 to hub1 and 200 to hub2  IPX interfaces have SAP encapsulation</p>
    <p>Identifying use cases  Initial base configuration of each router  Diffs over time and across related routers  Common cases (e.g., adding link, new BGP session)</p>
  </div>
  <div class="page">
    <p>Conclusion</p>
    <p>Moving beyond manual configuration  Manual configuration is bad</p>
    <p>Error-prone, expensive, and disruptive  Migrating to automation is hard</p>
    <p>No inventory DB, buggy network, and poor docs  EDGE supports migration to automation</p>
    <p>Bootstrap DB, report discords, and infer policies</p>
    <p>More innovation is needed  Better router configuration languages  Protocol modeling and best common practices  Data mining on existing data networks  Autoconfigurable protocols and mechanisms</p>
  </div>
</Presentation>

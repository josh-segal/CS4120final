<?xml version="1.0" ?>
<Presentation>
  <div class="page">
    <p>XRay Transparency for the data-driven Web.</p>
    <p>Mathias Lcuyer! Guillaume Ducoffe, Francis Lan, Andrei Papancea, Theofilos Petsios, Riley Spahn!</p>
    <p>Augustin Chaintreau, and Roxana Geambasu! !</p>
    <p>Columbia University!</p>
  </div>
  <div class="page">
    <p>Why this ad?</p>
    <p>Cedars Hotel Loughborough! 36 Bedrooms, Restaurant; Bar Free WiFi, Parking, Best Rates www.thecedarshotel.com</p>
  </div>
  <div class="page">
    <p>Why this ad?</p>
    <p>Cedars Hotel Loughborough! 36 Bedrooms, Restaurant; Bar Free WiFi, Parking, Best Rates www.thecedarshotel.com</p>
    <p>Homosexuality</p>
  </div>
  <div class="page">
    <p>Why this ad?</p>
    <p>Ralph Lauren Online! Shop! The official Site for Ralph Lauren Apparel, Accessories &amp; More www.ralphlauren.com</p>
  </div>
  <div class="page">
    <p>Why this ad?</p>
    <p>Ralph Lauren Online! Shop! The official Site for Ralph Lauren Apparel, Accessories &amp; More www.ralphlauren.com</p>
    <p>Pregnancy</p>
  </div>
  <div class="page">
    <p>Did you know?!  Data Brokers can tell when you're sick,</p>
    <p>tired and depressed (and sell the information) [CNN 14]</p>
    <p>Google Apps for Ed used institutional emails to target ads in personal accounts? [SafeGov14]</p>
    <p>Credit companies use Facebook data to decide loans? [CNN13]</p>
    <p>Did you know?</p>
  </div>
  <div class="page">
    <p>Welcome to the big data world</p>
    <p>Myriad of web services parties collect immense information about us and use it for varied purposes</p>
    <p>Data has lots of beneficial uses Useful recommendations Powerful, predictive applications Improve business with effective product placement Improve public health, disaster response</p>
  </div>
  <div class="page">
    <p>Big data lacks transparency</p>
    <p>We have no visibility into what services do with our data:</p>
    <p>What is the data used for exactly? Is it being shared? With whom? Can we delete it?</p>
    <p>Obscurity threatens to transform the data-driven web into a breeding ground for data misuse.</p>
    <p>No robust tools exist to reveal data (mis)uses, even auditors cannot find answers.</p>
  </div>
  <div class="page">
    <p>Question: can we build tools that reveal data misuse?</p>
    <p>Which emails trigger which ads?</p>
    <p>Which prior searches trigger which prices?</p>
    <p>Does Facebook share our data with third-parties?</p>
  </div>
  <div class="page">
    <p>Question: can we build tools that reveal data misuse?</p>
    <p>Can we do taint tracking systems?  Lots of prior work, many successful systems (e.g.,</p>
    <p>Taintdroid)  Assume a controlled environment (runtime, language, OS)  Need something for the complex and uncontrolled web</p>
    <p>Which emails trigger which ads?</p>
    <p>Which prior searches trigger which prices?</p>
    <p>Does Facebook share our data with third-parties?</p>
  </div>
  <div class="page">
    <p>XRay</p>
    <p>First generic data tracking system for the Web associate inputs (e.g., emails) outputs (e.g., ads)</p>
    <p>It is accurate, scalable, and generic! Works now on Gmail, Amazon and YouTube</p>
    <p>Provides key building blocks for a new ecosystem of tools to keep big data in check</p>
  </div>
  <div class="page">
    <p>Overview</p>
    <p>Motivation</p>
    <p>Design!</p>
    <p>Evaluation</p>
  </div>
  <div class="page">
    <p>Goals</p>
  </div>
  <div class="page">
    <p>Web service model</p>
    <p>Treat Web services as a black box</p>
    <p>Data inputs (Di)! e.g., emails,</p>
    <p>searches, browsing</p>
    <p>Targeted outputs (Ok)! e.g., ads, recommendations</p>
  </div>
  <div class="page">
    <p>Treat Web services as a black box</p>
    <p>Data inputs (Di)! e.g., emails,</p>
    <p>searches, browsing</p>
    <p>XRay! (Differential Correlation)</p>
    <p>Targeted outputs (Ok)! e.g., ads, recommendations</p>
    <p>Web service model</p>
    <p>Associations! Di -&gt; Ok</p>
  </div>
  <div class="page">
    <p>Differential Correlation</p>
    <p>Key idea: correlate inputs with outputs  Populate extra accounts with subsets of inputs  Use shadow account observations to relate inputs to</p>
    <p>outputs</p>
  </div>
  <div class="page">
    <p>Differential Correlation</p>
    <p>Key idea: correlate inputs with outputs  Populate extra accounts with subsets of inputs  Use shadow account observations to relate inputs to</p>
    <p>outputs</p>
    <p>D1, D2, D3</p>
    <p>Main account</p>
    <p>D2, D3</p>
    <p>D1, D2</p>
    <p>D1, D3</p>
    <p>Shadow accounts</p>
    <p>O1</p>
    <p>O1</p>
    <p>no O1</p>
    <p>Association:! D2 -&gt; O1O1</p>
  </div>
  <div class="page">
    <p>Key idea: correlate inputs with outputs  Populate extra accounts with subsets of inputs  Use shadow account observations to relate inputs to</p>
    <p>outputs</p>
    <p>D1, D2, D3</p>
    <p>Main account</p>
    <p>D2, D3</p>
    <p>D1, D2</p>
    <p>D1, D3</p>
    <p>Shadow accounts</p>
    <p>O1</p>
    <p>O1</p>
    <p>no O1</p>
    <p>Association:! D2 -&gt; O1O1</p>
    <p>It sounds like a lot of accounts</p>
    <p>Challenge: scaling</p>
  </div>
  <div class="page">
    <p>Scalable algorithms</p>
    <p>Theorem Under certain assumptions for any  &gt; 0 there exists an algorithm that requires C x log(N) accounts to correctly identify the inputs of a targeted ad with probability (1  ).</p>
    <p>!</p>
    <p>Algo1: Set Intersection (simple, not robust)</p>
    <p>Algo2: Bayesian (more robust)</p>
  </div>
  <div class="page">
    <p>Algo1: Set Intersection</p>
    <p>D1, D2 D2, D3 D1, D3</p>
    <p>Step 1</p>
    <p>D1, D2 D2, D3 D1, D3X Step 2</p>
    <p>Step 3 D2</p>
    <p>Input: Output Ok (an ad), Inputs Dis (emails), Observations x Output: Targeted input Step1: Randomly assign emails to shadow accounts. Step2: Take the sets of emails from accounts where the ad appeared. Step3: Compute the intersection of these sets. Step4: if the intersection is non empty: it is the targeted emails else there is no targeting.</p>
  </div>
  <div class="page">
    <p>Algo1: Set Intersection</p>
    <p>We prove it needs a logarithmic number of accounts in number of inputs for high probability of detection</p>
    <p>Input: Output Ok (an ad), Inputs Dis (emails), Observations x Output: Targeted input Step1: Randomly assign emails to shadow accounts. Step2: Take the sets of emails from accounts where the ad appeared. Step3: Compute the intersection of these sets. Step4: if the intersection is non empty: it is the targeted emails else there is no targeting.</p>
  </div>
  <div class="page">
    <p>Challenge: it needs tuning</p>
    <p>Ads must never appear in the wrong accounts Not true: email redundancy, cache Need a manual threshold to detect emails in a significant number of accounts</p>
    <p>Doesnt take low signal into account Need hard coded minimum number of accounts that see an ad</p>
    <p>Tuning is service specific and hard to do</p>
  </div>
  <div class="page">
    <p>Algo2: Bayesian (XRay)</p>
    <p>Input: Output Ok (an ad), Inputs Dis (emails), Observations x Output: Targeted input foreach input Di do compute prob. = apply_bayes end compute prob. = apply_bayes return Di with max</p>
    <p>Bayes rule:</p>
    <p>Probability of observations: With Di targeted: !</p>
    <p>!</p>
  </div>
  <div class="page">
    <p>Bayes rule:Input: Output Ok (an ad), Inputs Dis (emails), Observations x Output: Targeted input foreach input Di do compute prob. = apply_bayes end compute prob. = apply_bayes return Di with max</p>
    <p>Algo2: Bayesian (XRay)</p>
    <p>Probability of observations: With Di targeted: !</p>
    <p>!</p>
  </div>
  <div class="page">
    <p>Input: Output Ok (an ad), Inputs Dis (emails), Observations x Output: Targeted input foreach input Di do compute prob. = apply_bayes end compute prob. = apply_bayes return Di with max</p>
    <p>Algo2: Bayesian (XRay)</p>
    <p>Bayes rule:</p>
    <p>Probability of observations: With Di targeted: !</p>
    <p>!  Pin : probability to see ad if targeted</p>
    <p>email in account</p>
    <p>Pout : probability to see ad if targeted email not in account</p>
  </div>
  <div class="page">
    <p>Bayes rule:Input: Output Ok (an ad), Inputs Dis (emails), Observations x Output: Targeted input foreach input Di do compute prob. = apply_bayes end compute prob. = apply_bayes return Di with max</p>
    <p>Algo2: Bayesian (XRay)</p>
    <p>Probability of observations: With Di targeted: !</p>
    <p>!</p>
  </div>
  <div class="page">
    <p>Input: Output Ok (an ad), Inputs Dis (emails), Observations x Output: Targeted input foreach input Di do compute prob. = apply_bayes end compute prob. = apply_bayes return Di with max</p>
    <p>Algo2: Bayesian (XRay)</p>
    <p>Bayes rule:</p>
    <p>Probability of observations: With Di targeted: !</p>
    <p>!</p>
  </div>
  <div class="page">
    <p>Input: Output Ok (an ad), Inputs Dis (emails), Observations x Output: Targeted input foreach input Di do compute prob. = apply_bayes end compute prob. = apply_bayes return Di with max</p>
    <p>Algo2: Bayesian (XRay)</p>
    <p>If an email is targeted, we can tell which one.</p>
    <p>Challenge: what if no tracked input is targeted?</p>
  </div>
  <div class="page">
    <p>Input: Output Ok (an ad), Inputs Dis (emails), Observations x Output: Targeted input foreach input Di do compute prob. = apply_bayes end compute prob. = apply_bayes return Di with max</p>
    <p>Algo2: Bayesian (XRay)</p>
    <p>Without targeting:</p>
    <p>Probability of observations: With Di targeted: !</p>
    <p>!</p>
    <p>Bayes rule:</p>
  </div>
  <div class="page">
    <p>Bayesian can self-tune</p>
    <p>Automatic self-tuning with classic iterative inference to learn the parameters</p>
    <p>Many other challenges (input overlap, different kind of targeting).</p>
  </div>
  <div class="page">
    <p>! Shadow Account Manager</p>
    <p>(service specific)</p>
    <p>! Browser Plugin</p>
    <p>(gives visual feedback)</p>
    <p>All inputs</p>
    <p>All outputs</p>
    <p>XRays architecture</p>
    <p>Get associations Tracked inputs</p>
    <p>Correlation Engine (service agnostic)</p>
    <p>Shadow outputs</p>
    <p>XRay - backend</p>
    <p>XRay - frontend User account</p>
    <p>Shadow 1</p>
    <p>Shadow n</p>
    <p>Web service</p>
  </div>
  <div class="page">
    <p>Prototype</p>
    <p>We built the prototype for Gmail, to associate ads to the emails they target.</p>
    <p>Applied correlation engine as-is to Amazon product recommendations and YouTube video recommendations.</p>
    <p>0 lines of code to change to adapt the correlation mechanisms.</p>
  </div>
  <div class="page">
    <p>Talk overview</p>
    <p>Motivation</p>
    <p>Design</p>
    <p>Evaluation</p>
  </div>
  <div class="page">
    <p>Evaluation questions</p>
    <p>How accurate is XRay?!</p>
    <p>Is XRay general, extensible and self-tuning? !</p>
    <p>How does XRay scale with the number of inputs?!</p>
    <p>How can we manage input overlap?!</p>
    <p>Is XRay useful?</p>
  </div>
  <div class="page">
    <p>#1 How accurate is XRay?</p>
    <p>We measured recall and precision for XRays associations on Gmail, YouTube and Amazon</p>
    <p>We need Ground Truth: Ground truth provided by Amazon and YouTube Manual labeling and validation for Gmail</p>
  </div>
  <div class="page">
    <p>#1 How accurate is XRay?</p>
    <p>re ci</p>
    <p>si on</p>
    <p>Number of Accounts</p>
    <p>Gmail Amazon</p>
    <p>YouTube 0</p>
    <p>R ec</p>
    <p>al l</p>
    <p>Number of Accounts</p>
    <p>Gmail Amazon</p>
    <p>YouTube</p>
    <p>Recall and precision are 80-90% for Gmail, YouTube, and Amazon.</p>
    <p>Number of inputs (e.g., emails): 16</p>
  </div>
  <div class="page">
    <p>#1 How accurate is XRay?</p>
    <p>Number of inputs (e.g., emails): 16</p>
    <p>re ci</p>
    <p>si on</p>
    <p>Number of Accounts</p>
    <p>Gmail Amazon</p>
    <p>YouTube 0</p>
    <p>R ec</p>
    <p>al l</p>
    <p>Number of Accounts</p>
    <p>Gmail Amazon</p>
    <p>YouTube15</p>
    <p>Recall and precision are 80-90% for Gmail, YouTube, and Amazon.</p>
  </div>
  <div class="page">
    <p>#2 How does XRay scale with the number of inputs?</p>
    <p>N um</p>
    <p>be r o</p>
    <p>f A cc</p>
    <p>ou nt</p>
    <p>s</p>
    <p>Number of Inputs (log)</p>
    <p>Gmail Amazon Youtube</p>
    <p>Logarithmic dependency, as theory predicted.</p>
  </div>
  <div class="page">
    <p>N um</p>
    <p>be r o</p>
    <p>f A cc</p>
    <p>ou nt</p>
    <p>s</p>
    <p>Number of Inputs (log)</p>
    <p>Gmail</p>
    <p>N um</p>
    <p>be r o</p>
    <p>f A cc</p>
    <p>ou nt</p>
    <p>s</p>
    <p>Number of Inputs (log)</p>
    <p>Gmail Amazon Youtube</p>
    <p>#2 How does XRay scale with the number of inputs?</p>
    <p>Gmail: 2x inputs, +3 accounts.</p>
    <p>x2</p>
    <p>+4</p>
    <p>x2x2</p>
    <p>+3 +3</p>
  </div>
  <div class="page">
    <p>#3 Is XRay useful?</p>
    <p>We collected ads targeting a few sensitive topics</p>
    <p>debt pregnancy race</p>
    <p>For each topics we have one email with relevant keywords</p>
    <p>We analyzed very strong associations detected by XRay</p>
    <p>various diseases sexual orientation divorce</p>
  </div>
  <div class="page">
    <p>Topic Targeted ads Score</p>
    <p>Alzheimer Black Mold Allergy Symptoms? Expert to remove Black Mold. 0.99</p>
    <p>Adult Assisted Living. Affordable Assisted Living. 0.99</p>
    <p>Cancer Ford Warriors in Pink. Join The Fight. 1.0</p>
    <p>Rosen Method Bodywork for physical or emotional pain. 0.98</p>
    <p>Depression Shamanic healing over the phone. 0.99</p>
    <p>Text Coach - Get the girl you want and Desire. 0.99</p>
    <p>African American</p>
    <p>Racial Harassment? Learn your rights now. 0.99 Racial Harassment, Hearing racial slurs? 0.99</p>
    <p>Homosexuality SF Gay Pride Hotel. Luxury Waterfront. 0.99</p>
    <p>Cedars Hotel Loughborough, 36 Bedrooms, Restaurant, Bar. 0.96</p>
    <p>Pregnancy Ralph Lauren Apparel. Official Online Store. 0.99</p>
    <p>Find Baby Shower Invitations. Get up to 60% off here! 0.99</p>
    <p>Divorce Law Attorneys specializing in special needs kids education. 0.99 Cerbone Law Firm, Helping Good People Thru Bad Times. 0.99</p>
    <p>Debt / Loan</p>
    <p>Take a New Toyota Test Drive, Get a $50 Gift Card On The Spot. 0.99 Great Credit Cards Search. Apply for VISA, MasterCard... 0.99</p>
    <p>Car Loan without Cosigner 100% Accepted. [...] 0.99 Car Loans w/ Bad Credit 100% Acceptance! [...] 0.99</p>
    <p>Example associations</p>
  </div>
  <div class="page">
    <p>Topic Targeted ads Score</p>
    <p>Alzheimer Black Mold Allergy Symptoms? Expert to remove Black Mold. 0.99</p>
    <p>Adult Assisted Living. Affordable Assisted Living. 0.99</p>
    <p>Cancer Ford Warriors in Pink. Join The Fight. 1.0</p>
    <p>Rosen Method Bodywork for physical or emotional pain. 0.98</p>
    <p>Depression Shamanic healing over the phone. 0.99</p>
    <p>Text Coach - Get the girl you want and Desire. 0.99</p>
    <p>African American</p>
    <p>Racial Harassment? Learn your rights now. 0.99 Racial Harassment, Hearing racial slurs? 0.99</p>
    <p>Homosexuality SF Gay Pride Hotel. Luxury Waterfront. 0.99</p>
    <p>Cedars Hotel Loughborough, 36 Bedrooms, Restaurant, Bar. 0.96</p>
    <p>Pregnancy Ralph Lauren Apparel. Official Online Store. 0.99</p>
    <p>Find Baby Shower Invitations. Get up to 60% off here! 0.99</p>
    <p>Divorce Law Attorneys specializing in special needs kids education. 0.99 Cerbone Law Firm, Helping Good People Thru Bad Times. 0.99</p>
    <p>Debt / Loan</p>
    <p>Take a New Toyota Test Drive, Get a $50 Gift Card On The Spot. 0.99 Great Credit Cards Search. Apply for VISA, MasterCard... 0.99</p>
    <p>Car Loan without Cosigner 100% Accepted. [...] 0.99 Car Loans w/ Bad Credit 100% Acceptance! [...] 0.99</p>
    <p>Example associations</p>
  </div>
  <div class="page">
    <p>Topic Targeted ads Score</p>
    <p>Alzheimer Black Mold Allergy Symptoms? Expert to remove Black Mold. 0.99</p>
    <p>Adult Assisted Living. Affordable Assisted Living. 0.99</p>
    <p>Cancer Ford Warriors in Pink. Join The Fight. 1.0</p>
    <p>Rosen Method Bodywork for physical or emotional pain. 0.98</p>
    <p>Depression Shamanic healing over the phone. 0.99</p>
    <p>Text Coach - Get the girl you want and Desire. 0.99</p>
    <p>African American</p>
    <p>Racial Harassment? Learn your rights now. 0.99 Racial Harassment, Hearing racial slurs? 0.99</p>
    <p>Homosexuality SF Gay Pride Hotel. Luxury Waterfront. 0.99</p>
    <p>Cedars Hotel Loughborough, 36 Bedrooms, Restaurant, Bar. 0.96</p>
    <p>Pregnancy Ralph Lauren Apparel. Official Online Store. 0.99</p>
    <p>Find Baby Shower Invitations. Get up to 60% off here! 0.99</p>
    <p>Divorce Law Attorneys specializing in special needs kids education. 0.99 Cerbone Law Firm, Helping Good People Thru Bad Times. 0.99</p>
    <p>Debt / Loan</p>
    <p>Take a New Toyota Test Drive, Get a $50 Gift Card On The Spot. 0.99 Great Credit Cards Search. Apply for VISA, MasterCard... 0.99</p>
    <p>Car Loan without Cosigner 100% Accepted. [...] 0.99 Car Loans w/ Bad Credit 100% Acceptance! [...] 0.99</p>
    <p>Example associations</p>
  </div>
  <div class="page">
    <p>Topic Targeted ads Score</p>
    <p>Alzheimer Black Mold Allergy Symptoms? Expert to remove Black Mold. 0.99</p>
    <p>Adult Assisted Living. Affordable Assisted Living. 0.99</p>
    <p>Cancer Ford Warriors in Pink. Join The Fight. 1.0</p>
    <p>Rosen Method Bodywork for physical or emotional pain. 0.98</p>
    <p>Depression Shamanic healing over the phone. 0.99</p>
    <p>Text Coach - Get the girl you want and Desire. 0.99</p>
    <p>African American</p>
    <p>Racial Harassment? Learn your rights now. 0.99 Racial Harassment, Hearing racial slurs? 0.99</p>
    <p>Homosexuality SF Gay Pride Hotel. Luxury Waterfront. 0.99</p>
    <p>Cedars Hotel Loughborough, 36 Bedrooms, Restaurant, Bar. 0.96</p>
    <p>Pregnancy Ralph Lauren Apparel. Official Online Store. 0.99</p>
    <p>Find Baby Shower Invitations. Get up to 60% off here! 0.99</p>
    <p>Divorce Law Attorneys specializing in special needs kids education. 0.99 Cerbone Law Firm, Helping Good People Thru Bad Times. 0.99</p>
    <p>Debt / Loan</p>
    <p>Take a New Toyota Test Drive, Get a $50 Gift Card On The Spot. 0.99 Great Credit Cards Search. Apply for VISA, MasterCard... 0.99</p>
    <p>Car Loan without Cosigner 100% Accepted. [...] 0.99 Car Loans w/ Bad Credit 100% Acceptance! [...] 0.99</p>
    <p>Example associations</p>
  </div>
  <div class="page">
    <p>Topic Targeted ads Score</p>
    <p>Alzheimer Black Mold Allergy Symptoms? Expert to remove Black Mold. 0.99</p>
    <p>Adult Assisted Living. Affordable Assisted Living. 0.99</p>
    <p>Cancer Ford Warriors in Pink. Join The Fight. 1.0</p>
    <p>Rosen Method Bodywork for physical or emotional pain. 0.98</p>
    <p>Depression Shamanic healing over the phone. 0.99</p>
    <p>Text Coach - Get the girl you want and Desire. 0.99</p>
    <p>African American</p>
    <p>Racial Harassment? Learn your rights now. 0.99 Racial Harassment, Hearing racial slurs? 0.99</p>
    <p>Homosexuality SF Gay Pride Hotel. Luxury Waterfront. 0.99</p>
    <p>Cedars Hotel Loughborough, 36 Bedrooms, Restaurant, Bar. 0.96</p>
    <p>Pregnancy Ralph Lauren Apparel. Official Online Store. 0.99</p>
    <p>Find Baby Shower Invitations. Get up to 60% off here! 0.99</p>
    <p>Divorce Law Attorneys specializing in special needs kids education. 0.99 Cerbone Law Firm, Helping Good People Thru Bad Times. 0.99</p>
    <p>Debt / Loan</p>
    <p>Take a New Toyota Test Drive, Get a $50 Gift Card On The Spot. 0.99 Great Credit Cards Search. Apply for VISA, MasterCard... 0.99</p>
    <p>Car Loan without Cosigner 100% Accepted. [...] 0.99 Car Loans w/ Bad Credit 100% Acceptance! [...] 0.99</p>
    <p>Example associations</p>
    <p>! In a Subprime Bubble for Used Cars, Borrowers Pay Sky-High Rates</p>
  </div>
  <div class="page">
    <p>Conclusion  Without transparency, the wonderful big-data Web</p>
    <p>threatens to become a breeding place for deceptive and unfair practices</p>
    <p>XRay: the first generic, scalable, and accurate building block for revealing data targeting</p>
    <p>Relies on differential correlation, which has provable properties</p>
    <p>We hope it will support the building of a new generation of auditing tools to keep the big-data Web in check</p>
  </div>
  <div class="page">
    <p>Code &amp; Data Available</p>
    <p>http://xray.cs.columbia.edu</p>
    <p>Come to me for a demo</p>
  </div>
</Presentation>

<?xml version="1.0" ?>
<Presentation>
  <div class="page">
    <p>Email Data Cleaning (KDD05)</p>
    <p>Jie Tang1, Hang Li2, Yunbo Cao2, Zhaohui Tang3</p>
  </div>
  <div class="page">
    <p>Outline</p>
    <p>Motivation and Problem Description  Related Work  Our Approach  Implementation  Experimental Results  Summary</p>
  </div>
  <div class="page">
    <p>Motivation</p>
    <p>Email is one of the most common modes of communication</p>
    <p>Text mining applications on emails  Email classification  Email summarization  Term extraction from email</p>
  </div>
  <div class="page">
    <p>Term Extraction From: SY &lt;sandeep....@gmail.com&gt; - Find messages by this author Date: Mon, 4 Apr 2005 11:29:28 +0530 Subject: Re: ..How to do addition??</p>
    <p>Hi Ranger, Your design of Matrix class is not good. what are you doing with two matrices in a single class?make class Matrix as follows</p>
    <p>import java.io.*; class Matrix { public static int AnumberOfRows; public static int AnumberOfColumns; private int matrixA[][];</p>
    <p>public void inputArray() throws IOException { InputStreamReader input = new InputStreamReader(System.in); BufferedReader keyboardInput = new BufferedReader(input) }</p>
    <p>-- Sandeep Yadav Tel: 011-243600808 Homepage: http://www.it.com/~Sandeep/</p>
    <p>On Apr 3, 2005 5:33 PM, ranger &lt;asiri....@gmail.com&gt; wrote: &gt; Hi... I want to perform the addtion in my Matrix class. I got the program to &gt; enter 2 Matricx and diaplay them. Hear is the code of the Matrix class and &gt; TestMatrix class. I'm glad If anyone can let me know how to do the addition.....Tnx</p>
    <p>Extra line break</p>
    <p>Missing space Extra space Missing period</p>
    <p>Case errors .</p>
    <p>Hi Ranger, Your design of Matrix class is not good. What are you doing with two matrices in a single class? Make class Matrix as follows:</p>
  </div>
  <div class="page">
    <p>Outline</p>
    <p>Motivation and Problem Description  Related Work  Our Approach  Implementation  Experimental Results  Summary</p>
  </div>
  <div class="page">
    <p>Related Work -- Data Mining</p>
    <p>Email Cleaning  Several products have the feature of email cleaning by using rules  E.g. eClean (2000), WinPure ListCleaner Pro (2004)</p>
    <p>Information Extraction from Email  Extracting contact information, etc  E.g. Kristjansson and Culotta (2004), Culotta, Bekkerman, and McCallum</p>
    <p>(2004), Viola (2005)</p>
    <p>Web Page Cleaning  Removing banner ads, decoration pictures  E.g. Yi and Liu (2003), Lin and Ho (2002)</p>
    <p>Tabular Data Cleaning  Detecting and removing duplicate information  E.g. Hernndez and Stolfo (1998), Rahm and Do (2000), SQL Server 2005</p>
  </div>
  <div class="page">
    <p>Related Work -- Language Processing</p>
    <p>Sentence Boundary Detection  Palmer and Hearst (1997)</p>
    <p>Case Restoration  Lita and Ittycheriah (2003)  Mikheev (2002)</p>
    <p>Spelling Error Correction  Golding and Roth (I996)</p>
  </div>
  <div class="page">
    <p>Outline</p>
    <p>Motivation and Problem Description  Related Work  Our Approach  Implementation  Experimental Results  Summary</p>
  </div>
  <div class="page">
    <p>Our Approach -- Cascaded Approach</p>
    <p>Cleaning = non-text block filtering + text normalization</p>
    <p>Non-text block filtering</p>
    <p>- Quotation detection</p>
    <p>- Header detection</p>
    <p>- Signature detection</p>
    <p>- Program code detection</p>
    <p>Text normalization</p>
    <p>- Paragraph normalization * Extra line break detection</p>
    <p>- Sentence normalization * Missing period detection</p>
    <p>- Word normalization * Case restoration</p>
  </div>
  <div class="page">
    <p>Cascaded Approach Noisy Email</p>
    <p>Message</p>
    <p>Non-text Block Filtering</p>
    <p>Quotation Detection</p>
    <p>Header Detection</p>
    <p>Program Code Detection</p>
    <p>Cleaned Email Message</p>
    <p>Paragraph Normalization</p>
    <p>Extra Line Break Detection</p>
    <p>Sentence Normalization Missing Periods and</p>
    <p>Missing spaces Detection</p>
    <p>Extra Spaces Detection</p>
    <p>Word Normalization</p>
    <p>Case Restoration</p>
    <p>Signature Detection</p>
    <p>From: SY &lt;sandeep....@gmail.com&gt; - Find messages by this author Date: Mon, 4 Apr 2005 11:29:28 +0530 Subject: Re: ..How to do addition??</p>
    <p>Hi Ranger, Your design of Matrix class is not good. what are you doing with two matrices in a single class?make class Matrix as follows</p>
    <p>import java.io.*; class Matrix { public static int AnumberOfRows; public static int AnumberOfColumns; private int matrixA[][];</p>
    <p>public void inputArray() throws IOException { InputStreamReader input = new InputStreamReader(System.in); BufferedReader keyboardInput = new BufferedReader(input) }</p>
    <p>-- Sandeep Yadav Tel: 011-243600808 Homepage: http://www.it.com/~Sandeep/</p>
    <p>On Apr 3, 2005 5:33 PM, ranger &lt;asiri....@gmail.com&gt; wrote: &gt; Hi... I want to perform the addtion in my Matrix class. I got the program to &gt; enter 2 Matricx and diaplay them. Hear is the code of the Matrix class and &gt; TestMatrix class. I'm glad If anyone can let me know how to do the addition..</p>
    <p>Hi Ranger, Your design of Matrix class is not good. what are you doing with two matrices in a single class?make class Matrix as follows</p>
    <p>Hi Ranger, Your design of Matrix class is not good. What are you doing with two matrices in a single class? Make class Matrix as follows.</p>
    <p>Hi Ranger, Your design of Matrix class is not good. what are you doing with two matrices in a single class? make class Matrix as follows.</p>
    <p>In a particular text mining application, we can retain some of the blocks</p>
    <p>Quotation Detection</p>
    <p>Header Detection</p>
    <p>Signature Detection</p>
    <p>Extra line break Detection</p>
    <p>Missing Period and Missing Space Detection</p>
    <p>Program Code Detection</p>
    <p>Extra Space Detection</p>
    <p>Case Restoration</p>
  </div>
  <div class="page">
    <p>Outline</p>
    <p>Motivation and Problem Description  Related Work  Our Approach  Implementation  Experimental Results  Summary</p>
  </div>
  <div class="page">
    <p>Technical Issues</p>
    <p>Non-text filtering  Quotation detection  Header detection  Signature detection  Program code detection</p>
    <p>Text normalization  Extra line break detection  Sentence normalization  Case restoration</p>
  </div>
  <div class="page">
    <p>SVMs</p>
    <p>Start line model</p>
    <p>Two SVM models</p>
    <p>End line model</p>
    <p>Training data</p>
    <p>Test data</p>
    <p>Feature extraction</p>
    <p>Feature extraction</p>
    <p>Identified blocks</p>
    <p>Position feature</p>
    <p>Positive word feature</p>
    <p>...</p>
    <p>SVMs</p>
    <p>Feature extraction</p>
    <p>Position feature</p>
    <p>Positive word feature</p>
    <p>...</p>
    <p>Start line feature set End line feature set</p>
    <p>Non-text Filtering Using SVMs</p>
    <p>Header detection Signature detection Program code detection</p>
  </div>
  <div class="page">
    <p>Features Used in Header Detection</p>
    <p>Position Feature Is the first line?</p>
    <p>Positive Word Features Begins with: From:, Re:, In article, etc. Contains: original message, Fwd:, etc. Ends with: wrote:, said:, etc.</p>
    <p>Negative Word Features Contains: Hi, dear, thank you, best regards, etc.</p>
    <p>Number of Words Feature Number of words in the current line</p>
    <p>Person Name Feature Contains a person name?</p>
    <p>Ending Character Features Ends with: colon, semicolon, quotation mark, question mark, exclamation mark, etc.</p>
    <p>Special Pattern Features Contains one type of special patterns: email, date, number, URL, percentage, etc.</p>
    <p>Number of Line Breaks Feature Number of line breaks exist before the current line</p>
    <p>Special Pattern Features Contains one type of special patterns: email, date, number, URL, percentage, etc.</p>
    <p>Positive Word Features Begins with: From:, Re:, In article, etc. Contains: original message, Fwd:, etc. Ends with: wrote:, said:, etc.</p>
    <p>Position Feature Is the first line?</p>
    <p>Ending Character Features Ends with: colon, semicolon, quotation mark, question mark, exclamation mark, etc.</p>
  </div>
  <div class="page">
    <p>From: SY &lt;sandeep....@gmail.com&gt; - Find messages by this author Date: Mon, 4 Apr 2005 11:29:28 +0530 Subject: Re: ..How to do addition??</p>
    <p>Hi Ranger, Your design of Matrix class is not good. what are you doing with two matrices in a single class?make class Matrix as follows</p>
    <p>import java.io.*; class Matrix { public static int AnumberOfRows; public static int AnumberOfColumns; private int matrixA[][];</p>
    <p>public void inputArray() throws IOException { InputStreamReader input = new InputStreamReader(System.in); BufferedReader keyboardInput = new BufferedReader(input) }</p>
    <p>-- Sandeep Yadav Tel: 011-243600808 Homepage: http://www.it.com/~Sandeep/</p>
    <p>On Apr 3, 2005 5:33 PM, ranger &lt;asiri....@gmail.com&gt; wrote: &gt; Hi... I want to perform the addtion in my Matrix class. I got the program to &gt; enter 2 Matricx and diaplay them. Hear is the code of the Matrix class and &gt; TestMatrix class. I'm glad If anyone can let me know how to do the addition.....Tnx</p>
    <p>Two SVM models are</p>
    <p>employed to respectively</p>
    <p>identify the start line</p>
    <p>and end line.</p>
    <p>Header Detection</p>
    <p>Position Feature</p>
    <p>Positive Word Features (From:)</p>
    <p>Negative Word Features</p>
    <p>Number of Words Feature</p>
    <p>Person Name Feature</p>
    <p>Ending Character Features</p>
    <p>Special Pattern Features (email)</p>
    <p>Number of Line Breaks Feature</p>
    <p>Position Feature</p>
    <p>Positive Word Features (Subject:)</p>
    <p>Negative Word Features</p>
    <p>Number of Words Feature</p>
    <p>Person Name Feature</p>
    <p>Ending Character Features (??)</p>
    <p>Special Pattern Features</p>
    <p>Number of Line Breaks Feature</p>
  </div>
  <div class="page">
    <p>- Input: An annotated email dataset. - Output: Discovered features. - Algorithm:</p>
    <p>Step 1: Preprocessing. This step first processes emails by using hard rules. it replaces several special patterns by a tag. For example, an email address joke@hotmail.com is to be replaced by a tag &lt;email&gt;.</p>
    <p>Step 2: Learning patterns. This step take the header lines as positive samples and the other lines as negative samples. It employs the pattern learning tool to discovering the patterns. An example of the discovered patterns is: &lt;begin&gt; Date: &lt;week&gt; &lt;date&gt; &lt;time&gt; &lt;end&gt;.</p>
    <p>Step 3: Generating features. This step generates features according to the learned patterns by using heuristic rules. For the above example, the corresponding feature can be: ^\s*Date: &lt;week&gt; &lt;date&gt; &lt;time&gt;\s*$. The feature represents whether or not the current line contains the pattern.</p>
    <p>Automatic Feature Generation</p>
    <p>Generated Features</p>
    <p>From: &lt;email&gt;</p>
    <p>Subject: (.*?) Re:</p>
    <p>&lt;&lt;email&gt;&gt; wrote in message</p>
    <p>Date: &lt;week&gt; &lt;date&gt;</p>
    <p>Subject:</p>
    <p>&lt;week&gt; &lt;date&gt; &lt;time&gt;</p>
    <p>Date:</p>
    <p>-----Original Message----</p>
    <p>To: &lt;email&gt;</p>
    <p>.</p>
    <p>- Feature definition is tedious. - Can we automate the feature generation?</p>
  </div>
  <div class="page">
    <p>Example Features Used in Signature Detection Position Feature Is the first line or the last line?</p>
    <p>Positive Word Features Contains: Best Regards, Thanks, Sincerely, Good luck, etc.</p>
    <p>Number of Words Feature Number of words in the current line</p>
    <p>Person Name Feature Contains a person name?</p>
    <p>Ending Character Features Ends with: colon, semicolon, quotation mark, question mark, exclamation mark</p>
    <p>Special Symbol Pattern Features</p>
    <p>Contains consecutive special symbols such as: --------, ======, ******.</p>
    <p>Case Features Whether the tokens are all in upper-case, all in lower-case, all capitalized or only the first token is capitalized</p>
    <p>Number of Line Breaks Feature Number of line breaks exist before the current line</p>
  </div>
  <div class="page">
    <p>Position Feature Position of the current line</p>
    <p>Declaration Keyword Features Starts with: string, char, double, dim, typedef struct, #include, import, #define, #undef, etc.</p>
    <p>Statement Keyword Features There are four kind of statement keyword features: - i++; - if, else if, switch, and case; - while, do{, for, and foreach; - goto, continue;, next;, break;</p>
    <p>Equation Pattern Features There are four kind of equation pattern features: - =, &lt;= and &lt;&lt;= - a=b+/*-c; - a=B(bb,cc); - a=b;</p>
    <p>Function Pattern Feature Contains function pattern? E.g., pattern covering fread(pbBuffer,1, LOCK_SIZE, hSrcFile);</p>
    <p>Example Features Used in Program Code Detection</p>
  </div>
  <div class="page">
    <p>SVMs</p>
    <p>Extra line break model</p>
    <p>One SVM model</p>
    <p>Training data</p>
    <p>Test data</p>
    <p>Feature extraction</p>
    <p>Feature extraction</p>
    <p>Identified extra line breaks</p>
    <p>Position feature</p>
    <p>Bullet feature</p>
    <p>...</p>
    <p>Feature set</p>
    <p>Extra Line Break Detection Using SVMs</p>
  </div>
  <div class="page">
    <p>Features Used in Extra Line Break Detection</p>
    <p>Position Feature Is the first line or the last line?</p>
    <p>Greeting Word Features Contains: Hi and Dear, etc.</p>
    <p>Ending Character Features Ends with: colon, semicolon, quotation mark, question mark, exclamation mark, etc.</p>
    <p>Case Features Whether the current line ends with a word in lower case letters and whether or not the next line starts with a word in lower case letters</p>
    <p>Bullet Features Is the next line one kind of bullet of a list item like 1. and a)?</p>
    <p>Number of Line Breaks Feature Number of line breaks exist after the current line</p>
    <p>Case Features Whether the current line ends with a word in lower case letters and whether or not the next line starts with a word in lower case letters</p>
  </div>
  <div class="page">
    <p>Hi Ranger, Your design of Matrix class is not good. what are you doing with two matrices in a single class?make class Matrix as follows</p>
    <p>One SVM model is employed to identify whether a line break is an extra one or not.</p>
    <p>Extra Line Break Detection</p>
    <p>Position Feature</p>
    <p>Greeting Word Features</p>
    <p>Ending Character Features</p>
    <p>Case Features</p>
    <p>Bullet Features</p>
    <p>Number of Line Breaks Feature</p>
  </div>
  <div class="page">
    <p>Case restoration</p>
    <p>tri-gram + sentence level decoding</p>
    <p>Jack utilize outlook express to retrieve emails.</p>
    <p>Jack</p>
    <p>jack</p>
    <p>JACK</p>
    <p>Utilize</p>
    <p>utilize</p>
    <p>UTILIZE</p>
    <p>Outlook</p>
    <p>outlook</p>
    <p>OUTLOOK</p>
    <p>Express</p>
    <p>express</p>
    <p>EXPRESS</p>
    <p>To</p>
    <p>to</p>
    <p>TO</p>
    <p>Receive</p>
    <p>receive</p>
    <p>RECEIVE</p>
    <p>Emails</p>
    <p>emails</p>
    <p>EMAILS</p>
    <p>( ) ( | )</p>
    <p>( ) i i i</p>
    <p>i i i i i</p>
    <p>C w w w P w w w</p>
    <p>C w w</p>
    <p>( ) ( ( )) ( ) 0</p>
    <p>( )( | )</p>
    <p>( ) ( | )</p>
    <p>i i i i i i i i i</p>
    <p>i ii i i</p>
    <p>i i i i</p>
    <p>C w w w D C w w w if C w w w</p>
    <p>C w wP w w w</p>
    <p>w w P w w otherwise</p>
    <p>Backoff scheme:</p>
  </div>
  <div class="page"/>
  <div class="page">
    <p>Outline</p>
    <p>Motivation and Problem Description  Related Work  Our Approach  Implementation  Experimental Results  Summary</p>
  </div>
  <div class="page">
    <p>Datasets in Experiments</p>
    <p>73.2% contain extra line breaks  85.4% need sentence normalization  47.1% contain case errors  Only 1.6% are absolutely clean</p>
    <p>Data Set # of Email Containing</p>
    <p>Header Containing Signature</p>
    <p>Containing Prog. Code</p>
    <p>Text Only</p>
    <p>DC 100 1.00 0.87 0.15 0.0 Ontology 100 1.00 0.77 0.02 0.0</p>
    <p>NLP 60 1.00 0.883 0.0 0.0 ML 40 1.00 0.975 0.05 0.0</p>
    <p>Jena 700 0.996 0.97 0.38 0.0 Weka 200 0.995 0.975 0.17 0.0005</p>
    <p>Protg 500 0.28 0.822 0.032 0.168 OWL 500 0.384 0.932 0.042 0.048</p>
    <p>Mobility 400 0.44 0.745 0.0 0.183 WinServer 400 0.449 0.672 0.0125 0.221 Windows 1000 0.476 0.653 0.007 0.218</p>
    <p>PSS 1000 0.492 0.668 0.01 0.208 BR 310 0.495 0.643 0.0 0.244</p>
    <p>J2EE 255 1.00 0.561 0.094 0</p>
    <p>)3256(0.585) 4229(0.760)</p>
  </div>
  <div class="page">
    <p>Cleaning Results -- 5-fold Cross Validation</p>
    <p>Cleaning Task Precision Recall F1Measure</p>
    <p>Header Our Method 0.9695 0.9742 0.9719</p>
    <p>Baseline 0.9981 0.6055 0.7537</p>
    <p>Signature Our Method 0.9133 0.8838 0.8983</p>
    <p>Baseline 0.8854 0.2368 0.3736</p>
    <p>Quotation 0.9818 0.9201 0.9500</p>
    <p>Program Code 0.9297 0.7217 0.8126</p>
    <p>Extra Line Break</p>
    <p>Our Method 0.8553 0.9765 0.9119</p>
    <p>Baseline 0.6355 0.9813 0.7715</p>
    <p>Sentence 0.9493 0.9391 0.9442</p>
    <p>Baseline methods  Header detection (eClean2000)  Signature detection (rule based)  Extra line break detection baseline (eClean2000)</p>
    <p>For case restoration: -Our method can reach 98.15% in terms of accuracy -The accuracy of Trucasing is about 97.7%</p>
  </div>
  <div class="page">
    <p>Automatic Features vs. Manual Features</p>
    <p>Detection Task Precision Recall F1-Measure</p>
    <p>Header Manual 0.9695 0.9742 0.9719</p>
    <p>Automatic 0.9932 0.9626 0.9777</p>
    <p>Signature Manual 0.9133 0.8838 0.8983</p>
    <p>Automatic 0.7616 0.6671 0.7112</p>
  </div>
  <div class="page">
    <p>BR J2EE</p>
    <p>Term Extraction Using Email Cleaning</p>
  </div>
  <div class="page">
    <p>How Cleaning Processing Helps Term Extraction</p>
    <p>BR</p>
  </div>
  <div class="page">
    <p>How Cleaning Processing Helps Term Extraction (cont.)</p>
    <p>J2EE</p>
  </div>
  <div class="page">
    <p>Outline</p>
    <p>Motivation and Problem Description  Related Work  Our Approach  Implementation  Experimental Results  Summary</p>
  </div>
  <div class="page">
    <p>Summary</p>
    <p>Formalized email data cleaning as non-text filtering and text normalization</p>
    <p>Conducted email cleaning in cascaded approach  Used SVM models for header, signature, program code,</p>
    <p>and extra line break detection  Our approach significantly outperforms baseline methods  When applied to term extraction, significant improvement</p>
    <p>on extraction accuracy can be obtained</p>
  </div>
  <div class="page">
    <p>Thanks!</p>
  </div>
</Presentation>

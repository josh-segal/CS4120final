<?xml version="1.0" ?>
<Presentation>
  <div class="page">
    <p>Coarse-to-Fine Decoding for Neural Semantic Parsing</p>
    <p>July 16, 2018</p>
    <p>Li Dong and Mirella Lapata</p>
  </div>
  <div class="page">
    <p>Semantic Parsing</p>
    <p>Mapping natural language to structured representations</p>
    <p>Human-friendly -&gt; Computer-friendly</p>
    <p>all flights from dallas before 10am</p>
    <p>(lambda $0 e (and (flight $0) (from $0 dallas:ci) (&lt; (departure_time $0) 1000:ti)))</p>
    <p>Semantic Parser</p>
    <p>Example from ATIS (Kwiatkowski et al., 2011)</p>
  </div>
  <div class="page">
    <p>Sequence decoder (Jia and Liang, 2016; Dong and Lapata, 2016; Ling et al., 2016 ; Iyer et al., 2017)</p>
    <p>Syntactically-constrained decoder (Dong and Lapata, 2016; Xiao et al., 2016; Alvarez-Melis and Jaakkola, 2017; Yin and Neubig, 2017; Cheng et al., 2017; Krishnamurthy et al., 2017; Rabinovich et al., 2017; Xu et al., 2017)</p>
    <p>Neural Semantic Parsing</p>
    <p>Encoder Decoder</p>
    <p>LS T M</p>
    <p>answer(J,(compa</p>
    <p>ny(J,'microsoft'),j</p>
    <p>ob(J),not((req_de</p>
    <p>g(J,'bscs')))))</p>
    <p>Attention Layer</p>
    <p>LS T M</p>
    <p>what microsoft jobs</p>
    <p>do not require a</p>
    <p>bscs?</p>
    <p>Input</p>
    <p>Utterance</p>
    <p>Structured</p>
    <p>Representation</p>
  </div>
  <div class="page">
    <p>This Work</p>
    <p>Meaning Sketch</p>
    <p>(lambda#2 (and flight@1 from@2 (&lt; departure time@1 ? ) ) )</p>
    <p>all flights from dallas before 10am</p>
    <p>(lambda $0 e (and (flight $0) (from $0 dallas:ci) (&lt; (departure_time $0) 1000:ti)))</p>
    <p>Low-level Details</p>
    <p>(e.g., arguments and variable names)</p>
    <p>&amp;</p>
  </div>
  <div class="page">
    <p>Python code example</p>
    <p>SQL example</p>
    <p>Meaning Sketch</p>
    <p>if len ( NAME ) &lt; NUMBER or NAME [ NUMBER ] != STRING :</p>
    <p>if length of bits is lesser than integer 3 or second</p>
    <p>element of bits is not equal to string as ,</p>
    <p>if len(bits) &lt; 3 or bits[1] != as:</p>
    <p>WHERE &gt; AND =</p>
    <p>What record company did conductor Mikhail Snitko</p>
    <p>record for after 1996?</p>
    <p>SELECT Record Company WHERE (Year of Recording &gt; 1996) AND (Conductor = Mikhail Snitko)</p>
  </div>
  <div class="page">
    <p>Disentangle high-level from low-level semantics</p>
    <p>Model meaning at different levels of granularity</p>
    <p>More compact meaning representation</p>
    <p>Length: 21.1  9.2 (on ATIS)</p>
    <p>Explicit sharing coarse structure</p>
    <p>For examples that have the same basic meaning</p>
    <p>Provide global context to fine meaning decoder</p>
    <p>Know what the basic meaning of input looks like</p>
    <p>Meaning Sketch</p>
  </div>
  <div class="page">
    <p>Method</p>
  </div>
  <div class="page">
    <p>Method</p>
  </div>
  <div class="page">
    <p>Method</p>
  </div>
  <div class="page">
    <p>Sketch constrains the decoding output</p>
    <p>Example 1: one augment is missing</p>
    <p>Example 2: type information</p>
    <p>Method</p>
    <p>flight@1 (flight )</p>
    <p>NUMBER (a numeric token)</p>
  </div>
  <div class="page">
    <p>: input, : sketch, : meaning representation</p>
    <p>Training: maximize the log likelihood</p>
    <p>Inference: greedy search</p>
    <p>Training and Inference</p>
    <p>Coarse Meaning</p>
    <p>Decoder</p>
    <p>Fine Meaning</p>
    <p>Decoder</p>
  </div>
  <div class="page">
    <p>Natural language to logical form (Geo/ATIS)</p>
    <p>Natural language to source code (Django)</p>
    <p>Natural language to SQL (WikiSQL)</p>
    <p>Semantic Parsing Tasks</p>
    <p>what is the population of the state with the largest area?</p>
    <p>(argmax $0 (and (mountain:t $0) (loc:t $0 alaska:s)) (elevation:i $0))</p>
    <p>if length of bits is lesser than integer 3 or second element of bits is not equal to string as ,</p>
    <p>if len(bits) &lt; 3 or bits[1] != as:</p>
    <p>What record company did conductor Mikhail Snitko record for after 1996?</p>
    <p>SELECT Record Company WHERE (Year of Recording &gt; 1996) AND (Conductor = Mikhail Snitko)</p>
    <p>Pianist Conductor Record Company Year of Recording Format</p>
    <p>(Zettlemoyer and Collins, 2005; Kwiatkowski et al., 2011; Oda et al., 2015; Zhong et al., 2017)</p>
  </div>
  <div class="page">
    <p>Natural Language to Logical Form</p>
    <p>(lambda#2 (and flight@1 from@2 (&lt; departure time@1 ? ) ) )</p>
    <p>(lambda $0 e (and (flight $0) (from $0 dallas:ci) (&lt; (departure_time $0) 1000:ti)))</p>
    <p># Variable</p>
    <p>information (e.g., lambda,</p>
    <p>count, and argmax)</p>
    <p>? Partial argument</p>
    <p>information</p>
    <p>@ Arguments of predicate or</p>
    <p>operator</p>
  </div>
  <div class="page">
    <p>Substitute tokens with their token types</p>
    <p>Except</p>
    <p>Delimiters (e.g., [, and :)</p>
    <p>Operators (e.g., +, and *)</p>
    <p>Built-in keywords (e.g., True, and while)</p>
    <p>Natural Language to Source Code</p>
    <p>if NAME [ : NUMBER ] . NAME ( ) == STRING :</p>
    <p>if s [ : 4 ] . lower ( ) == http:</p>
    <p>https://docs.python.org/3/library/tokenize.html</p>
  </div>
  <div class="page">
    <p>WikiSQL (Zhong et al., 2017)</p>
    <p>Natural Language to SQL</p>
    <p>WHERE &gt; AND =</p>
    <p>SELECT Record Company WHERE (Year of Recording &gt; 1996) AND (Conductor = Mikhail Snitko)</p>
    <p>SELECT agg_operator agg_column WHERE (cond_column cond_operator cond_value) AND ...</p>
  </div>
  <div class="page">
    <p>Natural Language to SQL</p>
    <p>How many presidents are graduated from A?</p>
    <p>President College</p>
    <p>SELECT COUNT(President) WHERE (College = A)</p>
    <p>College Number of Presidents</p>
    <p>SELECT Number of Presidents WHERE (College = A)</p>
    <p>Decoding is table-aware</p>
  </div>
  <div class="page">
    <p>1 2 43</p>
    <p>Table-aware input encoder</p>
    <p>Natural Language to SQL</p>
    <p>|| of |||| college number presidents</p>
    <p>Column 1 Column 2</p>
    <p>1 2</p>
    <p>2 3 4</p>
    <p>1 2 43</p>
    <p>1</p>
    <p>Input Question</p>
    <p>Question-to-Table Attention</p>
    <p>2  4</p>
    <p>3 1</p>
    <p>LSTM units</p>
    <p>Vectors</p>
    <p>Attention</p>
  </div>
  <div class="page">
    <p>2</p>
    <p>SELECT clause</p>
    <p>Natural Language to SQL</p>
    <p>SELECT agg_operator agg_column WHERE (cond_column cond_operator cond_value) AND ...</p>
    <p>Softmax Classifier</p>
    <p>agg_operator {empty, COUNT, MIN, MAX, SUM, AVG}</p>
    <p>|| of ||college number presidents</p>
    <p>Column 1 Column 2</p>
    <p>Column Pointer</p>
    <p>1</p>
    <p>agg_column Question</p>
    <p>Vector</p>
  </div>
  <div class="page">
    <p>WHERE Clause</p>
    <p>Natural Language to SQL</p>
    <p>WHERE &gt; AND = Sketch</p>
    <p>Classification</p>
    <p>SELECT agg_operator agg_column WHERE (cond_column cond_operator cond_value) AND ...</p>
    <p>What record company did conductor</p>
    <p>Mikhail Snitko record for after 1996 ? Pianist Conductor</p>
    <p>Record Company</p>
    <p>Year of Recording</p>
    <p>Format</p>
  </div>
  <div class="page">
    <p>WHERE Clause</p>
    <p>Natural Language to SQL</p>
    <p>WHERE &gt; AND =</p>
    <p>1 2</p>
    <p>2</p>
    <p>AND cond_col Pointer</p>
    <p>cond Pointer</p>
    <p>Sketch-Guided</p>
    <p>WHERE Decoding</p>
    <p>Sketch</p>
    <p>Encoding</p>
    <p>Sketch</p>
    <p>Classification</p>
    <p>SELECT agg_operator agg_column WHERE (cond_column cond_operator cond_value) AND ...</p>
    <p>4</p>
    <p>1 3 4</p>
    <p>What record company did conductor</p>
    <p>Mikhail Snitko record for after 1996 ? Pianist Conductor</p>
    <p>Record Company</p>
    <p>Year of Recording</p>
    <p>Format</p>
  </div>
  <div class="page">
    <p>WHERE Clause</p>
    <p>Natural Language to SQL</p>
    <p>WHERE &gt; AND =</p>
    <p>1 2</p>
    <p>2</p>
    <p>AND cond_col Pointer</p>
    <p>cond Pointer</p>
    <p>Sketch-Guided</p>
    <p>WHERE Decoding</p>
    <p>Sketch</p>
    <p>Encoding</p>
    <p>Sketch</p>
    <p>Classification</p>
    <p>SELECT agg_operator agg_column WHERE (cond_column cond_operator cond_value) AND ...</p>
    <p>4</p>
    <p>1 3 4</p>
    <p>What record company did conductor</p>
    <p>Mikhail Snitko record for after 1996 ? Pianist Conductor</p>
    <p>Record Company</p>
    <p>Year of Recording</p>
    <p>Format</p>
    <p>Point to a table column</p>
    <p>Point to a text span</p>
  </div>
  <div class="page">
    <p>Experimental Results</p>
    <p>(Ling et al., 2016) (Yin and Neubig, 2017)</p>
    <p>OneStage (w/o sketch)</p>
    <p>Coarse2Fine</p>
    <p>A cc</p>
    <p>u ra</p>
    <p>cy</p>
    <p>NL-&gt;Code (Django)</p>
  </div>
  <div class="page">
    <p>Experimental Results</p>
    <p>Geo ATIS</p>
    <p>A cc</p>
    <p>u ra</p>
    <p>cy</p>
    <p>NL-&gt;Logical Form</p>
    <p>Seq2Seq Seq2Tree ASN OneStage Coarse2Fine</p>
    <p>Baseline: (Dong and Lapata, 2016; Rabinovich et al., 2017)</p>
  </div>
  <div class="page">
    <p>Experimental Results</p>
    <p>Aug Pointer Network (Zhong</p>
    <p>et al., 2017)</p>
    <p>(Zhong et al., 2017)</p>
    <p>(Xu et al., 2017) OneStage (w/o sketch)</p>
    <p>Coarse2Fine</p>
    <p>E xe</p>
    <p>cu ti</p>
    <p>o n</p>
    <p>A cc</p>
    <p>u ra</p>
    <p>cy</p>
    <p>NL-&gt;SQL (WikiSQL)</p>
  </div>
  <div class="page">
    <p>Geo ATIS Django WikiSQL</p>
    <p>S ke</p>
    <p>tc h</p>
    <p>A cc</p>
    <p>u ra</p>
    <p>cy</p>
    <p>OneStage Coarse2Fine</p>
    <p>Sketch Accuracy</p>
  </div>
  <div class="page">
    <p>Oracle Meaning Sketch</p>
    <p>Geo ATIS Django WikiSQL</p>
    <p>A cc</p>
    <p>u ra</p>
    <p>cy</p>
    <p>Coarse2Fine + Oracle Sketch</p>
  </div>
  <div class="page">
    <p>Alternative ways of defining meaning sketches</p>
    <p>Different levels of granularity</p>
    <p>Weakly supervised setting</p>
    <p>Meaning sketch reduces search space</p>
    <p>Partial annotation</p>
    <p>Only annotate meaning sketches for some examples</p>
    <p>Future Work</p>
  </div>
  <div class="page">
    <p>Thanks! Q&amp;A</p>
    <p>Code Available:</p>
    <p>http://homepages.inf.ed.ac.uk/s1478528</p>
  </div>
</Presentation>

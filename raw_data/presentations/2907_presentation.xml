<?xml version="1.0" ?>
<Presentation>
  <div class="page">
    <p>Auto Content Moderation in C2C e-Commerce</p>
    <p>Shunya Ueta, Suganprabu Nagarajan, Mizuki Sango (Mercari, inc)</p>
  </div>
  <div class="page">
    <p>Contents</p>
  </div>
  <div class="page">
    <p>Identify potentially unsafe or inappropriate content in service</p>
    <p>App Discovery with Google Play, Part 3: Machine Learning to Fight Spam and Abuse at Scale</p>
    <p>YouTube Community Guidelines enforcement  AI advances to better detect hate speech by Facebook  Advances in content understanding, self-supervision to protect people by Facebook  Facebook Transparency Report  A Safe and Secure Marketplace by Mercari  etc.</p>
    <p>Content Moderation</p>
  </div>
  <div class="page">
    <p>The Mercari app is a C2C marketplace where individuals can easily sell used items</p>
    <p>What is Mercari?</p>
    <p>Japan</p>
    <p>U.S.</p>
    <p>Monthly active users: 16+ Million</p>
    <p>Total number of items: 1.5+ Billion</p>
  </div>
  <div class="page">
    <p>Why Content Moderation in C2C e-Commerce?</p>
    <p>C2C e-Commerce</p>
    <p>Sellers Buyers</p>
    <p>We want to decrease risk for customer and marketplace</p>
    <p>Sellers unintentionally violate policy. Buyers buy violated items without knowing</p>
    <p>Policy case: counterfeits, weapons, etc.</p>
  </div>
  <div class="page">
    <p>Content Moderation system</p>
    <p>C2C e-Commerce</p>
    <p>Sell items Discover</p>
    <p>Moderator Manual review</p>
    <p>Moderation Service</p>
    <p>Hide items &amp; Alert</p>
    <p>marketplace</p>
    <p>Sellers Buyers screened</p>
  </div>
  <div class="page">
    <p>Concept of Moderation Service: Rule based</p>
    <p>Moderation Service</p>
    <p>Rule based Pros  Easy to develop and can be</p>
    <p>quickly released to production</p>
    <p>Cons  Hard to manage  Difficult to cover the</p>
    <p>inconsistencies in spellings e.g. {NIKE, nike, , }</p>
    <p>Moderator Manual review</p>
  </div>
  <div class="page">
    <p>Concept of Moderation Service: ML</p>
    <p>Moderation Service</p>
    <p>Rule based Pros  Automatically learns the features</p>
    <p>of items deleted by moderators  Adapts to spelling inconsistencies</p>
    <p>Cons  Model update is hard  Concept drift</p>
    <p>(a.k.a. training-serving skew)</p>
    <p>Moderator Manual review</p>
    <p>Machine Learning</p>
  </div>
  <div class="page">
    <p>How to create the data for ML</p>
    <p>Rule based Moderator</p>
    <p>Machine Learning</p>
    <p>Sell items</p>
    <p>Report items Hide items &amp; Alert</p>
    <p>Positive Deleted items by Moderator</p>
    <p>Negative Not deleted items by Moderator</p>
    <p>Dataset</p>
    <p>Moderation Service</p>
    <p>Review</p>
  </div>
  <div class="page">
    <p>Task Design</p>
    <p>Data is highly imbalanced  Each violated topics total</p>
    <p>number of alerts is bounded by moderator team</p>
    <p>All models trained as one-vs-all  No side-effect when deploying</p>
    <p>a trained model to other class  Hard to improve performance</p>
    <p>for each topic in a multi-class model</p>
    <p>Negative Violated Topic A Violated Topic N</p>
    <p>...</p>
    <p>Positive</p>
    <p>Model A</p>
    <p>Model B</p>
    <p>...</p>
    <p>counterfeits weapons</p>
  </div>
  <div class="page">
    <p>Multimodality of content</p>
    <p>Case of items</p>
    <p>Items have multimodal data  Image  Text  Category  Brand  Price, etc.</p>
    <p>We use multimodal model to improve model performance. See our article: https://tech.mercari.com/entry/2019/09/12/130000</p>
  </div>
  <div class="page">
    <p>Model selection based on dataset size</p>
    <p>Gradient Boosted Decision Trees (GBDT)</p>
    <p>Efficient for training and inference when training data size is not large</p>
    <p>*Image feature is not used in GBDT</p>
    <p>Gated Multimodal Unit (GMU)</p>
    <p>Potentially most accurate using multimodal data</p>
  </div>
  <div class="page">
    <p>Offline evaluation</p>
    <p>Metric is Precision@K: K is the bound on the daily total number of alerts</p>
    <p>in each violated topic decided by Moderators</p>
    <p>Current models prediction result In production</p>
    <p>Top K</p>
    <p>Evaluate new model against current model using the same item ids</p>
    <p>item ids same as production top K</p>
    <p>New models prediction result In test dataset.</p>
    <p>e.g.</p>
  </div>
  <div class="page">
    <p>Online evaluation</p>
    <p>Faster decision making leads to efficient operation</p>
    <p>Current Model</p>
    <p>New Model</p>
    <p>Same traffic Moderator</p>
    <p>Manual review</p>
    <p>Each model alert number: K/2 Metrics: Precision@K/2</p>
    <p>After a certain time after a new model is released, we decide which model should be deprecated based on the above metrics.</p>
    <p>Classic A/B testing can take several months. It was difficult to collect enough transactions for t-test.</p>
  </div>
  <div class="page">
    <p>Offline/online evaluation result</p>
    <p>Algorithms Offline Online</p>
    <p>GBDT +18.2% Not Released</p>
    <p>GMU +21.2% +23.2%</p>
    <p>Table shows the relative performance gain of offline evaluation metric is precision@K , online evaluation metric is precision@K/2</p>
    <p>on one violated topic</p>
    <p>Baseline model is Logistic regression that was already released in production</p>
  </div>
  <div class="page">
    <p>Container based Training Pipeline</p>
    <p>Data Load</p>
    <p>Write manifest files containing requirements like CPU, GPU and Storage</p>
    <p>CPU CPU or GPU</p>
    <p>Training Offline Evaluation</p>
    <p>CPU</p>
    <p>BigQueryBigQuery</p>
  </div>
  <div class="page">
    <p>Serving system architecture</p>
    <p>Message queue</p>
    <p>Message queue</p>
    <p>proxy layer prediction layer</p>
    <p>.</p>
    <p>Preprocessing + inference Container</p>
    <p>Pod GBDT</p>
    <p>based model</p>
    <p>Preprocessing Container</p>
    <p>..Proxy container</p>
    <p>subscribe</p>
    <p>publish</p>
    <p>Pod</p>
    <p>Inference Container</p>
    <p>Caffe2</p>
    <p>Pod Deep Learning based model</p>
    <p>We manage over 15 Machine Learning models in production</p>
    <p>Pod Deep Learning based model</p>
  </div>
  <div class="page">
    <p>Horizontal Pod Autoscaler by kubernetes</p>
    <p>Reliable system: Traffic changes with time, HPA can adopt to varying traffic</p>
    <p>Cheaper billing cost: Reduce to 1/6 by HPA</p>
    <p>Billing cost transition after applying HPA</p>
    <p>Billing cost</p>
    <p>day</p>
    <p>Each color is each machine learning model</p>
  </div>
  <div class="page">
    <p>Impact of Machine Learning system</p>
    <p>Discovered 100 violating items</p>
    <p>Moderator Manual review</p>
    <p>Moderation Service</p>
    <p>Rule based</p>
    <p>Machine Learning</p>
    <p>Hide &amp; Alert</p>
    <p>+Discovered 554 violating items</p>
    <p>Machine Learning system</p>
    <p>has increased coverage by 554%  over rule based approach e.g.</p>
  </div>
  <div class="page">
    <p>If you have a question to this talk</p>
    <p>First author is Shunya UETA, please e-mail: hurutoriya@mercari.com</p>
    <p>Acknowledgements</p>
    <p>Co-Authors: Suganprabu Nagarajan, Mizuki Sango</p>
    <p>Contributter:</p>
    <p>Abhishek Vilas Munagekar, Yusuke Shido, Vamshi Teja Racha, Sumit Verma and Keisuke Umezawa for their contribute to this system</p>
    <p>Dr. Antony for his feedback about the paper  Yushi Kurita, Yuki Ito as Product Manager, All Trust and Safety project member and</p>
    <p>all Customer Service as Moderator to success this project.</p>
    <p>Question and Thanks collaborator</p>
  </div>
</Presentation>

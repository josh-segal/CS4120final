<?xml version="1.0" ?>
<Presentation>
  <div class="page">
    <p>AccuRate: Constellation Aware Rate Estimation</p>
    <p>in Wireless Networks</p>
    <p>Souvik Sen, Naveen Santhapuri, Romit Roy Choudhury, Srihari Nelakuditi</p>
  </div>
  <div class="page">
    <p>Bit-rate in Wireless Networks</p>
    <p>Wireless link throughput depends on transmission bit-rate</p>
    <p>Choosing the optimal bit-rate is an important problem</p>
  </div>
  <div class="page">
    <p>Bit-rate in Wireless Networks</p>
    <p>Optimal bit-rate selection is challenging because the wireless channel varies over:</p>
    <p>Space Time</p>
    <p>Time</p>
    <p>C ha</p>
    <p>nn el</p>
    <p>Time C</p>
    <p>ha nn</p>
    <p>el</p>
  </div>
  <div class="page">
    <p>Recently PHY-based:  SoftRate [SIGCOMM 09]</p>
    <p>Uses a BER heuristic to estimate bit rate  BER accurately identifies when to increase/decrease rate  However, may not be able to jump to optimal rate</p>
    <p>Current Wireless Rate Selection</p>
    <p>Data</p>
    <p>ACK</p>
    <p>Remember History Data</p>
    <p>SNR</p>
    <p>Frame Based SNR Based</p>
    <p>SampleRate, RRAA RBAR, CHARM</p>
  </div>
  <div class="page">
    <p>Ideally Tx wants optimal rate for next packet</p>
  </div>
  <div class="page">
    <p>Ideally Tx wants optimal rate for next packet</p>
    <p>Function of optimal rate of the previous packet</p>
  </div>
  <div class="page">
    <p>Ideally Tx wants optimal rate for next packet</p>
    <p>Function of optimal rate of the previous packet</p>
  </div>
  <div class="page">
    <p>Ideally Tx wants optimal rate for next packet</p>
    <p>Function of optimal rate of the previous packet</p>
    <p>Given a transmission at rate R, what would have been the max rate R*,</p>
    <p>at which that transmission would have been successful</p>
    <p>In other words,</p>
  </div>
  <div class="page">
    <p>Ideally Tx wants optimal rate for next packet</p>
    <p>Function of optimal rate of the previous packet</p>
    <p>Given a transmission at rate R, what would have been the max rate R*,</p>
    <p>at which that transmission would have been successful</p>
    <p>In other words,</p>
    <p>We propose AccuRate</p>
  </div>
  <div class="page">
    <p>Background: Symbols, Modulation, Bit-rate</p>
  </div>
  <div class="page">
    <p>Tx 4QAM Symbol</p>
    <p>Data =</p>
    <p>Physical Layer Symbols</p>
  </div>
  <div class="page">
    <p>Tx 4QAM Symbol</p>
    <p>Data =</p>
    <p>Physical Layer Symbols</p>
  </div>
  <div class="page">
    <p>Tx 4QAM Symbol</p>
    <p>Data =</p>
    <p>Physical Layer Symbols</p>
  </div>
  <div class="page">
    <p>Tx 4QAM Symbol</p>
    <p>Data =</p>
    <p>Symbols to Modulation</p>
  </div>
  <div class="page">
    <p>Tx 4QAM Symbol</p>
    <p>Data =</p>
    <p>Symbols to Modulation</p>
  </div>
  <div class="page">
    <p>Tx 4QAM Symbol</p>
    <p>Data =</p>
    <p>Symbols to Modulation</p>
    <p>Rx 4QAM Symbol</p>
    <p>Channel</p>
  </div>
  <div class="page">
    <p>Dispersion11</p>
    <p>Tx 4QAM Symbol</p>
    <p>Data =</p>
    <p>Symbols to Modulation</p>
    <p>Rx 4QAM Symbol</p>
    <p>Channel</p>
  </div>
  <div class="page">
    <p>Dispersion11</p>
    <p>Tx 4QAM Symbol</p>
    <p>Data =</p>
    <p>Symbols to Modulation</p>
    <p>Rx 4QAM Symbol</p>
    <p>Channel</p>
  </div>
  <div class="page">
    <p>Dispersion 11</p>
    <p>Rx 4QAM Symbol</p>
    <p>Symbols to Modulation</p>
    <p>Tx 4QAM Symbol</p>
    <p>Channel</p>
  </div>
  <div class="page">
    <p>Dispersion 11</p>
    <p>Rx 4QAM Symbol</p>
    <p>Symbols to Modulation</p>
    <p>Tx 4QAM Symbol</p>
    <p>Channel</p>
  </div>
  <div class="page">
    <p>Different Modulations in 802.11</p>
    <p>Tx 16QAM Symbol</p>
    <p>Tx 4QAM Symbol</p>
    <p>Channel</p>
    <p>Dispersion 11</p>
    <p>Rx 4QAM Symbol</p>
    <p>Channel</p>
    <p>Rx 16QAM Symbol</p>
    <p>Dispersion</p>
  </div>
  <div class="page">
    <p>Different Modulations in 802.11</p>
    <p>Tx 4QAM Symbol</p>
    <p>Channel</p>
    <p>Dispersion 11</p>
    <p>Rx 4QAM Symbol</p>
    <p>Tx 64QAM Symbol</p>
    <p>Data =</p>
    <p>Rx 64QAM Symbol</p>
    <p>Channel</p>
    <p>Dispersion</p>
  </div>
  <div class="page">
    <p>Why not always transmit many bits per symbol?</p>
    <p>e.g., 64QAM or 54Mbps</p>
  </div>
  <div class="page">
    <p>Weak Channel Induces Errors</p>
    <p>Data 01111001 ....=</p>
    <p>Tx 16QAM Symbol</p>
  </div>
  <div class="page">
    <p>Weak Channel Induces Errors</p>
    <p>Data 01111001 ....=</p>
    <p>Tx 16QAM Symbol</p>
    <p>Weak Channel</p>
  </div>
  <div class="page">
    <p>High Dispersion</p>
    <p>Weak Channel Induces Errors</p>
    <p>Data 01111001 ....=</p>
    <p>Tx 16QAM Symbol</p>
    <p>Weak Channel</p>
  </div>
  <div class="page">
    <p>High Dispersion</p>
    <p>Weak Channel Induces Errors</p>
    <p>Data 01111001 ....=</p>
    <p>Tx 16QAM Symbol</p>
    <p>Weak Channel</p>
    <p>Wrongly demodulated symbol</p>
  </div>
  <div class="page">
    <p>In General ...</p>
    <p>Strong Channel</p>
    <p>Moderate Channel</p>
    <p>Weak Channel</p>
  </div>
  <div class="page">
    <p>In General ...</p>
    <p>Strong Channel</p>
    <p>Moderate Channel</p>
    <p>Weak Channel</p>
  </div>
  <div class="page">
    <p>In General ...</p>
    <p>Strong Channel</p>
    <p>Moderate Channel</p>
    <p>Weak Channel</p>
    <p>Smaller dispersion permits higher rate</p>
  </div>
  <div class="page">
    <p>AccuRate Design and Implementation</p>
  </div>
  <div class="page">
    <p>AccuRate Design and Implementation</p>
    <p>Hypothesis: Symbol dispersion is independent of modulation</p>
  </div>
  <div class="page">
    <p>Dispersion Independent of Modulation?</p>
    <p>Tx 4QAM</p>
    <p>Tx 16QAM</p>
    <p>Channel</p>
    <p>Rx QPSK</p>
    <p>Rx16QAM</p>
  </div>
  <div class="page">
    <p>Dispersion Independent of Modulation?</p>
    <p>Fr ac</p>
    <p>tio n</p>
    <p>of s</p>
    <p>ym bo</p>
    <p>ls</p>
    <p>Symbol dispersion magnitude</p>
    <p>Testbed</p>
    <p>BPSK QPSK</p>
  </div>
  <div class="page">
    <p>Dispersion Independent of Modulation?</p>
    <p>Fr ac</p>
    <p>tio n</p>
    <p>of s</p>
    <p>ym bo</p>
    <p>ls</p>
    <p>Symbol dispersion magnitude</p>
    <p>Testbed</p>
    <p>BPSK QPSK</p>
    <p>McKinley et. al., 2004, EVM calculation for broadband modulated signals</p>
  </div>
  <div class="page">
    <p>Selection of optimal modulation</p>
    <p>Hypothesis: Symbol dispersion is independent of modulation</p>
  </div>
  <div class="page">
    <p>Data</p>
  </div>
  <div class="page">
    <p>Data BPSK</p>
  </div>
  <div class="page">
    <p>Data BPSK</p>
  </div>
  <div class="page">
    <p>Data BPSK</p>
  </div>
  <div class="page">
    <p>Data BPSK</p>
  </div>
  <div class="page">
    <p>Data BPSK</p>
  </div>
  <div class="page">
    <p>BPSK</p>
    <p>Data</p>
  </div>
  <div class="page">
    <p>BPSK</p>
    <p>Data</p>
  </div>
  <div class="page">
    <p>BPSK</p>
    <p>Data</p>
    <p>We call it Virtual Channel Replay</p>
  </div>
  <div class="page">
    <p>AccuRate records dispersion for every symbol in a packet  Creates a vector: Channel Replay Vector (V)</p>
    <p>Channel Replay Vector</p>
    <p>d1 V = {d1, d2, ...., dn}</p>
  </div>
  <div class="page">
    <p>AccuRate records dispersion for every symbol in a packet  Creates a vector: Channel Replay Vector (V)</p>
    <p>When packet succeeds  All dispersions are known</p>
    <p>When packet fails  Approximates V from (known) preamble/postamble</p>
    <p>Channel Replay Vector</p>
    <p>d1 V = {d1, d2, ...., dn}</p>
  </div>
  <div class="page">
    <p>Channel</p>
    <p>Receiver</p>
    <p>Demodulator</p>
    <p>Packet</p>
  </div>
  <div class="page">
    <p>Channel</p>
    <p>Receiver</p>
    <p>Demodulator</p>
    <p>Packet BPSK Channel Replay Demodulator CRC</p>
    <p>Check</p>
  </div>
  <div class="page">
    <p>Channel</p>
    <p>Receiver</p>
    <p>Demodulator</p>
    <p>Packet BPSK Channel Replay Demodulator CRC</p>
    <p>Check</p>
  </div>
  <div class="page">
    <p>Channel</p>
    <p>Receiver</p>
    <p>Demodulator</p>
    <p>Packet BPSK Channel Replay Demodulator CRC</p>
    <p>Check</p>
    <p>Check</p>
  </div>
  <div class="page">
    <p>Channel</p>
    <p>Receiver</p>
    <p>Demodulator</p>
    <p>Packet BPSK Channel Replay Demodulator CRC</p>
    <p>Check</p>
    <p>Check</p>
  </div>
  <div class="page">
    <p>Channel</p>
    <p>Receiver</p>
    <p>Demodulator</p>
    <p>Packet BPSK Channel Replay Demodulator CRC</p>
    <p>Check</p>
    <p>Check</p>
    <p>Check</p>
  </div>
  <div class="page">
    <p>Channel</p>
    <p>Receiver</p>
    <p>Demodulator</p>
    <p>Packet BPSK Channel Replay Demodulator CRC</p>
    <p>Check</p>
    <p>Check</p>
    <p>Check</p>
  </div>
  <div class="page">
    <p>Channel</p>
    <p>Receiver</p>
    <p>Demodulator</p>
    <p>Packet</p>
    <p>Best Rate</p>
    <p>BPSK Channel Replay Demodulator CRC</p>
    <p>Check</p>
    <p>Check</p>
    <p>Check</p>
  </div>
  <div class="page">
    <p>Optimal modulation Optimal rate</p>
  </div>
  <div class="page">
    <p>Optimal modulation Optimal rate</p>
    <p>Bit-rate is a function of both modulation and coding</p>
  </div>
  <div class="page">
    <p>Can we find the optimal &lt;modulation, coding&gt; for a received packet?</p>
  </div>
  <div class="page">
    <p>Channel</p>
    <p>Receiver</p>
    <p>Demodulator</p>
    <p>Data BPSK Channel Replay1/2 Demodulator CRC CheckDecoder</p>
    <p>BPSK Channel Replay3/4 Demodulator CRC CheckDecoder</p>
    <p>QAM4 Channel Replay1/2 Demodulator CRC CheckDecoder</p>
    <p>QAM4 Channel Replay3/4 Demodulator CRC CheckDecoder</p>
    <p>Decoder</p>
    <p>QAM64 Channel Replay3/4 Demodulator CRC CheckDecoder</p>
  </div>
  <div class="page">
    <p>Channel</p>
    <p>Receiver</p>
    <p>Demodulator</p>
    <p>Data BPSK Channel Replay1/2 Demodulator CRC CheckDecoder</p>
    <p>BPSK Channel Replay3/4 Demodulator CRC CheckDecoder</p>
    <p>QAM4 Channel Replay1/2 Demodulator CRC CheckDecoder</p>
    <p>QAM4 Channel Replay3/4 Demodulator CRC CheckDecoder</p>
    <p>Decoder</p>
    <p>QAM64 Channel Replay3/4 Demodulator CRC CheckDecoder</p>
  </div>
  <div class="page">
    <p>Channel</p>
    <p>Receiver</p>
    <p>Demodulator</p>
    <p>Data BPSK Channel Replay1/2 Demodulator CRC CheckDecoder</p>
    <p>BPSK Channel Replay3/4 Demodulator CRC CheckDecoder</p>
    <p>QAM4 Channel Replay1/2 Demodulator CRC CheckDecoder</p>
    <p>QAM4 Channel Replay3/4 Demodulator CRC CheckDecoder</p>
    <p>Decoder</p>
    <p>QAM64 Channel Replay3/4 Demodulator CRC CheckDecoder</p>
  </div>
  <div class="page">
    <p>Channel</p>
    <p>Receiver</p>
    <p>Demodulator</p>
    <p>Data BPSK Channel Replay1/2 Demodulator CRC CheckDecoder</p>
    <p>BPSK Channel Replay3/4 Demodulator CRC CheckDecoder</p>
    <p>QAM4 Channel Replay1/2 Demodulator CRC CheckDecoder</p>
    <p>QAM4 Channel Replay3/4 Demodulator CRC CheckDecoder</p>
    <p>Decoder</p>
    <p>QAM64 Channel Replay3/4 Demodulator CRC CheckDecoder</p>
  </div>
  <div class="page">
    <p>Channel</p>
    <p>Receiver</p>
    <p>Demodulator</p>
    <p>Data BPSK Channel Replay1/2 Demodulator CRC CheckDecoder</p>
    <p>BPSK Channel Replay3/4 Demodulator CRC CheckDecoder</p>
    <p>QAM4 Channel Replay1/2 Demodulator CRC CheckDecoder</p>
    <p>QAM4 Channel Replay3/4 Demodulator CRC CheckDecoder</p>
    <p>Decoder</p>
    <p>QAM64 Channel Replay3/4 Demodulator CRC CheckDecoder</p>
  </div>
  <div class="page">
    <p>Channel</p>
    <p>Receiver</p>
    <p>Demodulator</p>
    <p>Data BPSK Channel Replay1/2 Demodulator CRC CheckDecoder</p>
    <p>BPSK Channel Replay3/4 Demodulator CRC CheckDecoder</p>
    <p>QAM4 Channel Replay1/2 Demodulator CRC CheckDecoder</p>
    <p>QAM4 Channel Replay3/4 Demodulator CRC CheckDecoder</p>
    <p>Decoder</p>
    <p>QAM64 Channel Replay3/4 Demodulator CRC CheckDecoder</p>
    <p>Best Rate</p>
  </div>
  <div class="page">
    <p>Performance Evaluation</p>
    <p>Used 802.11 like Tx and Rx design on USRP/GnuRadio  Modulation: BPSK, QPSK, 16QAM, 64QAM  Coding: Convolution coding with puncturing with rate 1/2, 3/4  Compare with Softrate, SNR-based</p>
    <p>Testbed  10 traces at walking speed  Trace based evaluation</p>
    <p>Simulation  Characterize AccuRates performance under high mobility  Raleigh fading channel simulator ported to GnuRadio</p>
    <p>Channel</p>
    <p>Simulator</p>
  </div>
  <div class="page">
    <p>What is the True Optimal Rate?</p>
    <p>Testbed  Using train of packets (Virtual Packet)  Each Virtual Packet consists of data packets at all bit-rates  Similar method as Softrate</p>
    <p>Virtual Packet 6Mbps 9Mbps 12Mbps 18Mbps 24Mbps 36Mbps 54Mbps</p>
  </div>
  <div class="page">
    <p>What is the True Optimal Rate?</p>
    <p>Testbed  Using train of packets (Virtual Packet)  Each Virtual Packet consists of data packets at all bit-rates  Similar method as Softrate</p>
    <p>Virtual Packet 6Mbps 9Mbps 12Mbps 18Mbps 24Mbps 36Mbps 54Mbps</p>
  </div>
  <div class="page">
    <p>What is the True Optimal Rate?</p>
    <p>Testbed  Using train of packets (Virtual Packet)  Each Virtual Packet consists of data packets at all bit-rates  Similar method as Softrate</p>
    <p>Virtual Packet 6Mbps 9Mbps 12Mbps 18Mbps 24Mbps 36Mbps 54Mbps</p>
    <p>Optimal Optimal-1 Optimal+1</p>
  </div>
  <div class="page">
    <p>Can we estimate the optimal rate?</p>
    <p>For correctly received packets, 100% in Simulation,</p>
    <p>-1 0 1</p>
    <p>Fr ac</p>
    <p>tio n</p>
    <p>of P</p>
    <p>ac ke</p>
    <p>ts</p>
    <p>(AccuRate Rate) minus (Optimal Rate)</p>
    <p>Simulation</p>
    <p>AccuRate correct-packets AccuRate using preamble AccuRate pre+postamble</p>
    <p>-1 0 1</p>
    <p>Fr ac</p>
    <p>tio n</p>
    <p>of P</p>
    <p>ac ke</p>
    <p>ts (AccuRate Rate) minus (Optimum Rate)</p>
    <p>Testbed</p>
    <p>AccuRate correct-packets AccuRate using preamble AccuRate pre+postamble</p>
    <p>Simulation Testbed</p>
    <p>Optimal Optimal</p>
  </div>
  <div class="page">
    <p>AccuRate needs to detect Interference</p>
  </div>
  <div class="page">
    <p>AccuRate needs to detect Interference</p>
    <p>Rate selection needs to be independent of interference</p>
  </div>
  <div class="page">
    <p>How to Detect Interference?</p>
    <p>Interference causes substantial symbol dispersion</p>
    <p>Interference</p>
  </div>
  <div class="page">
    <p>How to Detect Interference?  Interference starts first: Preamble with high dispersion</p>
    <p>Interference starts second: Postamble with high dispersion</p>
    <p>Data</p>
    <p>Data</p>
    <p>Interference</p>
    <p>Interference</p>
  </div>
  <div class="page">
    <p>How to Detect Interference?  Interference starts first: Preamble with high dispersion</p>
    <p>Interference starts second: Postamble with high dispersion</p>
    <p>Compare preamble with postamble dispersion</p>
    <p>Data</p>
    <p>Data</p>
    <p>Interference</p>
    <p>Interference</p>
  </div>
  <div class="page">
    <p>Interference Detection Accuracy</p>
    <p>BPSK 1/2 BPSK 3/4 QPSK 1/2 QPSK 3/4 QAM16 1/2 QAM16 3/4</p>
    <p>Fr ac</p>
    <p>tio n</p>
    <p>of L</p>
    <p>os t P</p>
    <p>ac ke</p>
    <p>ts</p>
    <p>Bit Rate</p>
    <p>Testbed</p>
    <p>AccuRate Softrate</p>
    <p>Testbed</p>
  </div>
  <div class="page">
    <p>Interference Detection Accuracy</p>
    <p>Detection Accuracy is better at higher rates (95%)</p>
    <p>BPSK 1/2 BPSK 3/4 QPSK 1/2 QPSK 3/4 QAM16 1/2 QAM16 3/4</p>
    <p>Fr ac</p>
    <p>tio n</p>
    <p>of L</p>
    <p>os t P</p>
    <p>ac ke</p>
    <p>ts</p>
    <p>Bit Rate</p>
    <p>Testbed</p>
    <p>AccuRate Softrate</p>
    <p>Testbed</p>
  </div>
  <div class="page">
    <p>Estimation Performance with Interference</p>
    <p>BPSK 1/2 BPSK 3/4 QPSK 1/2 QPSK 3/4 QAM16 1/2 QAM16 3/4</p>
    <p>Fr ac</p>
    <p>tio n</p>
    <p>of L</p>
    <p>os t P</p>
    <p>ac ke</p>
    <p>ts</p>
    <p>Bit Rate</p>
    <p>Testbed-AccuRate</p>
    <p>Overselect Accurate</p>
    <p>Underselect</p>
    <p>Correct</p>
    <p>Over select</p>
    <p>Under select</p>
    <p>Testbed</p>
  </div>
  <div class="page">
    <p>Estimation Performance with Interference</p>
    <p>BPSK 1/2 BPSK 3/4 QPSK 1/2 QPSK 3/4 QAM16 1/2 QAM16 3/4</p>
    <p>Fr ac</p>
    <p>tio n</p>
    <p>of L</p>
    <p>os t P</p>
    <p>ac ke</p>
    <p>ts</p>
    <p>Bit Rate</p>
    <p>Testbed-AccuRate</p>
    <p>Overselect Accurate</p>
    <p>Underselect</p>
    <p>Correct</p>
    <p>Over select</p>
    <p>Under select</p>
    <p>Testbed</p>
  </div>
  <div class="page">
    <p>AccuRate estimates the optimal rate for an already received packet</p>
    <p>What is the performance if the next transmission uses this rate?</p>
  </div>
  <div class="page">
    <p>Throughput at Walking Speeds</p>
    <p>N or</p>
    <p>m al</p>
    <p>iz ed</p>
    <p>T hr</p>
    <p>ou gh</p>
    <p>pu t</p>
    <p>Walking Trace Number</p>
    <p>Testbed</p>
    <p>AccuRate Softrate</p>
    <p>SNR based</p>
    <p>Testbed</p>
  </div>
  <div class="page">
    <p>Throughput at Walking Speeds</p>
    <p>N or</p>
    <p>m al</p>
    <p>iz ed</p>
    <p>T hr</p>
    <p>ou gh</p>
    <p>pu t</p>
    <p>Walking Trace Number</p>
    <p>Testbed</p>
    <p>AccuRate Softrate</p>
    <p>SNR based</p>
    <p>AccuRate achieves 87% of the optimal throughput</p>
    <p>Testbed</p>
  </div>
  <div class="page">
    <p>Throughput under Mobility</p>
    <p>AccuRate performs well even under high mobility</p>
    <p>T hr</p>
    <p>ou gh</p>
    <p>pu t (</p>
    <p>M bp</p>
    <p>s)</p>
    <p>Channel Coherence Time</p>
    <p>Simulation</p>
    <p>AccuRate Softrate</p>
    <p>SNR based</p>
  </div>
  <div class="page">
    <p>Limitations</p>
    <p>Hardware Complexity  AccuRate targets optimal rate estimation  Does not consider implementation cost</p>
    <p>Rate estimation sub-optimal under packet failure  Pre/Post amble based estimation achieves 93% accuracy  Improvements possible with midamble</p>
    <p>Interfering packet may engulf or be engulfed by data  AccuRate unable to detect such cases</p>
  </div>
  <div class="page">
    <p>Summary</p>
    <p>AccuRate uses symbol dispersion to estimate bit-rate  Symbol dispersion is a measure of channel behavior</p>
    <p>AccuRate replays this channel on different bit-rates  The max rate that passes this replay is declared optimal</p>
    <p>The optimal rate is prescribed for subsequent transmissions  USRP testbed results show 87% of optimal throughput</p>
    <p>SoftRate capable of choosing very good bit-rates  AccuRate pushes rate estimation towards optimality</p>
  </div>
  <div class="page">
    <p>Questions, Comments? ____________________________</p>
    <p>Thank You</p>
    <p>Duke SyNRG Research Group http://synrg.ee.duke.edu</p>
  </div>
</Presentation>

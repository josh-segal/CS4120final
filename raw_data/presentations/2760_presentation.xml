<?xml version="1.0" ?>
<Presentation>
  <div class="page">
    <p>Georgios P. Katsikas 2017</p>
    <p>Metron NFV Service Chains at the True</p>
    <p>Speed of the Underlying Hardware</p>
    <p>Georgios P. Katsikas1,3, Tom Barbette2, Dejan Kostic3,</p>
    <p>Rebecca Steinert1, and Gerald Q. Maguire Jr.3</p>
  </div>
  <div class="page">
    <p>Georgios P. Katsikas 2017 2</p>
    <p>High throughput and low latency</p>
    <p>Web</p>
    <p>Video</p>
    <p>...</p>
    <p>Analytics</p>
    <p>Introduction</p>
  </div>
  <div class="page">
    <p>Georgios P. Katsikas 2017 3</p>
    <p>IPSec LB</p>
    <p>...</p>
    <p>Web</p>
    <p>Analytics</p>
    <p>Video</p>
    <p>Firewall DPIRouter Router</p>
    <p>NAT IDS Monitor</p>
    <p>Service Chains of Network Functions</p>
  </div>
  <div class="page">
    <p>Georgios P. Katsikas 2017 4</p>
    <p>IPSec LB</p>
    <p>...</p>
    <p>Web</p>
    <p>Analytics</p>
    <p>Video</p>
    <p>Firewall DPIRouter Router</p>
    <p>NAT IDS Monitor</p>
    <p>Service Chains of Network Functions</p>
    <p>Minimize the performance impact of service chains</p>
  </div>
  <div class="page">
    <p>Georgios P. Katsikas 2017 5</p>
    <p>Source: D. Firestone et al. Hardware-Accelerated Networks</p>
    <p>at Scale in the Cloud, Microsoft Azure, SIGCOMM 2017 Motivation</p>
  </div>
  <div class="page">
    <p>Georgios P. Katsikas 2017 6</p>
    <p>Motivation Source: D. Firestone et al. Hardware-Accelerated Networks at Scale in the Cloud, Microsoft Azure, SIGCOMM 2017</p>
  </div>
  <div class="page">
    <p>Georgios P. Katsikas 2017 7</p>
    <p>Motivation Source: D. Firestone et al. Hardware-Accelerated Networks at Scale in the Cloud, Microsoft Azure, SIGCOMM 2017</p>
    <p>Service chains today greatly</p>
    <p>rely on CPU performance!</p>
  </div>
  <div class="page">
    <p>Georgios P. Katsikas 2017</p>
    <p>Can existing NFV systems operate at these emerging link speeds</p>
    <p>(i.e., at 100 Gbps)?</p>
  </div>
  <div class="page">
    <p>Georgios P. Katsikas 2017 9</p>
    <p>Generator Processor</p>
    <p>Mellanox Connect-X4</p>
    <p>Total Throughput</p>
    <p>Router NAPT LB</p>
    <p>Deployment at 100 Gbps</p>
  </div>
  <div class="page">
    <p>Georgios P. Katsikas 2017 10</p>
    <p>Hardware Limit</p>
    <p>Hardware Limit at 100 Gbps</p>
  </div>
  <div class="page">
    <p>Georgios P. Katsikas 2017 11</p>
    <p>Performance degradation</p>
    <p>Emulated E2Hardware Limit</p>
    <p>Existing NFV Solutions at 100 Gbps</p>
  </div>
  <div class="page">
    <p>Georgios P. Katsikas 2017 12</p>
    <p>Emulated E2Hardware Limit OpenBox</p>
    <p>Existing NFV Solutions at 100 Gbps</p>
  </div>
  <div class="page">
    <p>Georgios P. Katsikas 2017</p>
    <p>Emulated E2Hardware Limit OpenBox</p>
    <p>Hardware</p>
    <p>offloading</p>
    <p>Accurate CPU</p>
    <p>core dispatching</p>
    <p>Metron</p>
    <p>Metron  Hardware-level Performance</p>
  </div>
  <div class="page">
    <p>Georgios P. Katsikas 2017</p>
    <p>Emulated E2Hardware Limit OpenBox</p>
    <p>Metron</p>
    <p>Hardware</p>
    <p>performance</p>
    <p>Metron  Hardware-level Performance</p>
  </div>
  <div class="page">
    <p>Georgios P. Katsikas 2017</p>
    <p>Why do existing NFV systems lose performance?</p>
  </div>
  <div class="page">
    <p>Georgios P. Katsikas 2017 16</p>
    <p>Switch NF1 NF2 Idle</p>
    <p>Out In</p>
    <p>E2, ClickOS,</p>
    <p>NetVM</p>
    <p>Core 1 Core 2 Core 3 Core 4 Software switch</p>
    <p>dispatching</p>
  </div>
  <div class="page">
    <p>Georgios P. Katsikas 2017 17</p>
    <p>Switch NF1 NF2 Idle</p>
    <p>Out In</p>
    <p>E2, ClickOS,</p>
    <p>NetVM</p>
    <p>Core 1 Core 2 Core 3 Core 4 Software switch</p>
    <p>dispatching</p>
  </div>
  <div class="page">
    <p>Georgios P. Katsikas 2017 18</p>
    <p>Switch NF1 NF2 Idle</p>
    <p>Out In</p>
    <p>E2, ClickOS,</p>
    <p>NetVM</p>
    <p>Core 1 Core 2 Core 3 Core 4</p>
    <p>dispatching</p>
  </div>
  <div class="page">
    <p>Georgios P. Katsikas 2017 19</p>
    <p>Switch NF1 NF2 Idle</p>
    <p>Out In</p>
    <p>E2, ClickOS,</p>
    <p>NetVM</p>
    <p>Core 1 Core 2 Core 3 Core 4</p>
    <p>dispatching</p>
  </div>
  <div class="page">
    <p>Georgios P. Katsikas 2017 20</p>
    <p>Switch NF1 NF2 Idle</p>
    <p>Out In</p>
    <p>E2, ClickOS,</p>
    <p>NetVM</p>
    <p>Core 1 Core 2 Core 3 Core 4</p>
    <p>dispatching</p>
  </div>
  <div class="page">
    <p>Georgios P. Katsikas 2017 21</p>
    <p>Switch NF1 NF2 Idle</p>
    <p>Out In</p>
    <p>E2, ClickOS,</p>
    <p>NetVM</p>
    <p>Core 1 Core 2 Core 3 Core 4</p>
    <p>dispatching</p>
  </div>
  <div class="page">
    <p>Georgios P. Katsikas 2017 22</p>
    <p>Switch NF1 NF2 Idle</p>
    <p>Out In</p>
    <p>E2, ClickOS,</p>
    <p>NetVM</p>
    <p>Core 1 Core 2 Core 3 Core 4</p>
    <p>Software switch</p>
    <p>dispatching</p>
  </div>
  <div class="page">
    <p>Georgios P. Katsikas 2017 23</p>
    <p>Switch NF1 NF2 Idle</p>
    <p>Out In</p>
    <p>E2, ClickOS,</p>
    <p>NetVM</p>
    <p>Core 1 Core 2 Core 3 Core 4</p>
    <p>Rx Rx NF1+NF2 Tx</p>
    <p>Out InRSS</p>
    <p>Pipeline dispatching</p>
    <p>with or without RSS</p>
    <p>NFP, Flurries</p>
    <p>Software switch</p>
    <p>dispatching</p>
  </div>
  <div class="page">
    <p>Georgios P. Katsikas 2017 24</p>
    <p>Switch NF1 NF2 Idle</p>
    <p>Out In</p>
    <p>E2, ClickOS,</p>
    <p>NetVM</p>
    <p>Core 1 Core 2 Core 3 Core 4</p>
    <p>Rx Rx NF1+NF2 Tx</p>
    <p>Out InRSS</p>
    <p>Pipeline dispatching</p>
    <p>with or without RSS</p>
    <p>NFP, Flurries</p>
    <p>Software switch</p>
    <p>dispatching</p>
  </div>
  <div class="page">
    <p>Georgios P. Katsikas 2017 25</p>
    <p>Switch NF1 NF2 Idle</p>
    <p>Out In</p>
    <p>E2, ClickOS,</p>
    <p>NetVM</p>
    <p>Core 1 Core 2 Core 3 Core 4</p>
    <p>Rx Rx NF1+NF2 Tx</p>
    <p>Out InRSS</p>
    <p>Pipeline dispatching</p>
    <p>with or without RSS</p>
    <p>NFP, Flurries</p>
    <p>Software switch</p>
    <p>dispatching</p>
  </div>
  <div class="page">
    <p>Georgios P. Katsikas 2017 26</p>
    <p>Switch NF1 NF2 Idle</p>
    <p>Out In</p>
    <p>E2, ClickOS,</p>
    <p>NetVM</p>
    <p>Core 1 Core 2 Core 3 Core 4</p>
    <p>Rx Rx NF1+NF2 Tx</p>
    <p>Out InRSS</p>
    <p>Pipeline dispatching</p>
    <p>with or without RSS</p>
    <p>NFP, Flurries</p>
    <p>Software switch</p>
    <p>dispatching</p>
  </div>
  <div class="page">
    <p>Georgios P. Katsikas 2017 27</p>
    <p>Switch NF1 NF2 Idle</p>
    <p>Out In</p>
    <p>E2, ClickOS,</p>
    <p>NetVM</p>
    <p>Core 1 Core 2 Core 3 Core 4</p>
    <p>Rx Rx NF1+NF2 Tx</p>
    <p>Out InRSS</p>
    <p>Pipeline dispatching</p>
    <p>with or without RSS</p>
    <p>NFP, Flurries</p>
    <p>Software switch</p>
    <p>dispatching</p>
  </div>
  <div class="page">
    <p>Georgios P. Katsikas 2017 28</p>
    <p>Switch NF1 NF2 Idle</p>
    <p>Out In</p>
    <p>E2, ClickOS,</p>
    <p>NetVM</p>
    <p>Core 1 Core 2 Core 3 Core 4</p>
    <p>Rx Rx NF1+NF2 Tx</p>
    <p>Out InRSS</p>
    <p>Pipeline dispatching</p>
    <p>with or without RSS</p>
    <p>NFP, Flurries</p>
    <p>Software switch</p>
    <p>dispatching</p>
  </div>
  <div class="page">
    <p>Georgios P. Katsikas 2017 29</p>
    <p>Switch NF1 NF2 Idle</p>
    <p>Out In</p>
    <p>E2, ClickOS,</p>
    <p>NetVM</p>
    <p>Core 1 Core 2 Core 3 Core 4</p>
    <p>Out RSS In</p>
    <p>Flow Director</p>
    <p>Or</p>
    <p>Rule or hash-based</p>
    <p>hardware dispatching Rx+NF1 Idle NF2+Tx Idle</p>
    <p>Rx Rx NF1+NF2 Tx</p>
    <p>Out InRSS</p>
    <p>Pipeline dispatching</p>
    <p>with or without RSS</p>
    <p>NFP, Flurries</p>
    <p>OpenBox,</p>
    <p>SNF, FastClick</p>
    <p>Software switch</p>
    <p>dispatching</p>
  </div>
  <div class="page">
    <p>Georgios P. Katsikas 2017 30</p>
    <p>Switch NF1 NF2 Idle</p>
    <p>Out In</p>
    <p>E2, ClickOS,</p>
    <p>NetVM</p>
    <p>Core 1 Core 2 Core 3 Core 4</p>
    <p>Out RSS In</p>
    <p>Flow Director</p>
    <p>Or</p>
    <p>Rule or hash-based</p>
    <p>hardware dispatching Rx+NF1 Idle NF2+Tx Idle</p>
    <p>Rx Rx NF1+NF2 Tx</p>
    <p>Out InRSS</p>
    <p>Pipeline dispatching</p>
    <p>with or without RSS</p>
    <p>NFP, Flurries</p>
    <p>OpenBox,</p>
    <p>SNF, FastClick</p>
    <p>Software switch</p>
    <p>dispatching</p>
  </div>
  <div class="page">
    <p>Georgios P. Katsikas 2017 31</p>
    <p>Switch NF1 NF2 Idle</p>
    <p>Out In</p>
    <p>E2, ClickOS,</p>
    <p>NetVM</p>
    <p>Core 1 Core 2 Core 3 Core 4</p>
    <p>Out RSS In</p>
    <p>Flow Director</p>
    <p>Or</p>
    <p>Rule or hash-based</p>
    <p>hardware dispatching Rx+NF1 Idle NF2+Tx Idle</p>
    <p>Rx Rx NF1+NF2 Tx</p>
    <p>Out InRSS</p>
    <p>Pipeline dispatching</p>
    <p>with or without RSS</p>
    <p>NFP, Flurries</p>
    <p>OpenBox,</p>
    <p>SNF, FastClick</p>
    <p>Software switch</p>
    <p>dispatching</p>
  </div>
  <div class="page">
    <p>Georgios P. Katsikas 2017 32</p>
    <p>Switch NF1 NF2 Idle</p>
    <p>Out In</p>
    <p>E2, ClickOS,</p>
    <p>NetVM</p>
    <p>Core 1 Core 2 Core 3 Core 4</p>
    <p>Out RSS In</p>
    <p>Flow Director</p>
    <p>Or</p>
    <p>Rule or hash-based</p>
    <p>hardware dispatching Rx+NF1 Idle NF2+Tx Idle</p>
    <p>Rx Rx NF1+NF2 Tx</p>
    <p>Out InRSS</p>
    <p>Pipeline dispatching</p>
    <p>with or without RSS</p>
    <p>NFP, Flurries</p>
    <p>OpenBox,</p>
    <p>SNF, FastClick</p>
    <p>Software switch</p>
    <p>dispatching</p>
  </div>
  <div class="page">
    <p>Georgios P. Katsikas 2017 33</p>
    <p>Switch NF1 NF2 Idle</p>
    <p>Out In</p>
    <p>E2, ClickOS,</p>
    <p>NetVM</p>
    <p>Core 1 Core 2 Core 3 Core 4</p>
    <p>Out RSS In</p>
    <p>Flow Director</p>
    <p>Or</p>
    <p>Rule or hash-based</p>
    <p>hardware dispatching Rx+NF1 Idle NF2+Tx Idle</p>
    <p>Rx Rx NF1+NF2 Tx</p>
    <p>Out InRSS</p>
    <p>Pipeline dispatching</p>
    <p>with or without RSS</p>
    <p>NFP, Flurries</p>
    <p>OpenBox,</p>
    <p>SNF, FastClick</p>
    <p>Software switch</p>
    <p>dispatching</p>
  </div>
  <div class="page">
    <p>Georgios P. Katsikas 2017 34</p>
    <p>Switch NF1 NF2 Idle</p>
    <p>Out In</p>
    <p>E2, ClickOS,</p>
    <p>NetVM</p>
    <p>Core 1 Core 2 Core 3 Core 4</p>
    <p>Out RSS In</p>
    <p>Flow Director</p>
    <p>Or</p>
    <p>Rule or hash-based</p>
    <p>hardware dispatching Rx+NF1 Idle NF2+Tx Idle</p>
    <p>Rx Rx NF1+NF2 Tx</p>
    <p>Out InRSS</p>
    <p>Pipeline dispatching</p>
    <p>with or without RSS</p>
    <p>NFP, Flurries</p>
    <p>OpenBox,</p>
    <p>SNF, FastClick</p>
    <p>Software switch</p>
    <p>dispatching</p>
    <p>Fastest system  fewest inter-core transfers</p>
  </div>
  <div class="page">
    <p>Georgios P. Katsikas 2017 35</p>
    <p>Switch NF1 NF2 Idle</p>
    <p>Out In</p>
    <p>E2, ClickOS,</p>
    <p>NetVM</p>
    <p>Core 1 Core 2 Core 3 Core 4</p>
    <p>Out RSS In</p>
    <p>Flow Director</p>
    <p>Or</p>
    <p>Rule or hash-based</p>
    <p>hardware dispatching Rx+NF1 Idle NF2+Tx Idle</p>
    <p>Rx Rx NF1+NF2 Tx</p>
    <p>Out InRSS</p>
    <p>Pipeline dispatching</p>
    <p>with or without RSS</p>
    <p>NFP, Flurries</p>
    <p>OpenBox,</p>
    <p>SNF, FastClick</p>
    <p>Software switch</p>
    <p>dispatching</p>
    <p>The available time to process 64-byte packets at</p>
  </div>
  <div class="page">
    <p>Georgios P. Katsikas 2017 36</p>
    <p>Switch NF1 NF2 Idle</p>
    <p>Out In</p>
    <p>E2, ClickOS,</p>
    <p>NetVM</p>
    <p>Core 1 Core 2 Core 3 Core 4</p>
    <p>Out RSS In</p>
    <p>Flow Director</p>
    <p>Or</p>
    <p>Rule or hash-based</p>
    <p>hardware dispatching Rx+NF1 Idle NF2+Tx Idle</p>
    <p>Rx Rx NF1+NF2 Tx</p>
    <p>Out InRSS</p>
    <p>Pipeline dispatching</p>
    <p>with or without RSS</p>
    <p>NFP, Flurries</p>
    <p>OpenBox,</p>
    <p>SNF, FastClick</p>
    <p>Software switch</p>
    <p>dispatching</p>
    <p>The available time to process 64-byte packets at</p>
    <p>But, all existing NFV systems transfer each packet</p>
    <p>(one or more times) via DRAM or LLC</p>
  </div>
  <div class="page">
    <p>Georgios P. Katsikas 2017 37</p>
    <p>Switch NF1 NF2 Idle</p>
    <p>Out In</p>
    <p>E2, ClickOS,</p>
    <p>NetVM</p>
    <p>Core 1 Core 2 Core 3 Core 4</p>
    <p>Out RSS In</p>
    <p>Flow Director</p>
    <p>Or</p>
    <p>Rule or hash-based</p>
    <p>hardware dispatching Rx+NF1 Idle NF2+Tx Idle</p>
    <p>Rx Rx NF1+NF2 Tx</p>
    <p>Out InRSS</p>
    <p>Pipeline dispatching</p>
    <p>with or without RSS</p>
    <p>NFP, Flurries</p>
    <p>OpenBox,</p>
    <p>SNF, FastClick</p>
    <p>Software switch</p>
    <p>dispatching</p>
    <p>The available time to process 64-byte packets at</p>
    <p>But, all existing NFV systems transfer each packet</p>
    <p>(one or more times) via DRAM or LLC</p>
    <p>Such a transfer takes several nanoseconds itself!</p>
  </div>
  <div class="page">
    <p>Georgios P. Katsikas 2017 38</p>
    <p>Problems</p>
    <p>Greatly underutilized hardware</p>
    <p>Solutions</p>
    <p>Challenges</p>
    <p>Hardware heterogeneity</p>
    <p>Unified hardware</p>
    <p>management abstractions</p>
    <p>Zero Inter-core Transfers with Metron</p>
  </div>
  <div class="page">
    <p>Georgios P. Katsikas 2017 39</p>
    <p>Problems</p>
    <p>Greatly underutilized hardware</p>
    <p>Too many inter-core transfers</p>
    <p>Solutions</p>
    <p>Challenges</p>
    <p>Hardware heterogeneity</p>
    <p>Dynamic adaptation</p>
    <p>Unified hardware</p>
    <p>management abstractions</p>
    <p>Dispatch traffic classes to</p>
    <p>CPU cores using tags. Map</p>
    <p>each tag to the correct core</p>
    <p>Zero Inter-core Transfers with Metron</p>
  </div>
  <div class="page">
    <p>Georgios P. Katsikas 2017 40</p>
    <p>Problems</p>
    <p>Greatly underutilized hardware</p>
    <p>Too many inter-core transfers</p>
    <p>Solutions Results</p>
    <p>Challenges</p>
    <p>Hardware heterogeneity</p>
    <p>Dynamic adaptation</p>
    <p>Unified hardware</p>
    <p>management abstractions</p>
    <p>Dispatch traffic classes to</p>
    <p>CPU cores using tags. Map</p>
    <p>each tag to the correct core</p>
    <p>Up to 4.7x lower latency</p>
    <p>Up to 7.8x higher throughput</p>
    <p>Zero Inter-core Transfers with Metron</p>
  </div>
  <div class="page">
    <p>Georgios P. Katsikas 2017</p>
    <p>Metron</p>
    <p>Controller</p>
    <p>Firewall DPI</p>
    <p>Server Core 1</p>
    <p>Core 2</p>
    <p>Input service</p>
    <p>chain to the</p>
    <p>controller</p>
    <p>Source</p>
  </div>
  <div class="page">
    <p>Georgios P. Katsikas 2017</p>
    <p>Metron</p>
    <p>Controller</p>
    <p>Synthesized NF</p>
    <p>Katsikas et al.</p>
    <p>SNF: synthesizing high performance NFV service chains</p>
    <p>PeerJ Computer Science 2016</p>
    <p>Firewall DPI</p>
    <p>Server Core 1</p>
    <p>Core 2</p>
    <p>Input service</p>
    <p>chain to the</p>
    <p>controller</p>
    <p>Source</p>
  </div>
  <div class="page">
    <p>Georgios P. Katsikas 2017</p>
    <p>Metron</p>
    <p>Controller</p>
    <p>Launcher</p>
    <p>Read Ops Write Ops</p>
    <p>Splitter</p>
    <p>Stateless Stateful</p>
    <p>Server Core 1</p>
    <p>Core 2 Source</p>
    <p>Synthesized NFFirewall DPI</p>
    <p>Input service</p>
    <p>chain to the</p>
    <p>controller</p>
  </div>
  <div class="page">
    <p>Georgios P. Katsikas 2017</p>
    <p>Metron</p>
    <p>Controller</p>
    <p>Launcher</p>
    <p>Tagging</p>
    <p>Read Ops Write Ops</p>
    <p>Splitter</p>
    <p>Stateless Stateful</p>
    <p>Server Core 1</p>
    <p>Core 2 Source</p>
    <p>Synthesized NFFirewall DPI</p>
    <p>Input service</p>
    <p>chain to the</p>
    <p>controller</p>
  </div>
  <div class="page">
    <p>Georgios P. Katsikas 2017</p>
    <p>Metron</p>
    <p>Controller</p>
    <p>Launcher</p>
    <p>Tagging</p>
    <p>Read Ops Write Ops</p>
    <p>Splitter</p>
    <p>Stateless Stateful</p>
    <p>HW Rules SW Ops</p>
    <p>Server Core 1</p>
    <p>Core 2 Source</p>
    <p>Synthesized NFFirewall DPI</p>
    <p>Input service</p>
    <p>chain to the</p>
    <p>controller</p>
  </div>
  <div class="page">
    <p>Georgios P. Katsikas 2017</p>
    <p>Metron</p>
    <p>Controller</p>
    <p>Launcher</p>
    <p>Tagging</p>
    <p>Read Ops Write Ops</p>
    <p>Splitter</p>
    <p>Stateless Stateful</p>
    <p>HW Rules SW Ops</p>
    <p>Server Core 1</p>
    <p>Core 2 Source</p>
    <p>Synthesized NFFirewall DPI</p>
    <p>Input service</p>
    <p>chain to the</p>
    <p>controller</p>
  </div>
  <div class="page">
    <p>Georgios P. Katsikas 2017</p>
    <p>Core 1 Server</p>
    <p>Metron</p>
    <p>Controller</p>
    <p>Launcher</p>
    <p>Tagging</p>
    <p>Read Ops Write Ops</p>
    <p>Splitter</p>
    <p>Stateless Stateful</p>
    <p>Monitoring and</p>
    <p>Load Balancing</p>
    <p>HW Rules SW Ops</p>
    <p>Collect</p>
    <p>run-time load</p>
    <p>statistics from</p>
    <p>switches and</p>
    <p>servers</p>
    <p>Tag 1</p>
    <p>Core 2 Source</p>
    <p>Synthesized NFDPI</p>
    <p>Input service</p>
    <p>chain to the</p>
    <p>controller</p>
    <p>Firewall</p>
  </div>
  <div class="page">
    <p>Georgios P. Katsikas 2017</p>
    <p>Core 1 Server</p>
    <p>Metron</p>
    <p>Controller</p>
    <p>Launcher</p>
    <p>Tagging</p>
    <p>Read Ops Write Ops</p>
    <p>Splitter</p>
    <p>Stateless Stateful</p>
    <p>Monitoring and</p>
    <p>Load Balancing</p>
    <p>HW Rules SW Ops</p>
    <p>Collect</p>
    <p>run-time load</p>
    <p>statistics from</p>
    <p>switches and</p>
    <p>servers</p>
    <p>Tag 1 Overloaded</p>
    <p>Detect Imbalance</p>
    <p>Core 2 Source</p>
    <p>Synthesized NFDPI</p>
    <p>Input service</p>
    <p>chain to the</p>
    <p>controller</p>
    <p>Firewall</p>
  </div>
  <div class="page">
    <p>Georgios P. Katsikas 2017</p>
    <p>Core 1 Server</p>
    <p>Metron</p>
    <p>Controller</p>
    <p>Launcher</p>
    <p>Tagging</p>
    <p>Read Ops Write Ops</p>
    <p>Splitter</p>
    <p>Stateless Stateful</p>
    <p>Monitoring and</p>
    <p>Load Balancing</p>
    <p>HW Rules SW Ops</p>
    <p>Detect Imbalance</p>
    <p>Split</p>
    <p>Traffic Classes</p>
    <p>Tag 1 Overloaded</p>
    <p>Core 2 Source</p>
    <p>Collect</p>
    <p>run-time load</p>
    <p>statistics from</p>
    <p>switches and</p>
    <p>servers</p>
    <p>Synthesized NFDPI</p>
    <p>Input service</p>
    <p>chain to the</p>
    <p>controller</p>
    <p>Firewall</p>
  </div>
  <div class="page">
    <p>Georgios P. Katsikas 2017</p>
    <p>Core 1 Server</p>
    <p>Metron</p>
    <p>Controller</p>
    <p>Launcher</p>
    <p>Tagging</p>
    <p>Read Ops Write Ops</p>
    <p>Splitter</p>
    <p>Stateless Stateful</p>
    <p>Monitoring and</p>
    <p>Load Balancing</p>
    <p>Update</p>
    <p>HW Rules SW Ops</p>
    <p>Detect Imbalance</p>
    <p>Split</p>
    <p>Traffic Classes</p>
    <p>Tag 1 Overloaded</p>
    <p>Core 2 Source</p>
    <p>Collect</p>
    <p>run-time load</p>
    <p>statistics from</p>
    <p>switches and</p>
    <p>servers</p>
    <p>Synthesized NFDPI</p>
    <p>Input service</p>
    <p>chain to the</p>
    <p>controller</p>
    <p>Firewall</p>
  </div>
  <div class="page">
    <p>Georgios P. Katsikas 2017</p>
    <p>Core 1 Server</p>
    <p>Metron</p>
    <p>Controller</p>
    <p>Launcher</p>
    <p>Tagging</p>
    <p>Read Ops Write Ops</p>
    <p>Splitter</p>
    <p>Stateless Stateful</p>
    <p>Monitoring and</p>
    <p>Load Balancing</p>
    <p>Update</p>
    <p>HW Rules SW Ops</p>
    <p>Detect Imbalance</p>
    <p>Split</p>
    <p>Traffic Classes</p>
    <p>Tag 1 Overloaded</p>
    <p>Core 2 Source</p>
    <p>Collect</p>
    <p>run-time load</p>
    <p>statistics from</p>
    <p>switches and</p>
    <p>servers</p>
    <p>Synthesized NFDPI</p>
    <p>Input service</p>
    <p>chain to the</p>
    <p>controller</p>
    <p>Firewall</p>
  </div>
  <div class="page">
    <p>Georgios P. Katsikas 2017 Core 2</p>
    <p>Core 1 Server</p>
    <p>Metron</p>
    <p>Controller</p>
    <p>Launcher</p>
    <p>Tagging</p>
    <p>Read Ops Write Ops</p>
    <p>Splitter</p>
    <p>Stateless Stateful</p>
    <p>Monitoring and</p>
    <p>Load Balancing</p>
    <p>Update</p>
    <p>HW Rules SW Ops</p>
    <p>Detect Imbalance</p>
    <p>Split</p>
    <p>Traffic Classes</p>
    <p>Tags 1, 2Source</p>
    <p>Collect</p>
    <p>run-time load</p>
    <p>statistics from</p>
    <p>switches and</p>
    <p>servers</p>
    <p>Synthesized NFDPI</p>
    <p>Input service</p>
    <p>chain to the</p>
    <p>controller</p>
    <p>Firewall</p>
    <p>Balanced</p>
  </div>
  <div class="page">
    <p>Georgios P. Katsikas 2017</p>
    <p>Performance Evaluation</p>
  </div>
  <div class="page">
    <p>Georgios P. Katsikas 2017 54</p>
    <p>NoviSwitch (OpenFlow 1.4)</p>
    <p>Intel 82599</p>
    <p>Generator Processor</p>
    <p>Total Throughput</p>
    <p>Intel 82599</p>
    <p>Firewall DPI</p>
    <p>Deployment at 40 Gbps</p>
  </div>
  <div class="page">
    <p>Georgios P. Katsikas 2017 55</p>
    <p>Hardware Limit</p>
    <p>Throughput at 40 Gbps</p>
  </div>
  <div class="page">
    <p>Georgios P. Katsikas 2017 56</p>
    <p>Emulated E2Hardware Limit</p>
    <p>Throughput at 40 Gbps</p>
    <p>~1.70 Gbps/core, 16 cores, R2=0.94</p>
  </div>
  <div class="page">
    <p>Georgios P. Katsikas 2017 57</p>
    <p>Emulated E2Hardware Limit OpenBox</p>
    <p>Throughput at 40 Gbps</p>
    <p>~2.08 Gbps/core, 11 cores, R2=0.92</p>
  </div>
  <div class="page">
    <p>Georgios P. Katsikas 2017 58</p>
    <p>Emulated E2Hardware Limit OpenBox Metron</p>
    <p>Throughput at 40 Gbps</p>
    <p>~4.0 Gbps/core, 10 cores, R2=0.86</p>
  </div>
  <div class="page">
    <p>Georgios P. Katsikas 2017 59</p>
    <p>~3x better efficiency</p>
    <p>Emulated E2Hardware Limit OpenBox Metron</p>
    <p>Throughput at 40 Gbps</p>
  </div>
  <div class="page">
    <p>Georgios P. Katsikas 2017 60</p>
    <p>DPI cost</p>
    <p>Emulated E2Hardware Limit OpenBox Metron</p>
    <p>Throughput at 40 Gbps</p>
  </div>
  <div class="page">
    <p>Georgios P. Katsikas 2017 61</p>
    <p>FW + DPI at the speed</p>
    <p>of a 40 Gbps testbed</p>
    <p>Emulated E2Hardware Limit OpenBox Metron</p>
    <p>Throughput at 40 Gbps</p>
  </div>
  <div class="page">
    <p>Georgios P. Katsikas 2017 62</p>
    <p>Metron achieves 35-97% lower latency</p>
    <p>Emulated E2Hardware Limit OpenBox Metron</p>
    <p>Latency at 40 Gbps</p>
  </div>
  <div class="page">
    <p>Georgios P. Katsikas 2017 63</p>
    <p>Emulated E2Hardware Limit OpenBox Metron</p>
    <p>LatencyFW+DPI ~= LatencyMIN</p>
    <p>Latency at 40 Gbps</p>
  </div>
  <div class="page">
    <p>Georgios P. Katsikas 2017 64</p>
    <p>Generator Processor</p>
    <p>Mellanox Connect-X4</p>
    <p>Total Throughput</p>
    <p>Router NAPT LB</p>
    <p>Deployment at 100 Gbps</p>
  </div>
  <div class="page">
    <p>Georgios P. Katsikas 2017 65</p>
    <p>Metron</p>
    <p>Metron Decomposition at 100 Gbps</p>
  </div>
  <div class="page">
    <p>Georgios P. Katsikas 2017 66</p>
    <p>Metron Metron w/o HW Offl. (O)</p>
    <p>Metron Decomposition at 100 Gbps</p>
    <p>Hardware offloading disabled</p>
  </div>
  <div class="page">
    <p>Georgios P. Katsikas 2017 67</p>
    <p>Metron Metron w/o HW Offl. (O) Metron w/o HW Disp. (D)</p>
    <p>Metron Decomposition at 100 Gbps</p>
    <p>Inaccurate CPU core dispatching</p>
    <p>Inter-core communication cost</p>
  </div>
  <div class="page">
    <p>Georgios P. Katsikas 2017 68</p>
    <p>Metron Metron w/o HW Offl. (O) Metron w/o HW Disp. (D) Metron w/o O &amp; w/o D</p>
    <p>Metron Decomposition at 100 Gbps</p>
    <p>Hardware offloading +</p>
    <p>accurate dispatching disabled</p>
  </div>
  <div class="page">
    <p>Georgios P. Katsikas 2017 69</p>
    <p>Firewall NAPT GW</p>
    <p>NoviSwitch (OpenFlow 1.4)</p>
    <p>Intel 82599</p>
    <p>Generator Processor</p>
    <p>Total Throughput</p>
    <p>Intel 82599</p>
    <p>Deployment at 10 Gbps</p>
  </div>
  <div class="page">
    <p>Georgios P. Katsikas 2017 70</p>
    <p>Input Load</p>
    <p>Dynamic Load Balancing</p>
  </div>
  <div class="page">
    <p>Georgios P. Katsikas 2017 71</p>
    <p>Input Load Metrons Throughput</p>
    <p>Dynamic Load Balancing</p>
  </div>
  <div class="page">
    <p>Georgios P. Katsikas 2017 72</p>
    <p>Input Load Metrons Throughput</p>
    <p>Dynamic Load Balancing</p>
    <p>Dynamic CPU core</p>
    <p>allocation in the paper</p>
  </div>
  <div class="page">
    <p>Georgios P. Katsikas 2017 73</p>
    <p>Metrons driver for managing commodity servers is now in ONOS</p>
    <p>https://github.com/opennetworkinglab/onos/tree/master/drivers/server</p>
    <p>https://github.com/gkatsikas/onos/tree/metron-driver</p>
    <p>Metrons high performance data plane extends FastClick</p>
    <p>https://github.com/tbarbette/fastclick/tree/metron</p>
    <p>Open Source Activities</p>
  </div>
  <div class="page">
    <p>Georgios P. Katsikas 2017 74</p>
    <p>NFV service chains at the speed of the hardware</p>
    <p>Metron</p>
    <p>Contributions</p>
    <p>Orchestration of heterogeneous programmable hardware</p>
    <p>Accurate CPU core dispatching</p>
    <p>Low-cost placement</p>
    <p>Hardware offloading</p>
    <p>Quick and stable adaptation</p>
    <p>Conclusion</p>
  </div>
</Presentation>

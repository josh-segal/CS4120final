<?xml version="1.0" ?>
<Presentation>
  <div class="page">
    <p>Neha Narula Willy Vasquez Madars Virza</p>
    <p>zkLedger Privacy-preserving auditing for</p>
    <p>distributed ledgers</p>
  </div>
  <div class="page">
    <p>Structure of the financial system</p>
    <p>JP Morgan Citibank Bank of America</p>
    <p>Credit Suisse Barclays UBS</p>
    <p>HSBC Wells Fargo BNY Mellon</p>
    <p>Dozens of large investment banks</p>
    <p>Trading:  Securities  Currencies  Commodities  Derivatives</p>
    <p>40% unregulated  Trillions of dollars  Tens of trades/minute</p>
    <p>Goldman Sachs</p>
    <p>Deutsche Bank</p>
    <p>Morgan Stanley</p>
    <p>Financial Investments Regulatory Authority on OTC markets</p>
  </div>
  <div class="page">
    <p>A ledger records financial transactions</p>
    <p>ID Asset From To Amount 90 $ Citibank Goldman Sachs 1,000,000 91  JP Morgan UBS 200,000 92  JP Morgan Barclays 3,000,000</p>
    <p>sig</p>
    <p>sig</p>
    <p>sig</p>
    <p>JP MorganCitibank Barclays</p>
  </div>
  <div class="page">
    <p>Can verify important financial invariants</p>
    <p>ID Asset From To Amount 90 $ Citibank Goldman Sachs 1,000,000 91  JP Morgan UBS 200,000 92  JP Morgan Barclays 3,000,000</p>
    <p>Consent to transfer Has assets to transfer Assets neither created nor destroyed</p>
    <p>Verify</p>
    <p>sig</p>
    <p>sig</p>
    <p>sig</p>
    <p>Examining ledger</p>
  </div>
  <div class="page">
    <p>Banks care about privacy</p>
    <p>Trades reveal sensitive strategy information</p>
  </div>
  <div class="page">
    <p>Verifying invariants are maintained with privacy</p>
    <p>ID Asset From To Amount 90 $ Citibank Goldman Sachs 1,000,000 91  JP Morgan UBS 200,000 92  JP Morgan Barclays 3,000,000</p>
    <p>Consent to transfer Has assets to transfer Assets neither created nor destroyed</p>
    <p>Verify</p>
    <p>sig</p>
    <p>sig</p>
    <p>sig</p>
  </div>
  <div class="page">
    <p>Verifying invariants are maintained with privacy</p>
    <p>ID Asset From, To, Amount 90 $ 91  92</p>
    <p>Consent to transfer Has assets to transfer Assets neither created nor destroyed</p>
    <p>Zerocash (zk-SNARKs) [S&amp;P 2014] Solidus (PVORM) [CCS 2017]</p>
    <p>Verify</p>
  </div>
  <div class="page">
    <p>Problem Regulators need insight into markets to maintain</p>
    <p>financial stability and protect investors</p>
    <p>Leverage  Exposure  Overall market concentration</p>
  </div>
  <div class="page">
    <p>How to confidently audit banks to determine risk?</p>
    <p>What fraction of your assets are</p>
    <p>in Euros?</p>
    <p>How exposed is this bank to a</p>
    <p>drop in the Euro? ???</p>
    <p>Auditor</p>
  </div>
  <div class="page">
    <p>zkLedger A private, auditable transaction ledger</p>
    <p>Privacy: Hides transacting banks and amounts  Integrity with public verification: Everyone can</p>
    <p>verify transactions are well-formed  Auditing: Compute provably-correct linear functions</p>
    <p>over transactions</p>
  </div>
  <div class="page">
    <p>Outline  System model  zkLedger design  Hiding commitments  Ledger table format  Zero-knowledge proofs</p>
    <p>Evaluation 11</p>
  </div>
  <div class="page">
    <p>Outline  System model  zkLedger design  Hiding commitments  Ledger table format  Zero-knowledge proofs</p>
    <p>Evaluation 12</p>
  </div>
  <div class="page">
    <p>zkLedger system model</p>
    <p>ID Asset Transaction details 1 $ 2  3</p>
  </div>
  <div class="page">
    <p>An auditor can obtain correct answers on ledger contents</p>
    <p>ID Asset Transaction details 1 $ 2  3</p>
    <p>Auditor</p>
    <p>What fraction of your assets are</p>
    <p>in Euros?</p>
    <p>million</p>
  </div>
  <div class="page">
    <p>Measurements zkLedger supports  Ratios and percentages of holdings  Sums, averages, variance, skew  Outliers  Approximations and orders of magnitude  Changes over time  Well-known financial risk measurements (Herfindahl-Hirschmann</p>
    <p>index)</p>
    <p>Small amounts of well-defined</p>
    <p>leakage</p>
  </div>
  <div class="page">
    <p>Security goals  The auditor and non-involved parties cannot</p>
    <p>see transaction participants or amounts</p>
    <p>Banks cannot lie to the auditor or omit transactions</p>
    <p>Banks cannot violate financial invariants  Honest banks can always convince the auditor of a</p>
    <p>correct answer</p>
    <p>A malicious bank cannot block other banks from transacting</p>
    <p>Privacy</p>
    <p>Completeness</p>
    <p>Integrity</p>
    <p>Progress</p>
  </div>
  <div class="page">
    <p>Threat model Banks might attempt to steal or hide assets, manipulate balances, or lie to the auditor Banks can arbitrarily collude Banks or the auditor might try to learn transaction contents</p>
    <p>Out of scope: A ledger that omits transactions or is unavailable An adversary watching network traffic Banks leaking their own transactions</p>
  </div>
  <div class="page">
    <p>Outline  System model  zkLedger design  Hiding commitments  Ledger table format  Zero-knowledge proofs</p>
    <p>Evaluation 18</p>
  </div>
  <div class="page">
    <p>Example public transaction ledger</p>
    <p>ID Asset From To Amount</p>
  </div>
  <div class="page">
    <p>Depositor injects assets to the ledger</p>
    <p>ID Asset From To Amount</p>
  </div>
  <div class="page">
    <p>ID Asset From To Amount</p>
    <p>Goals: auditing + privacy</p>
    <p>Goals:  Provably audit Barclays to find Euro holdings  Hide participants, amounts, and transaction graph</p>
  </div>
  <div class="page">
    <p>Hide amounts with commitments</p>
    <p>Pedersen commitments Bank creates comm(v) =</p>
    <p>Important properties  Binding  Homomorphically combined  Fast</p>
    <p>gv hr &lt;latexit sha1_base64=&quot;OuLBmVIzvubzbfdbVQAyb7UsGHw=&quot;&gt;AAACCHicbVDLTgIxFL2DL8QX6tJNI5i4IjNsdEnixiUm8ogwkE7pQEOnM2k7KJnwA67d6je4M279Cz/Bv7AMsxDwJE1Ozrk35/Z4EWdK2/a3ldvY3Nreye8W9vYPDo+KxydNFcaS0AYJeSjbHlaUM0EbmmlO25GkOPA4bXnjm7nfmlCpWCju9TSiboCHgvmMYG2kB4TKw95k1JPlfrFkV+wUaJ04GSlBhnq/+NMdhCQOqNCEY6U6jh1pN8FSM8LprNCNFY0wGeMh7RgqcECVm6QXz9CFUQbID6V5QqNU/buR4ECpaeCZyQDrkVr15uJ/XifW/rWbMBHFmgqyCPJjjnSI5t9HAyYp0XxqCCaSmVsRGWGJiTYlLaUI+qif0pyC6cZZbWKdNKsVx644d9VSrZ21lIczOIdLcOAKanALdWgAAQEv8Apv1rP1bn1Yn4vRnJXtnMISrK9frAmZzg==&lt;/latexit&gt;&lt;latexit sha1_base64=&quot;OuLBmVIzvubzbfdbVQAyb7UsGHw=&quot;&gt;AAACCHicbVDLTgIxFL2DL8QX6tJNI5i4IjNsdEnixiUm8ogwkE7pQEOnM2k7KJnwA67d6je4M279Cz/Bv7AMsxDwJE1Ozrk35/Z4EWdK2/a3ldvY3Nreye8W9vYPDo+KxydNFcaS0AYJeSjbHlaUM0EbmmlO25GkOPA4bXnjm7nfmlCpWCju9TSiboCHgvmMYG2kB4TKw95k1JPlfrFkV+wUaJ04GSlBhnq/+NMdhCQOqNCEY6U6jh1pN8FSM8LprNCNFY0wGeMh7RgqcECVm6QXz9CFUQbID6V5QqNU/buR4ECpaeCZyQDrkVr15uJ/XifW/rWbMBHFmgqyCPJjjnSI5t9HAyYp0XxqCCaSmVsRGWGJiTYlLaUI+qif0pyC6cZZbWKdNKsVx644d9VSrZ21lIczOIdLcOAKanALdWgAAQEv8Apv1rP1bn1Yn4vRnJXtnMISrK9frAmZzg==&lt;/latexit&gt;&lt;latexit sha1_base64=&quot;OuLBmVIzvubzbfdbVQAyb7UsGHw=&quot;&gt;AAACCHicbVDLTgIxFL2DL8QX6tJNI5i4IjNsdEnixiUm8ogwkE7pQEOnM2k7KJnwA67d6je4M279Cz/Bv7AMsxDwJE1Ozrk35/Z4EWdK2/a3ldvY3Nreye8W9vYPDo+KxydNFcaS0AYJeSjbHlaUM0EbmmlO25GkOPA4bXnjm7nfmlCpWCju9TSiboCHgvmMYG2kB4TKw95k1JPlfrFkV+wUaJ04GSlBhnq/+NMdhCQOqNCEY6U6jh1pN8FSM8LprNCNFY0wGeMh7RgqcECVm6QXz9CFUQbID6V5QqNU/buR4ECpaeCZyQDrkVr15uJ/XifW/rWbMBHFmgqyCPJjjnSI5t9HAyYp0XxqCCaSmVsRGWGJiTYlLaUI+qif0pyC6cZZbWKdNKsVx644d9VSrZ21lIczOIdLcOAKanALdWgAAQEv8Apv1rP1bn1Yn4vRnJXtnMISrK9frAmZzg==&lt;/latexit&gt;&lt;latexit sha1_base64=&quot;OuLBmVIzvubzbfdbVQAyb7UsGHw=&quot;&gt;AAACCHicbVDLTgIxFL2DL8QX6tJNI5i4IjNsdEnixiUm8ogwkE7pQEOnM2k7KJnwA67d6je4M279Cz/Bv7AMsxDwJE1Ozrk35/Z4EWdK2/a3ldvY3Nreye8W9vYPDo+KxydNFcaS0AYJeSjbHlaUM0EbmmlO25GkOPA4bXnjm7nfmlCpWCju9TSiboCHgvmMYG2kB4TKw95k1JPlfrFkV+wUaJ04GSlBhnq/+NMdhCQOqNCEY6U6jh1pN8FSM8LprNCNFY0wGeMh7RgqcECVm6QXz9CFUQbID6V5QqNU/buR4ECpaeCZyQDrkVr15uJ/XifW/rWbMBHFmgqyCPJjjnSI5t9HAyYp0XxqCCaSmVsRGWGJiTYlLaUI+qif0pyC6cZZbWKdNKsVx644d9VSrZ21lIczOIdLcOAKanALdWgAAQEv8Apv1rP1bn1Yn4vRnJXtnMISrK9frAmZzg==&lt;/latexit&gt;</p>
    <p>ID Asset From To Amount</p>
    <p>Can achieve all auditing functions</p>
    <p>with Pedersen Commitments!</p>
    <p>(see paper)</p>
    <p>= comm(13M)</p>
  </div>
  <div class="page">
    <p>Hide participants with other techniques</p>
    <p>ID Asset From To Amount</p>
  </div>
  <div class="page">
    <p>Strawman: audit by opening up combined commitments</p>
    <p>How many Euros do you hold?</p>
    <p>Open comm(1M)  comm(2M) to 3M</p>
    <p>ID Asset From To Amount</p>
    <p>Auditor Reveals</p>
    <p>transactions</p>
  </div>
  <div class="page">
    <p>How many Euros do you hold?</p>
    <p>ID Asset From To Amount</p>
    <p>Auditor</p>
    <p>A malicious bank could omit transactions</p>
  </div>
  <div class="page">
    <p>ID Asset From To Amount</p>
    <p>A malicious bank could omit transactions</p>
  </div>
  <div class="page">
    <p>zkLedger design: an entry for every bank in every transaction</p>
    <p>ID Asset Goldman Sachs JP Morgan Barclays</p>
    <p>Spenders column commits to negative value, receivers positive value For non-involved banks, entries commit to 0</p>
    <p>Indistinguishable from commitments to non-zero values</p>
    <p>Depositor transactions are public</p>
  </div>
  <div class="page">
    <p>Key insight: auditor audits every transaction</p>
    <p>How many Euros do you hold?</p>
    <p>Barclays</p>
    <p>ID Asset Goldman Sachs JP Morgan Barclays</p>
    <p>Open comm(0)  comm(1M)  comm(2M) to 3M</p>
    <p>Auditor</p>
  </div>
  <div class="page">
    <p>A malicious bank cant produce a proof for a different answer</p>
    <p>How many Euros do you hold?</p>
    <p>Barclays</p>
    <p>ID Asset Goldman Sachs JP Morgan Barclays</p>
    <p>Open comm(1M)to 1M</p>
    <p>Auditor</p>
  </div>
  <div class="page">
    <p>Security goals  The auditor and non-involved parties cannot see</p>
    <p>transaction participants, amounts, or transaction graph</p>
    <p>Banks cannot lie to the auditor or omit transactions</p>
    <p>Banks cannot violate financial invariants  Honest banks can always convince the auditor of a</p>
    <p>correct answer</p>
    <p>A malicious bank cannot block other banks from transacting</p>
    <p>Privacy</p>
    <p>Completeness</p>
    <p>Integrity</p>
    <p>Progress</p>
  </div>
  <div class="page">
    <p>Non-interactive zero-knowledge proofs (NIZKs)</p>
    <p>Short, binary strings  True statements have proofs  False statements only have proofs with negligible</p>
    <p>probability  Proofs dont reveal why they are true</p>
  </div>
  <div class="page">
    <p>Achieving integrity and progress using NIZKs</p>
    <p>Transaction validity  Consent to transfer  Have assets to transfer  Assets neither create nor</p>
    <p>destroyed  Honest banks can make progress  Non-interactive</p>
    <p>Balance NIZK</p>
    <p>Assets NIZK</p>
    <p>Consent NIZK</p>
    <p>Consistency NIZK</p>
    <p>See paper for details</p>
  </div>
  <div class="page">
    <p>Outline  System model  zkLedger design  Hiding commitments  Ledger table format  Zero-knowledge proofs</p>
    <p>Evaluation 33</p>
  </div>
  <div class="page">
    <p>Implementation  zkLedger written in Go  Elliptic curve library: btcec, secp256k1  ~4000 loc</p>
  </div>
  <div class="page">
    <p>Evaluation  How fast is auditing?  How does zkLedger scale with the number of banks?</p>
    <p>Experiments on 12 4 core Intel Xeon 2.5Ghz VMs, 24 GB RAM</p>
  </div>
  <div class="page">
    <p>Simple auditing is fast and independent of ledger size</p>
    <p>A u</p>
    <p>d it in</p>
    <p>g t</p>
    <p>im e</p>
    <p>( m</p>
    <p>s )</p>
    <p>Transactions in ledger</p>
    <p>online auditor</p>
    <p>Auditing 4 banks measuring market concentration</p>
    <p>Pedersen commitments +</p>
    <p>table design amenable to</p>
    <p>caching</p>
  </div>
  <div class="page">
    <p>Transactions in ledger</p>
    <p>offline auditor</p>
    <p>More complex forms of auditing are linear in size of ledger</p>
    <p>A ud</p>
    <p>iti ng</p>
    <p>ti m</p>
    <p>e (m</p>
    <p>s)</p>
    <p>Auditing 4 banks measuring market concentration</p>
  </div>
  <div class="page">
    <p>Processing transactions scales linearly</p>
    <p>T im</p>
    <p>e (</p>
    <p>m s )</p>
    <p>number of banks</p>
    <p>complete transactions</p>
    <p>One bank creating transactions. Includes ledger, auditor, and other banks verifying</p>
  </div>
  <div class="page">
    <p>Cost in a transaction per bank  Entry size: 4.5KB</p>
    <p>Creating an entry: 8ms</p>
    <p>Verifying an entry: 7ms</p>
    <p># banks</p>
    <p>Highly parallelizable</p>
    <p>Significant opportunities for compression and speedup</p>
  </div>
  <div class="page">
    <p>Related Work No private auditing</p>
    <p>Confidential Assets [FC 2017]</p>
    <p>Zerocash [S&amp;P 2014]</p>
    <p>Cannot guarantee completeness</p>
    <p>Privacy-preserving methods for sharing financial risk exposures [2011]</p>
    <p>Provisions [CCS 2015]</p>
    <p>Solidus [CCS 2017]</p>
    <p>Accountable privacy for decentralized anonymous payments [FC 2016]</p>
    <p>Design for policy enforcement, not</p>
    <p>auditing</p>
    <p>Our techniques might apply</p>
  </div>
  <div class="page">
    <p>Conclusion zkLedger provides practical privacy and complete</p>
    <p>auditing on transaction ledgers</p>
    <p>zkledger.org</p>
  </div>
</Presentation>

<?xml version="1.0" ?>
<Presentation>
  <div class="page">
    <p>Jumpgate: In-Network Processing as a Service for Data Analytics</p>
    <p>Craig Mustard, Fabian Ruffy, Anny Gakhokidze,</p>
    <p>Ivan Beschastnikh, Alexandra Fedorova</p>
    <p>University of British Columbia</p>
  </div>
  <div class="page">
    <p>Programmable Switch</p>
    <p>Programmable Switch</p>
    <p>NIC</p>
    <p>Original Data Path</p>
    <p>Storage Cluster</p>
    <p>NIC Compute Cluster</p>
    <p>Switches (P4) 2-8x speedup</p>
    <p>[NetAccel, DAIET]</p>
    <p>&gt;1000x less traffic [Sonata]</p>
    <p>In-Network Processing Can Accelerate Data Analytics</p>
    <p>Smart NICs (FPGAs) 96% increased</p>
    <p>throughput [Floem]</p>
  </div>
  <div class="page">
    <p>Programmable Switch</p>
    <p>Programmable Switch</p>
    <p>NIC</p>
    <p>Off-path Opportunities</p>
    <p>Ephemeral VMs</p>
    <p>ASIC/FPGAs</p>
    <p>NPUs</p>
    <p>Off-path Opportunities</p>
    <p>Ephemeral VMs</p>
    <p>ASIC/FPGAs</p>
    <p>NPUs</p>
    <p>Original Data Path</p>
    <p>Storage Cluster</p>
    <p>NIC Compute Cluster</p>
    <p>There are many places to do In-Network Processing</p>
    <p>Alternative Data Path</p>
  </div>
  <div class="page">
    <p>Programmable Switch</p>
    <p>Programmable Switch</p>
    <p>NIC</p>
    <p>Off-path Opportunities</p>
    <p>Ephemeral VMs</p>
    <p>ASIC/FPGAs</p>
    <p>NPUs</p>
    <p>Off-path Opportunities</p>
    <p>Ephemeral VMs</p>
    <p>ASIC/FPGAs</p>
    <p>NPUs</p>
    <p>Storage Cluster</p>
    <p>NIC Compute Cluster</p>
    <p>There are many places to do In-Network Processing</p>
    <p>Alternative Data Path</p>
    <p>Software Middleboxes 4.5x speedup</p>
    <p>[NetAgg]</p>
  </div>
  <div class="page">
    <p>Programmable Switch</p>
    <p>Programmable Switch</p>
    <p>NIC</p>
    <p>Off-path Opportunities</p>
    <p>Ephemeral VMs</p>
    <p>ASIC/FPGAs</p>
    <p>NPUs</p>
    <p>Off-path Opportunities</p>
    <p>Ephemeral VMs</p>
    <p>ASIC/FPGAs</p>
    <p>NPUs</p>
    <p>Original Data Path</p>
    <p>Storage Cluster</p>
    <p>NIC Compute Cluster</p>
    <p>There are many places to do In-Network Processing</p>
    <p>Alternative Data Path</p>
    <p>Software Middleboxes 4.5x speedup</p>
    <p>[NetAgg]</p>
  </div>
  <div class="page">
    <p>Challenges to actually using NPs</p>
    <p>Tough to program:</p>
    <p>Diverse hardware</p>
    <p>Requires high performance software</p>
    <p>Packet-oriented NOT flow-oriented</p>
    <p>Storage limits (e.g., very little cross-packet state)</p>
    <p>Manage multiple devices at the same time</p>
    <p>Specialized devices not good at all parts of a query</p>
    <p>Integration with storage and analytics systems</p>
    <p>Need suitable protocols and data formats for NPs to</p>
    <p>operate on data</p>
    <p>See our paper or come talk to me for details!</p>
    <p>Ephemeral VMs</p>
    <p>Switches</p>
    <p>N(etwork) PUs</p>
    <p>Smart NICs</p>
    <p>FPGAs D(ata) PUs</p>
    <p>Storage System</p>
    <p>Target Devices</p>
  </div>
  <div class="page">
    <p>How should we incorporate solutions into systems?</p>
    <p>Ephemeral VMs</p>
    <p>Switches</p>
    <p>N(etwork) PUs</p>
    <p>Smart NICs</p>
    <p>FPGAs D(ata) PUs</p>
    <p>Storage System</p>
    <p>Target Devices</p>
  </div>
  <div class="page">
    <p>How should we incorporate? One (bad) option:</p>
    <p>Ephemeral VMs</p>
    <p>Switches</p>
    <p>N(etwork) PUs</p>
    <p>Smart NICs</p>
    <p>FPGAs D(ata) PUs</p>
    <p>Storage System</p>
    <p>Target Devices</p>
  </div>
  <div class="page">
    <p>How should we incorporate? One (bad) option:</p>
    <p>Ephemeral VMs</p>
    <p>Switches</p>
    <p>N(etwork) PUs</p>
    <p>Smart NICs</p>
    <p>FPGAs D(ata) PUs</p>
    <p>Storage System</p>
    <p>Target Devices</p>
    <p>Problems:</p>
    <p>Not scalable to all analytics systems</p>
    <p>Not future-proof to new devices</p>
    <p>Hard to share code</p>
  </div>
  <div class="page">
    <p>Our proposal: Network Processing as a Service</p>
    <p>Ephemeral VMs</p>
    <p>Switches</p>
    <p>N(etwork) PUs</p>
    <p>Smart NICs</p>
    <p>FPGAs D(ata) PUs</p>
    <p>Storage System</p>
    <p>Target Devices</p>
    <p>Network Processing as a Service (NPaaS)</p>
  </div>
  <div class="page">
    <p>Our proposal: Network Processing as a Service</p>
    <p>Ephemeral VMs</p>
    <p>Switches</p>
    <p>N(etwork) PUs</p>
    <p>Smart NICs</p>
    <p>FPGAs D(ata) PUs</p>
    <p>Storage System</p>
    <p>Target Devices</p>
    <p>Network Processing as a Service (NPaaS)</p>
    <p>Advantages:  Abstracts devices</p>
    <p>and management  Existing systems</p>
    <p>need to change once  New devices and</p>
    <p>systems can be added easily</p>
  </div>
  <div class="page">
    <p>Jumpgate: a prototype NPaaS, addressing three problems</p>
    <p>Filter + Project in Storage Available Physical Operators</p>
    <p>Shuffle in Switch Partial Agg in SW</p>
    <p>group by</p>
    <p>Client API</p>
    <p>proj.read data</p>
    <p>filter</p>
    <p>Compiler</p>
    <p>Maps logical to physical ops.</p>
    <p>Orchestrator</p>
    <p>Deploys NP pipelinesPhysical</p>
    <p>Plan</p>
    <p>Virtual Machines Available Devices</p>
    <p>Switches NICs NPUs</p>
    <p>Deployment Constraints</p>
  </div>
  <div class="page">
    <p>Programmable Switch</p>
    <p>Programmable Switch</p>
    <p>NIC</p>
    <p>Ephemeral VMs</p>
    <p>ASIC/FPGAs</p>
    <p>NPUs</p>
    <p>Ephemeral VMs</p>
    <p>ASIC/FPGAs</p>
    <p>NPUs</p>
    <p>Original Data Path</p>
    <p>Storage Cluster</p>
    <p>NIC Compute Cluster</p>
    <p>Jumpgate: example deployment</p>
    <p>Filter + Project in Storage</p>
    <p>Partial Agg in SW</p>
    <p>Shuffle in Switch</p>
    <p>Jumpgate Data Path</p>
    <p>Client API</p>
    <p>read data</p>
    <p>filter</p>
    <p>proj.</p>
    <p>group by</p>
    <p>SQL</p>
  </div>
  <div class="page">
    <p>Open Questions: We plan to use Jumpgate to investigate these questions and more.</p>
    <p>What are the right protocols and formats to use for different NPs?  Protocols and formats are dependent on NP restrictions</p>
    <p>What are the best devices, and what is the best offload strategy?  How to adapt existing query optimizations?</p>
    <p>How should we allocate devices w.r.t network topology?  How much do we need to know about the topology to compute a good plan?</p>
    <p>Failure handling  How should NPaaS interact with the client application on failures?</p>
    <p>Propagate to the client, or automatic recovery?</p>
  </div>
  <div class="page">
    <p>Takeaways:</p>
    <p>In-network processors can be on-demand accelerators for data analytics tasks.</p>
    <p>But, large challenges remain to using them.</p>
    <p>Instead of building solutions into every analytics framework, we need NPaaS to</p>
    <p>provide abstractions for using NPs.</p>
    <p>Jumpgate is our NPaaS prototype to address API, compilation, and orchestration</p>
    <p>challenges, and to enable future research in this area.</p>
    <p>Thanks for listening! Happy to talk more!</p>
    <p>Questions? 15</p>
    <p>Ephemeral VMs</p>
    <p>Switches</p>
    <p>N(etwork) PUs</p>
    <p>Smart NICs</p>
    <p>FPGAs D(ata) PUs</p>
    <p>Storage System</p>
    <p>Target Devices</p>
    <p>Network Processing as a Service (NPaaS)</p>
  </div>
</Presentation>

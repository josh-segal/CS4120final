<?xml version="1.0" ?>
<Presentation>
  <div class="page">
    <p>Provenance Management in Databases</p>
    <p>under Schema Evolution</p>
    <p>Shi Gao, Carlo Zaniolo</p>
    <p>Department of Computer Science</p>
    <p>University of California, Los Angeles</p>
  </div>
  <div class="page">
    <p>Provenance under Schema Evolution</p>
    <p>Modern information systems, particularly big</p>
    <p>science projects, undergo frequent database</p>
    <p>schema changes.</p>
    <p>Mediawiki, 323 schema versions in 9 years</p>
    <p>Atutor, 216 schema versions in 7 years</p>
    <p>KtDMS, 105 schema versions in 6 years</p>
    <p>Therefore, we need an integrated provenance</p>
    <p>management for both data and metadata under</p>
    <p>schema evolution.</p>
  </div>
  <div class="page">
    <p>Motivating Example</p>
    <p>ID Name Department Pay</p>
    <p>2</p>
    <p>Employee</p>
    <p>ID Name Department</p>
    <p>Data Update: INSERT INTO Employee VALUES (200, John, EE, 4000) Schema Change: RENAME COLUMN Pay IN Employee To Salary DECOMPOSE TABLE Employee INTO Employee_Info(ID, Name, Department), Employee_Salary(ID, Salary)</p>
    <p>How to connect the provenance of data created</p>
    <p>under different schemas?</p>
    <p>Next</p>
    <p>Employee_Info</p>
    <p>ID Salary</p>
    <p>Employee_Salary</p>
  </div>
  <div class="page">
    <p>AM&amp;PM System</p>
    <p>Archived Metadata &amp; Provenance Manager</p>
    <p>Goal: Manage the combined provenance of data</p>
    <p>and metadata under schema evolution</p>
    <p>Extend the SQL Information Schema to archive the</p>
    <p>provenance of metadata</p>
    <p>Provide a timestamp representation of the provenance</p>
    <p>database</p>
    <p>Facilitate the expression of complex temporal query</p>
  </div>
  <div class="page">
    <p>Model</p>
    <p>A relational model that stores:</p>
    <p>Data Provenance</p>
    <p>The information of data updates and transactions</p>
    <p>applied to the content of database</p>
    <p>Schema Provenance</p>
    <p>The information of past schema versions and the</p>
    <p>history of schema evolution</p>
    <p>Auxiliary Information</p>
    <p>e.g. the removed values and database statistics</p>
  </div>
  <div class="page">
    <p>Model</p>
    <p>TABLES</p>
    <p>COLUMNS</p>
    <p>CONSTRAINTS</p>
    <p>PRIVILEGES</p>
    <p>SMO*</p>
    <p>ICMO*</p>
    <p>Transaction</p>
    <p>Timestamp</p>
    <p>Transaction_Text</p>
    <p>Removed_Value</p>
    <p>Statistics</p>
    <p>(Optional)</p>
    <p>Schema Provenance (where) Data Provenance (how, when)</p>
    <p>Auxiliary Info</p>
    <p>* Schema Modification Operators(SMO) and Integrity Constraints Modification</p>
    <p>Operators(ICMO) [H. Moon 2008]</p>
  </div>
  <div class="page">
    <p>Model</p>
    <p>Previous</p>
    <p>ID User TS</p>
    <p>Transaction</p>
    <p>ID Text</p>
    <p>Transaction_Text</p>
    <p>Employee_Salary_Timestamp</p>
    <p>ID Text Source Target TS</p>
    <p>SMO</p>
    <p>V Name TS</p>
    <p>Tables</p>
    <p>ID Text Source Target TS</p>
    <p>ICMO</p>
    <p>Table_Constraints</p>
    <p>Table_Privileges</p>
    <p>Columns</p>
    <p>Column_Privileges</p>
    <p>Version</p>
    <p>Information Schema Schema Evolution Data Provenance</p>
    <p>Employee_Info_Timestamp smo1: RENAME COLUMN Payment</p>
    <p>IN Employee To Salary</p>
    <p>smo2: DECOMPOSE Table Employee</p>
    <p>INTO Employee_Info(ID, Name,</p>
    <p>Department), Employee_Salary(ID,</p>
    <p>Salary)</p>
    <p>tran:INSERT INTO Employee</p>
    <p>VALUES (200, John, EE, 4000)</p>
  </div>
  <div class="page">
    <p>Provenance Queries</p>
    <p>Data Provenance Queries</p>
    <p>Trace the provenance of data. For example, when the</p>
    <p>data is inserted and which transactions help generate</p>
    <p>the data</p>
    <p>Schema Provenance Queries</p>
    <p>Trace the provenance of schema elements (tables and</p>
    <p>columns)</p>
    <p>Queries on Statistics</p>
    <p>Statistical queries about the database content and</p>
    <p>schema</p>
  </div>
  <div class="page">
    <p>Architecture</p>
    <p>Backend Database</p>
    <p>MySQL 5.1</p>
    <p>Provenance DB Manager</p>
    <p>Parse input data</p>
    <p>Construct provenance DB</p>
    <p>AM&amp;PM Parser</p>
    <p>Translate XQuery to SQL</p>
    <p>[F. Wang 2008]</p>
    <p>Check syntax</p>
  </div>
  <div class="page">
    <p>Experiments</p>
    <p>We perform some preliminary experiments to</p>
    <p>evaluate the execution time of provenance queries</p>
    <p>on AM&amp;PM provenance database</p>
    <p>Datasets</p>
    <p>Synthetic Dataset: California Traffic</p>
  </div>
  <div class="page">
    <p>Experiments</p>
    <p>Query Type Description</p>
    <p>Q1 when Find the creation time of the tuple with id 2357 in highway accident</p>
    <p>Q2 how Find the transaction which generates the tuple with id 19009 in</p>
    <p>highway condition</p>
    <p>Q3 aggregate Find the number of accidents happening on 04/02/2012</p>
    <p>Q4 aggregate Find the number of highway condition records on 04/03/2012</p>
    <p>Q5 temporal join Find the ids of accidents happening in the area of West Los Angeles</p>
    <p>between 04/04/2012 18:00:00 and 04/04/2012 23:00:00</p>
    <p>Q6 temporal join Find the descriptions of highway condition updates happening in the</p>
    <p>area of Central LA between 04/04/2012 18:00:00 and 04/04/2012</p>
    <p>Table: Data Provenance Queries for Evaluation</p>
  </div>
  <div class="page">
    <p>Experiments</p>
    <p>The performance of data provenance queries</p>
    <p>Dataset: California Traffic</p>
    <p>The values are sampled from a small real-world traffic dataset</p>
  </div>
  <div class="page">
    <p>Conclusion</p>
    <p>AM&amp;PM provides a simple way to support</p>
    <p>provenance management under schema</p>
    <p>evolution.</p>
    <p>Provenance queries on both data provenance</p>
    <p>and schema provenance are efficiently</p>
    <p>supported.</p>
    <p>Ongoing work:</p>
    <p>Column store</p>
    <p>Provenance query rewriting</p>
  </div>
  <div class="page">
    <p>Thank You!</p>
  </div>
  <div class="page">
    <p>Reference  [H. Moon 2008] H. J. Moon, C. A. Curino, A. Deutsch, C.-Y. Hou, and C.</p>
    <p>Zaniolo. Managing and querying transaction-time databases under schema</p>
    <p>evolution, VLDB, 2008.</p>
    <p>[F. Wang 2008] Fusheng Wang, Carlo Zaniolo, and Xin Zhou. Archis: an</p>
    <p>xml-based approach to transaction-time temporal database systems. The</p>
    <p>VLDB Journal, 17(6):1445-1463, November 2008.</p>
    <p>[J. Cheney 2009] Provenance in Databases: Why, How, and Where,</p>
    <p>James Cheney and Laura Chiticariu and Wang-Chiew Tan (2009),</p>
    <p>Foundations and Trends in Databases: Vol. 1: No 4, pp 379-474</p>
    <p>Schema Evolution Benchmark: C. Curino and C. Zaniolo. Pantha rhei</p>
    <p>benchmark datasets. http://yellowstone.cs.ucla.edu/schema</p>
    <p>evolution/index.php/Benchmark_home</p>
  </div>
</Presentation>

<?xml version="1.0" ?>
<Presentation>
  <div class="page">
    <p>Antfarm: Efficient Content Distribution with Managed Swarms</p>
    <p>Ryan S. Peterson and Emin Gn Sirer</p>
    <p>Department of Computer Science, Cornell University United Networks, LLC</p>
    <p>April 22, 2009</p>
  </div>
  <div class="page">
    <p>Problem Domain</p>
    <p>What is the most efficient way to disseminate a large set of files to</p>
    <p>a large set of clients?</p>
  </div>
  <div class="page">
    <p>Client-Server</p>
    <p>server</p>
    <p>clients</p>
  </div>
  <div class="page">
    <p>Client-Server</p>
    <p>clients</p>
    <p>Inefficient High cost of ownership</p>
  </div>
  <div class="page">
    <p>Peer-to-Peer peer</p>
    <p>block transfer</p>
  </div>
  <div class="page">
    <p>Peer-to-Peer</p>
    <p>Limited information No control or performance guarantees</p>
  </div>
  <div class="page">
    <p>Peer-to-Peer</p>
    <p>swarm</p>
  </div>
  <div class="page">
    <p>Antfarm Goals</p>
    <p>High performance  Low cost of deployment  Performance guarantees</p>
    <p>Administrator control over swarm performance</p>
    <p>Accounting  Enables different resource contribution policies</p>
  </div>
  <div class="page">
    <p>Antfarm Approach</p>
    <p>Key insight: view content distribution as an optimization problem</p>
    <p>Hybrid architecture  P2P swarming with a logically centralized</p>
    <p>coordinator</p>
    <p>Clean slate protocol</p>
  </div>
  <div class="page">
    <p>Antfarm System Model coordinatorseeder</p>
    <p>altruist</p>
  </div>
  <div class="page">
    <p>Antfarm System Model coordinatorseeder</p>
    <p>Coordinator optimally allocates total seeder bandwidth B</p>
  </div>
  <div class="page">
    <p>Antfarm</p>
    <p>Overview The</p>
    <p>System Evaluation</p>
  </div>
  <div class="page">
    <p>Antfarm</p>
    <p>Overview The</p>
    <p>System Evaluation</p>
  </div>
  <div class="page">
    <p>Strawman Coordinator</p>
    <p>One could schedule every data transfer in the system</p>
    <p>All packets for all time  Unscalable, impractical!</p>
    <p>Antfarm coordinator makes critical decisions based on observed dynamics</p>
  </div>
  <div class="page">
    <p>Antfarm Coordinator</p>
    <p>Models swarm dynamics  Measures and extracts key parameters</p>
    <p>Formulates optimization problem  Calculates optimal bandwidth allocation</p>
    <p>Enacts allocation decisions  Maximizes aggregate bandwidth  Minimizes average download time</p>
  </div>
  <div class="page">
    <p>Antfarm Formalization</p>
    <p>Maximize system-wide aggregate bandwidth subject to a bandwidth constraint</p>
  </div>
  <div class="page">
    <p>S w</p>
    <p>ar m</p>
    <p>a gg</p>
    <p>re ga</p>
    <p>te b</p>
    <p>an d w</p>
    <p>id th</p>
    <p>Seeder bandwidth</p>
    <p>Response Curves</p>
    <p>slo pe</p>
    <p>= 1</p>
    <p>slope = 0</p>
  </div>
  <div class="page">
    <p>Response Curves S w</p>
    <p>ar m</p>
    <p>a gg</p>
    <p>re ga</p>
    <p>te b</p>
    <p>an d w</p>
    <p>id th</p>
    <p>( K</p>
    <p>B /s</p>
    <p>) 1500</p>
    <p>Seeder bandwidth (KB/s) 0 25 75 10050</p>
  </div>
  <div class="page">
    <p>Swarm Dynamics</p>
    <p>Swarms exhibit different dynamics based on size, peer resources,</p>
    <p>network conditions. . .</p>
  </div>
  <div class="page">
    <p>Swarm Dynamics</p>
  </div>
  <div class="page">
    <p>Antfarm Optimization S w</p>
    <p>ar m</p>
    <p>a gg</p>
    <p>re ga</p>
    <p>te b</p>
    <p>an d w</p>
    <p>id th</p>
    <p>Seeder bandwidth</p>
    <p>A</p>
    <p>B</p>
    <p>C</p>
  </div>
  <div class="page">
    <p>Antfarm Optimization S w</p>
    <p>ar m</p>
    <p>a gg</p>
    <p>re ga</p>
    <p>te b</p>
    <p>an d w</p>
    <p>id th</p>
    <p>Seeder bandwidth</p>
    <p>!A !C!B</p>
    <p>!A + !B + !C = B</p>
    <p>A</p>
    <p>B</p>
    <p>C</p>
  </div>
  <div class="page">
    <p>Performance Control</p>
    <p>Can provide swarm performance guarantees</p>
    <p>Guarantee minimum level of service  Prioritize swarms</p>
  </div>
  <div class="page">
    <p>S w</p>
    <p>ar m</p>
    <p>a gg</p>
    <p>re ga</p>
    <p>te b</p>
    <p>an d w</p>
    <p>id th</p>
    <p>Seeder bandwidth</p>
    <p>Antfarm Allocation</p>
    <p>!A&quot; !C&quot;!B&quot;</p>
    <p>!A&quot;+ !B&quot;+ !C&quot;= B</p>
    <p>A</p>
    <p>B</p>
    <p>C</p>
  </div>
  <div class="page">
    <p>Adapting to Change</p>
    <p>Swarm dynamics change  Churn  Network conditions</p>
    <p>Antfarm updates response curves  Coordinator explores around point of</p>
    <p>operation</p>
  </div>
  <div class="page">
    <p>peer A</p>
    <p>purse ledger</p>
    <p>Wire Protocol</p>
    <p>Coordinator mints small, unforgeable tokens  Peers trade each other tokens for blocks  Peers return spent tokens to the coordinator</p>
    <p>as proof of contribution</p>
    <p>coordinator</p>
    <p>peer B</p>
    <p>purse ledger</p>
  </div>
  <div class="page">
    <p>Antfarm</p>
    <p>Overview The</p>
    <p>System Evaluation</p>
  </div>
  <div class="page">
    <p>Antfarm</p>
    <p>Overview The</p>
    <p>System Evaluation</p>
  </div>
  <div class="page">
    <p>Antfarm Performance</p>
    <p>Zipf, 60 KB/s seeder Zipf, 200 KB/s seeder 0</p>
    <p>A gg</p>
    <p>re ga</p>
    <p>te b</p>
    <p>an d w</p>
    <p>id th</p>
    <p>( K</p>
    <p>B /s</p>
    <p>)</p>
    <p>Client-server BitTorrent Antfarm</p>
  </div>
  <div class="page">
    <p>Swarm Starvation</p>
    <p>BitTorrent Antfarm</p>
    <p>A vg</p>
    <p>b an</p>
    <p>d w</p>
    <p>id th</p>
    <p>p e r</p>
    <p>p e e r</p>
    <p>(K B</p>
    <p>/s )</p>
    <p>self-sufficient swarm singleton swarm</p>
    <p>BitTorrent starves the singleton swarm</p>
  </div>
  <div class="page">
    <p>BitTorrent: Starves New Swarm total seeder bandwidth avg bandwidth per peer</p>
    <p>B an</p>
    <p>d w</p>
    <p>id th</p>
    <p>( K</p>
    <p>B /s</p>
    <p>)</p>
    <p>Swarms, ordered largest to smallest</p>
    <p>newself-sufficient singleton</p>
  </div>
  <div class="page">
    <p>total seeder bandwidth avg bandwidth per peer</p>
    <p>B an</p>
    <p>d w</p>
    <p>id th</p>
    <p>( K</p>
    <p>B /s</p>
    <p>)</p>
    <p>Antfarm: Seeds New Swarm</p>
    <p>Swarms, ordered largest to smallest</p>
    <p>newself-sufficient singleton</p>
  </div>
  <div class="page">
    <p>Scalability</p>
    <p>Number of peers</p>
    <p>ac h in</p>
    <p>e c</p>
    <p>o o rd</p>
    <p>in at</p>
    <p>o r</p>
    <p>ac h in</p>
    <p>e c</p>
    <p>o o rd</p>
    <p>in at</p>
    <p>o r</p>
    <p>ac h in</p>
    <p>e c</p>
    <p>o o rd</p>
    <p>in at</p>
    <p>o r</p>
    <p>A gg</p>
    <p>re ga</p>
    <p>te b</p>
    <p>an d w</p>
    <p>id th</p>
  </div>
  <div class="page">
    <p>Scalability</p>
    <p>Number of peers</p>
    <p>ac h in</p>
    <p>e c</p>
    <p>o o rd</p>
    <p>in at</p>
    <p>o r</p>
    <p>ac h in</p>
    <p>e c</p>
    <p>o o rd</p>
    <p>in at</p>
    <p>o r</p>
    <p>ac h in</p>
    <p>e c</p>
    <p>o o rd</p>
    <p>in at</p>
    <p>o r</p>
    <p>A gg</p>
    <p>re ga</p>
    <p>te b</p>
    <p>an d w</p>
    <p>id th</p>
    <p>Single PC can compute allocations for 10,000 swarms with 1,000,000 peers</p>
    <p>in 6 seconds</p>
  </div>
  <div class="page">
    <p>Antfarm Implications</p>
    <p>No fine-tuning  Subsumes hacks devised for BitTorrent</p>
    <p>Share ratio  Manual pruning</p>
  </div>
  <div class="page">
    <p>Related Work  Content Distribution Networks</p>
    <p>Akamai, CoBlitz, CoDeeN, ECHOS, Coral, Slurpie, YouTube, Hulu, GridCast, Tribler, Joost, Huang et al. 2008, ...</p>
    <p>P2P Swarming  BitTorrent, BitTyrant, PropShare, BitTornado, BASS,</p>
    <p>Annapureddy et al. 2007, Guo et al. 2005, ...</p>
    <p>Incentives and microcurrencies  Dandelion, BAR Gossip, Samsara, Karma, SHARP, PPay,</p>
    <p>Kash et al. 2007, ...</p>
  </div>
  <div class="page">
    <p>Conclusions</p>
    <p>Model swarm dynamics and allocate bandwidth optimally</p>
    <p>Novel hybrid architecture  PlanetLab deployment shows that Antfarm</p>
    <p>outperforms client-server and P2P</p>
  </div>
  <div class="page">
    <p>Questions?</p>
  </div>
</Presentation>

<?xml version="1.0" ?>
<Presentation>
  <div class="page">
    <p>Hagit Attiya (CS, Technion)</p>
    <p>Joint work with Rachid Guerraoui (EPFL) Eric Ruppert (York University)</p>
    <p>Partial Snapshots</p>
  </div>
  <div class="page">
    <p>June 15, 2008SPAA2</p>
    <p>Taking a Full Snapshot</p>
    <p>n components</p>
    <p>Update a single component</p>
    <p>Scan all the components at once (atomically)</p>
    <p>Provides an instantaneous view of the whole memory</p>
    <p>update</p>
    <p>ok</p>
    <p>scan</p>
    <p>v1,,vn</p>
  </div>
  <div class="page">
    <p>June 16, 2008SPAA3</p>
    <p>Taking a Partial Snapshot</p>
    <p>n components</p>
    <p>Update a single component</p>
    <p>Scan components at once (atomically)</p>
    <p>Allows to read parts of the memory</p>
    <p>Worthwhile if we can do it more efficiently than a (full) scan</p>
    <p>update</p>
    <p>ok</p>
    <p>scan</p>
    <p>vi1,,vir</p>
  </div>
  <div class="page">
    <p>June 15, 2008SPAA4</p>
    <p>Partial Snapshots: Non-Terminating Algorithm</p>
    <p>Update(v,k)</p>
    <p>A[k] = v,seqi,i</p>
    <p>PartialScan()</p>
    <p>repeat</p>
    <p>read A[i1],,A[ir]</p>
    <p>read A[i1],,A[ir]</p>
    <p>if equal</p>
    <p>return A[i1,,ir]</p>
    <p>double collect</p>
    <p>[Afek, Attiya, Dolev, Gafni, Merritt, Shavit, JACM 1993]</p>
    <p>Linearize:  Updates with their writes  Scans inside the double collects</p>
  </div>
  <div class="page">
    <p>June 15, 2008SPAA6</p>
    <p>Termination? Hat tip [Ellen, Fatuoruo, Ruppert]</p>
    <p>Embed a scan within the Update.</p>
    <p>Update(v,k)</p>
    <p>V = FullScan</p>
    <p>A[k] = v,seqi,i,V</p>
    <p>PartialScan()</p>
    <p>repeat</p>
    <p>read A[i1],,A[ir]</p>
    <p>read A[i1],,A[ir]</p>
    <p>if equal</p>
    <p>return A[i1,,ir]</p>
    <p>if 2 values in same component</p>
    <p>return Vj</p>
    <p>Linearize:  Updates with their writes  Direct scans as before  Borrowed scans in place</p>
    <p>direct scan</p>
    <p>borrowed scan</p>
  </div>
  <div class="page">
    <p>June 15, 2008SPAA8</p>
    <p>More Efficient Update</p>
    <p>Scan only components needed for overlapping scans</p>
    <p>But how to know what these are?</p>
    <p>Active set object:</p>
    <p>Tracks processes in the execution</p>
    <p>[Afek, Stupp, Touitou]</p>
    <p>active setjoin ok</p>
    <p>leave</p>
    <p>ok</p>
    <p>getSet</p>
    <p>S</p>
  </div>
  <div class="page">
    <p>June 15, 2008SPAA9</p>
    <p>More Efficient Update</p>
    <p>Scan only components needed for overlapping scans</p>
    <p>But how to know what these are?</p>
    <p>Active set object:</p>
    <p>Tracks processes in the execution</p>
    <p>[Afek, Stupp, Touitou]</p>
    <p>active setp.join ok</p>
    <p>p.leave</p>
    <p>ok</p>
    <p>q.getSet</p>
    <p>{ }{,p,}</p>
  </div>
  <div class="page">
    <p>June 15, 2008SPAA10</p>
    <p>Partial Scans w/ Active Set</p>
    <p>Update(v,k)</p>
    <p>V = EmbeddedScan()</p>
    <p>A[k] = v,seqi,i,V</p>
    <p>PartialScan()</p>
    <p>announce {i1, , ir}</p>
    <p>join</p>
    <p>repeat</p>
    <p>read A[i1],,A[ir]</p>
    <p>read A[i1],,A[ir]</p>
    <p>...</p>
    <p>leave</p>
  </div>
  <div class="page">
    <p>June 15, 2008SPAA11</p>
    <p>Partial Scans w/ Active Set</p>
    <p>Update(v,k)</p>
    <p>V = EmbeddedScan()</p>
    <p>A[k] = v,seqi,i,V</p>
    <p>EmbbededScan()</p>
    <p>getSet</p>
    <p>read components</p>
    <p>repeat</p>
    <p>double collect needed components</p>
    <p>...</p>
    <p>if 3 different values in same component</p>
    <p>borrow the view</p>
  </div>
  <div class="page">
    <p>June 15, 2008SPAA12</p>
    <p>New Active Set Algorithm</p>
    <p>To join</p>
    <p>last.</p>
    <p>p 1716</p>
  </div>
  <div class="page">
    <p>June 15, 2008SPAA13</p>
    <p>.</p>
    <p>New Active Set Algorithm</p>
    <p>To leave</p>
    <p>GetSet reads the array ignoring empty locations</p>
    <p>last,.17,</p>
    <p>p 1716</p>
  </div>
  <div class="page">
    <p>June 15, 2008SPAA14</p>
    <p>Why in the TM Session?</p>
    <p>I need to catch a flight at 17h25</p>
    <p>Partial snapshots are very restricted transactions  PartialScan  read-only transaction  Update  transaction writing</p>
    <p>to a single location  Understanding them provides a handle on</p>
    <p>the inherent cost of TM implementations</p>
  </div>
  <div class="page">
    <p>June 15, 2008SPAA15</p>
    <p>Wrap-Up</p>
    <p>A new object: partial snapshot  Obvious applications  Implications for TM</p>
    <p>Suggested an approach for solving it using an active set object  New active set algorithms? Esp., less space.</p>
    <p>Will have applications to adaptive algorithms.</p>
    <p>Better algorithms? Lower bounds?</p>
  </div>
</Presentation>

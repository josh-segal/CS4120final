<?xml version="1.0" ?>
<Presentation>
  <div class="page">
    <p>Check before You Change: Preventing Correlated Failures in Service Updates</p>
    <p>Ennan Zhai Ang Chen Ruzica Piskac Mahesh Balakrishnan</p>
    <p>Bingchuan Tian Bo Song Haoliang Zhang</p>
  </div>
  <div class="page">
    <p>Background</p>
    <p>Cloud services ensure reliability by redundancy: - Storing data redundantly - Replicating service states across multiple nodes</p>
    <p>Examples: - Amazon AWS, AliCloud, Google Cloud, etc. replicate their</p>
    <p>data and service states</p>
  </div>
  <div class="page">
    <p>However, cloud outages still occur</p>
    <p>Why redundancy does not help?</p>
  </div>
  <div class="page">
    <p>An AWS Outage in 2018</p>
  </div>
  <div class="page">
    <p>Elastic Compute Cloud (EC2)</p>
    <p>Elastic Block Store (EBS)</p>
  </div>
  <div class="page">
    <p>... ... ... ...</p>
    <p>EBS Cluster2EBS Cluster1</p>
    <p>Elastic Compute Cloud (EC2)</p>
  </div>
  <div class="page">
    <p>... ... ... ...</p>
    <p>VM1 VM2 VM1 VM3 VM1 VM2 VM3 VM4</p>
    <p>Netflix</p>
    <p>EBS Cluster2EBS Cluster1</p>
  </div>
  <div class="page">
    <p>... ... ... ...</p>
    <p>VM1 VM2 VM1 VM3 VM1 VM2 VM3 VM4</p>
    <p>Netflix</p>
    <p>EBS Cluster2EBS Cluster1</p>
  </div>
  <div class="page">
    <p>... ... ... ...</p>
    <p>VM1 VM2 VM1 VM3 VM1 VM2 VM3 VM4</p>
    <p>EBS Cluster2EBS Cluster1</p>
    <p>Netflix</p>
  </div>
  <div class="page">
    <p>... ... ... ...</p>
    <p>VM1 VM2 VM1 VM3 VM1 VM2 VM3 VM4</p>
    <p>EBS Cluster2EBS Cluster1</p>
    <p>Netflix</p>
  </div>
  <div class="page">
    <p>... ... ... ...</p>
    <p>VM1 VM2 VM1 VM3 VM1 VM2 VM3 VM4</p>
    <p>EBS Cluster2EBS Cluster1</p>
    <p>Netflix</p>
    <p>Correlated failures resulting from deep dependencies</p>
  </div>
  <div class="page">
    <p>Correlated Failures</p>
    <p>Correlated failures are harmful and epidemic: - Propagated to all the redundant instances - Undermine redundancy and fault tolerance efforts</p>
  </div>
  <div class="page">
    <p>Correlated failures are prevalent</p>
  </div>
  <div class="page">
    <p>Service initialization</p>
    <p>Service Runtime</p>
    <p>State of the Art</p>
  </div>
  <div class="page">
    <p>Service initialization</p>
    <p>Service Runtime</p>
    <p>Post-Failure Forensics</p>
    <p>State of the Art</p>
  </div>
  <div class="page">
    <p>Service initialization</p>
    <p>Service Runtime</p>
    <p>Post-Failure Forensics</p>
    <p>State of the Art</p>
    <p>Proactive Auditing</p>
  </div>
  <div class="page">
    <p>CNF = (A2)  (A1  A3)</p>
    <p>let Server(172.28.228.21) -&gt; s1 let Server(172.28.228.22) -&gt; s2 let [s1, s2] -&gt; rep let FaultGraph(rep) -&gt; ft let RankRCG(ft, 2, NET, ft) -&gt; ranklist</p>
    <p>Core Router1 (Core1)</p>
    <p>Core Router2 (Core2)</p>
    <p>Agg Switch3 (Agg3)</p>
    <p>Server2 (S2) 172.28.228.22</p>
    <p>Server3 (S3) 172.28.228.23</p>
    <p>Agg Switch1 (Agg1)</p>
    <p>Agg Switch2 (Agg2)</p>
    <p>Internet</p>
    <p>Server4 (S4) 172.28.228.24</p>
    <p>HDFS</p>
    <p>HBase</p>
    <p>HDFS</p>
    <p>HBase</p>
    <p>Server1 (S1) 172.28.228.21</p>
    <p>INDaaS</p>
    <p>Weighted MaxSAT solver</p>
    <p>++</p>
    <p>Replication</p>
    <p>Replica1 Replica2</p>
    <p>A2A1 A3 &lt;Weight Vector&gt;</p>
    <p>Auditing Engine</p>
    <p>Auditing Program in RAL</p>
    <p>Auditing Results</p>
    <p>Service Deployment (network/software stacks)</p>
    <p>Proactive Auditing</p>
    <p>They did pre-deployment recommendations: - Step1: Automatically collecting dependency data - Step2: Modeling system stack in fault graph - Step3: Evaluating alternative deployments independence</p>
  </div>
  <div class="page">
    <p>CNF = (A2)  (A1  A3)</p>
    <p>let Server(172.28.228.21) -&gt; s1 let Server(172.28.228.22) -&gt; s2 let [s1, s2] -&gt; rep let FaultGraph(rep) -&gt; ft let RankRCG(ft, 2, NET, ft) -&gt; ranklist</p>
    <p>Core Router1 (Core1)</p>
    <p>Core Router2 (Core2)</p>
    <p>Agg Switch3 (Agg3)</p>
    <p>Server2 (S2) 172.28.228.22</p>
    <p>Server3 (S3) 172.28.228.23</p>
    <p>Agg Switch1 (Agg1)</p>
    <p>Agg Switch2 (Agg2)</p>
    <p>Internet</p>
    <p>Server4 (S4) 172.28.228.24</p>
    <p>HDFS</p>
    <p>HBase</p>
    <p>HDFS</p>
    <p>HBase</p>
    <p>Server1 (S1) 172.28.228.21</p>
    <p>INDaaS</p>
    <p>Weighted MaxSAT solver</p>
    <p>++</p>
    <p>Replication</p>
    <p>Replica1 Replica2</p>
    <p>A2A1 A3 &lt;Weight Vector&gt;</p>
    <p>Auditing Engine</p>
    <p>Auditing Program in RAL</p>
    <p>Auditing Results</p>
    <p>Service Deployment (network/software stacks)</p>
    <p>Proactive Auditing</p>
    <p>They did pre-deployment recommendations: - Step1: Automatically collecting dependency data - Step2: Modeling system stack in fault graph - Step3: Evaluating alternative deployments independence</p>
    <p>SW</p>
    <p>Net</p>
  </div>
  <div class="page">
    <p>CNF = (A2)  (A1  A3)</p>
    <p>let Server(172.28.228.21) -&gt; s1 let Server(172.28.228.22) -&gt; s2 let [s1, s2] -&gt; rep let FaultGraph(rep) -&gt; ft let RankRCG(ft, 2, NET, ft) -&gt; ranklist</p>
    <p>Core Router1 (Core1)</p>
    <p>Core Router2 (Core2)</p>
    <p>Agg Switch3 (Agg3)</p>
    <p>Server2 (S2) 172.28.228.22</p>
    <p>Server3 (S3) 172.28.228.23</p>
    <p>Agg Switch1 (Agg1)</p>
    <p>Agg Switch2 (Agg2)</p>
    <p>Internet</p>
    <p>Server4 (S4) 172.28.228.24</p>
    <p>HDFS</p>
    <p>HBase</p>
    <p>HDFS</p>
    <p>HBase</p>
    <p>Server1 (S1) 172.28.228.21</p>
    <p>INDaaS</p>
    <p>Weighted MaxSAT solver</p>
    <p>++</p>
    <p>Replication</p>
    <p>Replica1 Replica2</p>
    <p>A2A1 A3 &lt;Weight Vector&gt;</p>
    <p>Auditing Engine</p>
    <p>Auditing Program in RAL</p>
    <p>Auditing Results</p>
    <p>Service Deployment (network/software stacks)</p>
    <p>Proactive Auditing</p>
    <p>They did pre-deployment recommendations: - Step1: Automatically collecting dependency data - Step2: Modeling system stack in fault graph - Step3: Evaluating alternative deployments independence</p>
  </div>
  <div class="page">
    <p>CNF = (A2)  (A1  A3)</p>
    <p>let Server(172.28.228.21) -&gt; s1 let Server(172.28.228.22) -&gt; s2 let [s1, s2] -&gt; rep let FaultGraph(rep) -&gt; ft let RankRCG(ft, 2, NET, ft) -&gt; ranklist</p>
    <p>Core Router1 (Core1)</p>
    <p>Core Router2 (Core2)</p>
    <p>Agg Switch3 (Agg3)</p>
    <p>Server2 (S2) 172.28.228.22</p>
    <p>Server3 (S3) 172.28.228.23</p>
    <p>Agg Switch1 (Agg1)</p>
    <p>Agg Switch2 (Agg2)</p>
    <p>Internet</p>
    <p>Server4 (S4) 172.28.228.24</p>
    <p>HDFS</p>
    <p>HBase</p>
    <p>HDFS</p>
    <p>HBase</p>
    <p>Server1 (S1) 172.28.228.21</p>
    <p>INDaaS</p>
    <p>Weighted MaxSAT solver</p>
    <p>++</p>
    <p>Replication</p>
    <p>Replica1 Replica2</p>
    <p>A2A1 A3 &lt;Weight Vector&gt;</p>
    <p>Auditing Engine</p>
    <p>Auditing Program in RAL</p>
    <p>Auditing Results</p>
    <p>Service Deployment (network/software stacks)</p>
    <p>Proactive Auditing</p>
    <p>They did pre-deployment recommendations: - Step1: Automatically collecting dependency data - Step2: Modeling system stack in fault graph - Step3: Evaluating alternative deployments independence</p>
  </div>
  <div class="page">
    <p>Redundancy configuration fails</p>
    <p>...</p>
  </div>
  <div class="page">
    <p>Server 2 failsServer 1 fails</p>
    <p>Redundancy configuration fails</p>
    <p>...</p>
    <p>AND gate: all the sublayer nodes fail, the upper layer node fails</p>
  </div>
  <div class="page">
    <p>Net fails</p>
    <p>+&quot; +&quot;</p>
    <p>HW fails SW fails SW fails</p>
    <p>Server 2 failsServer 1 fails</p>
    <p>Net fails HW fails</p>
    <p>Redundancy configuration fails</p>
    <p>...</p>
    <p>OR gate: one of the sublayer nodes fails, the upper layer node fails</p>
  </div>
  <div class="page">
    <p>Net fails</p>
    <p>+&quot; +&quot;</p>
    <p>Core1 Agg2Agg1</p>
    <p>HW fails</p>
    <p>+&quot; +&quot;</p>
    <p>Path1 Path2 HBase HDFS</p>
    <p>+&quot;</p>
    <p>SW fails SW fails</p>
    <p>Server 2 failsServer 1 fails</p>
    <p>Net fails HW fails</p>
    <p>Redundancy configuration fails</p>
    <p>... ...... ...</p>
    <p>...</p>
    <p>...... ...</p>
  </div>
  <div class="page">
    <p>Net fails</p>
    <p>+&quot; +&quot;</p>
    <p>Core1 Agg2Agg1</p>
    <p>HW fails</p>
    <p>+&quot; +&quot;</p>
    <p>Path1 Path2 HBase HDFS</p>
    <p>+&quot;</p>
    <p>SW fails SW fails</p>
    <p>Server 2 failsServer 1 fails</p>
    <p>Net fails HW fails</p>
    <p>Redundancy configuration fails</p>
    <p>... ...... ...</p>
    <p>...</p>
    <p>...... ...</p>
  </div>
  <div class="page">
    <p>Service initialization</p>
    <p>Service Runtime</p>
    <p>Post-Failure Forensics</p>
    <p>State of the Art</p>
    <p>Proactive Auditing</p>
  </div>
  <div class="page">
    <p>Service initialization</p>
    <p>Service Runtime</p>
    <p>Post-Failure Forensics</p>
    <p>Correlated Failure Risks in Updates</p>
    <p>Proactive Auditing</p>
    <p>Changing network paths</p>
    <p>Upgrading software components</p>
    <p>Azure global outage: Our DNS update mangled domain records</p>
    <p>Benjamin Treynor Sloss, Google's VP of engineering, explained that the root cause of last Sunday's outage was a configuration change for a small group of servers in one region being wrongly applied to a larger number of servers across several neighboring regions.</p>
  </div>
  <div class="page">
    <p>Service initialization</p>
    <p>Service Runtime</p>
    <p>Post-Failure Forensics</p>
    <p>Problem 1: Inefficient Auditing in Updates</p>
    <p>Proactive Auditing</p>
    <p>Changing network paths</p>
    <p>Upgrading software components</p>
    <p>O(50) hours per auditing V.S.</p>
    <p>One update every 3 hours</p>
  </div>
  <div class="page">
    <p>Service initialization</p>
    <p>Service Runtime</p>
    <p>Post-Failure Forensics</p>
    <p>Problem 2: Lack of fixing risks</p>
    <p>Proactive Auditing</p>
    <p>Changing network paths</p>
    <p>Upgrading software components</p>
    <p>Fix ? Fix ?</p>
  </div>
  <div class="page">
    <p>Service initialization</p>
    <p>Service Runtime</p>
    <p>Post-Failure Forensics</p>
    <p>Proactive Auditing</p>
    <p>Changing network paths</p>
    <p>Upgrading software components</p>
    <p>Our Contribution</p>
    <p>CloudCanary</p>
    <p>Fast Audit &amp; Fix</p>
  </div>
  <div class="page">
    <p>CloudCanarys Workflow</p>
    <p>SnapAudit</p>
    <p>Updated Service Snapshot</p>
    <p>Reliability Goal</p>
    <p>Dependency acquisition</p>
    <p>and</p>
    <p>Fault graph generator</p>
    <p>Fault Graph</p>
    <p>DepBooster</p>
    <p>Improvement PlansOperator</p>
  </div>
  <div class="page">
    <p>SnapAudit</p>
    <p>Updated Service Snapshot</p>
    <p>Reliability Goal</p>
    <p>Dependency acquisition</p>
    <p>and</p>
    <p>Fault graph generator</p>
    <p>Fault Graph</p>
    <p>DepBooster</p>
    <p>Improvement PlansOperator</p>
    <p>CloudCanarys Workflow</p>
  </div>
  <div class="page">
    <p>SnapAudit</p>
    <p>Updated Service Snapshot</p>
    <p>Reliability Goal</p>
    <p>Dependency acquisition</p>
    <p>and</p>
    <p>Fault graph generator</p>
    <p>Fault Graph</p>
    <p>DepBooster</p>
    <p>Improvement PlansOperator</p>
    <p>CloudCanarys Workflow</p>
  </div>
  <div class="page">
    <p>SnapAudit</p>
    <p>Updated Service Snapshot</p>
    <p>Reliability Goal</p>
    <p>Dependency acquisition</p>
    <p>and</p>
    <p>Fault graph generator</p>
    <p>Fault Graph</p>
    <p>DepBooster</p>
    <p>Improvement PlansOperator</p>
    <p>Challenge 1: SnapAudit  Challenge 2: DepBooster</p>
    <p>CloudCanarys Workflow</p>
  </div>
  <div class="page">
    <p>SnapAudit</p>
    <p>Updated Service Snapshot</p>
    <p>Reliability Goal</p>
    <p>Dependency acquisition</p>
    <p>and</p>
    <p>Fault graph generator</p>
    <p>Fault Graph</p>
    <p>DepBooster</p>
    <p>Improvement PlansOperator</p>
    <p>Challenge 1: SnapAudit  Challenge 2: DepBooster</p>
    <p>CloudCanarys Workflow</p>
  </div>
  <div class="page">
    <p>SnapAudit</p>
    <p>Updated Service Snapshot</p>
    <p>Reliability Goal</p>
    <p>Dependency acquisition</p>
    <p>and</p>
    <p>Fault graph generator</p>
    <p>Fault Graph</p>
    <p>DepBooster</p>
    <p>Improvement PlansOperator</p>
    <p>Challenge 1: SnapAudit  Challenge 2: DepBooster</p>
    <p>CloudCanarys Workflow CloudCanary</p>
  </div>
  <div class="page">
    <p>E1 E1</p>
    <p>A Fault Graph</p>
  </div>
  <div class="page">
    <p>E1 E1</p>
    <p>Risk Groups in Fault Graphs</p>
    <p>A risk group means a set of leaf nodes whose simultaneous failures lead to the failure of root node</p>
  </div>
  <div class="page">
    <p>{A2} and {A1, A3} are risk groups {A1} or {A3} is not risk group</p>
    <p>E1 E1</p>
    <p>Risk Groups in Fault Graphs</p>
    <p>A risk group means a set of leaf nodes whose simultaneous failures lead to the failure of root node</p>
  </div>
  <div class="page">
    <p>{A2} and {A1, A3} are risk groups {A1} or {A3} is not risk group</p>
    <p>E1 E1</p>
    <p>Risk Groups in Fault Graphs</p>
    <p>A risk group means a set of leaf nodes whose simultaneous failures lead to the failure of root node</p>
    <p>Identifying correlated failure risks can be reduced to</p>
    <p>the problem of finding risk groups in the fault graph.</p>
    <p>However, analyzing risk groups is</p>
    <p>NP-complete problem</p>
  </div>
  <div class="page">
    <p>SnapAudit</p>
    <p>Updated Service Snapshot</p>
    <p>Reliability Goal</p>
    <p>Dependency acquisition</p>
    <p>and</p>
    <p>Fault graph generator</p>
    <p>Fault Graph</p>
    <p>DepBooster</p>
    <p>Improvement PlansOperator</p>
    <p>Challenge 1: SnapAudit  Challenge 2: DepBooster</p>
    <p>CloudCanarys Workflow CloudCanary</p>
  </div>
  <div class="page">
    <p>Service initialization</p>
    <p>Service Runtime</p>
    <p>Changing network paths</p>
    <p>Upgrading software components</p>
    <p>The Insight of SnapAudit</p>
    <p>is small is small  is small S S S</p>
  </div>
  <div class="page">
    <p>Service initialization</p>
    <p>Service Runtime</p>
    <p>Changing network paths</p>
    <p>Upgrading software components</p>
    <p>The Insight of SnapAudit</p>
    <p>is small is small  is small</p>
    <p>FirstAudit</p>
    <p>S S S</p>
    <p>CloudCanary</p>
  </div>
  <div class="page">
    <p>Service initialization</p>
    <p>Service Runtime</p>
    <p>Changing network paths</p>
    <p>Upgrading software components</p>
    <p>The Insight of SnapAudit</p>
    <p>is small is small  is small</p>
    <p>FirstAudit</p>
    <p>S S S</p>
    <p>CloudCanary</p>
    <p>IncAudit IncAudit IncAudit</p>
  </div>
  <div class="page">
    <p>Service initialization</p>
    <p>Service Runtime</p>
    <p>Changing network paths</p>
    <p>Upgrading software components</p>
    <p>is small is small  is small</p>
    <p>FirstAudit</p>
    <p>S S S</p>
    <p>CloudCanary</p>
    <p>IncAudit IncAudit IncAudit</p>
    <p>SnapAudit: FirstAudit &amp; IncAudit</p>
  </div>
  <div class="page">
    <p>FirstAudit Primitive</p>
    <p>A B</p>
    <p>D</p>
    <p>B C</p>
    <p>E</p>
    <p>+&quot; +&quot;</p>
    <p>F</p>
    <p>+&quot;</p>
    <p>X Y</p>
    <p>+&quot;</p>
    <p>Z</p>
    <p>R</p>
  </div>
  <div class="page">
    <p>FirstAudit Primitive</p>
    <p>A B</p>
    <p>D</p>
    <p>B C</p>
    <p>E</p>
    <p>+&quot; +&quot;</p>
    <p>F</p>
    <p>+&quot;</p>
    <p>H(D)=43cd</p>
    <p>- {A} - {B}</p>
    <p>H(E)=a4vo</p>
    <p>- {B} - {C}</p>
    <p>H(F)=x31g</p>
    <p>- {B} - {A, C}</p>
    <p>X YH(X)=xbn7 - {A} - {S,T} H(Y)=bbk9</p>
    <p>- {K} - {A,S}</p>
    <p>+&quot;</p>
    <p>H(Z)=lktd</p>
    <p>- {A} - {K} - {S, T}</p>
    <p>Z</p>
    <p>R H(R)=aed8</p>
    <p>- {A} - {K} - {S, T}</p>
  </div>
  <div class="page">
    <p>FirstAudit Primitive</p>
    <p>A B</p>
    <p>D</p>
    <p>B C</p>
    <p>E</p>
    <p>+&quot; +&quot;</p>
    <p>F</p>
    <p>+&quot;</p>
    <p>H(D)=43cd</p>
    <p>- {A} - {B}</p>
    <p>H(E)=a4vo</p>
    <p>- {B} - {C}</p>
    <p>H(F)=x31g</p>
    <p>- {B} - {A, C}</p>
    <p>X YH(X)=xbn7 - {A} - {S,T} H(Y)=bbk9</p>
    <p>- {K} - {A,S}</p>
    <p>+&quot;</p>
    <p>H(Z)=lktd</p>
    <p>- {A} - {K} - {S, T}</p>
    <p>Z</p>
    <p>R H(R)=aed8</p>
    <p>- {A} - {K} - {S, T}</p>
  </div>
  <div class="page">
    <p>FirstAudit Primitive</p>
    <p>A B</p>
    <p>D</p>
    <p>B C</p>
    <p>E</p>
    <p>+&quot; +&quot;</p>
    <p>F</p>
    <p>+&quot;</p>
    <p>H(D)=43cd</p>
    <p>- {A} - {B}</p>
    <p>H(E)=a4vo</p>
    <p>- {B} - {C}</p>
    <p>H(F)=x31g</p>
    <p>- {B} - {A, C}</p>
    <p>X YH(X)=xbn7 - {A} - {S,T} H(Y)=bbk9</p>
    <p>- {K} - {A,S}</p>
    <p>+&quot;</p>
    <p>H(Z)=lktd</p>
    <p>- {A} - {K} - {S, T}</p>
    <p>Z</p>
    <p>R H(R)=aed8</p>
    <p>- {A} - {K} - {S, T}</p>
  </div>
  <div class="page">
    <p>FirstAudit Primitive</p>
    <p>A B</p>
    <p>D</p>
    <p>B C</p>
    <p>E</p>
    <p>+&quot; +&quot;</p>
    <p>F</p>
    <p>+&quot;</p>
    <p>H(D)=43cd</p>
    <p>- {A} - {B}</p>
    <p>H(E)=a4vo</p>
    <p>- {B} - {C}</p>
    <p>H(F)=x31g</p>
    <p>- {A, B} - {A, C} - {B, B} - {B, C}</p>
    <p>X YH(X)=xbn7 - {A} - {S,T} H(Y)=bbk9</p>
    <p>- {K} - {A,S}</p>
    <p>+&quot;</p>
    <p>H(Z)=lktd</p>
    <p>- {A} - {K} - {S, T}</p>
    <p>Z</p>
    <p>R H(R)=aed8</p>
    <p>- {A} - {K} - {S, T}</p>
  </div>
  <div class="page">
    <p>FirstAudit Primitive</p>
    <p>A B</p>
    <p>D</p>
    <p>B C</p>
    <p>E</p>
    <p>+&quot; +&quot;</p>
    <p>F</p>
    <p>+&quot;</p>
    <p>H(D)=43cd</p>
    <p>- {A} - {B}</p>
    <p>H(E)=a4vo</p>
    <p>- {B} - {C}</p>
    <p>H(F)=x31g</p>
    <p>- {A, B} - {A, C} - {B, B} - {B, C}</p>
    <p>X YH(X)=xbn7 - {A} - {S,T} H(Y)=bbk9</p>
    <p>- {K} - {A,S}</p>
    <p>+&quot;</p>
    <p>H(Z)=lktd</p>
    <p>- {A} - {K} - {S, T}</p>
    <p>Z</p>
    <p>R H(R)=aed8</p>
    <p>- {A} - {K} - {S, T}</p>
  </div>
  <div class="page">
    <p>FirstAudit Primitive</p>
    <p>A B</p>
    <p>D</p>
    <p>B C</p>
    <p>E</p>
    <p>+&quot; +&quot;</p>
    <p>F</p>
    <p>+&quot;</p>
    <p>H(D)=43cd</p>
    <p>- {A} - {B}</p>
    <p>H(E)=a4vo</p>
    <p>- {B} - {C}</p>
    <p>H(F)=x31g</p>
    <p>- {A, B} - {A, C} - {B} - {B, C}</p>
    <p>X YH(X)=xbn7 - {A} - {S,T} H(Y)=bbk9</p>
    <p>- {K} - {A,S}</p>
    <p>+&quot;</p>
    <p>H(Z)=lktd</p>
    <p>- {A} - {K} - {S, T}</p>
    <p>Z</p>
    <p>R H(R)=aed8</p>
    <p>- {A} - {K} - {S, T}</p>
  </div>
  <div class="page">
    <p>FirstAudit Primitive</p>
    <p>A B</p>
    <p>D</p>
    <p>B C</p>
    <p>E</p>
    <p>+&quot; +&quot;</p>
    <p>F</p>
    <p>+&quot;</p>
    <p>H(D)=43cd</p>
    <p>- {A} - {B}</p>
    <p>H(E)=a4vo</p>
    <p>- {B} - {C}</p>
    <p>H(F)=x31g</p>
    <p>- {A, B} - {A, C} - {B} - {B, C}</p>
    <p>X YH(X)=xbn7 - {A} - {S,T} H(Y)=bbk9</p>
    <p>- {K} - {A,S}</p>
    <p>+&quot;</p>
    <p>H(Z)=lktd</p>
    <p>- {A} - {K} - {S, T}</p>
    <p>Z</p>
    <p>R H(R)=aed8</p>
    <p>- {A} - {K} - {S, T}</p>
  </div>
  <div class="page">
    <p>FirstAudit Primitive</p>
    <p>A B</p>
    <p>D</p>
    <p>B C</p>
    <p>E</p>
    <p>+&quot; +&quot;</p>
    <p>F</p>
    <p>+&quot;</p>
    <p>H(D)=43cd</p>
    <p>- {A} - {B}</p>
    <p>H(E)=a4vo</p>
    <p>- {B} - {C}</p>
    <p>H(F)=x31g</p>
    <p>- {B} - {A, C} - {B} - {B}</p>
    <p>X YH(X)=xbn7 - {A} - {S,T} H(Y)=bbk9</p>
    <p>- {K} - {A,S}</p>
    <p>+&quot;</p>
    <p>H(Z)=lktd</p>
    <p>- {A} - {K} - {S, T}</p>
    <p>Z</p>
    <p>R H(R)=aed8</p>
    <p>- {A} - {K} - {S, T}</p>
  </div>
  <div class="page">
    <p>FirstAudit Primitive</p>
    <p>A B</p>
    <p>D</p>
    <p>B C</p>
    <p>E</p>
    <p>+&quot; +&quot;</p>
    <p>F</p>
    <p>+&quot;</p>
    <p>H(D)=43cd</p>
    <p>- {A} - {B}</p>
    <p>H(E)=a4vo</p>
    <p>- {B} - {C}</p>
    <p>X YH(X)=xbn7 - {A} - {S,T} H(Y)=bbk9</p>
    <p>- {K} - {A,S}</p>
    <p>+&quot;</p>
    <p>H(Z)=lktd</p>
    <p>- {A} - {K} - {S, T}</p>
    <p>Z</p>
    <p>R H(R)=aed8</p>
    <p>- {A} - {K} - {S, T}H(F)=x31g</p>
    <p>- {B} - {A, C}</p>
  </div>
  <div class="page">
    <p>FirstAudit Primitive</p>
    <p>A B</p>
    <p>D</p>
    <p>B C</p>
    <p>E</p>
    <p>+&quot; +&quot;</p>
    <p>F</p>
    <p>+&quot;</p>
    <p>H(D)=43cd</p>
    <p>- {A} - {B}</p>
    <p>H(E)=a4vo</p>
    <p>- {B} - {C}</p>
    <p>H(F)=x31g</p>
    <p>- {B} - {A, C}</p>
    <p>X YH(X)=xbn7 - {A} - {S,T} H(Y)=bbk9</p>
    <p>- {K} - {A,S}</p>
    <p>+&quot;</p>
    <p>H(Z)=lktd</p>
    <p>- {A} - {K} - {S, T}</p>
    <p>Z</p>
    <p>R H(R)=aed8</p>
    <p>- {A} - {K} - {S, T}</p>
  </div>
  <div class="page">
    <p>FirstAudit Primitive</p>
    <p>A B</p>
    <p>D</p>
    <p>B C</p>
    <p>E</p>
    <p>+&quot; +&quot;</p>
    <p>F</p>
    <p>+&quot;</p>
    <p>H(D)=43cd</p>
    <p>- {A} - {B}</p>
    <p>H(E)=a4vo</p>
    <p>- {B} - {C}</p>
    <p>H(F)=x31g</p>
    <p>- {B} - {A, C}</p>
    <p>X YH(X)=xbn7 - {A} - {S,T} H(Y)=bbk9</p>
    <p>- {K} - {A,S}</p>
    <p>+&quot;</p>
    <p>H(Z)=lktd</p>
    <p>- {A} - {K} - {S, T}</p>
    <p>Z</p>
    <p>R H(R)=aed8</p>
    <p>- {A} - {K} - {S, T}</p>
  </div>
  <div class="page">
    <p>FirstAudit Primitive</p>
    <p>A B</p>
    <p>D</p>
    <p>B C</p>
    <p>E</p>
    <p>+&quot; +&quot;</p>
    <p>F</p>
    <p>+&quot;</p>
    <p>H(D)=43cd</p>
    <p>- {A} - {B}</p>
    <p>H(E)=a4vo</p>
    <p>- {B} - {C}</p>
    <p>H(F)=x31g</p>
    <p>- {B} - {A, C}</p>
    <p>X YH(X)=xbn7 - {A} - {S,T} H(Y)=bbk9</p>
    <p>- {K} - {A,S}</p>
    <p>+&quot;</p>
    <p>H(Z)=lktd</p>
    <p>- {A} - {K} - {S, T}</p>
    <p>Z</p>
    <p>R H(R)=aed8</p>
    <p>- {A} - {K} - {B} - {S, T}</p>
  </div>
  <div class="page">
    <p>Service initialization</p>
    <p>Service Runtime</p>
    <p>Changing network paths</p>
    <p>Upgrading software components</p>
    <p>SnapAudit: FirstAudit &amp; IncAudit</p>
    <p>is small is small  is small</p>
    <p>FirstAudit</p>
    <p>S S S</p>
    <p>CloudCanary</p>
    <p>IncAudit IncAudit IncAudit</p>
  </div>
  <div class="page">
    <p>Our Insight</p>
    <p>Algorithm sketch: - Finding all the border nodes (black nodes) - Computing their risk groups - Merging these risk groups towards root</p>
    <p>Update</p>
  </div>
  <div class="page">
    <p>Original Deployment</p>
    <p>A B</p>
    <p>D</p>
    <p>B C</p>
    <p>E</p>
    <p>+&quot; +&quot;</p>
    <p>F</p>
    <p>+&quot;</p>
    <p>H(D)=43cd</p>
    <p>- {A} - {B}</p>
    <p>H(E)=a4vo</p>
    <p>- {B} - {C}</p>
    <p>H(F)=x31g</p>
    <p>- {B} - {A, C}</p>
    <p>X YH(X)=xbn7 - {A} - {S,T} H(Y)=bbk9</p>
    <p>- {K} - {A,S}</p>
    <p>+&quot;</p>
    <p>H(Z)=lktd</p>
    <p>- {A} - {K} - {S, T}</p>
    <p>Z</p>
    <p>R H(R)=aed8</p>
    <p>- {A} - {K} - {B} - {S, T}</p>
  </div>
  <div class="page">
    <p>Updated Deployment</p>
    <p>A B</p>
    <p>D</p>
    <p>B C</p>
    <p>E</p>
    <p>+&quot; +&quot;</p>
    <p>F</p>
    <p>+&quot;</p>
    <p>H(D)=43cd</p>
    <p>- {A} - {B}</p>
    <p>H(E)=a4vo</p>
    <p>- {B} - {C}</p>
    <p>H(F)=x31g</p>
    <p>- {B} - {A, C}</p>
    <p>X YH(X)=xbn7 - {A} - {S,T} H(Y)=bbk9</p>
    <p>- {K} - {A,S}</p>
    <p>+&quot;</p>
    <p>Z</p>
    <p>Q</p>
    <p>R</p>
    <p>H(Z)=lktd</p>
    <p>- {A} - {K} - {S, T}</p>
    <p>H(R)=aed8</p>
    <p>- {A} - {K} - {B} - {S, T}</p>
  </div>
  <div class="page">
    <p>Updated Deployment</p>
    <p>A B</p>
    <p>D</p>
    <p>B C</p>
    <p>E</p>
    <p>+&quot; +&quot;</p>
    <p>F</p>
    <p>+&quot;</p>
    <p>H(D)=43cd</p>
    <p>- {A} - {B}</p>
    <p>H(E)=a4vo</p>
    <p>- {B} - {C}</p>
    <p>H(F)=x31g</p>
    <p>- {B} - {A, C}</p>
    <p>X YH(X)=xbn7 - {A} - {S,T} H(Y)=bbk9</p>
    <p>- {K} - {A,S}</p>
    <p>+&quot;</p>
    <p>H(Z)=2xzb</p>
    <p>- {A} - {K} - {S, T}</p>
    <p>Z</p>
    <p>Q</p>
    <p>R - {A} - {K} - {B} - {S, T}</p>
    <p>H(R)=aed8</p>
  </div>
  <div class="page">
    <p>Updated Deployment</p>
    <p>A B</p>
    <p>D</p>
    <p>B C</p>
    <p>E</p>
    <p>+&quot; +&quot;</p>
    <p>F</p>
    <p>+&quot;</p>
    <p>H(D)=43cd</p>
    <p>- {A} - {B}</p>
    <p>H(E)=a4vo</p>
    <p>- {B} - {C}</p>
    <p>H(F)=x31g</p>
    <p>- {B} - {A, C}</p>
    <p>X YH(X)=xbn7 - {A} - {S,T} H(Y)=bbk9</p>
    <p>- {K} - {A,S}</p>
    <p>+&quot;</p>
    <p>H(Z)=2xzb</p>
    <p>- {A} - {K} - {S, T}</p>
    <p>Z</p>
    <p>Q</p>
    <p>R H(R)=45zc</p>
    <p>- {A} - {K} - {B} - {S, T}</p>
  </div>
  <div class="page">
    <p>A B</p>
    <p>D</p>
    <p>B C</p>
    <p>E</p>
    <p>+&quot; +&quot;</p>
    <p>F</p>
    <p>+&quot;</p>
    <p>H(D)=43cd</p>
    <p>- {A} - {B}</p>
    <p>H(E)=a4vo</p>
    <p>- {B} - {C}</p>
    <p>H(F)=x31g</p>
    <p>- {B} - {A, C}</p>
    <p>X YH(X)=xbn7 - {A} - {S,T} H(Y)=bbk9</p>
    <p>- {K} - {A,S}</p>
    <p>+&quot;</p>
    <p>H(Z)=2xzb</p>
    <p>- {A} - {K} - {S, T}</p>
    <p>Z</p>
    <p>Q</p>
    <p>R H(R)=45zc</p>
    <p>- {A} - {K} - {B} - {S, T}</p>
    <p>Step 1: Find Border Nodes</p>
    <p>Border Nodes</p>
  </div>
  <div class="page">
    <p>A B</p>
    <p>D</p>
    <p>B C</p>
    <p>E</p>
    <p>+&quot; +&quot;</p>
    <p>F</p>
    <p>+&quot;</p>
    <p>H(D)=43cd</p>
    <p>- {A} - {B}</p>
    <p>H(E)=a4vo</p>
    <p>- {B} - {C}</p>
    <p>H(F)=x31g</p>
    <p>- {B} - {A, C}</p>
    <p>X YH(X)=xbn7 - {A} - {S,T} H(Y)=bbk9</p>
    <p>- {K} - {A,S}</p>
    <p>+&quot;</p>
    <p>H(Z)=2xzb</p>
    <p>- {A} - {K} - {S, T}</p>
    <p>Z</p>
    <p>Q</p>
    <p>R H(R)=45zc</p>
    <p>- {A} - {K} - {B} - {S, T}</p>
    <p>Border Nodes</p>
    <p>Step 2: Qs Risk Groups</p>
  </div>
  <div class="page">
    <p>Boolean formula = E1E2 = (A1A2)(A2A3)</p>
    <p>Our Insight</p>
  </div>
  <div class="page">
    <p>Boolean formula = E1E2 = (A1A2)(A2A3)</p>
    <p>SAT solver Satisfying assignment: {A1=1, A2=0, A3=1}</p>
    <p>Our Insight</p>
  </div>
  <div class="page">
    <p>Boolean formula = E1E2 = (A1A2)(A2A3)</p>
    <p>SAT solver{A1=0, A2=1, A3=0}</p>
    <p>Problem: - Standard SAT solver outputs an arbitrary satisfying</p>
    <p>assignment</p>
    <p>Our Insight</p>
  </div>
  <div class="page">
    <p>Boolean formula = E1E2 = (A1A2)(A2A3)</p>
    <p>SAT solver{A1=0, A2=1, A3=0}</p>
    <p>Problem: - Standard SAT solver outputs an arbitrary satisfying</p>
    <p>assignment - What we want is top-k critical (minimal) risk groups</p>
    <p>Our Insight</p>
  </div>
  <div class="page">
    <p>Using MinCostSAT solver - Satisfiable assignment with the least weights - Obtain the least C =  ci  wi - Very fast with 100% accuracy</p>
    <p>We can use Weighted Partial MaxSAT: - Solve 100 instances less than 100 sec - Each instance contains ~1000 clauses - Industry-scale competition - Pr</p>
    <p>Identifying Risk Groups</p>
  </div>
  <div class="page">
    <p>Using MinCostSAT solver - Satisfiable assignment with the least weights - Obtain the least C =  ci  wi - Very fast with 100% accuracy</p>
    <p>We can use Weighted Partial MaxSAT: - Solve 100 instances less than 100 sec - Each instance contains ~1000 clauses - Industry-scale competition - Pr</p>
    <p>We set the values of all the leaf nodes (i.e., Wi) as 1</p>
    <p>Identifying Risk Groups</p>
  </div>
  <div class="page">
    <p>Using MinCostSAT solver - Satisfiable assignment with the least weights - Obtain the least C =  ci  wi - Very fast with 100% accuracy</p>
    <p>We can use Weighted Partial MaxSAT: - Solve 100 instances less than 100 sec - Each instance contains ~1000 clauses - Industry-scale competition - Pr</p>
    <p>A1 A2 A3 Weight 1 0 0 0 1 0 1 0 0 1 1 1 0 2 1 0 1 2 0 1 1 2 0 0 0 1 1 1 3</p>
    <p>Identifying Risk Groups</p>
  </div>
  <div class="page">
    <p>Using MinCostSAT solver - Satisfiable assignment with the least weights - Obtain the least C =  ci  wi - Very fast with 100% accuracy</p>
    <p>We can use Weighted Partial MaxSAT: - Solve 100 instances less than 100 sec - Each instance contains ~1000 clauses - Industry-scale competition - Pr</p>
    <p>A1 A2 A3 Weight 1 0 0 0 1 0 1 0 0 1 1 1 0 2 1 0 1 2 0 1 1 2 0 0 0 1 1 1 3</p>
    <p>Identifying Risk Groups</p>
  </div>
  <div class="page">
    <p>Find out the top-k critical risk groups - Use a  to connect the current formula and the</p>
    <p>negation of the resulting assignment</p>
    <p>We can use Weighted Partial MaxSAT: - Solve 100 instances less than 100 sec - Each instance contains ~1000 clauses - Industry-scale competition - Pr</p>
    <p>(A1A2)(A2A3)  (A1  A2  A3)</p>
    <p>Identifying Risk Groups</p>
  </div>
  <div class="page">
    <p>A B</p>
    <p>D</p>
    <p>B C</p>
    <p>E</p>
    <p>+&quot; +&quot;</p>
    <p>F</p>
    <p>+&quot;</p>
    <p>H(D)=43cd</p>
    <p>- {A} - {B}</p>
    <p>H(E)=a4vo</p>
    <p>- {B} - {C}</p>
    <p>H(F)=x31g</p>
    <p>- {B} - {A, C}</p>
    <p>X YH(X)=xbn7 - {A} - {S,T} H(Y)=bbk9</p>
    <p>- {K} - {A,S}</p>
    <p>+&quot;</p>
    <p>H(Z)=2xzb</p>
    <p>- {A} - {K} - {S, T}</p>
    <p>Z</p>
    <p>Q</p>
    <p>R H(R)=45zc</p>
    <p>- {A} - {K} - {B} - {S, T}</p>
    <p>Step 2: Qs Risk Groups</p>
  </div>
  <div class="page">
    <p>A B</p>
    <p>D</p>
    <p>B C</p>
    <p>E</p>
    <p>+&quot; +&quot;</p>
    <p>F</p>
    <p>+&quot;</p>
    <p>H(D)=43cd</p>
    <p>- {A} - {B}</p>
    <p>H(E)=a4vo</p>
    <p>- {B} - {C}</p>
    <p>H(F)=x31g</p>
    <p>- {B} - {A, C}</p>
    <p>X YH(X)=xbn7 - {A} - {S,T} H(Y)=bbk9</p>
    <p>- {K} - {A,S}</p>
    <p>+&quot;</p>
    <p>H(Z)=2xzb</p>
    <p>- {A} - {K} - {S, T}</p>
    <p>Z</p>
    <p>Q</p>
    <p>R H(R)=45zc</p>
    <p>- {A} - {K} - {B} - {S, T}</p>
    <p>Step 2: Qs Risk Groups</p>
    <p>H(Q)=x1r7</p>
    <p>- {S} - {K}</p>
  </div>
  <div class="page">
    <p>A B</p>
    <p>D</p>
    <p>B C</p>
    <p>E</p>
    <p>+&quot; +&quot;</p>
    <p>F</p>
    <p>+&quot;</p>
    <p>H(D)=43cd</p>
    <p>- {A} - {B}</p>
    <p>H(E)=a4vo</p>
    <p>- {B} - {C}</p>
    <p>H(F)=x31g</p>
    <p>- {B} - {A, C}</p>
    <p>X YH(X)=xbn7 - {A} - {S,T} H(Y)=bbk9</p>
    <p>- {K} - {A,S}</p>
    <p>+&quot;</p>
    <p>H(Z)=2xzb</p>
    <p>- {A} - {K} - {S, T}</p>
    <p>Z</p>
    <p>Q</p>
    <p>R H(R)=45zc</p>
    <p>- {A} - {K} - {B} - {S, T}</p>
    <p>H(Q)=x1r7</p>
    <p>- {S} - {K}</p>
    <p>Step 3: Merging Changed Caches</p>
  </div>
  <div class="page">
    <p>A B</p>
    <p>D</p>
    <p>B C</p>
    <p>E</p>
    <p>+&quot; +&quot;</p>
    <p>F</p>
    <p>+&quot;</p>
    <p>H(D)=43cd</p>
    <p>- {A} - {B}</p>
    <p>H(E)=a4vo</p>
    <p>- {B} - {C}</p>
    <p>H(F)=x31g</p>
    <p>- {B} - {A, C}</p>
    <p>X YH(X)=xbn7 - {A} - {S,T} H(Y)=bbk9</p>
    <p>- {K} - {A,S}</p>
    <p>+&quot;</p>
    <p>H(Z)=2xzb</p>
    <p>- {A} - {K} - {S}</p>
    <p>Z</p>
    <p>Q</p>
    <p>R H(R)=45zc</p>
    <p>- {A} - {K} - {B} - {S, T}</p>
    <p>H(Q)=x1r7</p>
    <p>- {S} - {K}</p>
    <p>Step 3: Merging Changed Caches</p>
  </div>
  <div class="page">
    <p>A B</p>
    <p>D</p>
    <p>B C</p>
    <p>E</p>
    <p>+&quot; +&quot;</p>
    <p>F</p>
    <p>+&quot;</p>
    <p>H(D)=43cd</p>
    <p>- {A} - {B}</p>
    <p>H(E)=a4vo</p>
    <p>- {B} - {C}</p>
    <p>H(F)=x31g</p>
    <p>- {B} - {A, C}</p>
    <p>X YH(X)=xbn7 - {A} - {S,T} H(Y)=bbk9</p>
    <p>- {K} - {A,S}</p>
    <p>+&quot;</p>
    <p>H(Z)=2xzb</p>
    <p>- {A} - {K} - {S}</p>
    <p>Z</p>
    <p>Q</p>
    <p>R H(R)=45zc</p>
    <p>- {A} - {K} - {B} - {S, T}</p>
    <p>H(Q)=x1r7</p>
    <p>- {S} - {K}</p>
    <p>Step 3: Merging Changed Caches</p>
  </div>
  <div class="page">
    <p>A B</p>
    <p>D</p>
    <p>B C</p>
    <p>E</p>
    <p>+&quot; +&quot;</p>
    <p>F</p>
    <p>+&quot;</p>
    <p>H(D)=43cd</p>
    <p>- {A} - {B}</p>
    <p>H(E)=a4vo</p>
    <p>- {B} - {C}</p>
    <p>H(F)=x31g</p>
    <p>- {B} - {A, C}</p>
    <p>X YH(X)=xbn7 - {A} - {S,T} H(Y)=bbk9</p>
    <p>- {K} - {A,S}</p>
    <p>+&quot;</p>
    <p>H(Z)=2xzb</p>
    <p>- {A} - {K} - {S}</p>
    <p>Z</p>
    <p>Q</p>
    <p>R H(R)=45zc</p>
    <p>- {A} - {K} - {B} - {S}</p>
    <p>H(Q)=x1r7</p>
    <p>- {S} - {K}</p>
    <p>Step 3: Merging Changed Caches</p>
  </div>
  <div class="page">
    <p>SnapAudit</p>
    <p>Updated Service Snapshot</p>
    <p>Reliability Goal</p>
    <p>Dependency acquisition</p>
    <p>and</p>
    <p>Fault graph generator</p>
    <p>Fault Graph</p>
    <p>DepBooster</p>
    <p>Improvement PlansOperator</p>
    <p>Challenge 1: SnapAudit  Challenge 2: DepBooster</p>
    <p>CloudCanarys Workflow CloudCanary</p>
  </div>
  <div class="page">
    <p>Core Router1 (Core1)</p>
    <p>Core Router2 (Core2)</p>
    <p>Agg Switch3 (Agg3)</p>
    <p>Server1 (S1) 172.28.228.21</p>
    <p>Server2 (S2) 172.28.228.22</p>
    <p>Server3 (S3) 172.28.228.23</p>
    <p>Agg Switch1 (Agg1)</p>
    <p>Agg Switch2 (Agg2)</p>
    <p>Internet</p>
    <p>Server4 (S4) 172.28.228.24</p>
    <p>HDFS</p>
    <p>HBase</p>
    <p>HDFS</p>
    <p>HBase</p>
    <p>Correlated Failure Risk Repairing</p>
  </div>
  <div class="page">
    <p>$Server -&gt; 172.28.228.21, 172.28.228.22 goal(failProb(ft)&lt;0.08 | ChNode | Agg3)</p>
    <p>Specification:</p>
    <p>Core Router1 (Core1)</p>
    <p>Core Router2 (Core2)</p>
    <p>Agg Switch3 (Agg3)</p>
    <p>Server1 (S1) 172.28.228.21</p>
    <p>Server2 (S2) 172.28.228.22</p>
    <p>Server3 (S3) 172.28.228.23</p>
    <p>Agg Switch1 (Agg1)</p>
    <p>Agg Switch2 (Agg2)</p>
    <p>Internet</p>
    <p>Server4 (S4) 172.28.228.24</p>
    <p>HDFS</p>
    <p>HBase</p>
    <p>HDFS</p>
    <p>HBase</p>
    <p>Correlated Failure Risk Repairing</p>
  </div>
  <div class="page">
    <p>$Server -&gt; 172.28.228.21, 172.28.228.22 goal(failProb(ft)&lt;0.08 | ChNode | Agg3)</p>
    <p>Specification:</p>
    <p>Core Router1 (Core1)</p>
    <p>Core Router2 (Core2)</p>
    <p>Agg Switch3 (Agg3)</p>
    <p>Server1 (S1) 172.28.228.21</p>
    <p>Server2 (S2) 172.28.228.22</p>
    <p>Server3 (S3) 172.28.228.23</p>
    <p>Agg Switch1 (Agg1)</p>
    <p>Agg Switch2 (Agg2)</p>
    <p>Internet</p>
    <p>Server4 (S4) 172.28.228.24</p>
    <p>HDFS</p>
    <p>HBase</p>
    <p>HDFS</p>
    <p>HBase</p>
    <p>Correlated Failure Risk Repairing</p>
  </div>
  <div class="page">
    <p>$Server -&gt; 172.28.228.21, 172.28.228.22 goal(failProb(ft)&lt;0.08 | ChNode | Agg3)</p>
    <p>Specification:</p>
    <p>Core Router1 (Core1)</p>
    <p>Core Router2 (Core2)</p>
    <p>Agg Switch3 (Agg3)</p>
    <p>Server1 (S1) 172.28.228.21</p>
    <p>Server2 (S2) 172.28.228.22</p>
    <p>Server3 (S3) 172.28.228.23</p>
    <p>Agg Switch1 (Agg1)</p>
    <p>Agg Switch2 (Agg2)</p>
    <p>Internet</p>
    <p>Server4 (S4) 172.28.228.24</p>
    <p>HDFS</p>
    <p>HBase</p>
    <p>HDFS</p>
    <p>HBase</p>
    <p>Plan 1: Move replica from S1 -&gt; S4 Plan 2: Move replica from S2 -&gt; S4</p>
    <p>DepBooster</p>
    <p>Correlated Failure Risk Repairing</p>
  </div>
  <div class="page">
    <p>$Server -&gt; 172.28.228.21, 172.28.228.22 goal(failProb(ft)&lt;0.08 | ChNode | Agg3)</p>
    <p>Specification:</p>
    <p>Core Router1 (Core1)</p>
    <p>Core Router2 (Core2)</p>
    <p>Agg Switch3 (Agg3)</p>
    <p>Server1 (S1) 172.28.228.21</p>
    <p>Server2 (S2) 172.28.228.22</p>
    <p>Server3 (S3) 172.28.228.23</p>
    <p>Agg Switch1 (Agg1)</p>
    <p>Agg Switch2 (Agg2)</p>
    <p>Internet</p>
    <p>Server4 (S4) 172.28.228.24</p>
    <p>HDFS</p>
    <p>HBase</p>
    <p>HDFS</p>
    <p>HBase</p>
    <p>Plan 1: Move replica from S1 -&gt; S4 Plan 2: Move replica from S2 -&gt; S4</p>
    <p>Synthesis</p>
    <p>Correlated Failure Risk Repairing</p>
    <p>DepBooster</p>
  </div>
  <div class="page">
    <p>$Server -&gt; 172.28.228.21, 172.28.228.22 goal(failProb(ft)&lt;0.08 | ChNode | Agg3)</p>
    <p>Specification:</p>
    <p>Core Router1 (Core1)</p>
    <p>Core Router2 (Core2)</p>
    <p>Agg Switch3 (Agg3)</p>
    <p>Server1 (S1) 172.28.228.21</p>
    <p>Server2 (S2) 172.28.228.22</p>
    <p>Server3 (S3) 172.28.228.23</p>
    <p>Agg Switch1 (Agg1)</p>
    <p>Agg Switch2 (Agg2)</p>
    <p>Internet</p>
    <p>Server4 (S4) 172.28.228.24</p>
    <p>HDFS</p>
    <p>HBase</p>
    <p>HDFS</p>
    <p>HBase</p>
    <p>Plan 1: Move replica from S1 -&gt; S4 Plan 2: Move replica from S2 -&gt; S4</p>
    <p>Synthesis</p>
    <p>Correlated Failure Risk Repairing</p>
    <p>DepBooster</p>
  </div>
  <div class="page">
    <p>SnapAudit</p>
    <p>Updated Service Snapshot</p>
    <p>Reliability Goal</p>
    <p>Dependency acquisition</p>
    <p>and</p>
    <p>Fault graph generator</p>
    <p>Fault Graph</p>
    <p>DepBooster</p>
    <p>Improvement PlansOperator</p>
    <p>Challenge 1: SnapAudit  Challenge 2: DepBooster</p>
    <p>CloudCanarys Workflow CloudCanary</p>
  </div>
  <div class="page">
    <p>Evaluation</p>
    <p>Comparing CloudCanary with the state of the art</p>
    <p>Evaluating CloudCanarys practicality via real dataset</p>
  </div>
  <div class="page">
    <p>Evaluation</p>
    <p>Accuracy Efficiency Improvement</p>
    <p>INDaaS [OSDI14]</p>
    <p>ProbINDaaS [OSDI14]</p>
    <p>reCloud [CoNEXT16]</p>
    <p>RepAudit [OOPSLA17]</p>
    <p>CloudCanary</p>
  </div>
  <div class="page">
    <p>Efficiency Comparison</p>
    <p>CloudCanary</p>
    <p>INDaaS</p>
    <p>ReCloud (10 7 )</p>
    <p>S0 S1 S2 S3 S4 S5</p>
    <p>Auditing Time (hours)</p>
    <p>Update Snapshots</p>
    <p>S6</p>
    <p>ProbINDaaS (10 7 )</p>
    <p>RepAudit</p>
    <p>~8 hours</p>
    <p>&gt; 16 hours</p>
  </div>
  <div class="page">
    <p>Accuracy V.S. Efficiency</p>
    <p>A c c u</p>
    <p>ra c y</p>
    <p>Turnaround time (minutes)</p>
    <p>INDaaS</p>
    <p>ProbINDaaS (107 rounds)reCloud (107 rounds) RepAudit</p>
    <p>CloudCanary</p>
    <p>20,608 switches; 524,288 servers; 638,592 software components  Auditing a random update affecting 20% components</p>
  </div>
  <div class="page">
    <p>A c c u</p>
    <p>ra c y</p>
    <p>Turnaround time (minutes)</p>
    <p>INDaaS</p>
    <p>ProbINDaaS (107 rounds)reCloud (107 rounds) RepAudit</p>
    <p>CloudCanary</p>
    <p>Accuracy V.S. Efficiency  20,608 switches; 524,288 servers; 638,592 software components  Auditing a random update affecting 20% components</p>
    <p>Our approach is 200x faster than state-ofthe-arts, and offers 100% accurate results.</p>
  </div>
  <div class="page">
    <p>Evaluation</p>
    <p>We evaluated CloudCanary via real update trace:</p>
    <p>Detected Num Confirmed Examples</p>
    <p>Microservices 50+ 96% Authentication and access control systems introduce most risk groups</p>
    <p>Power Sources 10+ 100% Primary and backup power sources are</p>
    <p>carelessly assigned to multiple racks hosting a critical service</p>
    <p>Network 30+ 100% Aggregation and ToR switches are easily updated to be risk groups</p>
  </div>
  <div class="page">
    <p>Conclusion</p>
    <p>CloudCanary is the first system for real-time auditing - SnapAudit primitive: Quickly auditing update snapshot - DepBooster: Quickly generating improvement plans</p>
    <p>We evaluated CloudCanary with real trace and largescale emulations</p>
  </div>
  <div class="page">
    <p>Thanks, questions?</p>
    <p>CloudCanary is the first system for real-time auditing - SnapAudit primitive: Quickly auditing update snapshot - DepBooster: Quickly generating improvement plans</p>
    <p>We evaluated CloudCanary with real trace and largescale emulations</p>
  </div>
</Presentation>

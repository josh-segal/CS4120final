<?xml version="1.0" ?>
<Presentation>
  <div class="page">
    <p>Jennifer Ortiz (UW), Brendan Lee (now at Spacedust), Magdalena Balazinska (UW), Johannes Gehrke (Microsoft) and Joseph L. Hellerstein (eScience Institute at UW)</p>
    <p>Paul G. Allen School of Computer Science &amp; Engineering University of Washington</p>
    <p>SLAOrchestrator: Reducing the Cost of Performance SLAs for Cloud Data Analytics</p>
  </div>
  <div class="page">
    <p>Data</p>
  </div>
  <div class="page">
    <p>Cloud Services Today</p>
    <p>Data Analytics Service</p>
    <p>Data</p>
  </div>
  <div class="page">
    <p>Cloud Services Today</p>
    <p>How much will it cost me?</p>
    <p>Data Analytics Service</p>
    <p>Data</p>
    <p>Nodes</p>
    <p>Storage</p>
    <p>How fast will my queries run?</p>
    <p>Network</p>
  </div>
  <div class="page">
    <p>Performance-based Service Level Agreement</p>
    <p>Data Analytics Service</p>
    <p>How much will it cost me?</p>
    <p>How fast will my queries run? Hard to do cheaply!</p>
  </div>
  <div class="page">
    <p>Performance SLAs in a Data Analytics System</p>
  </div>
  <div class="page">
    <p>Data Analytics Service</p>
    <p>SLAOrchestrator</p>
  </div>
  <div class="page">
    <p>Data Analytics Service</p>
    <p>SLAOrchestrator</p>
  </div>
  <div class="page">
    <p>SLAOrchestrator</p>
    <p>Generates SLAs Enforces SLAs</p>
    <p>Data Analytics Service</p>
    <p>PSLAManager PerfEnforce</p>
    <p>Storage ProvisioningScheduling</p>
    <p>System Model</p>
  </div>
  <div class="page">
    <p>SLAOrchestrator</p>
    <p>Generates SLAs Enforces SLAs</p>
    <p>Data Analytics Service</p>
    <p>PSLAManager PerfEnforce</p>
    <p>Storage System Model</p>
    <p>ProvisioningScheduling</p>
  </div>
  <div class="page">
    <p>Personalized Service Level Agreement (PSLAs)</p>
    <p>Fixed, hourly price</p>
    <p>Service tiers</p>
    <p>Expected performance</p>
    <p>How to generate these SLAs?</p>
  </div>
  <div class="page">
    <p>PSLAManager: PSLA Generation</p>
    <p>Synthetic Dataset</p>
    <p>Run Queries</p>
    <p>= SystemModel</p>
    <p>Offline Learning</p>
  </div>
  <div class="page">
    <p>PSLAManager: SLA Generation</p>
    <p>Synthetic Dataset</p>
    <p>Offline Learning Online Prediction</p>
    <p>Data Run Queries</p>
    <p>= PSLA Generates SLAs PSLAManager</p>
    <p>System Model Generate</p>
    <p>Query Workload</p>
    <p>Query Runtime</p>
    <p>Predictions</p>
  </div>
  <div class="page">
    <p>PSLAManager Challenges</p>
    <p>How to scale the system to enforce guarantee?</p>
  </div>
  <div class="page">
    <p>SLAOrchestrator</p>
    <p>Generates SLAs Enforces SLAs</p>
    <p>Data Analytics Service</p>
    <p>PSLAManager PerfEnforce</p>
    <p>Storage System Model</p>
    <p>ProvisioningScheduling</p>
  </div>
  <div class="page">
    <p>PerfEnforce Challenges</p>
    <p>Input : Stream of (tenant, query, SLA)</p>
    <p>Enforces SLAs PerfEnforce</p>
    <p>Storage</p>
    <p>Data Analytics Service</p>
    <p>ProvisioningScheduling</p>
  </div>
  <div class="page">
    <p>Storage</p>
    <p>Input : Stream of (tenant, query, SLA)</p>
    <p>Enforces SLAs PerfEnforce</p>
    <p>Storage</p>
    <p>Data Analytics Service</p>
    <p>ProvisioningScheduling</p>
  </div>
  <div class="page">
    <p>Data Analytics Service</p>
    <p>Storage</p>
    <p>Input : Stream of (tenant, query, SLA)</p>
    <p>Enforces SLAs PerfEnforce</p>
    <p>Storage ProvisioningScheduling</p>
    <p>Remote Storage</p>
  </div>
  <div class="page">
    <p>Performance for Networked Storage</p>
    <p>Shorter Queries</p>
    <p>Longer Queries</p>
  </div>
  <div class="page">
    <p>PerfEnforce Challenges</p>
    <p>Input : Stream of (tenant, query, SLA)</p>
    <p>Enforces SLAs PerfEnforce</p>
    <p>Storage</p>
    <p>Data Analytics Service</p>
    <p>ProvisioningScheduling</p>
  </div>
  <div class="page">
    <p>PerfEnforce Optimization Goal Goal: Minimize cost cluster + cost SLA violations</p>
    <p>Scheduling: How many workers to a query?</p>
    <p>Query Performance Ratio = = 1.0</p>
    <p>Bad: Wastes resourcesBad: Violates SLAs Good</p>
  </div>
  <div class="page">
    <p>PerfEnforce Optimization Goal Goal: Minimize cost cluster + cost SLA violations</p>
    <p>Scheduling: How many workers to a query?</p>
    <p>Query Performance Ratio = = 1.0</p>
    <p>Provisioning: When to turn off VMs?</p>
  </div>
  <div class="page">
    <p>Query Scheduling Algorithms</p>
    <p>Proportional-Integral Control</p>
    <p>Multi-armed Bandit</p>
    <p>Contextual Multi-armed Bandit</p>
    <p>Online Learning</p>
    <p>Reactive Approaches</p>
    <p>Proactive Approaches</p>
  </div>
  <div class="page">
    <p>Proportional-Integral Control</p>
    <p>Multi-armed Bandit</p>
    <p>Contextual Multi-armed Bandit</p>
    <p>Online Learning</p>
    <p>Reactive Approaches</p>
    <p>Proactive Approaches</p>
    <p>Number of workers</p>
    <p>Initial number of workers</p>
    <p>Most recent error</p>
    <p>Errors accumulated over time</p>
    <p>Query Scheduling Algorithms</p>
  </div>
  <div class="page">
    <p>Proportional-Integral Control</p>
    <p>Multi-armed Bandit</p>
    <p>Contextual Multi-armed Bandit</p>
    <p>Online Learning</p>
    <p>Reactive Approaches</p>
    <p>Proactive Approaches</p>
    <p>Arm #1 Arm #2 Arm #3</p>
    <p>Configuration #1 Configuration #2 Configuration #3</p>
    <p>Query Scheduling Algorithms</p>
  </div>
  <div class="page">
    <p>Proportional-Integral Control</p>
    <p>Multi-armed Bandit</p>
    <p>Contextual Multi-armed Bandit</p>
    <p>Online Learning</p>
    <p>Reactive Approaches</p>
    <p>Proactive Approaches</p>
    <p>Model (features)  ratio</p>
    <p>Model (features)  ratio</p>
    <p>Model (features)  ratio</p>
    <p>Configuration #1 Configuration #2 Configuration #3</p>
    <p>Query Scheduling Algorithms</p>
  </div>
  <div class="page">
    <p>Proportional-Integral Control</p>
    <p>Multi-armed Bandit</p>
    <p>Contextual Multi-armed Bandit</p>
    <p>Online Learning</p>
    <p>Reactive Approaches</p>
    <p>Proactive Approaches</p>
    <p>Query Scheduling Algorithms</p>
    <p>Features (Query)</p>
    <p>Single Trained Model</p>
    <p>Feed prediction errors back to model</p>
    <p>Predict Runtimes</p>
  </div>
  <div class="page">
    <p>Query Scheduling Results</p>
    <p>Amazon EC2 with 4, 8, 12, 16, 20, 24, 28, or 32 VMs  100 GB TPC-H Star Schema Benchmark Each point: One set of configuration parameters and 10 query sessions SLA generated with PSLAManager</p>
    <p>Result: Online learning yields tightest distributions</p>
    <p>Good Distribution</p>
  </div>
  <div class="page">
    <p>PerfEnforce Challenges</p>
    <p>Input : Stream of (tenant, query, SLA)</p>
    <p>Enforces SLAs PerfEnforce</p>
    <p>Storage</p>
    <p>Data Analytics Service</p>
    <p>ProvisioningScheduling</p>
  </div>
  <div class="page">
    <p>PerfEnforce Resource Provisioning  Adding and removing VMs takes time  Two algorithms to monitor the system</p>
    <p>Resource Utilization  Add/remove VMs to maintain utilization close to set threshold T</p>
    <p>Simulation:  Learn past tenant behavior and resize cluster assuming</p>
    <p>same behavior in next time window</p>
  </div>
  <div class="page">
    <p>Resource Provisioning Results</p>
    <p>Simulation-based provisioning yields lower costs in all settings</p>
  </div>
  <div class="page">
    <p>SLAOrchestrator</p>
    <p>Generates SLAs Enforces SLAs</p>
    <p>Data Analytics Service</p>
    <p>PSLAManager PerfEnforce</p>
    <p>Storage</p>
    <p>System Model</p>
    <p>ProvisioningScheduling</p>
    <p>Improve Generated SLAs</p>
  </div>
  <div class="page">
    <p>SLAOrchestrator Optimizations</p>
  </div>
  <div class="page">
    <p>Conclusion  SLAOrchestrator reduces the cost of Performance-based SLAs</p>
    <p>PSLAManager generates PSLAs  PerfEnforce enforces runtimes through scaling</p>
    <p>Source Code Available</p>
    <p>PSLAManager (SLA Generator)  https://github.com/uwdb/PSLAManager</p>
    <p>PerfEnforce (Query Scheduler) Prototype available on  https://github.com/uwescience/myria</p>
  </div>
</Presentation>

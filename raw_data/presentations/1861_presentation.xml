<?xml version="1.0" ?>
<Presentation>
  <div class="page">
    <p>Design Patterns for Container-Based Distributed Systems</p>
    <p>Brendan Burns David Oppenheimer Google Cloud Platform</p>
    <p>Usenix HotCloud 2016</p>
  </div>
  <div class="page">
    <p>A Brief History</p>
  </div>
  <div class="page">
    <p>Why did people develop patterns?</p>
    <p>Good fences do good neighbors make</p>
    <p>- Robert Frost</p>
    <p>Object Interface</p>
  </div>
  <div class="page">
    <p>Patterns provide:</p>
    <p>A common language... improves collaboration</p>
    <p>A common workspace... enables best-of-breed solutions</p>
    <p>A common implementation.. because we develop libraries and frameworks</p>
    <p>A common foundation... on which to build higher level systems</p>
    <p>A simpler experience... makes good practices easier to adopt</p>
  </div>
  <div class="page">
    <p>A concrete example...</p>
    <p>MapReduce: Simplified Data Processing on Large Clusters Jeffrey Dean, Sanjay Ghemawat</p>
    <p>Mapper Reducer</p>
  </div>
  <div class="page">
    <p>But its still only one pattern, and one(ish) language</p>
  </div>
  <div class="page">
    <p>But its still only one pattern, and one(ish) language</p>
    <p>Container Orcheastration (Kubernetes, etc)</p>
    <p>Containers</p>
    <p>Distributed System Patterns</p>
  </div>
  <div class="page">
    <p>Container Patterns for Distributed Systems</p>
    <p>Single-node multi-container patterns</p>
    <p>Sidecar  Ambasador  Adapter</p>
    <p>Distributed container patterns</p>
    <p>Leader election  Work queue  Scatter/gather  ...</p>
  </div>
  <div class="page">
    <p>Single-node multi-container patterns</p>
    <p>Pod</p>
    <p>Multiple containers  Shared namespaces  Shared IP address  Atomic unit of scheduling</p>
    <p>A Pod on a single host machine</p>
  </div>
  <div class="page">
    <p>Sidecar</p>
    <p>Sidecars extend and enhance</p>
    <p>Web Server Logs Log Streaming Sidecar</p>
    <p>Log Aggregation</p>
    <p>Service</p>
    <p>A Pod on a single host machine</p>
  </div>
  <div class="page">
    <p>Ambassador</p>
    <p>Ambassadors proxy and represent</p>
    <p>Frontend Memcache Sharding Proxy</p>
    <p>Memcache Shard-1</p>
    <p>Memcache Shard-N</p>
    <p>...</p>
    <p>A Pod on a single host machine</p>
  </div>
  <div class="page">
    <p>Adapters</p>
    <p>Adapters normalize and present</p>
    <p>Third Party Application</p>
    <p>Monitoring Adapter</p>
    <p>http://my-server/varz</p>
    <p>Centralized Monitoring</p>
    <p>Service</p>
    <p>A Pod on a single host machine</p>
  </div>
  <div class="page">
    <p>Distributed System Patterns</p>
  </div>
  <div class="page">
    <p>Leader Election</p>
    <p>Pod-1</p>
    <p>Reusable Master Election Container</p>
    <p>Developer Code</p>
    <p>JSON API</p>
    <p>Consensus Algorithm or</p>
    <p>Store</p>
    <p>Pod-2 Pod-N</p>
  </div>
  <div class="page">
    <p>Work Queue</p>
    <p>Work Queue Coordinator</p>
    <p>User Supplied Worker</p>
    <p>Work Queue Executor</p>
    <p>JSON API</p>
    <p>User Supplied Worker</p>
    <p>Work Queue Executor</p>
    <p>JSON API</p>
    <p>...</p>
  </div>
  <div class="page">
    <p>Scatter/Gather (aka Fan out/Fan in)</p>
    <p>Root Distributor</p>
    <p>User Supplied Aggregator</p>
    <p>User Supplied Leaf Service</p>
    <p>User Supplied Leaf Service</p>
    <p>User Supplied Leaf Service</p>
  </div>
  <div class="page">
    <p>Scatter/Gather (aka Fan out/Fan in)</p>
    <p>Root Distributor</p>
    <p>User Supplied Aggregator</p>
    <p>User Supplied Leaf Service</p>
    <p>User Supplied Leaf Service</p>
    <p>User Supplied Leaf Service</p>
  </div>
  <div class="page">
    <p>Scatter/Gather (aka Fan out/Fan in)</p>
    <p>Root Distributor</p>
    <p>User Supplied Aggregator</p>
    <p>User Supplied Leaf Service</p>
    <p>User Supplied Leaf Service</p>
    <p>User Supplied Leaf Service</p>
  </div>
  <div class="page">
    <p>Scatter/Gather (aka Fan out/Fan in)</p>
    <p>Root Distributor</p>
    <p>User Supplied Aggregator</p>
    <p>User Supplied Leaf Service</p>
    <p>User Supplied Leaf Service</p>
    <p>User Supplied Leaf Service</p>
  </div>
  <div class="page">
    <p>Scatter/Gather (aka Fan out/Fan in)</p>
    <p>Root Distributor</p>
    <p>User Supplied Aggregator</p>
    <p>User Supplied Leaf Service</p>
    <p>User Supplied Leaf Service</p>
    <p>User Supplied Leaf Service</p>
  </div>
  <div class="page">
    <p>Thanks!</p>
  </div>
  <div class="page">
    <p>Sharded Service</p>
    <p>Root Distributor</p>
    <p>User Supplied Shard Func.</p>
    <p>User Supplied Service</p>
    <p>User Supplied Service</p>
    <p>User Supplied Service</p>
  </div>
  <div class="page">
    <p>Sharded Service</p>
    <p>Root Distributor</p>
    <p>User Supplied Shard Func.</p>
    <p>User Supplied Service</p>
    <p>User Supplied Service</p>
    <p>User Supplied Service</p>
  </div>
  <div class="page">
    <p>Sharded Service</p>
    <p>Root Distributor</p>
    <p>User Supplied Shard Func.</p>
    <p>User Supplied Service</p>
    <p>User Supplied Service</p>
    <p>User Supplied Service</p>
  </div>
  <div class="page">
    <p>Sharded Service</p>
    <p>Root Distributor</p>
    <p>User Supplied Shard Func.</p>
    <p>User Supplied Service</p>
    <p>User Supplied Service</p>
    <p>User Supplied Service</p>
  </div>
</Presentation>

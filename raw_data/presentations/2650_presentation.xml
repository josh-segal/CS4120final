<?xml version="1.0" ?>
<Presentation>
  <div class="page">
    <p>Sibyl A Practical Internet Route Oracle Sibyl A Practical Internet Route Oracle talo Cunha1, Pietro Marchetta2, Matt Calder3, Yi-Ching Chiu3 Brandon Schlinker3, Bruno Machado1, Antonio Pescap2 Vasileios Giotsas4, Harsha Madhyastha5, Ethan Katz-Bassett3</p>
  </div>
  <div class="page">
    <p>The Art of Network Troubleshooting</p>
  </div>
  <div class="page">
    <p>Are routes through GTT in Seattle experiencing problems?</p>
    <p>Are routes through Level3 in LA experiencing problems?</p>
    <p>The Art of Network Troubleshooting</p>
    <p>?</p>
    <p>?</p>
  </div>
  <div class="page">
    <p>Are routes through GTT in Seattle experiencing problems?</p>
    <p>Are routes through Level3 in LA experiencing problems?</p>
    <p>The Art of Network Troubleshooting</p>
  </div>
  <div class="page">
    <p>Operators Have Complex Questions</p>
    <p>Someone suggests problem is on link between NTT and GTT in Seattle. Which routes use that link and could be impacted?</p>
  </div>
  <div class="page">
    <p>Operators Have Complex Questions</p>
    <p>Someone suggests problem is on link between NTT and GTT in Seattle. Which routes use that link and could be impacted?</p>
    <p>If route to destination D is impacted, which of my providers have a route that avoids that link?</p>
    <p>Providers in my region with routes that avoid that link?</p>
  </div>
  <div class="page">
    <p>Are routes through GTT experiencing problems?</p>
    <p>Are routes through Level3 experiencing problems?</p>
    <p>?</p>
    <p>?</p>
    <p>The Art of Network Troubleshooting</p>
  </div>
  <div class="page">
    <p>Problems with the Current Approach</p>
    <p>b. Destination to measure may not be obvious</p>
  </div>
  <div class="page">
    <p>The Art of Internet Measurement</p>
  </div>
  <div class="page">
    <p>Researchers Have Complex Questions</p>
    <p>What routes from the US to the US detour through Canada?</p>
  </div>
  <div class="page">
    <p>Researchers Have Complex Questions</p>
    <p>What routes from the US to the US detour through Canada?</p>
    <p>Eastward routes detouring through Canada?</p>
    <p>Routes from Southern US through Canada? Mexico?</p>
    <p>Routes from Africa to Africa through Europe? 11</p>
  </div>
  <div class="page">
    <p>The Art of Internet Measurement</p>
  </div>
  <div class="page">
    <p>The Art of Internet Measurement</p>
    <p>Peering relationship?</p>
  </div>
  <div class="page">
    <p>The Art of Internet Measurement</p>
    <p>PlanetLab lacks diversity. Other platforms cannot make exhaustive measurements.</p>
  </div>
  <div class="page">
    <p>The number one go-to tool is traceroute. NANOG Troubleshooting Tutorial, 2009.</p>
    <p>NANOG Traceroute Tutorial, 2014.</p>
  </div>
  <div class="page">
    <p>The number one go-to tool is traceroute. NANOG Troubleshooting Tutorial, 2009.</p>
    <p>NANOG Traceroute Tutorial, 2014.</p>
    <p>But traceroute only answers one simple question: What is the path from vantage point s to destination d?</p>
  </div>
  <div class="page">
    <p>The number one go-to tool is traceroute. NANOG Troubleshooting Tutorial, 2009.</p>
    <p>NANOG Traceroute Tutorial, 2014.</p>
    <p>But traceroute only answers one simple question: What is the path from vantage point s to destination d?</p>
    <p>We need a new tool to answer our questions</p>
  </div>
  <div class="page">
    <p>Sibyl Supports high-level queries over Internet routes</p>
  </div>
  <div class="page">
    <p>Users submit high-level queries</p>
    <p>Queries</p>
    <p>Traceroutes that match queries</p>
    <p>Goal: Serve High-Level Routing Queries</p>
    <p>Sibyl</p>
  </div>
  <div class="page">
    <p>Query Internet Routes Using Regular Expressions</p>
    <p>Symbols representing boolean expressions that IP addresses must satisfy Level3&amp;LA GTT&amp;Seattle</p>
  </div>
  <div class="page">
    <p>Query Internet Routes Using Regular Expressions</p>
    <p>Symbols representing boolean expressions that IP addresses must satisfy Level3&amp;LA GTT&amp;Seattle</p>
    <p>Routes traversing Level3 in LA and GTT in Seattle? ^ * Level3&amp;LA * GTT&amp;Seattle * $</p>
  </div>
  <div class="page">
    <p>Regular Expressions Capture Operational Questions</p>
    <p>Someone suggests problem is on link between NTT and GTT in Seattle. Which routes use that link and could be impacted? ^ * NTT&amp;Seattle GTT&amp;Seattle * $</p>
  </div>
  <div class="page">
    <p>Regular Expressions Capture Operational Questions</p>
    <p>Someone suggests problem is on link between NTT and GTT in Seattle. Which routes use that link and could be impacted? ^ * NTT&amp;Seattle GTT&amp;Seattle * $</p>
    <p>If route to destination D is impacted, which of my providers have a route that avoids that link? ^ USC (?!NTT GTT&amp;Seattle)* D $</p>
    <p>Providers in my region with routes that avoid that link? ^ * LA (?!NTT GTT&amp;Seattle)* D $</p>
  </div>
  <div class="page">
    <p>Regular Expressions Capture Research Questions</p>
    <p>What routes from the US to the US detour through Canada? ^ US* Canada* US* $</p>
    <p>Eastward routes detouring through Canada? ^ EastCoast * Canada * WestCoast $</p>
    <p>Routes from Southern US through Canada? Mexico? ^ SouthernUS * (Canada|Mexico) * US $</p>
    <p>Routes from Africa to Africa through Europe? ^ Africa * Europe * Africa $ 24</p>
  </div>
  <div class="page">
    <p>Users submit high-level queries</p>
    <p>Queries</p>
    <p>How do we achieve route coverage to satisfy complex and diverse queries?</p>
    <p>Sibyl</p>
    <p>Traceroutes that match queries</p>
    <p>Measure Paths</p>
  </div>
  <div class="page">
    <p>Vantage points in 100% of very large networks and 50% of small and regional networks</p>
    <p>Combining Platforms Provides Great Coverage</p>
  </div>
  <div class="page">
    <p>Vantage points in 100% of very large networks and 50% of small and regional networks</p>
    <p>Combining Platforms Provides Great Coverage</p>
    <p>Measurement Platform</p>
    <p>Vantage Points</p>
    <p>Vantage Point ASes</p>
    <p>PlanetLab ~400 ~250</p>
    <p>Traceroute servers ~500 ~500</p>
    <p>RIPE Atlas ~9000 ~2700</p>
  </div>
  <div class="page">
    <p>Vantage Points Are Resource Constrained</p>
    <p>Measurement Platform</p>
    <p>Vantage Points</p>
    <p>Vantage Point ASes</p>
    <p>Traces per Day</p>
    <p>PlanetLab ~400 ~250 16,000K</p>
    <p>Traceroute servers ~500 ~500 145K</p>
    <p>RIPE Atlas ~9000 ~2700 35K</p>
    <p>Want to use network coverage to answer queries, but cannot issue all measurements</p>
  </div>
  <div class="page">
    <p>Vantage Points Are Resource Constrained</p>
    <p>Total coverage</p>
    <p>Number of ASes Seen toward Each Destination</p>
  </div>
  <div class="page">
    <p>Resource Constraints Limit Visibility</p>
    <p>Total coverage</p>
    <p>Rate limits</p>
    <p>Number of ASes Seen toward Each Destination</p>
  </div>
  <div class="page">
    <p>Resource Constraints Limit Visibility</p>
    <p>Total coverage</p>
    <p>Rate limits</p>
    <p>Goal: satisfy queries as if we have total coverage, despite rate limits</p>
    <p>Number of ASes Seen toward Each Destination</p>
  </div>
  <div class="page">
    <p>Resource Constraints Limit Visibility</p>
    <p>Total coverage</p>
    <p>Rate limits</p>
    <p>Goal: satisfy queries as if we have total coverage, despite rate limits</p>
    <p>Approach: carefully choose measurements</p>
    <p>Number of ASes Seen toward Each Destination</p>
  </div>
  <div class="page">
    <p>Users submit high-level queries</p>
    <p>Queries</p>
    <p>Sibyl</p>
    <p>Too many possible measurements. How do we prune the set of measurements to consider?</p>
    <p>Measure Paths</p>
    <p>PlanetLab</p>
    <p>RIPE Atlas</p>
    <p>Traceroute servers</p>
    <p>Combine multiple platforms</p>
    <p>Traceroutes that match queries</p>
    <p>Generate candidates</p>
  </div>
  <div class="page">
    <p>Destinations</p>
    <p>A</p>
    <p>B</p>
    <p>^.* A .* B .*$</p>
    <p>Vantage Point</p>
    <p>Vantage Point</p>
  </div>
  <div class="page">
    <p>Destinations</p>
    <p>A</p>
    <p>B</p>
    <p>^.* A .* B .*$</p>
    <p>Vantage Point</p>
    <p>Vantage Point</p>
  </div>
  <div class="page">
    <p>A</p>
    <p>B</p>
    <p>^.* A .* B .*$</p>
    <p>Destinations</p>
    <p>Vantage Point</p>
    <p>Vantage Point</p>
  </div>
  <div class="page">
    <p>B</p>
    <p>V1</p>
    <p>D1</p>
    <p>V2 D2</p>
    <p>^.* A .* B .*$</p>
    <p>Destinations</p>
    <p>X</p>
    <p>A</p>
    <p>Vantage Point</p>
    <p>Vantage Point</p>
  </div>
  <div class="page">
    <p>B</p>
    <p>V1</p>
    <p>D1</p>
    <p>V2 D2</p>
    <p>A</p>
    <p>X</p>
    <p>^.* A .* B .*$</p>
    <p>Destinations</p>
    <p>Vantage Point</p>
    <p>Vantage Point</p>
  </div>
  <div class="page">
    <p>B</p>
    <p>V1</p>
    <p>D1</p>
    <p>V2 D2</p>
    <p>A</p>
    <p>X</p>
    <p>^.* A .* B .*$</p>
    <p>Destinations</p>
    <p>Vantage Point</p>
    <p>Vantage Point</p>
    <p>Many possible splices!</p>
  </div>
  <div class="page">
    <p>Users submit high-level queries</p>
    <p>Queries</p>
    <p>Sibyl</p>
    <p>Match likelihood</p>
    <p>Measure Paths</p>
    <p>How to estimate which candidate measurements will match queries?</p>
    <p>PlanetLab</p>
    <p>RIPE Atlas</p>
    <p>Traceroute servers</p>
    <p>Combine multiple platforms</p>
    <p>Traceroutes that match queries</p>
    <p>Generate candidates</p>
  </div>
  <div class="page">
    <p>Destination</p>
    <p>A</p>
    <p>B</p>
    <p>^.* A .* B .*$</p>
  </div>
  <div class="page">
    <p>Destination</p>
    <p>A</p>
    <p>B</p>
    <p>^.* A .* B .*$</p>
  </div>
  <div class="page">
    <p>Destination</p>
    <p>B</p>
    <p>^.* A .* B .*$</p>
  </div>
  <div class="page">
    <p>Computing Likelihood that Prediction is Correct</p>
    <p>Input  set of predicted paths between source and destination</p>
    <p>Output  likelihood of each prediction being correct</p>
    <p>Approach  Compute route features and use machine learning</p>
  </div>
  <div class="page">
    <p>Computing Likelihood that Prediction is Correct</p>
    <p>Input  set of predicted paths between source and destination</p>
    <p>Output  likelihood of each prediction being correct</p>
    <p>Approach  Compute route features and use machine learning</p>
    <p>Most important features include  AS peering relationships  Route length</p>
  </div>
  <div class="page">
    <p>Destination</p>
    <p>A</p>
    <p>B</p>
    <p>^.* A .* B .*$</p>
  </div>
  <div class="page">
    <p>Destination Vantage Point</p>
    <p>A</p>
    <p>B</p>
    <p>Path matches query Path doesnt match query</p>
    <p>^.* A .* B .*$</p>
  </div>
  <div class="page">
    <p>Match Likelihood Estimation Is Accurate</p>
  </div>
  <div class="page">
    <p>Match Likelihood Estimation Is Accurate</p>
    <p>Chosen measurements match queries</p>
  </div>
  <div class="page">
    <p>Users submit high-level queries</p>
    <p>Queries</p>
    <p>Sibyl</p>
    <p>Update topology</p>
    <p>Combine multiple platforms</p>
    <p>Generate candidates</p>
    <p>Optimize budget</p>
    <p>Measure Paths</p>
    <p>PlanetLab</p>
    <p>RIPE Atlas</p>
    <p>Traceroute servers</p>
    <p>Traceroutes that match queries</p>
    <p>Optimize budget use to maximize expected utility over all queries</p>
    <p>Match likelihood</p>
  </div>
  <div class="page">
    <p>Users submit high-level queries</p>
    <p>Queries</p>
    <p>Sibyl</p>
    <p>Update topology</p>
    <p>Combine multiple platforms</p>
    <p>Generate candidates</p>
    <p>Optimize budget</p>
    <p>Measure Paths</p>
    <p>PlanetLab</p>
    <p>RIPE Atlas</p>
    <p>Traceroute servers</p>
    <p>Traceroutes that match queries</p>
    <p>Optimize budget use to maximize expected utility over all queries</p>
    <p>Opportunistically update knowledge base</p>
    <p>Match likelihood</p>
  </div>
  <div class="page">
    <p>Evaluation</p>
    <p>Evaluated Sibyl over multiple rounds. Each round:</p>
    <p>System has fixed, limited probing budget to allocate</p>
    <p>Generate random (but satisfiable) queries</p>
    <p>Evaluate the fraction of queries Sibyl can satisfy</p>
  </div>
  <div class="page">
    <p>How Accurate Is Sibyl?</p>
    <p>PlanetLab only matches 52% of queries</p>
  </div>
  <div class="page">
    <p>How Accurate Is Sibyl?</p>
    <p>Adding random measurements helps little (56%) PlanetLab only matches 52% of queries</p>
  </div>
  <div class="page">
    <p>How Accurate Is Sibyl?</p>
    <p>Adding random measurements helps little (56%)</p>
    <p>Need intelligence to effectively match (75%)</p>
    <p>PlanetLab only matches 52% of queries</p>
  </div>
  <div class="page">
    <p>Conclusions</p>
    <p>Supports high-level queries over Internet routes</p>
    <p>Combines platforms to improve coverage and budget</p>
    <p>Smartly chooses which measurements to issue  Overcome probing budget constraints</p>
  </div>
  <div class="page">
    <p>Improve path prediction and likelihood estimation</p>
    <p>Long-term budget allocation  Balance satisfying current queries vs benefit to serve future queries  Adapt probing rate as a function of query load</p>
    <p>Unify queries over historical and live data  Give me paths that looked like X but now look like Y</p>
    <p>Future Work</p>
  </div>
  <div class="page">
    <p>Query Language</p>
  </div>
  <div class="page">
    <p>We Have Complex Monitoring Systems</p>
    <p>iSpy: diverse routes to a given prefix?</p>
    <p>Reverse traceroute: routes through Level3 to monitoring node?</p>
    <p>RocketFuel: routes through Verizon between Chicago and LA?</p>
  </div>
  <div class="page">
    <p>Regular Expressions Support Existing Systems</p>
    <p>iSpy: diverse routes to a given prefix? ^ {*} 184.164.224.0/19 $ by AS</p>
    <p>Reverse traceroute: routes through Level3 to monitoring node? ^ * Level3 .* USC $</p>
    <p>RocketFuel: route through Verizon between Chicago and LA? ^ * Verizon&amp;Chicago * Verizon&amp;LA * $</p>
  </div>
  <div class="page">
    <p>Paths that go through Sprints Chicago PoP on the way to Brazil: ^.*S.*U$ where S := Sprint&amp;Chicago</p>
    <p>U := USC</p>
    <p>From NANOG: Problem between Level3 in LA and GTT in Seattle: ^.*L.*G.*$ where L := Level3&amp;LA</p>
    <p>G := GTT&amp;Seattle</p>
    <p>Internal Representation of Regular Expressions</p>
  </div>
  <div class="page">
    <p>Utility Optimization</p>
  </div>
  <div class="page">
    <p>The union of the set of traceroutes chosen from each platform</p>
    <p>Maximize Global Utility</p>
  </div>
  <div class="page">
    <p>The union of the set of traceroutes chosen from each platform</p>
    <p>Choose the set of traceroutes that maximizes utility over all queries</p>
    <p>Maximize Global Utility</p>
  </div>
  <div class="page">
    <p>The union of the set of traceroutes chosen from each platform</p>
    <p>Choose the set of traceroutes that maximizes utility over all queries</p>
    <p>Maximize Global Utility</p>
  </div>
  <div class="page">
    <p>The union of the set of traceroutes chosen from each platform</p>
    <p>Choose the set of traceroutes that maximizes utility over all queries</p>
    <p>Subject to budget constraints of each platform</p>
    <p>Maximize Global Utility</p>
  </div>
  <div class="page">
    <p>Utility functions</p>
    <p>Existence queries  find one path that matches a query</p>
  </div>
  <div class="page">
    <p>Utility functions</p>
    <p>Existence queries  find one path that matches a query</p>
    <p>Diversity queries  find all different paths that match a part of the query</p>
  </div>
  <div class="page">
    <p>Utility functions</p>
    <p>Existence queries  find one path that matches a query</p>
    <p>Diversity queries  find all different paths that match a part of the query</p>
  </div>
  <div class="page">
    <p>RuleFit and Likelihood Estimation</p>
  </div>
  <div class="page">
    <p>Most Important Features</p>
  </div>
  <div class="page">
    <p>RuleFit Jaccard Index Predictions Correlate</p>
  </div>
  <div class="page">
    <p>SFSA Splicing</p>
  </div>
  <div class="page">
    <p>S3S1 S2</p>
    <p>Query FSA Splicing to Generate Candidates</p>
    <p>^.* A .* B .*$</p>
    <p>A B * * *</p>
    <p>Initial</p>
  </div>
  <div class="page">
    <p>Hop Transition Hop Transition</p>
    <p>V1 V2</p>
    <p>A X</p>
    <p>X B</p>
    <p>D1 D2</p>
    <p>S3S1 S2</p>
    <p>Query FSA Splicing to Generate Candidates</p>
    <p>^.* A .* B .*$</p>
    <p>A B * * *</p>
    <p>S1 *</p>
    <p>S2 *</p>
    <p>S2 *</p>
    <p>S1 S2 A</p>
    <p>Initial</p>
  </div>
  <div class="page">
    <p>Hop Transition Hop Transition</p>
    <p>V1 V2</p>
    <p>A X</p>
    <p>X B</p>
    <p>D1 D2</p>
    <p>S2</p>
    <p>Query FSA Splicing to Generate Candidates</p>
    <p>^.* A .* B .*$</p>
    <p>A B * * *</p>
    <p>S1 *</p>
    <p>S2 *</p>
    <p>S2 *</p>
    <p>S1 S2 A</p>
    <p>S3 S2 B</p>
    <p>S3 *</p>
    <p>S2 *</p>
    <p>S2 *</p>
    <p>S3S1</p>
    <p>Initial</p>
  </div>
  <div class="page">
    <p>Hop Transition Hop Transition</p>
    <p>V1 V2</p>
    <p>A X</p>
    <p>X B</p>
    <p>D1 D2</p>
    <p>Query FSA Splicing to Generate Candidates</p>
    <p>^.* A .* B .*$</p>
    <p>V1 A X B D2</p>
    <p>S1 *</p>
    <p>S2 *</p>
    <p>S2 *</p>
    <p>S1 S2 A</p>
    <p>S3 S2 B</p>
    <p>S3 *</p>
    <p>S2 *</p>
    <p>S2 *</p>
  </div>
  <div class="page">
    <p>Evaluation</p>
  </div>
  <div class="page">
    <p>Queries Types Used in Evaluation</p>
    <p>Traverse AS toward destination  ^ .* A .* B $  ^ [^A]+ A+ .* B $</p>
    <p>Traverse link toward destination  ^ .* A B .* D $</p>
    <p>Traverse three different locations in sequence  ^ .* A .* B .* C .* $</p>
  </div>
  <div class="page">
    <p>How Much Better Can We Do?</p>
    <p>Sibyl matches 75% of queries</p>
    <p>Unlimited budget would Sibyl to match 88% of queries</p>
    <p>Current approach matches 52% of queries</p>
  </div>
  <div class="page">
    <p>How Much Does Each Module Contribute</p>
    <p>Sibyl satisfies 75% of queries</p>
    <p>Could satisfy 84% with unlimited budget</p>
    <p>Each module contributes 5-8% accuracy</p>
  </div>
  <div class="page">
    <p>Sibyl Is Effective at Different Granularities</p>
  </div>
  <div class="page">
    <p>Combining Platforms Helps Satisfy More Queries</p>
  </div>
  <div class="page">
    <p>Sibyl Uncovers More Path Diversity</p>
  </div>
  <div class="page">
    <p>Staleness</p>
  </div>
  <div class="page">
    <p>Patching and Pruning Stale Measurements</p>
    <p>New measurements may detect path changes</p>
    <p>Whenever we detect a change toward a destination, update all paths to that destination that overlap</p>
    <p>Whenever we detect a path change from a source, update all paths from that source that overlap</p>
  </div>
  <div class="page">
    <p>Staleness Has Small Impact</p>
  </div>
  <div class="page">
    <p>Path Change Properties</p>
  </div>
  <div class="page">
    <p>Uphill Path Changes Are Less Likely</p>
  </div>
</Presentation>

<?xml version="1.0" ?>
<Presentation>
  <div class="page">
    <p>Entropy of Search Logs - How Big is the Web? - How Hard is Search?</p>
    <p>- With Personalization? With Backoff?</p>
    <p>Qiaozhu Mei, Kenneth Church  University of Illinois at Urbana-Champaign</p>
    <p>Microsoft Research</p>
  </div>
  <div class="page">
    <p>How BigBig is the Web? 5B? 20B? More? Less?</p>
    <p>What if a small cache of millions of pages  Could capture much of the value of billions?</p>
    <p>Could a BigBig bet on a cluster in the clouds  Turn into a big liability?</p>
    <p>Examples of Big Bets  Computer Centers &amp; Clusters</p>
    <p>Capital (Hardware)  Expense (Power)  Dev (Mapreduce, GFS, Big Table, etc.)</p>
    <p>Sales &amp; Marketing &gt;&gt; Production &amp; Distribution</p>
    <p>Small</p>
  </div>
  <div class="page">
    <p>Millions (Not Billions)</p>
  </div>
  <div class="page">
    <p>Population Bound  With all the talk about the Long Tail</p>
    <p>Youd think that the Web was astronomical  Carl Sagan: Billions and Billions</p>
    <p>Lower Distribution $$  Sell Less of More  But there are limits to this process</p>
    <p>NetFlix: 55k movies (not even millions)  Amazon: 8M products  Vanity Searches: Infinite???</p>
    <p>Personal Home Pages &lt;&lt; Phone Book &lt; Population  Business Home Pages &lt;&lt; Yellow Pages &lt; Population</p>
    <p>Millions, not Billions (until market saturates)</p>
  </div>
  <div class="page">
    <p>It Will Take Decades to Reach Population Bound</p>
    <p>Most people (and products) dont have a web page (yet)</p>
    <p>Currently, I can find famous people  (and academics)  but not my neighbors</p>
    <p>There arent that many famous people  (and academics)</p>
    <p>Millions, not billions  (for the foreseeable future)</p>
  </div>
  <div class="page">
    <p>Equilibrium: Supply = Demand</p>
    <p>If there is a page on the web,  And no one sees it,  Did it make a sound?</p>
    <p>How big is the web?  Should we count silent pages  That dont make a sound?</p>
    <p>How many products are there?  Do we count silent flops  That no one buys?</p>
  </div>
  <div class="page">
    <p>Demand Side Accounting</p>
    <p>Consumers have limited time  Telephone Usage: 1 hour per line per day  TV: 4 hours per day  Web: ??? hours per day</p>
    <p>Suppliers will post as many pages as consumers can consume (and no more)</p>
    <p>Size of Web: O(Consumers)</p>
  </div>
  <div class="page">
    <p>How Big is the Web?  Related questions come up in language  How big is English?</p>
    <p>Dictionary Marketing  Education (Testing of Vocabulary Size)  Psychology  Statistics  Linguistics</p>
    <p>Two Very Different Answers  Chomsky: language is infinite  Shannon: 1.25 bits per character</p>
    <p>How many words do people know?</p>
    <p>What is a word? Person? Know?</p>
  </div>
  <div class="page">
    <p>Chomskian Argument: Web is Infinite</p>
    <p>One could write a malicious spider trap  http://successor.aspx?x=0</p>
    <p>http://successor.aspx?x=1  http://successor.aspx?x=2</p>
    <p>Not just academic exercise  Web is full of benign examples like</p>
    <p>http://calendar.duke.edu/  Infinitely many months  Each month has a link to the next</p>
  </div>
  <div class="page">
    <p>How BigBig is the Web? 5B? 20B? More? Less?</p>
    <p>More (Chomsky)  http://successor?x=0</p>
    <p>Less (Shannon)</p>
    <p>Entropy (H)</p>
    <p>Query 21.1  22.9</p>
    <p>URL 22.1  22.4</p>
    <p>IP 22.1  22.6</p>
    <p>All But IP 23.9</p>
    <p>All But URL 26.0</p>
    <p>All But Query 27.1</p>
    <p>All Three 27.2</p>
    <p>Millions (not Billions)</p>
    <p>MSN Search Log 1 month  x18</p>
    <p>Cluster in Cloud  Desktop  Flash</p>
    <p>Comp Ctr ($$$$)  Walk in the Park ($)</p>
    <p>More Practical Answer</p>
  </div>
  <div class="page">
    <p>Entropy (H)</p>
    <p>Difficulty of encoding information (a distr.)</p>
    <p>Size of search space; difficulty of a task</p>
    <p>H = 20  1 million items distributed uniformly  Powerful tool for sizing challenges and</p>
    <p>opportunities  How hard is search?  How much does personalization help?</p>
    <p>Xx</p>
    <p>xpxpXH )(log)()(</p>
  </div>
  <div class="page">
    <p>How Hard Is Search?</p>
    <p>Traditional Search  H(URL | Query)  2.8 (= 23.9  21.1)</p>
    <p>Personalized Search  H(URL | Query, IPIP)  1.21.2 (= 27.2  26.0)</p>
    <p>Entropy (H)</p>
    <p>Query 21.1</p>
    <p>URL 22.1</p>
    <p>IP 22.1</p>
    <p>All But IP 23.9</p>
    <p>All But URL 26.0</p>
    <p>All But Query 27.1</p>
    <p>All Three 27.2Personalization cuts H in Half!</p>
  </div>
  <div class="page">
    <p>Difficulty of Queries</p>
    <p>Easy queries (low H(URL|Q)):  google, yahoo, myspace, ebay,</p>
    <p>Hard queries (high H(URL|Q)):  dictionary, yellow pages, movies, what is may</p>
    <p>day?</p>
  </div>
  <div class="page">
    <p>How Hard are Query Suggestions? The Wild Thing? C* Rice  Condoleezza Rice</p>
    <p>Traditional Suggestions  H(Query)  21 bits</p>
    <p>Personalized  H(Query | IPIP)  55 bits (= 26  21)</p>
    <p>Entropy (H)</p>
    <p>Query 21.1</p>
    <p>URL 22.1</p>
    <p>IP 22.1</p>
    <p>All But IP 23.9</p>
    <p>All But URL 26.0</p>
    <p>All But Query 27.1</p>
    <p>All Three 27.2Personalization cuts H in Half! Twice</p>
  </div>
  <div class="page">
    <p>Personalization with Backoff  Ambiguous query: MSG</p>
    <p>Madison Square Garden  Monosodium Glutamate</p>
    <p>Disambiguate based on users prior clicks  When we dont have data</p>
    <p>Backoff to classes of users  Proof of Concept:</p>
    <p>Classes defined by IP addresses  Better:</p>
    <p>Market Segmentation (Demographics)  Collaborative Filtering (Other users who click like me)</p>
  </div>
  <div class="page">
    <p>Backoff</p>
    <p>Proof of concept: bytes of IP define classes of users  If we only know some of the IP address, does it help?</p>
    <p>Bytes of IP addresses H(URL| IP, Query)</p>
    <p>*.*.*.* 2.74</p>
    <p>Cuts H in half even if using the first two bytes of IP</p>
    <p>Some of the IP is better than none</p>
  </div>
  <div class="page">
    <p>Backing Off by IP</p>
    <p>Personalization with Backoff  s estimated with EM and CV  A little bit of personalization</p>
    <p>Better than too much  Or too little</p>
    <p>4 : weights for first 4 bytes of IP 3 : weights for first 3 bytes of IP 2 : weights for first 2 bytes of IP</p>
    <p>4</p>
    <p>),|(),|( i</p>
    <p>ii QIPUrlPQIPUrlP</p>
    <p>Sparse Data Missed Opportunity</p>
  </div>
  <div class="page">
    <p>Personalization with Backoff  Market Segmentation</p>
    <p>Traditional Goal of Marketing:  Segment Customers (e.g., Business v. Consumer)  By Need &amp; Value Proposition</p>
    <p>Need: Segments ask different questions at different times  Value: Different advertising opportunities</p>
    <p>Segmentation Variables  Queries, URL Clicks, IP Addresses  Geography &amp; Demographics (Age, Gender, Income)  Time of day &amp; Day of Week</p>
  </div>
  <div class="page">
    <p>Business Queries on Business Days</p>
    <p>Consumer Queries (Weekends &amp; Every Day)</p>
  </div>
  <div class="page">
    <p>Business Days v. Weekends: More Clicks and Easier Queries</p>
    <p>Easier</p>
    <p>More Clicks</p>
  </div>
  <div class="page">
    <p>Day v.s. Night: More Queries, More Diversified Queries</p>
    <p>More clicks and diversified</p>
    <p>queries</p>
    <p>Less clicks, more unified queries</p>
  </div>
  <div class="page">
    <p>Harder Queries at TV Time</p>
    <p>Harder queries</p>
    <p>Weekends are harder</p>
  </div>
  <div class="page">
    <p>Conclusions: Millions (not Billions)</p>
    <p>How Big is the Web?  Upper bound: O(Population)</p>
    <p>Not Billions  Not Infinite</p>
    <p>Shannon &gt;&gt; Chomsky  How hard is search?  Query Suggestions?  Personalization?</p>
    <p>Cluster in Cloud ($$$$)  Walk-in-the-Park ($)</p>
    <p>Entropy is a great hammer</p>
  </div>
  <div class="page">
    <p>Conclusions: Personalization with Backoff</p>
    <p>Personalization with Backoff  Cuts search space (entropy) in half  Backoff  Market Segmentation</p>
    <p>Example: Business v. Consumer  Need: Segments ask different questions at different times  Value: Different advertising opportunities</p>
    <p>Demographics:  Partition by ip, day, hour, business/consumer query</p>
    <p>Future Work:  Model combinations of surrogate variables  Group users with similarity  collaborative search</p>
  </div>
  <div class="page">
    <p>Thanks!</p>
  </div>
  <div class="page">
    <p>Prediction Task: Historical Logs</p>
    <p>Coverage of Future Demand</p>
    <p>Training: Estimate Pr(x)  Given what we know today,  Estimate, Pr(x), tomorrows demand for url x  (There are an infinite set of urls x.)</p>
    <p>Test: Score Pr(x) by Cross Entropy  Given tomorrows demand, x1xk  Score  log2 of geometric mean of Pr(x1)  Pr(xk)</p>
    <p>One forecast is better than another  If it has better (less) cross entropy</p>
    <p>Cross entropy  Entropy (H)  The score for the best possible forecast (that only God knows)</p>
    <p>Coverage</p>
  </div>
  <div class="page">
    <p>Millions, Not Billions (Until Market Saturates)</p>
    <p>Telephones are a Mature Market  Saturated</p>
    <p>Universal Service is limited by population  Loops (telephone numbers)  population  Everyone (and every business) is listed in phonebook</p>
    <p>(unless they have opted out)</p>
    <p>Web is Growth Market  Decades from saturation  When everybody and every product has a page</p>
    <p>The number of pages will be bounded by the population  In the meantime, millions are good enough</p>
  </div>
  <div class="page">
    <p>Smoothing (Cont.)</p>
    <p>Use interpolation smoothing:</p>
    <p>where IPi is the first i bytes of an IP address. e.g., IP4= 156.111.188.243; IP2 = 156.111.*.*</p>
    <p>Use one months search log (Jan 06) as training data, new incoming log (Feb 06) as testing sets</p>
    <p>i determined by EM algorithm maximizing the cross conditional entropy on test set.</p>
    <p>4</p>
    <p>),|(),|( i</p>
    <p>ii QIPUrlPQIPUrlP</p>
  </div>
  <div class="page">
    <p>Cross Validation</p>
    <p>IP in the future might not be seen in the history  But parts of it is seen in the history</p>
    <p>Personalization with backoff</p>
    <p>No personalization</p>
    <p>Complete personalization</p>
    <p>C ro</p>
    <p>ss E</p>
    <p>n tr</p>
    <p>o p y:</p>
    <p>H (f</p>
    <p>u tu</p>
    <p>re | h</p>
    <p>is to</p>
    <p>ry )</p>
    <p>Knows every byte</p>
    <p>Knows at least two bytes</p>
  </div>
  <div class="page">
    <p>Cross Validations</p>
    <p>Weekends are harder to predict  Weekdays to predict weekdays &gt;&gt; weekends</p>
    <p>to predict weekdays  Day time to predict day time &gt;&gt; nights to</p>
    <p>predict day time</p>
  </div>
  <div class="page">
    <p>Partition by Day-Week (CV)</p>
    <p>Test data: weekdays and weekends</p>
    <p>Weekdays are easier to be predicted by history of weekdays</p>
    <p>Weekends are more difficult to predict</p>
    <p>Training data: weekdays and weekends</p>
  </div>
</Presentation>

<?xml version="1.0" ?>
<Presentation>
  <div class="page">
    <p>Net2Text: Query-Guided Summarization</p>
    <p>of Network Forwarding Behaviors</p>
    <p>NSDI 18</p>
    <p>Martin Vechev, Laurent Vanbever</p>
    <p>April, 11 2018</p>
    <p>net2text.ethz.ch</p>
    <p>Rdiger Birkner, Dana Drachsler-Cohen,</p>
  </div>
  <div class="page">
    <p>SEAT</p>
    <p>NEWY</p>
    <p>SUNV</p>
    <p>LOSA</p>
    <p>HOUS</p>
    <p>ATLA</p>
    <p>PHIL DENV KSCY</p>
    <p>CHIC</p>
    <p>INDI</p>
  </div>
  <div class="page">
    <p>NEWY</p>
    <p>SEAT</p>
    <p>SUNV</p>
    <p>LOSA</p>
    <p>HOUS</p>
    <p>ATLA</p>
    <p>PHIL DENV KSCY</p>
    <p>CHIC</p>
    <p>INDI</p>
  </div>
  <div class="page">
    <p>Where is the traffic leaving in NEWY</p>
    <p>coming from?</p>
  </div>
  <div class="page">
    <p>Approach Look at</p>
    <p>From a wealth of low-level data,</p>
    <p>identify important destinations to reroute</p>
    <p>Challenge</p>
    <p>to</p>
    <p>entire forwarding state all the traffic statistics</p>
    <p>Where is the traffic leaving NEWY</p>
    <p>coming from?</p>
    <p>extract the high-level insights</p>
  </div>
  <div class="page">
    <p>Understanding how the network behaves,</p>
    <p>can take hours</p>
    <p>Fast reaction is required</p>
    <p>Networks get more and more complex</p>
    <p>Customer experience depends on it</p>
    <p>New peerings, more routers, etc.</p>
  </div>
  <div class="page">
    <p>What if you could simply ask the questions</p>
    <p>and automatically get an answer?</p>
  </div>
  <div class="page">
    <p>Type a message</p>
    <p>TextNet 2</p>
  </div>
  <div class="page">
    <p>Where is the traffic</p>
    <p>TextNet 2</p>
  </div>
  <div class="page">
    <p>Type a message</p>
    <p>TextNet 2</p>
    <p>Where is the traffic leaving</p>
    <p>in NEWY coming from?</p>
    <p>question natural language</p>
    <p>in</p>
  </div>
  <div class="page">
    <p>Type a message</p>
    <p>Where is the traffic leaving</p>
    <p>in NEWY coming from?</p>
    <p>TextNet 2</p>
  </div>
  <div class="page">
    <p>Type a message</p>
    <p>TextNet 2</p>
    <p>summary natural language</p>
    <p>in</p>
    <p>The traffic enters mostly in PHIL</p>
    <p>and goes to Youtube and Netflix.</p>
    <p>Where is the traffic leaving</p>
    <p>in NEWY coming from? question natural language</p>
    <p>in</p>
  </div>
  <div class="page">
    <p>The Google traffic to NEWY</p>
    <p>enters in BOST</p>
    <p>Net2Text has four stages:</p>
    <p>parsing, data retrieval, summarization, translation</p>
    <p>Input Output</p>
    <p>How is Google traffic to NEWY handled?</p>
    <p>Workflow</p>
    <p>Network database</p>
    <p>NL Parser Summarization Translation</p>
  </div>
  <div class="page">
    <p>The Google traffic to NEWY</p>
    <p>enters in BOST</p>
    <p>Net2Text has four stages:</p>
    <p>parsing, data retrieval, summarization, translation</p>
    <p>Input Output</p>
    <p>How is Google traffic to NEWY handled?</p>
    <p>Workflow</p>
    <p>NL Parser Summarization Translation</p>
    <p>Network database</p>
  </div>
  <div class="page">
    <p>The parser maps the operators query</p>
    <p>to the internal query language</p>
    <p>SELECT * FROM paths WHERE egress=NEWY AND dest=Google</p>
    <p>Query Type</p>
    <p>?</p>
    <p>Router</p>
    <p>How is to traffic Google NEWY handled</p>
    <p>EgressDestination</p>
    <p>Traffic Identifier</p>
    <p>Organization</p>
    <p>Input Output</p>
    <p>How is Google traffic to NEWY handled?</p>
  </div>
  <div class="page">
    <p>Based on the query,</p>
    <p>Net2Text retrieves all relevant data</p>
    <p>SELECT * FROM paths WHERE egress=NEWY AND dest=Google</p>
    <p>The Google traffic to NEWY</p>
    <p>enters in BOST</p>
    <p>Input Output</p>
    <p>How is Google traffic to NEWY handled?</p>
    <p>Workflow</p>
    <p>NL Parser Summarization Translation</p>
    <p>Network database</p>
  </div>
  <div class="page">
    <p>The database maintains</p>
    <p>the forwarding state and traffic statistics</p>
  </div>
  <div class="page">
    <p>The database maintains</p>
    <p>the forwarding state and traffic statistics</p>
    <p>path 1</p>
    <p>ingress avg. bw</p>
    <p>BOST</p>
    <p>egressdest.</p>
    <p>Google</p>
    <p>Swisscom</p>
    <p>Swisscom</p>
    <p>Yahoo</p>
    <p>path 2</p>
    <p>path 3</p>
    <p>path n</p>
    <p>NEWY</p>
    <p>BOST</p>
    <p>ATLA</p>
    <p>NEWY</p>
    <p>ATLA</p>
    <p>NEWY</p>
    <p>HOUS</p>
    <p>prefix</p>
  </div>
  <div class="page">
    <p>All the data is summarized by</p>
    <p>identifying a few clusters</p>
    <p>path 1</p>
    <p>path 2</p>
    <p>path n</p>
    <p>ingress avg. bw</p>
    <p>BOST</p>
    <p>BOST</p>
    <p>SFO</p>
    <p>The Google traffic to NEWY</p>
    <p>enters in BOST</p>
    <p>Input OutputWorkflow</p>
    <p>Translation How is Google traffic to NEWY handled?</p>
    <p>NL Parser Summarization</p>
  </div>
  <div class="page">
    <p>path 1</p>
    <p>ingress avg. bw</p>
    <p>BOST</p>
    <p>short. path</p>
    <p>path 2</p>
    <p>path 3</p>
    <p>path n</p>
    <p>T</p>
    <p>BOST</p>
    <p>BOST</p>
    <p>T</p>
    <p>BOST</p>
    <p>F</p>
    <p>T</p>
    <p>prefix</p>
    <p>Input pertaining to Google traffic leaving in NEWY Output</p>
    <p>identifying a few clusters</p>
    <p>All the data is summarized by</p>
  </div>
  <div class="page">
    <p>path 1</p>
    <p>ingress avg. bw</p>
    <p>BOST</p>
    <p>short. path</p>
    <p>path 2</p>
    <p>path 3</p>
    <p>path n</p>
    <p>T</p>
    <p>BOST</p>
    <p>BOST</p>
    <p>T</p>
    <p>BOST</p>
    <p>F</p>
    <p>T</p>
    <p>prefix</p>
    <p>Input pertaining to Google traffic leaving in NEWY Output</p>
    <p>{BOSTi},</p>
    <p>identifying a few clusters</p>
    <p>All the data is summarized by</p>
  </div>
  <div class="page">
    <p>Each cluster represents a path specification</p>
    <p>A summary consists of multiple path specifications</p>
    <p>path 1</p>
    <p>ingress avg. bw</p>
    <p>BOST</p>
    <p>short. path</p>
    <p>path 2</p>
    <p>path 3</p>
    <p>path n</p>
    <p>T</p>
    <p>BOST</p>
    <p>BOST</p>
    <p>T</p>
    <p>BOST</p>
    <p>F</p>
    <p>T</p>
    <p>prefix</p>
    <p>Output</p>
    <p>{BOSTi}</p>
    <p>Input pertaining to Google traffic leaving in NEWY</p>
    <p>,</p>
  </div>
  <div class="page">
    <p>path 1</p>
    <p>ingress avg. bw</p>
    <p>BOST</p>
    <p>short. path</p>
    <p>path 2</p>
    <p>path 3</p>
    <p>path n</p>
    <p>T</p>
    <p>BOST</p>
    <p>BOST</p>
    <p>T</p>
    <p>BOST</p>
    <p>F</p>
    <p>T</p>
    <p>prefix</p>
    <p>Input pertaining to Google traffic leaving in NEWY Output</p>
    <p>{BOSTi},</p>
    <p>{BOSTi, Tsp}</p>
    <p>{BOSTi, Tsp, ATLw}</p>
    <p>,</p>
    <p>identifying a few clusters</p>
    <p>All the data is summarized by</p>
  </div>
  <div class="page">
    <p>Path specifications are translated</p>
    <p>back to natural language</p>
    <p>{BOSTi},</p>
    <p>{BOSTi, Tsp}</p>
    <p>{BOSTi, Tsp, ATLw}</p>
    <p>,</p>
    <p>The Google traffic to NEWY</p>
    <p>enters in BOST</p>
    <p>Input OutputWorkflow</p>
    <p>How is Google traffic to NEWY handled?</p>
    <p>NL Parser TranslationSummarization</p>
    <p>Network database</p>
  </div>
  <div class="page">
    <p>Google</p>
    <p>to NEWY</p>
    <p>The Traffic Identifier Description</p>
    <p>enters in BOST</p>
    <p>to obtain natural language from path specifications</p>
    <p>Input Output</p>
    <p>The Google traffic to NEWY</p>
    <p>enters in BOST</p>
    <p>{BOSTi},</p>
    <p>{BOSTi, Tsp}</p>
    <p>{BOSTi, Tsp, ATLw}</p>
    <p>,</p>
    <p>The translation uses templates</p>
  </div>
  <div class="page">
    <p>The Google traffic to NEWY</p>
    <p>enters in BOST</p>
    <p>Net2Text has four stages:</p>
    <p>parsing, data retrieval, summarization, translation</p>
    <p>Input Output</p>
    <p>How is Google traffic to NEWY handled?</p>
    <p>Workflow</p>
    <p>Network database</p>
    <p>NL Parser Summarization Translation</p>
  </div>
  <div class="page">
    <p>Performance &amp; operator interviews</p>
    <p>Scaling</p>
    <p>Summarization</p>
    <p>from question to succinct answer</p>
    <p>summarizing fast</p>
    <p>summaries within a few seconds</p>
    <p>TextNet 2</p>
  </div>
  <div class="page">
    <p>Performance &amp; operator interviews</p>
    <p>Scaling</p>
    <p>Summarization</p>
    <p>from question to succinct answer</p>
    <p>summarizing fast</p>
    <p>summaries within a few seconds</p>
    <p>TextNet 2</p>
  </div>
  <div class="page">
    <p>Traffic is being forwarded.</p>
    <p>Finding a summary of the</p>
    <p>network-wide forwarding state is simple</p>
  </div>
  <div class="page">
    <p>Traffic from LOSA to 35.184.0.0/19,</p>
    <p>which is owned by Google,</p>
    <p>is leaving the network in CHIC</p>
    <p>and takes the path</p>
    <p>SUNV, DENV, KSCY, INDI to CHIC.</p>
    <p>Finding a summary of the</p>
    <p>network-wide forwarding state is simple</p>
  </div>
  <div class="page">
    <p>amount of detail</p>
    <p>provided by the summary 19</p>
    <p>Explainability</p>
    <p>amount of data</p>
    <p>described by the summary</p>
    <p>Coverage</p>
  </div>
  <div class="page">
    <p>Traffic is being forwarded.</p>
    <p>Explainability</p>
    <p>Coverage</p>
  </div>
  <div class="page">
    <p>Traffic from LOSA to 35.184.0.0/19,</p>
    <p>which is owned by Google,</p>
    <p>Explainability</p>
    <p>Coverage</p>
  </div>
  <div class="page">
    <p>Explainability</p>
    <p>better</p>
    <p>Coverage</p>
  </div>
  <div class="page">
    <p>Score Weighted sum of the amount of traffic covered by</p>
    <p>each path specification in the summary.</p>
    <p>Summarization is an optimization problem</p>
    <p>guided by the summary score</p>
  </div>
  <div class="page">
    <p>Score</p>
    <p>each path specification in the summary.</p>
    <p>Summarization is an optimization problem</p>
    <p>guided by the summary score</p>
    <p>Coverage</p>
    <p>Weighted sum of the amount of traffic covered by</p>
  </div>
  <div class="page">
    <p>Score</p>
    <p>each path specification in the summary.</p>
    <p>Summarization is an optimization problem</p>
    <p>guided by the summary score</p>
    <p>Explainability</p>
    <p>weights based on level of detail</p>
    <p>of the path specification</p>
    <p>Weighted sum of the amount of traffic covered by</p>
  </div>
  <div class="page">
    <p>Score</p>
    <p>each path specification in the summary.</p>
    <p>Summarization is an optimization problem</p>
    <p>guided by the summary score</p>
    <p>Goal Find path specifications that maximize the score.</p>
    <p>Weighted sum of the amount of traffic covered by</p>
  </div>
  <div class="page">
    <p>all the data</p>
    <p>in all details</p>
    <p>Explainability</p>
    <p>Coverage</p>
  </div>
  <div class="page">
    <p>Goal Find k path specifications each of size at most t</p>
    <p>that maximize the score.</p>
    <p>Score</p>
    <p>each path specification in the summary.</p>
    <p>Summarization is an optimization problem</p>
    <p>guided by the summary score and a size restriction</p>
    <p>Weighted sum of the amount of traffic covered by</p>
  </div>
  <div class="page">
    <p>k = 3, t = 3</p>
    <p>,,</p>
  </div>
  <div class="page">
    <p>,,</p>
    <p>{LOSAi},,{SUNVe},,</p>
  </div>
  <div class="page">
    <p>,,</p>
    <p>{LOSAi},,{SUNVe},,</p>
    <p>{LOSAi},{NEWYe},{SUNVe, LOSAi},,</p>
  </div>
  <div class="page">
    <p>,,</p>
    <p>{LOSAi},,{SUNVe},,</p>
    <p>{LOSAi},{NEWYe},</p>
    <p>{LOSAi},{NEWYe},{Yahood}</p>
    <p>{SUNVe, LOSAi},,</p>
    <p>{SUNVe, LOSAi, Googled}, {SUNVe, NEWYi, Yahood}, {HOUSe, NEWYi, Yahood}</p>
    <p>{SUNVe}, {SUNVe, LOSAi},</p>
  </div>
  <div class="page">
    <p>The search space is exponential</p>
    <p>in the number of path specifications and feature values</p>
    <p>,,</p>
    <p>{LOSAi},,{SUNVe},,</p>
    <p>{LOSAi},{NEWYe},</p>
    <p>{LOSAi},{NEWYe},{Yahood}</p>
    <p>{SUNVe, LOSAi},,</p>
    <p>{SUNVe, LOSAi, Googled}, {SUNVe, NEWYi, Yahood}, {HOUSe, NEWYi, Yahood}</p>
    <p>{SUNVe}, {SUNVe, LOSAi},</p>
  </div>
  <div class="page">
    <p>Due to the size of the search space,</p>
    <p>exhaustive exploration is not feasible</p>
  </div>
  <div class="page">
    <p>Performance &amp; operator interviews</p>
    <p>Scaling</p>
    <p>Summarization</p>
    <p>from question to succinct answer</p>
    <p>summarizing quickly</p>
    <p>summaries within a few seconds</p>
    <p>TextNet 2</p>
  </div>
  <div class="page">
    <p>Net2Text relies on two optimizations</p>
    <p>Sampling</p>
    <p>Optimization 1 Optimization 2</p>
    <p>Reduce the search space Reduce the input data</p>
    <p>Approximation</p>
  </div>
  <div class="page">
    <p>Sampling</p>
    <p>Optimization 1</p>
    <p>Reduce the search space</p>
    <p>Approximation</p>
  </div>
  <div class="page">
    <p>,,</p>
    <p>{LOSAi},,{SUNVe},,</p>
    <p>{LOSAi},{NEWYe},</p>
    <p>{LOSAi},{NEWYe},{Yahood}</p>
    <p>{SUNVe, LOSAi},,</p>
    <p>{SUNVe, LOSAi, Googled}, {SUNVe, NEWYi, Yahood}, {HOUSe, NEWYi, Yahood}</p>
    <p>{SUNVe}, {SUNVe, LOSAi},</p>
  </div>
  <div class="page">
    <p>Maximal coverage</p>
    <p>The search space contains two types of edges:</p>
    <p>blue edges that increase coverage</p>
    <p>,,</p>
    <p>{LOSAi},,{SUNVe},,</p>
    <p>{LOSAi},{NEWYe},</p>
    <p>{LOSAi},{NEWYe},{Yahood}</p>
    <p>{SUNVe, LOSAi},,</p>
    <p>{SUNVe, LOSAi, Googled}, {SUNVe, NEWYi, Yahood}, {HOUSe, NEWYi, Yahood}</p>
    <p>{SUNVe}, {SUNVe, LOSAi},</p>
  </div>
  <div class="page">
    <p>Maximal explainability</p>
    <p>The search space contains two types of edges:</p>
    <p>red edges that increase explainability</p>
    <p>Maximal coverage</p>
    <p>,,</p>
    <p>{LOSAi},,{SUNVe},,</p>
    <p>{LOSAi},{NEWYe},</p>
    <p>{LOSAi},{NEWYe},{Yahood}</p>
    <p>{SUNVe, LOSAi},,</p>
    <p>{SUNVe, LOSAi, Googled}, {SUNVe, NEWYi, Yahood}, {HOUSe, NEWYi, Yahood}</p>
    <p>{SUNVe}, {SUNVe, LOSAi},</p>
  </div>
  <div class="page">
    <p>Net2Text reduces the search space</p>
    <p>to solutions that balance coverage and explainability</p>
    <p>,,</p>
    <p>{LOSAi},,{SUNVe},,</p>
    <p>{LOSAi},{NEWYe},</p>
    <p>{LOSAi},{NEWYe},{Yahood}</p>
    <p>{SUNVe, LOSAi},,</p>
    <p>{SUNVe, LOSAi, Googled}, {SUNVe, NEWYi, Yahood}, {HOUSe, NEWYi, Yahood}</p>
    <p>{SUNVe}, {SUNVe, LOSAi},</p>
  </div>
  <div class="page">
    <p>Net2Text reduces the search space</p>
    <p>to solutions that balance coverage and explainability</p>
    <p>{SUNVe},{SUNVe, LOSAi},{SUNVe, LOSAi, Yahood}</p>
    <p>Balanced coverage and explainability</p>
    <p>,,</p>
    <p>{LOSAi},,{SUNVe},,</p>
    <p>{LOSAi},{NEWYe},</p>
    <p>{LOSAi},{NEWYe},{Yahood}</p>
    <p>{SUNVe, LOSAi},,</p>
    <p>{SUNVe, LOSAi, Googled}, {SUNVe, NEWYi, Yahood}, {HOUSe, NEWYi, Yahood}</p>
    <p>{SUNVe}, {SUNVe, LOSAi},</p>
  </div>
  <div class="page">
    <p>Net2Text reduces the search space</p>
    <p>to solutions that balance coverage and explainability</p>
    <p>Graph has a monotonicity property</p>
    <p>Guaranteed lower bound on the score</p>
    <p>Net2Text greedily explores the graph</p>
    <p>Solution is not far off from best solution</p>
    <p>The childs score is always higher</p>
    <p>Always follow most promising path</p>
  </div>
  <div class="page">
    <p>Sampling</p>
    <p>Optimization 2</p>
    <p>Reduce the input data</p>
    <p>Approximation</p>
  </div>
  <div class="page">
    <p>across multiple levels</p>
    <p>Network traffic is highly skewed</p>
    <p>Traffic distribution</p>
    <p>Routing and network topology</p>
    <p>Network traffic is repetitive and redundant</p>
    <p>Few destinations carry most of the traffic</p>
    <p>Repetitive forwarding patterns</p>
    <p>Level 1</p>
    <p>Insight</p>
    <p>Level 2</p>
  </div>
  <div class="page">
    <p>to speed up summarization by sampling</p>
    <p>Net2Text uses redundancy in the data</p>
    <p>Net2Text iterates over all entries at least once</p>
    <p>Reduce input data by sampling</p>
    <p>Problem</p>
    <p>Solution</p>
    <p>Summary is resilient to loss of redundant informationInsight</p>
  </div>
  <div class="page">
    <p>Scaling</p>
    <p>Summarization</p>
    <p>from question to succinct answer</p>
    <p>summarizing fast</p>
    <p>Performance &amp; operator interviews3 summaries within a few seconds</p>
    <p>TextNet 2</p>
  </div>
  <div class="page">
    <p>Net2Text needs to be quick and applicable</p>
    <p>Performance Applicability</p>
    <p>Aspect 1 Aspect 2</p>
    <p>End-to-end timing Operator interviews</p>
  </div>
  <div class="page">
    <p>Performance Applicability</p>
    <p>Aspect 1</p>
    <p>End-to-end timing</p>
  </div>
  <div class="page">
    <p>summarizing the entire forwarding state</p>
    <p>Setup ATT North America from Topology Zoo</p>
    <p>How is traffic being forwarded?</p>
    <p>Full routing tables (~650k prefixes)</p>
    <p>Four features</p>
    <p>egress</p>
    <p>destination</p>
    <p>shortest path</p>
    <p>ingress</p>
    <p>Pushing Net2Text to its limits by</p>
    <p>Question</p>
  </div>
  <div class="page">
    <p>Net2Text</p>
    <p>no sampling</p>
    <p>Time (s)</p>
    <p>Score w.r.t. no sampling</p>
  </div>
  <div class="page">
    <p>Time (s)</p>
    <p>Score w.r.t. no sampling</p>
    <p>Net2Text finds good summaries</p>
    <p>within seconds thanks to sampling</p>
  </div>
  <div class="page">
    <p>Greedy Heuristic</p>
    <p>Time (s)</p>
    <p>Score w.r.t. no sampling</p>
    <p>Baseline is slightly faster than Net2Text,</p>
    <p>but not as resilient to sampling</p>
    <p>Pick largest path aggregate</p>
  </div>
  <div class="page">
    <p>Only sampling higher than 1/5k</p>
    <p>has a significant effect on the score</p>
    <p>Sampling Rate</p>
    <p>Score w.r.t. no sampling</p>
  </div>
  <div class="page">
    <p>Net2Text needs to be quick and applicable</p>
    <p>Performance Applicability</p>
    <p>Aspect 2</p>
    <p>Operator interviews</p>
  </div>
  <div class="page">
    <p>Operators see value of assistants in their daily tasks</p>
    <p>Especially Where is the traffic coming from?</p>
    <p>NL is useful, especially for less technical people</p>
    <p>Supported questions are relevant</p>
    <p>Support in all time consuming tasks</p>
    <p>Operators dont mind to use query languages</p>
    <p>Assistants</p>
    <p>Questions</p>
    <p>NL I/O</p>
    <p>We asked various operators about Net2Text,</p>
    <p>they found it useful</p>
  </div>
  <div class="page">
    <p>Net2Text assists network operators</p>
    <p>by summarizing the forwarding state</p>
    <p>Net2Text answers questions in natural language</p>
    <p>Net2Text presents a summary</p>
    <p>Net2Text responds in a timely manner</p>
    <p>with a succinct summary in natural language</p>
    <p>that balances coverage and explainability</p>
    <p>and the supported queries are relevant</p>
  </div>
  <div class="page">
    <p>net2text.ethz.ch</p>
    <p>Dana Drachsler-Cohen Martin Vechev Laurent VanbeverRdiger Birkner</p>
  </div>
</Presentation>

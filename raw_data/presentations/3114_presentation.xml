<?xml version="1.0" ?>
<Presentation>
  <div class="page">
    <p>Internet Streaming Media Delivery:</p>
    <p>Lei Guo1, Enhua Tan1, Songqing Chen2, Zhen Xiao3, Oliver Spatchcheck4, and Xiaodong Zhang1</p>
    <p>Delving into</p>
    <p>A Quality and Resource Utilization Perspective</p>
  </div>
  <div class="page">
    <p>Multimedia on the Internet</p>
    <p>Internet video traffic is doubling every 3 to 4 months (IBLNEWS, comScore)  Youtube nearly doubled its traffic in May</p>
    <p>100 million video streams were served per day in July, 2006</p>
    <p>by Alexa Internet</p>
    <p>X 400% from May to Oct</p>
  </div>
  <div class="page">
    <p>Pseudo Streaming</p>
    <p>HTTP</p>
    <p>Web server</p>
    <p>X 1 hours</p>
    <p>Flash based</p>
    <p>Short video: 3min</p>
    <p>High cost: 1-1.5 million$ a month</p>
    <p>RTMP: streaming flash video</p>
  </div>
  <div class="page">
    <p>Streaming Media</p>
    <p>Akamai, LimeLight Networks</p>
    <p>Streaming server CDN</p>
  </div>
  <div class="page">
    <p>Streaming Media</p>
    <p>Merits  Thousands of concurrent streams  Flexible response to network congestion  Efficient bandwidth utilization  High quality to end users</p>
    <p>Challenges  Lack of QoS on the Internet  Diverse network connection of users</p>
    <p>Research and techniques  Effective utilization of server and Internet resources  Protocol rollover, Fast Streaming, MBR and rate adaptation</p>
  </div>
  <div class="page">
    <p>Limits of Existing Measurements</p>
    <p>Few studies on the quality and mechanism of streaming media delivery  Coarse granularity studies on access pattern and user behaviors</p>
    <p>Small scaled experiments in lab environment</p>
    <p>Unknown on the state of the art of Internet streaming delivery</p>
    <p>Unknown on the resource utilization of modern streaming services</p>
    <p>Challenge of streaming quality studies  Server logs are not enough</p>
    <p>Packet level analysis is difficult: reconstruct TCP flow to get streaming protocol header</p>
  </div>
  <div class="page">
    <p>Our Objective and Methodology</p>
    <p>Understand modern streaming techniques  The delivery quality and resource utilization</p>
    <p>Collect a large streaming media workload  From thousands of home users and business users</p>
    <p>Hosted by a large ISP (Gigascope)  RTSP, RTP/RTCP, MMS, RDT packet headers instead of server log</p>
    <p>s</p>
    <p>Analyze commonly used streaming techniques  Protocol rollover  Fast Streaming  MBR encoding and rate adaptation</p>
  </div>
  <div class="page">
    <p>Outline</p>
    <p>Traffic overview</p>
    <p>Protocol rollover</p>
    <p>Fast Streaming</p>
    <p>Rate adaptation</p>
    <p>Conclusion</p>
  </div>
  <div class="page">
    <p>Traffic Overview</p>
    <p>User communities  Home users in a cable network  Business users hosted by a big ISP</p>
    <p>Have different access patterns</p>
    <p>Media hosting services  Self-hosting  Third-party hosting</p>
  </div>
  <div class="page">
    <p>Which is more popular: audio or video?</p>
    <p>Business users access more audio than home users</p>
  </div>
  <div class="page">
    <p>On-demand media: File length</p>
    <p>Business users tend to access longer audio/video files</p>
    <p>Audio Video</p>
    <p>pop songs (3-5 min)music</p>
    <p>Previews (30 sec)</p>
  </div>
  <div class="page">
    <p>On-demand media: Playback duration</p>
    <p>Business users tend to play audio/video longer</p>
    <p>Audio Video</p>
    <p>pop songs</p>
    <p>music previews</p>
  </div>
  <div class="page">
    <p>Live media: Playback duration</p>
    <p>Business users tend to access live audio/video longer</p>
    <p>Audio Video</p>
  </div>
  <div class="page">
    <p>Media hosting services</p>
    <p>Self-hosting: yahoo.com, aol.com, wbr.com</p>
    <p>Third-party hosting: akamai.com. LimeLight Networks, fplive.net</p>
    <p>CDN/MDN are widely used</p>
  </div>
  <div class="page">
    <p>Outline</p>
    <p>Traffic overview</p>
    <p>Protocol rollover</p>
    <p>Fast Streaming</p>
    <p>Rate adaptation</p>
    <p>Conclusion</p>
  </div>
  <div class="page">
    <p>Protocol Rollover Streaming server</p>
    <p>RTSP/UDP</p>
    <p>RTSP/TCP</p>
    <p>HTTP/TCP Embed RTSP commands in HTTP packets</p>
    <p>Media player</p>
    <p>Traffic volume:</p>
    <p>UDP: 23%</p>
    <p>TCP: 77%</p>
    <p>HTTP: rare</p>
    <p>X</p>
    <p>X</p>
  </div>
  <div class="page">
    <p>Protocol rollover time</p>
    <p>Windows media service RealNetworks media service</p>
    <p>Protocol rollover increases user startup time significantly</p>
    <p>Startup latency = protocol rollover time + transport setup time + startup buffering time</p>
    <p>Content provider: use URL modifier to specify protocol in the meta file rtspt://xxx.xxx.com:/xxx.wmv (TCP) &gt;70% rtspu://xxx.xxx.com:/xxx.wmv (UDP) rarely</p>
    <p>TCP will be used even UDP is supported</p>
  </div>
  <div class="page">
    <p>Outline</p>
    <p>Traffic overview</p>
    <p>Protocol rollover</p>
    <p>Fast Streaming</p>
    <p>Rate adaptation</p>
    <p>Conclusion</p>
  </div>
  <div class="page">
    <p>Fast Streaming</p>
    <p>Fast Streaming: deliver media data faster than its encoding rate  Fast start: fill the initial buffer</p>
    <p>Fast cache: optional</p>
    <p>Fast recovery</p>
    <p>Fast reconnect</p>
    <p>Always TCP-based</p>
    <p>Back</p>
  </div>
  <div class="page">
    <p>Media objects delivered with Fast Cache</p>
    <p>File length Encoding rate</p>
    <p>Fast Cache is more widely used for media files with longer length and higher encoding rate</p>
  </div>
  <div class="page">
    <p>Bandwidth Utilization</p>
    <p>PLAY RTSP/1.0 Bandwidth: 1.12 Mbps Speed: 20.5</p>
    <p>RTSP /1.0 200 OK Speed: 5</p>
    <p>Fast Cache Normal TCP streaming</p>
  </div>
  <div class="page">
    <p>Fast Cache smooth bandwidth fluctuation</p>
    <p>Rebuffer ratio = rebuffer time / play time</p>
    <p>Fast Cache</p>
    <p>Normal TCP</p>
  </div>
  <div class="page">
    <p>Fast Cache produces extra traffic</p>
    <p>Early termination: most streaming sessions only request the initial part of a media object</p>
    <p>Fast Cache: &gt; 55% oversupplied</p>
    <p>Normal TCP: &lt; 5% oversupplied</p>
  </div>
  <div class="page">
    <p>Server response time</p>
    <p>Third party media service Self-hosting media service</p>
    <p>DESCRIBE foo.wmv RTSP/1.0</p>
    <p>RTSP /1.0 200 OK SDP</p>
    <p>RTT</p>
    <p>SRT</p>
    <p>sniffer</p>
    <p>handshake</p>
    <p>&gt; 40%</p>
  </div>
  <div class="page">
    <p>Server Load</p>
    <p>Windows media load simulator</p>
    <p>Windows Server 2003 Win XP</p>
    <p>Server log</p>
    <p>Ethernet</p>
    <p>Some CDNs/MDNs do not support Fast Cache at all</p>
    <p>Link</p>
    <p>Bandwidth CPU</p>
  </div>
  <div class="page">
    <p>Effectiveness of resource over-utilization</p>
    <p>Fast Cache is TCP-based  Only feasible when bandwidth is large enough</p>
    <p>Less possibility of congestion in this case</p>
    <p>Encoding rate: 200  320 K bps Bandwidth: &gt; 500 Kbps</p>
    <p>Fast Cache: not resource-efficient</p>
  </div>
  <div class="page">
    <p>Outline</p>
    <p>Traffic overview</p>
    <p>Protocol rollover</p>
    <p>Fast Streaming</p>
    <p>Rate adaptation</p>
    <p>Conclusion</p>
  </div>
  <div class="page">
    <p>Rate Adaptation</p>
    <p>1.128Mbps</p>
    <p>Multiple-bit-rate encoding</p>
    <p>Stream switch</p>
    <p>Windows: Intelligent streaming RealNetworks: SureStream</p>
    <p>Stream thinning: deliver key frame only</p>
    <p>Video cancellation: play audio only</p>
  </div>
  <div class="page">
    <p>MBR encoding</p>
    <p>on-demand audio</p>
    <p>live audio</p>
    <p>audio stream in video objects</p>
    <p>video stream in video objects</p>
  </div>
  <div class="page">
    <p>Stream switch</p>
    <p>Streaming switch latency Low quality duration</p>
    <p>Play-out buffer</p>
    <p>Stream switch is often not smooth</p>
  </div>
  <div class="page">
    <p>Fast Cache and stream switch</p>
    <p>Do not work with each other: stream switch is disabled in Fast Cache</p>
    <p>playing buffering playing buffering bufferingplaying</p>
    <p>When network congestion occurs</p>
    <p>Like pseudo streaming</p>
    <p>When rebuffer occurs</p>
    <p>time</p>
    <p>fill play-out buffer</p>
  </div>
  <div class="page">
    <p>Streaming quality and playback duration</p>
    <p>Home user business user</p>
    <p>Longer duration sessions have higher prob. of quality degradation</p>
    <p>Business user workload has more quality degradation due to the longer playback time</p>
    <p>&gt;100 sec</p>
  </div>
  <div class="page">
    <p>Coordinating caching and rate adaptation</p>
    <p>Fast Cache: aggressively buffer data in advance  Over-utilize CPU and bandwidth resources</p>
    <p>Neither performance effective nor cost-efficient</p>
    <p>Rate adaptation: conservatively switch to lower bit rate stream  Switch handoff latency</p>
    <p>Coordinated Streaming</p>
    <p>Upper bound Prevent aggressive buffering</p>
    <p>Lower bound Prevent switch latency</p>
    <p>high rate stream</p>
    <p>low rate stream</p>
  </div>
  <div class="page">
    <p>Conclusion</p>
    <p>Quality of Internet streaming  Often unsatisfactory  Need to improve</p>
    <p>Modern streaming media services  Over-utilize CPU and bandwidth resources  Not a desirable way to improve quality</p>
    <p>Coordinated Streaming  Combine merits of both caching and rate adaptation  Simple but effective</p>
  </div>
  <div class="page">
    <p>Thank you!Thank you!</p>
  </div>
  <div class="page">
    <p>Traffic Overview</p>
    <p>Different access patterns in user communities  Not due to the business related media traffic: both are</p>
    <p>news and entertainment sites</p>
    <p>Working environment affects access pattern</p>
    <p>Media hosting services  Self-hosting</p>
    <p>Third-party hosting</p>
  </div>
  <div class="page">
    <p>Streaming quality summary</p>
    <p>The quality of media streaming on the Internet leaves much to be improved</p>
  </div>
  <div class="page">
    <p>Stream thinning (play key frames only)</p>
    <p>+ Stream thinning duration</p>
    <p>Thinning interval Smooth play</p>
    <p>Key frame play</p>
  </div>
</Presentation>

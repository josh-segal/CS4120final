<?xml version="1.0" ?>
<Presentation>
  <div class="page">
    <p>Scaling Community Cellular Networks with CCM</p>
    <p>Shaddi Hasan</p>
    <p>Mary Claire Barela</p>
    <p>Matthew Johnson</p>
    <p>Eric Brewer</p>
    <p>Kurtis Heimerl</p>
  </div>
  <div class="page">
    <p>Thanks! CHED, PCARI, Facebook, USAID, NSF</p>
    <p>Omar Ramadan, Matt Ball, Steve Muir, Evgeiny Makeev,</p>
    <p>UP VBTS team, Globe Konekt team,</p>
    <p>...so many others!</p>
  </div>
  <div class="page">
    <p>GSMA (2016)</p>
  </div>
  <div class="page">
    <p>In most countries, even in Africa, mobile operators have already rolled out 2G and 3G network coverage as far as possible within the envelope of a commercially sustainable business model.</p>
    <p>GSMA, Understanding the Economics of Network Coverage Expansion (2017)</p>
  </div>
  <div class="page"/>
  <div class="page"/>
  <div class="page">
    <p>Community Cellular Networks</p>
    <p>Built by and for their users</p>
    <p>Run cooperatively</p>
    <p>Optimized for local needs</p>
    <p>Leveraging local resources</p>
    <p>Providing local services</p>
    <p>Sustainable in rural areas</p>
    <p>Rhizomatica (Mexico)</p>
  </div>
  <div class="page"/>
  <div class="page">
    <p>Scale of telcos</p>
    <p>Reach of community networks</p>
    <p>+</p>
  </div>
  <div class="page">
    <p>CommunityCellularManager</p>
    <p>github.com/co-cell/ccm</p>
  </div>
  <div class="page"/>
  <div class="page">
    <p>InternetVoice/SMS</p>
  </div>
  <div class="page">
    <p>Mobile Core Network</p>
    <p>InternetVoice/SMS</p>
  </div>
  <div class="page">
    <p>Mobile Core Network</p>
    <p>InternetVoice/SMS</p>
  </div>
  <div class="page">
    <p>Mobile Core Network</p>
    <p>InternetVoice/SMS</p>
  </div>
  <div class="page">
    <p>Mobile Core Network</p>
    <p>InternetVoice/SMS</p>
    <p>$</p>
  </div>
  <div class="page">
    <p>Mobile Core Network</p>
    <p>InternetVoice/SMS</p>
    <p>$</p>
  </div>
  <div class="page">
    <p>Mobile Core Network</p>
    <p>InternetVoice/SMS</p>
    <p>$</p>
  </div>
  <div class="page">
    <p>Mobile Core Network</p>
    <p>InternetVoice/SMS</p>
    <p>$</p>
  </div>
  <div class="page">
    <p>Mobile Core Network</p>
    <p>InternetVoice/SMS</p>
    <p>$</p>
    <p>Centralize Management Decentralize Network Services</p>
  </div>
  <div class="page">
    <p>CCM is 2G only. 40% of devices only support 2G.*</p>
    <p>LTE/5G is not [yet] relevant in our context.</p>
    <p>*Shah et al., An Investigation of Phone Upgrades in Remote Community Cellular Networks. ICTD 2017.</p>
  </div>
  <div class="page">
    <p>InternetVoice/SMS</p>
    <p>CCM Client</p>
    <p>CCM Client</p>
    <p>CCM Client</p>
  </div>
  <div class="page">
    <p>Voice/SMS</p>
    <p>CCM Client</p>
    <p>CCM Client</p>
    <p>CCM Client</p>
    <p>CCM Controller</p>
    <p>Internet</p>
  </div>
  <div class="page">
    <p>Internet</p>
    <p>Voice/SMS</p>
    <p>CCM Client</p>
    <p>CCM Client</p>
    <p>CCM Client</p>
    <p>CCM Controller Telco</p>
  </div>
  <div class="page">
    <p>Internet</p>
    <p>Voice/SMS</p>
    <p>CCM Client</p>
    <p>CCM Client</p>
    <p>CCM Client</p>
    <p>CCM Controller Telco</p>
  </div>
  <div class="page">
    <p>Internet</p>
    <p>Voice/SMS</p>
    <p>CCM Client</p>
    <p>CCM Client</p>
    <p>CCM Client</p>
    <p>CCM Controller</p>
    <p>$</p>
    <p>Telco</p>
  </div>
  <div class="page">
    <p>Internet</p>
    <p>Voice/SMS</p>
    <p>CCM Client</p>
    <p>CCM Client</p>
    <p>CCM Client</p>
    <p>CCM Controller</p>
    <p>$</p>
    <p>Telco</p>
  </div>
  <div class="page">
    <p>Internet</p>
    <p>Voice/SMS</p>
    <p>CCM Client</p>
    <p>CCM Client</p>
    <p>CCM Client</p>
    <p>CCM Controller</p>
    <p>$</p>
    <p>Telco</p>
  </div>
  <div class="page">
    <p>Internet</p>
    <p>Voice/SMS</p>
    <p>CCM Client</p>
    <p>CCM Client</p>
    <p>CCM Client</p>
    <p>CCM Controller</p>
    <p>$</p>
    <p>Telco</p>
  </div>
  <div class="page">
    <p>Internet</p>
    <p>Voice/SMS</p>
    <p>CCM Client</p>
    <p>CCM Client</p>
    <p>CCM Client</p>
    <p>CCM Controller Telco</p>
  </div>
  <div class="page">
    <p>Synchronizing state: Checkin</p>
    <p>Request (Client -&gt; Controller) {</p>
    <p>status: {</p>
    <p>active_users: 24,</p>
    <p>ran_load: 51,</p>
    <p>...</p>
    <p>},</p>
    <p>events: [</p>
    <p>[15, IMSI123, out_sms, ...],</p>
    <p>[16, IMSI345, transfer, ...],</p>
    <p>],</p>
    <p>modified_subs: [...],</p>
    <p>ctx: {...}</p>
    <p>}</p>
    <p>Response (Controller -&gt; Client) {</p>
    <p>config: {</p>
    <p>radio_band: 51,</p>
    <p>...</p>
    <p>},</p>
    <p>events: {seqno: 16}</p>
    <p>subscribers: [...]</p>
    <p>}</p>
  </div>
  <div class="page">
    <p>Synchronizing state: Checkin</p>
    <p>CCM Client CCM Controller</p>
    <p>{</p>
    <p>status: {</p>
    <p>active_users: 24,</p>
    <p>ran_load: 51,</p>
    <p>...</p>
    <p>},</p>
    <p>events: [</p>
    <p>[15, IMSI123, out_sms, ...],</p>
    <p>[16, IMSI345, transfer, ...],</p>
    <p>],</p>
    <p>modified_subs: [...],</p>
    <p>}</p>
    <p>HTTP POST</p>
    <p>DBDB {</p>
    <p>status: {</p>
    <p>active_users: 24,</p>
    <p>ran_load: 51,</p>
    <p>...</p>
    <p>},</p>
    <p>events: [</p>
    <p>[15, IMSI123, out_sms, ...],</p>
    <p>[16, IMSI345, transfer, ...],</p>
    <p>],</p>
    <p>modified_subs: [...],</p>
    <p>}</p>
  </div>
  <div class="page">
    <p>Synchronizing state: Checkin</p>
    <p>CCM Client CCM Controller 200 OK</p>
    <p>DBDB {config: { radio_band: 51,</p>
    <p>...</p>
    <p>},</p>
    <p>events: {seqno: 16}</p>
    <p>subscribers: [...]</p>
    <p>}</p>
    <p>{</p>
    <p>config: {</p>
    <p>radio_band: 51,</p>
    <p>...</p>
    <p>},</p>
    <p>events: {seqno: 16}</p>
    <p>subscribers: [...]</p>
    <p>}</p>
    <p>{ ctx: { config: b9ba2.., events: 12f3b.., ... }</p>
    <p>{ ctx: { config: b9ba2.., events: 12f3b.., ... }</p>
  </div>
  <div class="page">
    <p>{ ctx: { config: b9ba2.., events: 12f3b.., ... }</p>
    <p>{ ctx: { config: b9ba2.., events: a3414.., ... }</p>
    <p>Synchronizing state: Checkin</p>
    <p>CCM Client CCM Controller</p>
    <p>DBDB {</p>
    <p>status: {</p>
    <p>active_users: 24,</p>
    <p>ran_load: 51,</p>
    <p>...</p>
    <p>},</p>
    <p>events: [</p>
    <p>[17, IMSI123, out_sms, ...],</p>
    <p>[18, IMSI345, transfer, ...],</p>
    <p>],</p>
    <p>modified_subs: [...],</p>
    <p>ctx: {...}</p>
    <p>}</p>
    <p>{</p>
    <p>status: {</p>
    <p>active_users: 24,</p>
    <p>ran_load: 51,</p>
    <p>...</p>
    <p>},</p>
    <p>events: [</p>
    <p>[17, IMSI123, out_sms, ...],</p>
    <p>[18, IMSI345, transfer, ...],</p>
    <p>],</p>
    <p>modified_subs: [...],</p>
    <p>ctx: {...}</p>
    <p>}</p>
  </div>
  <div class="page">
    <p>Synchronizing state: Checkin</p>
    <p>CCM Client CCM Controller</p>
    <p>DBDB {config: { radio_band: 51,</p>
    <p>...</p>
    <p>},</p>
    <p>events: {seqno: 16}</p>
    <p>subscribers: [...]</p>
    <p>}</p>
    <p>{</p>
    <p>config: {</p>
    <p>radio_band: 51,</p>
    <p>...</p>
    <p>},</p>
    <p>events: {seqno: 16}</p>
    <p>subscribers: [...]</p>
    <p>}</p>
    <p>{ ctx: { config: b9ba2.., events: a3414.., ... }</p>
    <p>{ ctx: { config: b9ba2.., events: a3414.., ... }</p>
    <p>{</p>
    <p>events: {seqno: 18}</p>
    <p>}</p>
    <p>{</p>
    <p>events: {seqno: 18}</p>
    <p>}</p>
  </div>
  <div class="page">
    <p>Synchronizing state: Billing</p>
    <p>CCM Client</p>
    <p>CCM Controller DB</p>
    <p>DB</p>
    <p>IMSI123:</p>
    <p>{bts1:{+: 500, -: 200}</p>
    <p>}</p>
    <p>Balance: 300</p>
  </div>
  <div class="page">
    <p>Synchronizing state: Billing</p>
    <p>CCM Client</p>
    <p>CCM Controller DB</p>
    <p>DB</p>
    <p>IMSI123:</p>
    <p>{bts1:{+: 500, -: 250}</p>
    <p>}</p>
    <p>Balance: 250</p>
  </div>
  <div class="page">
    <p>Synchronizing state: Billing</p>
    <p>CCM Client</p>
    <p>CCM Controller DB</p>
    <p>DB</p>
    <p>CCM Client</p>
    <p>DB</p>
    <p>IMSI123:</p>
    <p>{bts1:{+: 500, -: 250}</p>
    <p>}</p>
    <p>IMSI123:</p>
    <p>{bts1:{+: 500, -: 250}</p>
    <p>}</p>
    <p>Balance: 250 Balance: 250</p>
  </div>
  <div class="page">
    <p>Synchronizing state: Billing</p>
    <p>CCM Client</p>
    <p>CCM Controller DB</p>
    <p>DB</p>
    <p>CCM Client</p>
    <p>DB</p>
    <p>IMSI123:</p>
    <p>{bts1:{+: 500, -: 250}</p>
    <p>bts2:{+: 0, -: 250}</p>
    <p>}</p>
    <p>IMSI123:</p>
    <p>{bts1:{+: 500, -: 250}</p>
    <p>}</p>
    <p>Balance: 250 Balance: 0</p>
  </div>
  <div class="page">
    <p>Synchronizing state: Billing</p>
    <p>CCM Client</p>
    <p>CCM Controller DB</p>
    <p>DB</p>
    <p>CCM Client</p>
    <p>DB</p>
    <p>IMSI123:</p>
    <p>{bts1:{+: 500, -: 250}</p>
    <p>bts2:{+: 0, -: 250}</p>
    <p>}</p>
    <p>IMSI123:</p>
    <p>{bts1:{+: 500, -: 250}</p>
    <p>bts2:{+: 0, -: 250}</p>
    <p>}</p>
    <p>Balance: 0 Balance: 0</p>
  </div>
  <div class="page">
    <p>Deployment and Evaluation</p>
  </div>
  <div class="page">
    <p>UP Sites Sabang-Limbok Dikapinisan Dibut Diotorin Bacong-Market Dianao</p>
    <p>Globe Sites Tanay Talisay Binobohan Ginulagan Balogo Casalaan Banat-i Mayaposi Golden Valley San Mariano Binucayan</p>
  </div>
  <div class="page">
    <p>Globe</p>
    <p>UP</p>
  </div>
  <div class="page">
    <p>Globe</p>
    <p>UP</p>
    <p>&gt;50k hrs calls &gt;3M SMS</p>
  </div>
  <div class="page">
    <p>~$18,000</p>
  </div>
  <div class="page">
    <p>Online (1hr) Offline (1hr)</p>
  </div>
  <div class="page">
    <p>Online (1hr) Offline (1hr)</p>
    <p>Intermittent outages</p>
    <p>Consistently online</p>
    <p>Extended outage</p>
  </div>
  <div class="page">
    <p>Online (1hr) Offline (1hr)</p>
  </div>
  <div class="page">
    <p>Cause Example</p>
    <p>Backhaul VSAT outage due to weather</p>
    <p>Power Discharged batteries</p>
    <p>Site hardware Overheating</p>
    <p>Site RF Damaged RF cables</p>
    <p>Other Software bug</p>
    <p>Outage causes in UP sites</p>
  </div>
  <div class="page">
    <p>Backhaul</p>
    <p>Power</p>
    <p>HW Failure</p>
    <p>RF Failure</p>
    <p>Other</p>
    <p>Outage causes in UP sites</p>
    <p>%age of incidents by duration</p>
    <p>&lt;1%</p>
  </div>
  <div class="page">
    <p>Backhaul</p>
    <p>Power</p>
    <p>HW Failure</p>
    <p>RF Failure</p>
    <p>Other</p>
    <p>Outage causes in UP sites</p>
    <p>&lt;1%</p>
    <p>Addressed by disconnected operation!</p>
    <p>%age of incidents by duration</p>
  </div>
  <div class="page">
    <p>+19% local calls + SMS</p>
    <p>+16% credit transfers (sales)</p>
  </div>
  <div class="page">
    <p>Request, raw</p>
    <p>Request, optimized</p>
    <p>Response, raw</p>
    <p>Response, optimized</p>
  </div>
  <div class="page">
    <p>&lt; 2.8kB (6 sec call) @ 50th %tile</p>
    <p>Request, raw</p>
    <p>Request, optimized</p>
    <p>Response, raw</p>
    <p>Response, optimized</p>
  </div>
  <div class="page">
    <p>&lt; 392kB (40 sec call) @ 99th %tile</p>
    <p>(~90% savings)</p>
    <p>Request, raw</p>
    <p>Request, optimized</p>
    <p>Response, raw</p>
    <p>Response, optimized</p>
  </div>
  <div class="page">
    <p>Local Services UP Sites - Repair manual SMS app - Promotional billing - SMS outage hotline</p>
  </div>
  <div class="page">
    <p>What next?</p>
  </div>
  <div class="page">
    <p>LTE changes everything.</p>
  </div>
  <div class="page">
    <p>LTE changes everything many things.</p>
  </div>
  <div class="page"/>
  <div class="page">
    <p>Wireless ISP deploying fixed broadband with LTE. Peru, 2017</p>
  </div>
  <div class="page">
    <p>Community network deploying LTE.</p>
    <p>Indonesia, 2019</p>
  </div>
  <div class="page">
    <p>Open source LTE</p>
    <p>Magma (Facebook) github.com/facebookincubator/magma</p>
    <p>CoLTE (U. Washington) github.com/uw-ictd/colte</p>
    <p>OpenAir-CN (OpenAirInterface Alliance) github.com/OPENAIRINTERFACE/openair-cn</p>
    <p>NextEPC github.com/acetcom/nextepc</p>
  </div>
  <div class="page">
    <p>CommunityCellularManager</p>
    <p>networks and telcos 4. Supports the largest community cellular network</p>
    <p>deployment to date</p>
  </div>
  <div class="page">
    <p>Shaddi Hasan shaddi@cs.berkeley.edu</p>
    <p>@shaddih github.com/co-cell/ccm</p>
    <p>Thanks!</p>
  </div>
  <div class="page">
    <p>CCM Core + API (HTTP)</p>
    <p>GSM Core + RAN (e.g., Osmocom)</p>
    <p>SIP Switch</p>
    <p>Billing</p>
    <p>Config + SubDB</p>
    <p>VPN</p>
    <p>Local Apps</p>
    <p>GSM API</p>
    <p>CCM Controller</p>
  </div>
  <div class="page">
    <p>Voice/SMS CCM Controller</p>
    <p>Telco</p>
    <p>CCM Core + API (HTTP)</p>
    <p>GSM Core + RAN (e.g., Osmocom)</p>
    <p>SIP Switch</p>
    <p>Billing</p>
    <p>Config + SubDB</p>
    <p>VPN</p>
    <p>Local Apps</p>
    <p>GSM API</p>
  </div>
  <div class="page">
    <p>Voice/SMS CCM Controller</p>
    <p>Telco</p>
    <p>CCM Core + API (HTTP)</p>
    <p>GSM Core + RAN (e.g., Osmocom)</p>
    <p>SIP Switch</p>
    <p>Billing</p>
    <p>Config + SubDB</p>
    <p>VPN</p>
    <p>Local Apps</p>
    <p>GSM API</p>
    <p>$</p>
  </div>
  <div class="page">
    <p>Controller API</p>
    <p>SMPP + SIP Gateway</p>
    <p>Config + SubDB</p>
    <p>Load Balancer</p>
    <p>SMPP + SIP Gateway</p>
    <p>Web UI</p>
    <p>VPN</p>
    <p>Phone Numbers</p>
    <p>Async Worker</p>
    <p>CCM Site 1 CCM Site 2</p>
    <p>Spectrum</p>
    <p>Licenses</p>
    <p>CCM Site 3 CCM Site N</p>
    <p>CCM Controller</p>
    <p>Telco Core</p>
    <p>CCM Sites</p>
  </div>
  <div class="page">
    <p>CCM Site 1 CCM Site 2 CCM Site 3 CCM Site N</p>
    <p>SMPP + SIP Gateway Phone Numbers</p>
    <p>Spectrum</p>
    <p>Licenses</p>
    <p>Controller API</p>
    <p>Config + SubDB</p>
    <p>Load Balancer</p>
    <p>SMPP + SIP Gateway</p>
    <p>Web UI</p>
    <p>VPN</p>
    <p>Async Worker</p>
    <p>CCM Controller</p>
    <p>Telco Core</p>
  </div>
  <div class="page">
    <p>CCM Site 1 CCM Site 2 CCM Site 3 CCM Site N</p>
    <p>SMPP + SIP Gateway Phone Numbers</p>
    <p>Spectrum</p>
    <p>Licenses</p>
    <p>Controller API</p>
    <p>Config + SubDB</p>
    <p>Load Balancer</p>
    <p>SMPP + SIP Gateway</p>
    <p>Web UI</p>
    <p>VPN</p>
    <p>Async Worker</p>
    <p>CCM Controller</p>
    <p>Telco Core</p>
  </div>
  <div class="page">
    <p>CCM Site 1 CCM Site 2 CCM Site 3 CCM Site N</p>
    <p>SMPP + SIP Gateway Phone Numbers</p>
    <p>Spectrum</p>
    <p>Licenses</p>
    <p>Controller API</p>
    <p>Config + SubDB</p>
    <p>Load Balancer</p>
    <p>SMPP + SIP Gateway</p>
    <p>Web UI</p>
    <p>VPN</p>
    <p>Async Worker</p>
    <p>CCM Controller</p>
    <p>Telco Core</p>
  </div>
  <div class="page">
    <p>CCM Site 1 CCM Site 2 CCM Site 3 CCM Site N</p>
    <p>SMPP + SIP Gateway Phone Numbers</p>
    <p>Spectrum</p>
    <p>Licenses</p>
    <p>Controller API</p>
    <p>Config + SubDB</p>
    <p>Load Balancer</p>
    <p>SMPP + SIP Gateway</p>
    <p>Web UI</p>
    <p>VPN</p>
    <p>Async Worker</p>
    <p>CCM Controller</p>
    <p>Telco Core</p>
  </div>
  <div class="page">
    <p>CCM Controller</p>
    <p>Controller API</p>
    <p>Globe Core</p>
    <p>SMPP + SIP Gateway</p>
    <p>Config + SubDB</p>
    <p>L o</p>
    <p>a d</p>
    <p>B a</p>
    <p>la n</p>
    <p>ce r</p>
    <p>SMPP + SIP Gateway</p>
    <p>Web UI</p>
    <p>V P</p>
    <p>N Phone Numbers Async Worker</p>
    <p>CCM Clients</p>
    <p>UP Site 1</p>
    <p>UP Site N</p>
    <p>Globe Site 1</p>
    <p>Globe Site N</p>
    <p>Spectrum</p>
    <p>Licenses</p>
  </div>
  <div class="page">
    <p>Autonomy for the community. Every site should be able to provide service without reliance on external systems.</p>
  </div>
</Presentation>

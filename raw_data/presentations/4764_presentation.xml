<?xml version="1.0" ?>
<Presentation>
  <div class="page">
    <p>C o</p>
    <p>m p</p>
    <p>ut e</p>
    <p>ie nc</p>
    <p>e , T</p>
    <p>e xa</p>
    <p>s A</p>
    <p>&amp; M</p>
    <p>U ni</p>
    <p>ve rs</p>
    <p>ity</p>
    <p>Characterizing Tight-Link Bandwidth of Multi-Hop Paths Using Probing Response Curves</p>
    <p>Characterizing TightCharacterizing Tight--Link Link Bandwidth of MultiBandwidth of Multi--Hop Paths Hop Paths Using Probing Response CurvesUsing Probing Response Curves</p>
    <p>SeongSeong KangKang Joint work with Dmitri Joint work with Dmitri LoguinovLoguinov</p>
    <p>LTE Systems LabLTE Systems Lab Samsung Electronics, Seoul, KoreaSamsung Electronics, Seoul, Korea</p>
    <p>June 18, 2010June 18, 2010</p>
  </div>
  <div class="page">
    <p>C o</p>
    <p>m p</p>
    <p>ut e</p>
    <p>ie nc</p>
    <p>e , T</p>
    <p>e xa</p>
    <p>s A</p>
    <p>&amp; M</p>
    <p>U ni</p>
    <p>ve rs</p>
    <p>ity</p>
    <p>Introduction  Motivation and goals  Definition of bandwidth</p>
    <p>PRC-MT  Basic idea and issues  Proposed approach</p>
    <p>Evaluation  With and without interrupt delay</p>
    <p>Conclusion</p>
    <p>AgendaAgendaAgenda</p>
  </div>
  <div class="page">
    <p>C o</p>
    <p>m p</p>
    <p>ut e</p>
    <p>ie nc</p>
    <p>e , T</p>
    <p>e xa</p>
    <p>s A</p>
    <p>&amp; M</p>
    <p>U ni</p>
    <p>ve rs</p>
    <p>ity</p>
    <p>MotivationMotivationMotivation</p>
    <p>Bandwidth estimation is an important area of Internet research  Plays an important role in characterizing network paths  Potentially can help various Internet applications</p>
    <p>The vast majority of existing approaches focuses on end-to-end measurements</p>
  </div>
  <div class="page">
    <p>C o</p>
    <p>m p</p>
    <p>ut e</p>
    <p>ie nc</p>
    <p>e , T</p>
    <p>e xa</p>
    <p>s A</p>
    <p>&amp; M</p>
    <p>U ni</p>
    <p>ve rs</p>
    <p>ity</p>
    <p>Existing approaches can be classified into measurement tools and theoretical models</p>
    <p>Measurement tools  Usually based on extensive simulation  But, no convergence analysis with general cross-traffic</p>
    <p>Theoretical models  Usually have provable convergence  But, no practical implementation</p>
    <p>In addition, OS and hardware-related timing irregularities make delay measurements not perfect</p>
    <p>Cause unknown performance issues in real networks</p>
    <p>Motivation 2Motivation 2Motivation 2</p>
  </div>
  <div class="page">
    <p>C o</p>
    <p>m p</p>
    <p>ut e</p>
    <p>ie nc</p>
    <p>e , T</p>
    <p>e xa</p>
    <p>s A</p>
    <p>&amp; M</p>
    <p>U ni</p>
    <p>ve rs</p>
    <p>ity</p>
    <p>Develop a practical measurement tool based on a recent theoretical model</p>
    <p>Achieves asymptotic accuracy in multi-hop path networks with arbitrary cross-traffic</p>
    <p>Simultaneously measures both the capacity and available bandwidth of the tight link</p>
    <p>Robust to various timing irregularities</p>
    <p>GoalsGoalsGoals</p>
  </div>
  <div class="page">
    <p>C o</p>
    <p>m p</p>
    <p>ut e</p>
    <p>ie nc</p>
    <p>e , T</p>
    <p>e xa</p>
    <p>s A</p>
    <p>&amp; M</p>
    <p>U ni</p>
    <p>ve rs</p>
    <p>ity</p>
    <p>Definition of Bandwidth 1Definition of Bandwidth 1Definition of Bandwidth 1</p>
    <p>Bottleneck bandwidth  Capacity of the slowest link of a path  The slowest link is often called narrow link</p>
    <p>Available bandwidth  The smallest unused bandwidth of links in the path  The link with the smallest unused bandwidth is called</p>
    <p>tight link</p>
  </div>
  <div class="page">
    <p>C o</p>
    <p>m p</p>
    <p>ut e</p>
    <p>ie nc</p>
    <p>e , T</p>
    <p>e xa</p>
    <p>s A</p>
    <p>&amp; M</p>
    <p>U ni</p>
    <p>ve rs</p>
    <p>ity</p>
    <p>Definition of Bandwidth 2Definition of Bandwidth 2Definition of Bandwidth 2</p>
    <p>Available bandwidth of the path: A = 12</p>
    <p>tight link, capacity = 50</p>
    <p>narrow link bottleneck capacity = 20</p>
  </div>
  <div class="page">
    <p>C o</p>
    <p>m p</p>
    <p>ut e</p>
    <p>ie nc</p>
    <p>e , T</p>
    <p>e xa</p>
    <p>s A</p>
    <p>&amp; M</p>
    <p>U ni</p>
    <p>ve rs</p>
    <p>ity</p>
    <p>PRC-MT is a practical implementation that exploits certain characteristics of input probing rate rI and corresponding arrival rate rO rI represents the average sending rate of packets in a</p>
    <p>probe-packet train of size N rO represents the average rate of probe packets</p>
    <p>arriving at the receiver</p>
    <p>PRC-MT utilizes the concept of Probing Response Curve (PRC), which is a functional relationship between rI and rI / rO</p>
    <p>PRC-MTPRCPRC--MTMT</p>
  </div>
  <div class="page">
    <p>C o</p>
    <p>m p</p>
    <p>ut e</p>
    <p>ie nc</p>
    <p>e , T</p>
    <p>e xa</p>
    <p>s A</p>
    <p>&amp; M</p>
    <p>U ni</p>
    <p>ve rs</p>
    <p>ity</p>
    <p>Define F to be the ratio of rI and rO under fluid cross-traffic</p>
    <p>Basic IdeaBasic IdeaBasic Idea</p>
    <p>tight-link available bandwidth</p>
    <p>tight-link capacity</p>
    <p>a certain input rate that is no less than the second smallest available bandwidth of the path</p>
    <p>amount of cross-traffic that traverses the tight link</p>
  </div>
  <div class="page">
    <p>C o</p>
    <p>m p</p>
    <p>ut e</p>
    <p>ie nc</p>
    <p>e , T</p>
    <p>e xa</p>
    <p>s A</p>
    <p>&amp; M</p>
    <p>U ni</p>
    <p>ve rs</p>
    <p>ity</p>
    <p>Hypothetical fluid response curve F</p>
    <p>Note that At is identified by the first break point</p>
    <p>Ct can be extracted by taking inverse of the slope () of the second line segment Ct = 1/</p>
    <p>Basic Idea 2Basic Idea 2Basic Idea 2</p>
    <p>consists of piece-wise linear segments (at least two in a multi-link path)</p>
  </div>
  <div class="page">
    <p>C o</p>
    <p>m p</p>
    <p>ut e</p>
    <p>ie nc</p>
    <p>e , T</p>
    <p>e xa</p>
    <p>s A</p>
    <p>&amp; M</p>
    <p>U ni</p>
    <p>ve rs</p>
    <p>ity</p>
    <p>Real response curve Z is different from the fluid counter part F (with finite probe-train size N and finite probe packet size q Z  F &gt; 0 in real networks</p>
    <p>Practical IssuesPractical IssuesPractical Issues</p>
    <p>When probe-train length N is small, Z fluctuates substantially and exhibits large deviation from F</p>
    <p>When N increases, Z shows prominent two linear lines and its deviation from F becomes smaller</p>
  </div>
  <div class="page">
    <p>C o</p>
    <p>m p</p>
    <p>ut e</p>
    <p>ie nc</p>
    <p>e , T</p>
    <p>e xa</p>
    <p>s A</p>
    <p>&amp; M</p>
    <p>U ni</p>
    <p>ve rs</p>
    <p>ity</p>
    <p>For accurate discovery of the first break point, variation in Z should be small for different rI</p>
    <p>More importantly, the second line segment should be parallel to that in F  If the second segments in Z and F are parallel, then</p>
    <p>we can use any two points on the second segment in Z to compute its slope</p>
    <p>However, fluctuation of line segments in Z depends on probe parameters and unknown path characteristics</p>
    <p>Practical Issues 2Practical Issues 2Practical Issues 2</p>
  </div>
  <div class="page">
    <p>C o</p>
    <p>m p</p>
    <p>ut e</p>
    <p>ie nc</p>
    <p>e , T</p>
    <p>e xa</p>
    <p>s A</p>
    <p>&amp; M</p>
    <p>U ni</p>
    <p>ve rs</p>
    <p>ity</p>
    <p>Hence, selection of path-specific N for a given probe-packet size is very important</p>
    <p>N needs to be large enough to obtain reliable line segments  However, it is desirable to have as small N as possible</p>
    <p>to reduce measurement overhead and avoid too much packet loss within a probe train</p>
    <p>In addition, building PRC requires substantial probing overhead since At could be anywhere between 0 and Ct</p>
    <p>Practical Issues 3Practical Issues 3Practical Issues 3</p>
  </div>
  <div class="page">
    <p>C o</p>
    <p>m p</p>
    <p>ut e</p>
    <p>ie nc</p>
    <p>e , T</p>
    <p>e xa</p>
    <p>s A</p>
    <p>&amp; M</p>
    <p>U ni</p>
    <p>ve rs</p>
    <p>ity</p>
    <p>Probe for path-specific probing parameters  Probe for an initial input rate rI with a single-probe train  Employ iterative probing for packet-train length N in</p>
    <p>binary search fashion</p>
    <p>Do not build entire PRC to reduce probing overhead  Instead employ binary search-like iterative probing for</p>
    <p>available bandwidth At  Extract tight-link capacity Ct without additional probing</p>
    <p>Proposed ApproachProposed ApproachProposed Approach</p>
  </div>
  <div class="page">
    <p>C o</p>
    <p>m p</p>
    <p>ut e</p>
    <p>ie nc</p>
    <p>e , T</p>
    <p>e xa</p>
    <p>s A</p>
    <p>&amp; M</p>
    <p>U ni</p>
    <p>ve rs</p>
    <p>ity</p>
    <p>First, probe for an initial rate rI by sending a single probe-train  Compute rI = q/E[y]</p>
    <p>Next, note that rI/rO saturates at a certain value as N becomes large</p>
    <p>Thus, iteratively probe for the smallest N based on a binary search between Nmin and Nmax, while keeping the variation of rI/rO within a certain threshold</p>
    <p>Parameter SelectionParameter SelectionParameter Selection</p>
    <p>average inter-packet dispersion of packets in the probe-train</p>
  </div>
  <div class="page">
    <p>C o</p>
    <p>m p</p>
    <p>ut e</p>
    <p>ie nc</p>
    <p>e , T</p>
    <p>e xa</p>
    <p>s A</p>
    <p>&amp; M</p>
    <p>U ni</p>
    <p>ve rs</p>
    <p>ity</p>
    <p>Available bandwidth (At)  iterative probing (1) In k-th iteration, sends probe-trains with rate R(k)</p>
    <p>(if k = 0, R(k) is set to the initial rI) (2) If asserted to be R(k) &gt; rO, then update the upper</p>
    <p>bandwidth bound WH = R(k) and records (R(k), rO) pair</p>
    <p>(3) If asserted to be R(k) &lt; rO, then update the lower bandwidth bound WL = R(k)</p>
    <p>(4) Compute R(k+1) = (WH + WL) / 2 for next iteration (5) If WH  WL  threshold, return At = (WH + WL)/2 (6) Otherwise, repeat steps (1)  (4)</p>
    <p>Bandwidth Probing Bandwidth Probing Bandwidth Probing</p>
  </div>
  <div class="page">
    <p>C o</p>
    <p>m p</p>
    <p>ut e</p>
    <p>ie nc</p>
    <p>e , T</p>
    <p>e xa</p>
    <p>s A</p>
    <p>&amp; M</p>
    <p>U ni</p>
    <p>ve rs</p>
    <p>ity</p>
    <p>Capacity (Ct) (1) Select two (R(k), rO) pairs recorded in the At probing</p>
    <p>step (2), which is the farthest two points that satisfy R(k)  WH</p>
    <p>(2) Compute the slope () of the line segment connecting the two points</p>
    <p>(3) Then, return 1/ as an estimate of Ct</p>
    <p>Bandwidth Probing 2Bandwidth Probing 2Bandwidth Probing 2</p>
  </div>
  <div class="page">
    <p>C o</p>
    <p>m p</p>
    <p>ut e</p>
    <p>ie nc</p>
    <p>e , T</p>
    <p>e xa</p>
    <p>s A</p>
    <p>&amp; M</p>
    <p>U ni</p>
    <p>ve rs</p>
    <p>ity</p>
    <p>Interrupt moderation is widely used with modern Gigabit network cards  Reduce CPU utilization and increase network</p>
    <p>throughput</p>
    <p>At a single interrupt, NIC delivers multiple packets to the kernel</p>
    <p>Interrupt DelaysInterrupt DelaysInterrupt Delays</p>
    <p>time</p>
    <p>packets received after the last interrupt NIC delivers packets in a burst</p>
  </div>
  <div class="page">
    <p>C o</p>
    <p>m p</p>
    <p>ut e</p>
    <p>ie nc</p>
    <p>e , T</p>
    <p>e xa</p>
    <p>s A</p>
    <p>&amp; M</p>
    <p>U ni</p>
    <p>ve rs</p>
    <p>ity</p>
    <p>A wide range of interrupt delays with Intel Gigabit NICs  83  250 usec for Windows  125  1000 usec for Linux</p>
    <p>Some study suggests at least 470 usec delay to achieve good throughput and substantially reduce CPU utilization</p>
    <p>Interrupt Delays 2Interrupt Delays 2Interrupt Delays 2</p>
  </div>
  <div class="page">
    <p>C o</p>
    <p>m p</p>
    <p>ut e</p>
    <p>ie nc</p>
    <p>e , T</p>
    <p>e xa</p>
    <p>s A</p>
    <p>&amp; M</p>
    <p>U ni</p>
    <p>ve rs</p>
    <p>ity</p>
    <p>IGI/PTR, Spruce, CapProbe  Not accurate regardless of an interrupt delay ()</p>
    <p>Pathchirp  Accurate, but requires substantially more probe data</p>
    <p>with non-trivial   Prolonged measurement duration</p>
    <p>Pathload  Accurate with small delays (less than 125 usec)  Becomes unreliable when  &gt; 125 usec</p>
    <p>IMRP significantly improves Pathloads estimation reliability  Use wavelet-based signal de-noising</p>
    <p>Impact of Interrupt DelaysImpact of Interrupt DelaysImpact of Interrupt Delays</p>
  </div>
  <div class="page">
    <p>C o</p>
    <p>m p</p>
    <p>ut e</p>
    <p>ie nc</p>
    <p>e , T</p>
    <p>e xa</p>
    <p>s A</p>
    <p>&amp; M</p>
    <p>U ni</p>
    <p>ve rs</p>
    <p>ity</p>
    <p>Evaluation TopologyEvaluation TopologyEvaluation Topology</p>
  </div>
  <div class="page">
    <p>C o</p>
    <p>m p</p>
    <p>ut e</p>
    <p>ie nc</p>
    <p>e , T</p>
    <p>e xa</p>
    <p>s A</p>
    <p>&amp; M</p>
    <p>U ni</p>
    <p>ve rs</p>
    <p>ity</p>
    <p>Experimental SetupExperimental SetupExperimental Setup</p>
    <p>Shaded values represent tight-link capacity Ct and available bandwidth At of the path for each case</p>
    <p>Values in square brackets are the capacities Cn of the narrow link</p>
  </div>
  <div class="page">
    <p>C o</p>
    <p>m p</p>
    <p>ut e</p>
    <p>ie nc</p>
    <p>e , T</p>
    <p>e xa</p>
    <p>s A</p>
    <p>&amp; M</p>
    <p>U ni</p>
    <p>ve rs</p>
    <p>ity</p>
    <p>Under no interrupt delay</p>
    <p>Performance ComparisonPerformance ComparisonPerformance Comparison</p>
    <p>Available bandwidth estimation error</p>
    <p>Capacity Estimation Error</p>
  </div>
  <div class="page">
    <p>C o</p>
    <p>m p</p>
    <p>ut e</p>
    <p>ie nc</p>
    <p>e , T</p>
    <p>e xa</p>
    <p>s A</p>
    <p>&amp; M</p>
    <p>U ni</p>
    <p>ve rs</p>
    <p>ity</p>
    <p>Interrupt delay: 500 usec</p>
    <p>Performance Comparison 2Performance Comparison 2Performance Comparison 2</p>
    <p>Available bandwidth estimation error</p>
    <p>Capacity Estimation Error</p>
  </div>
  <div class="page">
    <p>C o</p>
    <p>m p</p>
    <p>ut e</p>
    <p>ie nc</p>
    <p>e , T</p>
    <p>e xa</p>
    <p>s A</p>
    <p>&amp; M</p>
    <p>U ni</p>
    <p>ve rs</p>
    <p>ity</p>
    <p>Proposed a new bandwidth measurement tool called PRC-MT  Exploits characteristics of probing response curves  Extracts both bandwidth metrics of the tight link over</p>
    <p>multi-hop paths</p>
    <p>Evaluated PRC-MT with other existing tools under non-trivial interrupt delay  PRC-MT produced available bandwidth and capacity</p>
    <p>estimates with high accuracy  Timing irregularity caused by interrupt moderation</p>
    <p>significantly affects performance of tools such as Pathload</p>
    <p>ConclusionConclusionConclusion</p>
  </div>
  <div class="page">
    <p>C o</p>
    <p>m p</p>
    <p>ut e</p>
    <p>ie nc</p>
    <p>e , T</p>
    <p>e xa</p>
    <p>s A</p>
    <p>&amp; M</p>
    <p>U ni</p>
    <p>ve rs</p>
    <p>ity</p>
    <p>Thank you!</p>
  </div>
</Presentation>

<?xml version="1.0" ?>
<Presentation>
  <div class="page">
    <p>INSTalytics: Cluster Filesystem Co-design for Big-data Analytics</p>
    <p>Muthian Sivathanu, Midhul Vuppalapati, Bhargav S. Gulavani,</p>
    <p>Kaushik Rajan, Jyoti Leeka, Jayashree Mohan, Piyus Kedia</p>
    <p>Microsoft Research India</p>
  </div>
  <div class="page">
    <p>Big-data Analytics: Motivation</p>
    <p>Queries to measure, understand &amp; derive intelligence from data</p>
    <p>Huge business value (billion $ industry)  Large internet companies -&gt; massive data</p>
    <p>Store &amp; process Exabytes of data per week</p>
    <p>Analytics as a Service offerings</p>
    <p>Several Frameworks  Extensive research work over past decade</p>
  </div>
  <div class="page">
    <p>Problem statement</p>
    <p>Large-scale analytics queries (100TBs - PBs)  Very expensive to store in DRAM / on SSD</p>
    <p>Take several hours to execute (on 1000s of machines)</p>
    <p>Consume significant CPU, Disk, Network resources</p>
    <p>Two problems  High latency for users</p>
    <p>Huge resource/machine cost for service provider</p>
    <p>Goal: Improve efficiency of large scale analytics processing</p>
  </div>
  <div class="page">
    <p>Approach at a glance</p>
    <p>Todays Systems</p>
    <p>Cluster Filesystem</p>
    <p>Read_Block, Append_Block</p>
  </div>
  <div class="page">
    <p>Approach at a glance</p>
    <p>Compute-aware Storage can drive significant efficiency in analytics</p>
    <p>Todays Systems</p>
    <p>Cluster Filesystem</p>
    <p>Co-Designed</p>
    <p>Cluster Filesystem</p>
    <p>Read_Block, Append_Block</p>
  </div>
  <div class="page">
    <p>Approach at a glance</p>
    <p>Compute-aware Storage can drive significant efficiency in analytics</p>
    <p>Todays Systems</p>
    <p>Cluster Filesystem</p>
    <p>Co-Designed</p>
    <p>Cluster Filesystem</p>
    <p>INSTalytics (Intelligent Store-powered Analytics)</p>
    <p>Improves Query Performance</p>
    <p>Read_Block, Append_Block</p>
    <p>Latency + Execution cost</p>
    <p>No strings attached!</p>
  </div>
  <div class="page">
    <p>Outline</p>
    <p>Introduction</p>
    <p>Design &amp; Evaluation 1.) Key mechanism at storage layer 2.) Efficient Query Execution</p>
    <p>Implementation</p>
    <p>Summary</p>
  </div>
  <div class="page">
    <p>Partitioning</p>
    <p>Common Techniques used today</p>
  </div>
  <div class="page">
    <p>Partitioning</p>
    <p>Common Techniques used today</p>
  </div>
  <div class="page">
    <p>Partitioning</p>
    <p>Retrieve all click records with domain == cnn</p>
    <p>Common Techniques used today</p>
    <p>(Filter Query)</p>
  </div>
  <div class="page">
    <p>Partitioning</p>
    <p>Retrieve all click records with domain == cnn</p>
    <p>Common Techniques used today</p>
    <p>(Filter Query)</p>
  </div>
  <div class="page">
    <p>Partitioning</p>
    <p>Partitioning + Co-location</p>
    <p>Retrieve all click records with domain == cnn</p>
    <p>Common Techniques used today</p>
    <p>(Filter Query)</p>
  </div>
  <div class="page">
    <p>Partitioning</p>
    <p>Partitioning + Co-location</p>
    <p>Retrieve all click records with domain == cnn</p>
    <p>Common Techniques used today</p>
    <p>(Filter Query)</p>
  </div>
  <div class="page">
    <p>Partitioning</p>
    <p>Partitioning + Co-location</p>
    <p>Retrieve all click records with domain == cnn</p>
    <p>Common Techniques used today</p>
    <p>(Filter Query)</p>
    <p>(Join Query)</p>
  </div>
  <div class="page">
    <p>Partitioning</p>
    <p>Partitioning + Co-location</p>
    <p>Retrieve all click records with domain == cnn</p>
    <p>Common Techniques used today</p>
    <p>(Filter Query)</p>
    <p>(Join Query)</p>
  </div>
  <div class="page">
    <p>Partitioning</p>
    <p>Partitioning + Co-location</p>
    <p>Retrieve all click records with domain == cnn</p>
    <p>Common Techniques used today</p>
    <p>(Filter Query)</p>
    <p>(Join Query)</p>
  </div>
  <div class="page">
    <p>But, utility is limited</p>
    <p>Only one column can be chosen for partitioning or collocation  Helps only small set of queries that happen to filter/join on that column</p>
    <p>Queries on other columns still slow!</p>
    <p>How to get multiple partitioning/co-location strategies?  Only option: Maintain multiple copies of file</p>
    <p>Prohibitive storage cost</p>
    <p>Cost of maintaining consistency</p>
  </div>
  <div class="page">
    <p>Logical Replication</p>
    <p>Can we get multiple partition orders without extra storage cost?  Answer: Yes!</p>
    <p>Key insight: Piggyback on replication done by cluster filesystem</p>
    <p>Today: Physical replication  All 3 copies of a file are identical byte-wise replicas</p>
    <p>Logical replication: Each replica of file partitioned differently  Benefit: 3 partition orders with no extra storage cost!</p>
  </div>
  <div class="page">
    <p>Are 3 partition orders enough?</p>
    <p>Analyzed one week of jobs on a production cluster</p>
    <p>Large input files (100GB+): How many columns used in filters / joins?</p>
    <p>fr a</p>
    <p>ct io</p>
    <p>n o</p>
    <p>f la</p>
    <p>rg e</p>
    <p>f il</p>
    <p>e s</p>
    <p>Columns used for filters and equijoins</p>
  </div>
  <div class="page">
    <p>Are 3 partition orders enough?</p>
    <p>One partition order covers only 35% of files</p>
    <p>3 diff. partition orders cover 75% of files</p>
    <p>Analyzed one week of jobs on a production cluster</p>
    <p>Large input files (100GB+): How many columns used in filters / joins?</p>
    <p>fr a</p>
    <p>ct io</p>
    <p>n o</p>
    <p>f la</p>
    <p>rg e</p>
    <p>f il</p>
    <p>e s</p>
    <p>Columns used for filters and equijoins</p>
  </div>
  <div class="page">
    <p>physical file logical replica 1 logical replica 2 logical replica 3</p>
    <p>un-partitioned partitioned C1 partitioned C2 partitioned C3</p>
    <p>C1 C2 C3 C1 C2 C3 C1 C2 C3 C1 C2 C3</p>
    <p>E1 50 210 250 R3 60 220 120 R10 150 50 320 R9 110 50 50 R2</p>
    <p>E2 120 320 20 R9 150 50 320 R9 240 120 320 R8 60 220 120 R10</p>
    <p>E3 150 50 380 R15 220 80 180 R11 50 210 250 R3 310 80 220 R19</p>
    <p>E4 320 300 210 R21 310 80 220 R19 120 320 20 R9 250 220 310 R22</p>
    <p>Challenge: Recovery cost</p>
  </div>
  <div class="page">
    <p>physical file logical replica 1 logical replica 2 logical replica 3</p>
    <p>un-partitioned partitioned C1 partitioned C2 partitioned C3</p>
    <p>C1 C2 C3 C1 C2 C3 C1 C2 C3 C1 C2 C3</p>
    <p>E1 50 210 250 R3 60 220 120 R10 150 50 320 R9 110 50 50 R2</p>
    <p>E2 120 320 20 R9 150 50 320 R9 240 120 320 R8 60 220 120 R10</p>
    <p>E3 150 50 380 R15 220 80 180 R11 50 210 250 R3 310 80 220 R19</p>
    <p>E4 320 300 210 R21 310 80 220 R19 120 320 20 R9 250 220 310 R22</p>
    <p>Challenge: Recovery cost</p>
    <p>Physical Replication</p>
    <p>Recovery: Copy from another replica (Extent: 250MB)</p>
  </div>
  <div class="page">
    <p>physical file logical replica 1 logical replica 2 logical replica 3</p>
    <p>un-partitioned partitioned C1 partitioned C2 partitioned C3</p>
    <p>C1 C2 C3 C1 C2 C3 C1 C2 C3 C1 C2 C3</p>
    <p>E1 50 210 250 R3 60 220 120 R10 150 50 320 R9 110 50 50 R2</p>
    <p>E2 120 320 20 R9 150 50 320 R9 240 120 320 R8 60 220 120 R10</p>
    <p>E3 150 50 380 R15 220 80 180 R11 50 210 250 R3 310 80 220 R19</p>
    <p>E4 320 300 210 R21 310 80 220 R19 120 320 20 R9 250 220 310 R22</p>
    <p>Challenge: Recovery cost</p>
    <p>Physical Replication</p>
    <p>Recovery: Copy from another replica (Extent: 250MB)1-100</p>
  </div>
  <div class="page">
    <p>physical file logical replica 1 logical replica 2 logical replica 3</p>
    <p>un-partitioned partitioned C1 partitioned C2 partitioned C3</p>
    <p>C1 C2 C3 C1 C2 C3 C1 C2 C3 C1 C2 C3</p>
    <p>E1 50 210 250 R3 60 220 120 R10 150 50 320 R9 110 50 50 R2</p>
    <p>E2 120 320 20 R9 150 50 320 R9 240 120 320 R8 60 220 120 R10</p>
    <p>E3 150 50 380 R15 220 80 180 R11 50 210 250 R3 310 80 220 R19</p>
    <p>E4 320 300 210 R21 310 80 220 R19 120 320 20 R9 250 220 310 R22</p>
    <p>Challenge: Recovery cost</p>
    <p>Physical Replication</p>
    <p>Recovery: Copy from another replica (Extent: 250MB)1-100</p>
  </div>
  <div class="page">
    <p>physical file logical replica 1 logical replica 2 logical replica 3</p>
    <p>un-partitioned partitioned C1 partitioned C2 partitioned C3</p>
    <p>C1 C2 C3 C1 C2 C3 C1 C2 C3 C1 C2 C3</p>
    <p>E1 50 210 250 R3 60 220 120 R10 150 50 320 R9 110 50 50 R2</p>
    <p>E2 120 320 20 R9 150 50 320 R9 240 120 320 R8 60 220 120 R10</p>
    <p>E3 150 50 380 R15 220 80 180 R11 50 210 250 R3 310 80 220 R19</p>
    <p>E4 320 300 210 R21 310 80 220 R19 120 320 20 R9 250 220 310 R22</p>
    <p>Challenge: Recovery cost</p>
    <p>Physical Replication</p>
    <p>Recovery: Copy from another replica (Extent: 250MB)1-100</p>
  </div>
  <div class="page">
    <p>physical file logical replica 1 logical replica 2 logical replica 3</p>
    <p>un-partitioned partitioned C1 partitioned C2 partitioned C3</p>
    <p>C1 C2 C3 C1 C2 C3 C1 C2 C3 C1 C2 C3</p>
    <p>E1 50 210 250 R3 60 220 120 R10 150 50 320 R9 110 50 50 R2</p>
    <p>E2 120 320 20 R9 150 50 320 R9 240 120 320 R8 60 220 120 R10</p>
    <p>E3 150 50 380 R15 220 80 180 R11 50 210 250 R3 310 80 220 R19</p>
    <p>E4 320 300 210 R21 310 80 220 R19 120 320 20 R9 250 220 310 R22</p>
    <p>Challenge: Recovery cost</p>
    <p>Physical Replication</p>
    <p>Recovery: Copy from another replica (Extent: 250MB)1-100</p>
  </div>
  <div class="page">
    <p>physical file logical replica 1 logical replica 2 logical replica 3</p>
    <p>un-partitioned partitioned C1 partitioned C2 partitioned C3</p>
    <p>C1 C2 C3 C1 C2 C3 C1 C2 C3 C1 C2 C3</p>
    <p>E1 50 210 250 R3 60 220 120 R10 150 50 320 R9 110 50 50 R2</p>
    <p>E2 120 320 20 R9 150 50 320 R9 240 120 320 R8 60 220 120 R10</p>
    <p>E3 150 50 380 R15 220 80 180 R11 50 210 250 R3 310 80 220 R19</p>
    <p>E4 320 300 210 R21 310 80 220 R19 120 320 20 R9 250 220 310 R22</p>
    <p>Challenge: Recovery cost</p>
    <p>Physical Replication</p>
    <p>Recovery: Copy from another replica (Extent: 250MB)1-100</p>
  </div>
  <div class="page">
    <p>physical file logical replica 1 logical replica 2 logical replica 3</p>
    <p>un-partitioned partitioned C1 partitioned C2 partitioned C3</p>
    <p>C1 C2 C3 C1 C2 C3 C1 C2 C3 C1 C2 C3</p>
    <p>E1 50 210 250 R3 60 220 120 R10 150 50 320 R9 110 50 50 R2</p>
    <p>E2 120 320 20 R9 150 50 320 R9 240 120 320 R8 60 220 120 R10</p>
    <p>E3 150 50 380 R15 220 80 180 R11 50 210 250 R3 310 80 220 R19</p>
    <p>E4 320 300 210 R21 310 80 220 R19 120 320 20 R9 250 220 310 R22</p>
    <p>Challenge: Recovery cost</p>
    <p>Physical Replication</p>
    <p>Recovery: Copy from another replica (Extent: 250MB)1-100</p>
  </div>
  <div class="page">
    <p>physical file logical replica 1 logical replica 2 logical replica 3</p>
    <p>un-partitioned partitioned C1 partitioned C2 partitioned C3</p>
    <p>C1 C2 C3 C1 C2 C3 C1 C2 C3 C1 C2 C3</p>
    <p>E1 50 210 250 R3 60 220 120 R10 150 50 320 R9 110 50 50 R2</p>
    <p>E2 120 320 20 R9 150 50 320 R9 240 120 320 R8 60 220 120 R10</p>
    <p>E3 150 50 380 R15 220 80 180 R11 50 210 250 R3 310 80 220 R19</p>
    <p>E4 320 300 210 R21 310 80 220 R19 120 320 20 R9 250 220 310 R22</p>
    <p>Challenge: Recovery cost</p>
    <p>Physical Replication</p>
    <p>Recovery: Copy from another replica (Extent: 250MB)1-100</p>
  </div>
  <div class="page">
    <p>physical file logical replica 1 logical replica 2 logical replica 3</p>
    <p>un-partitioned partitioned C1 partitioned C2 partitioned C3</p>
    <p>C1 C2 C3 C1 C2 C3 C1 C2 C3 C1 C2 C3</p>
    <p>E1 50 210 250 R3 60 220 120 R10 150 50 320 R9 110 50 50 R2</p>
    <p>E2 120 320 20 R9 150 50 320 R9 240 120 320 R8 60 220 120 R10</p>
    <p>E3 150 50 380 R15 220 80 180 R11 50 210 250 R3 310 80 220 R19</p>
    <p>E4 320 300 210 R21 310 80 220 R19 120 320 20 R9 250 220 310 R22</p>
    <p>Challenge: Recovery cost</p>
    <p>Physical Replication</p>
    <p>Recovery: Copy from another replica (Extent: 250MB)1-100</p>
  </div>
  <div class="page">
    <p>physical file logical replica 1 logical replica 2 logical replica 3</p>
    <p>un-partitioned partitioned C1 partitioned C2 partitioned C3</p>
    <p>C1 C2 C3 C1 C2 C3 C1 C2 C3 C1 C2 C3</p>
    <p>E1 50 210 250 R3 60 220 120 R10 150 50 320 R9 110 50 50 R2</p>
    <p>E2 120 320 20 R9 150 50 320 R9 240 120 320 R8 60 220 120 R10</p>
    <p>E3 150 50 380 R15 220 80 180 R11 50 210 250 R3 310 80 220 R19</p>
    <p>E4 320 300 210 R21 310 80 220 R19 120 320 20 R9 250 220 310 R22</p>
    <p>Challenge: Recovery cost</p>
    <p>Nave Logical Replication</p>
    <p>Prohibitive recovery cost!</p>
    <p>Physical Replication</p>
    <p>Recovery: Copy from another replica (Extent: 250MB)1-100</p>
  </div>
  <div class="page">
    <p>logical replica 1 logical replica 2 logical replica 3</p>
    <p>partitioned C1 partitioned C2 partitioned C3</p>
    <p>C1 C2 C3 C1 C2 C3 C1 C2 C3 10 100 200 R1 110 50 50 R2 120 320 20 R9 50 210 250 R3 220 80 180 R11 110 50 50 R2</p>
    <p>E1 60 220 120 R10 10 100 200 R1 310 380 80 R5 110 50 50 R2 240 120 320 R8 200 380 80 R12 110 140 330 R6 110 140 330 R6 60 220 120 R10 120 320 20 R9 200 150 300 R4 220 80 180 R11 200 380 80 R12 50 210 250 R3 10 100 200 R1 200 150 300 R4 60 220 120 R10 300 320 220 R7</p>
    <p>E2 220 80 180 R11 120 320 20 R9 50 210 250 R3 240 120 320 R8 300 320 220 R7 200 150 300 R4 300 320 220 R7 310 380 80 R5 240 120 320 R8 310 380 80 R5 200 380 80 R12 110 140 330 R6</p>
    <p>E3 80 120 120 R24 310 80 220 R19 370 320 100 R17 150 50 380 R15 180 80 220 R23 80 120 120 R24 180 80 220 R23 80 120 120 R24 310 230 120 R20 180 210 310 R18 280 120 180 R16 280 120 180 R16 250 220 310 R22 80 210 90 R13 320 300 210 R21 280 120 180 R16 180 210 310 R18 180 80 220 R23</p>
    <p>E4 310 80 220 R19 250 220 310 R22 310 80 220 R19 310 230 120 R20 310 230 120 R20 250 220 310 R22 320 300 210 R21 320 300 210 R21 180 210 310 R18 370 320 100 R17 370 320 100 R17 150 50 380 R15</p>
    <p>Super Extents</p>
    <p>S u</p>
    <p>p e</p>
    <p>r-E xte</p>
    <p>n t 1</p>
    <p>S u</p>
    <p>p e</p>
    <p>r-E xte</p>
    <p>n t 2</p>
    <p>Super Extent</p>
    <p>Contiguous group of fixed # of extents</p>
    <p>Super extent size</p>
    <p>Re-order records at super-extent level</p>
  </div>
  <div class="page">
    <p>logical replica 1 logical replica 2 logical replica 3</p>
    <p>partitioned C1 partitioned C2 partitioned C3</p>
    <p>C1 C2 C3 C1 C2 C3 C1 C2 C3 10 100 200 R1 110 50 50 R2 120 320 20 R9 50 210 250 R3 220 80 180 R11 110 50 50 R2</p>
    <p>E1 60 220 120 R10 10 100 200 R1 310 380 80 R5 110 50 50 R2 240 120 320 R8 200 380 80 R12 110 140 330 R6 110 140 330 R6 60 220 120 R10 120 320 20 R9 200 150 300 R4 220 80 180 R11 200 380 80 R12 50 210 250 R3 10 100 200 R1 200 150 300 R4 60 220 120 R10 300 320 220 R7</p>
    <p>E2 220 80 180 R11 120 320 20 R9 50 210 250 R3 240 120 320 R8 300 320 220 R7 200 150 300 R4 300 320 220 R7 310 380 80 R5 240 120 320 R8 310 380 80 R5 200 380 80 R12 110 140 330 R6</p>
    <p>E3 80 120 120 R24 310 80 220 R19 370 320 100 R17 150 50 380 R15 180 80 220 R23 80 120 120 R24 180 80 220 R23 80 120 120 R24 310 230 120 R20 180 210 310 R18 280 120 180 R16 280 120 180 R16 250 220 310 R22 80 210 90 R13 320 300 210 R21 280 120 180 R16 180 210 310 R18 180 80 220 R23</p>
    <p>E4 310 80 220 R19 250 220 310 R22 310 80 220 R19 310 230 120 R20 310 230 120 R20 250 220 310 R22 320 300 210 R21 320 300 210 R21 180 210 310 R18 370 320 100 R17 370 320 100 R17 150 50 380 R15</p>
    <p>Super Extents</p>
    <p>S u</p>
    <p>p e</p>
    <p>r-E xte</p>
    <p>n t 1</p>
    <p>S u</p>
    <p>p e</p>
    <p>r-E xte</p>
    <p>n t 2</p>
    <p>Super Extent</p>
    <p>Contiguous group of fixed # of extents</p>
    <p>Super extent size</p>
    <p>Re-order records at super-extent level</p>
  </div>
  <div class="page">
    <p>logical replica 1 logical replica 2 logical replica 3</p>
    <p>partitioned C1 partitioned C2 partitioned C3</p>
    <p>C1 C2 C3 C1 C2 C3 C1 C2 C3 10 100 200 R1 110 50 50 R2 120 320 20 R9 50 210 250 R3 220 80 180 R11 110 50 50 R2</p>
    <p>E1 60 220 120 R10 10 100 200 R1 310 380 80 R5 110 50 50 R2 240 120 320 R8 200 380 80 R12 110 140 330 R6 110 140 330 R6 60 220 120 R10 120 320 20 R9 200 150 300 R4 220 80 180 R11 200 380 80 R12 50 210 250 R3 10 100 200 R1 200 150 300 R4 60 220 120 R10 300 320 220 R7</p>
    <p>E2 220 80 180 R11 120 320 20 R9 50 210 250 R3 240 120 320 R8 300 320 220 R7 200 150 300 R4 300 320 220 R7 310 380 80 R5 240 120 320 R8 310 380 80 R5 200 380 80 R12 110 140 330 R6</p>
    <p>E3 80 120 120 R24 310 80 220 R19 370 320 100 R17 150 50 380 R15 180 80 220 R23 80 120 120 R24 180 80 220 R23 80 120 120 R24 310 230 120 R20 180 210 310 R18 280 120 180 R16 280 120 180 R16 250 220 310 R22 80 210 90 R13 320 300 210 R21 280 120 180 R16 180 210 310 R18 180 80 220 R23</p>
    <p>E4 310 80 220 R19 250 220 310 R22 310 80 220 R19 310 230 120 R20 310 230 120 R20 250 220 310 R22 320 300 210 R21 320 300 210 R21 180 210 310 R18 370 320 100 R17 370 320 100 R17 150 50 380 R15</p>
    <p>Super Extents</p>
    <p>S u</p>
    <p>p e</p>
    <p>r-E xte</p>
    <p>n t 1</p>
    <p>S u</p>
    <p>p e</p>
    <p>r-E xte</p>
    <p>n t 2</p>
    <p>Super Extent</p>
    <p>Contiguous group of fixed # of extents</p>
    <p>Super extent size</p>
    <p>Re-order records at super-extent level</p>
  </div>
  <div class="page">
    <p>logical replica 1 logical replica 2 logical replica 3</p>
    <p>partitioned C1 partitioned C2 partitioned C3</p>
    <p>C1 C2 C3 C1 C2 C3 C1 C2 C3 10 100 200 R1 110 50 50 R2 120 320 20 R9 50 210 250 R3 220 80 180 R11 110 50 50 R2</p>
    <p>E1 60 220 120 R10 10 100 200 R1 310 380 80 R5 110 50 50 R2 240 120 320 R8 200 380 80 R12 110 140 330 R6 110 140 330 R6 60 220 120 R10 120 320 20 R9 200 150 300 R4 220 80 180 R11 200 380 80 R12 50 210 250 R3 10 100 200 R1 200 150 300 R4 60 220 120 R10 300 320 220 R7</p>
    <p>E2 220 80 180 R11 120 320 20 R9 50 210 250 R3 240 120 320 R8 300 320 220 R7 200 150 300 R4 300 320 220 R7 310 380 80 R5 240 120 320 R8 310 380 80 R5 200 380 80 R12 110 140 330 R6</p>
    <p>E3 80 120 120 R24 310 80 220 R19 370 320 100 R17 150 50 380 R15 180 80 220 R23 80 120 120 R24 180 80 220 R23 80 120 120 R24 310 230 120 R20 180 210 310 R18 280 120 180 R16 280 120 180 R16 250 220 310 R22 80 210 90 R13 320 300 210 R21 280 120 180 R16 180 210 310 R18 180 80 220 R23</p>
    <p>E4 310 80 220 R19 250 220 310 R22 310 80 220 R19 310 230 120 R20 310 230 120 R20 250 220 310 R22 320 300 210 R21 320 300 210 R21 180 210 310 R18 370 320 100 R17 370 320 100 R17 150 50 380 R15</p>
    <p>Super Extents</p>
    <p>S u</p>
    <p>p e</p>
    <p>r-E xte</p>
    <p>n t 1</p>
    <p>S u</p>
    <p>p e</p>
    <p>r-E xte</p>
    <p>n t 2</p>
    <p>Super Extent</p>
    <p>Contiguous group of fixed # of extents</p>
    <p>Super extent size</p>
    <p>Re-order records at super-extent level</p>
  </div>
  <div class="page">
    <p>logical replica 1 logical replica 2 logical replica 3</p>
    <p>partitioned C1 partitioned C2 partitioned C3</p>
    <p>C1 C2 C3 C1 C2 C3 C1 C2 C3 10 100 200 R1 110 50 50 R2 120 320 20 R9 50 210 250 R3 220 80 180 R11 110 50 50 R2</p>
    <p>E1 60 220 120 R10 10 100 200 R1 310 380 80 R5 110 50 50 R2 240 120 320 R8 200 380 80 R12 110 140 330 R6 110 140 330 R6 60 220 120 R10 120 320 20 R9 200 150 300 R4 220 80 180 R11 200 380 80 R12 50 210 250 R3 10 100 200 R1 200 150 300 R4 60 220 120 R10 300 320 220 R7</p>
    <p>E2 220 80 180 R11 120 320 20 R9 50 210 250 R3 240 120 320 R8 300 320 220 R7 200 150 300 R4 300 320 220 R7 310 380 80 R5 240 120 320 R8 310 380 80 R5 200 380 80 R12 110 140 330 R6</p>
    <p>E3 80 120 120 R24 310 80 220 R19 370 320 100 R17 150 50 380 R15 180 80 220 R23 80 120 120 R24 180 80 220 R23 80 120 120 R24 310 230 120 R20 180 210 310 R18 280 120 180 R16 280 120 180 R16 250 220 310 R22 80 210 90 R13 320 300 210 R21 280 120 180 R16 180 210 310 R18 180 80 220 R23</p>
    <p>E4 310 80 220 R19 250 220 310 R22 310 80 220 R19 310 230 120 R20 310 230 120 R20 250 220 310 R22 320 300 210 R21 320 300 210 R21 180 210 310 R18 370 320 100 R17 370 320 100 R17 150 50 380 R15</p>
    <p>Super Extents</p>
    <p>S u</p>
    <p>p e</p>
    <p>r-E xte</p>
    <p>n t 1</p>
    <p>S u</p>
    <p>p e</p>
    <p>r-E xte</p>
    <p>n t 2</p>
    <p>Super Extent</p>
    <p>Contiguous group of fixed # of extents</p>
    <p>Super extent size</p>
    <p>Re-order records at super-extent level</p>
  </div>
  <div class="page">
    <p>logical replica 1 logical replica 2 logical replica 3</p>
    <p>partitioned C1 partitioned C2 partitioned C3</p>
    <p>C1 C2 C3 C1 C2 C3 C1 C2 C3 10 100 200 R1 110 50 50 R2 120 320 20 R9 50 210 250 R3 220 80 180 R11 110 50 50 R2</p>
    <p>E1 60 220 120 R10 10 100 200 R1 310 380 80 R5 110 50 50 R2 240 120 320 R8 200 380 80 R12 110 140 330 R6 110 140 330 R6 60 220 120 R10 120 320 20 R9 200 150 300 R4 220 80 180 R11 200 380 80 R12 50 210 250 R3 10 100 200 R1 200 150 300 R4 60 220 120 R10 300 320 220 R7</p>
    <p>E2 220 80 180 R11 120 320 20 R9 50 210 250 R3 240 120 320 R8 300 320 220 R7 200 150 300 R4 300 320 220 R7 310 380 80 R5 240 120 320 R8 310 380 80 R5 200 380 80 R12 110 140 330 R6</p>
    <p>E3 80 120 120 R24 310 80 220 R19 370 320 100 R17 150 50 380 R15 180 80 220 R23 80 120 120 R24 180 80 220 R23 80 120 120 R24 310 230 120 R20 180 210 310 R18 280 120 180 R16 280 120 180 R16 250 220 310 R22 80 210 90 R13 320 300 210 R21 280 120 180 R16 180 210 310 R18 180 80 220 R23</p>
    <p>E4 310 80 220 R19 250 220 310 R22 310 80 220 R19 310 230 120 R20 310 230 120 R20 250 220 310 R22 320 300 210 R21 320 300 210 R21 180 210 310 R18 370 320 100 R17 370 320 100 R17 150 50 380 R15</p>
    <p>Super Extents</p>
    <p>S u</p>
    <p>p e</p>
    <p>r-E xte</p>
    <p>n t 1</p>
    <p>S u</p>
    <p>p e</p>
    <p>r-E xte</p>
    <p>n t 2</p>
    <p>Super Extent</p>
    <p>Contiguous group of fixed # of extents</p>
    <p>Super extent size</p>
    <p>Re-order records at super-extent level</p>
  </div>
  <div class="page">
    <p>logical replica 1 logical replica 2 logical replica 3</p>
    <p>partitioned C1 partitioned C2 partitioned C3</p>
    <p>C1 C2 C3 C1 C2 C3 C1 C2 C3 10 100 200 R1 110 50 50 R2 120 320 20 R9 50 210 250 R3 220 80 180 R11 110 50 50 R2</p>
    <p>E1 60 220 120 R10 10 100 200 R1 310 380 80 R5 110 50 50 R2 240 120 320 R8 200 380 80 R12 110 140 330 R6 110 140 330 R6 60 220 120 R10 120 320 20 R9 200 150 300 R4 220 80 180 R11 200 380 80 R12 50 210 250 R3 10 100 200 R1 200 150 300 R4 60 220 120 R10 300 320 220 R7</p>
    <p>E2 220 80 180 R11 120 320 20 R9 50 210 250 R3 240 120 320 R8 300 320 220 R7 200 150 300 R4 300 320 220 R7 310 380 80 R5 240 120 320 R8 310 380 80 R5 200 380 80 R12 110 140 330 R6</p>
    <p>E3 80 120 120 R24 310 80 220 R19 370 320 100 R17 150 50 380 R15 180 80 220 R23 80 120 120 R24 180 80 220 R23 80 120 120 R24 310 230 120 R20 180 210 310 R18 280 120 180 R16 280 120 180 R16 250 220 310 R22 80 210 90 R13 320 300 210 R21 280 120 180 R16 180 210 310 R18 180 80 220 R23</p>
    <p>E4 310 80 220 R19 250 220 310 R22 310 80 220 R19 310 230 120 R20 310 230 120 R20 250 220 310 R22 320 300 210 R21 320 300 210 R21 180 210 310 R18 370 320 100 R17 370 320 100 R17 150 50 380 R15</p>
    <p>Super Extents</p>
    <p>S u</p>
    <p>p e</p>
    <p>r-E xte</p>
    <p>n t 1</p>
    <p>S u</p>
    <p>p e</p>
    <p>r-E xte</p>
    <p>n t 2</p>
    <p>Super Extent</p>
    <p>Contiguous group of fixed # of extents</p>
    <p>Super extent size</p>
    <p>Re-order records at super-extent level</p>
    <p>Consequence:  partial ordering v/s global ordering  Benefits = func(super extent size)</p>
  </div>
  <div class="page">
    <p>logical replica 1 logical replica 2 logical replica 3</p>
    <p>partitioned C1 partitioned C2 partitioned C3</p>
    <p>C1 C2 C3 C1 C2 C3 C1 C2 C3 10 100 200 R1 110 50 50 R2 120 320 20 R9 50 210 250 R3 220 80 180 R11 110 50 50 R2</p>
    <p>E1 60 220 120 R10 10 100 200 R1 310 380 80 R5 110 50 50 R2 240 120 320 R8 200 380 80 R12 110 140 330 R6 110 140 330 R6 60 220 120 R10 120 320 20 R9 200 150 300 R4 220 80 180 R11 200 380 80 R12 50 210 250 R3 10 100 200 R1 200 150 300 R4 60 220 120 R10 300 320 220 R7</p>
    <p>E2 220 80 180 R11 120 320 20 R9 50 210 250 R3 240 120 320 R8 300 320 220 R7 200 150 300 R4 300 320 220 R7 310 380 80 R5 240 120 320 R8 310 380 80 R5 200 380 80 R12 110 140 330 R6</p>
    <p>E3 80 120 120 R24 310 80 220 R19 370 320 100 R17 150 50 380 R15 180 80 220 R23 80 120 120 R24 180 80 220 R23 80 120 120 R24 310 230 120 R20 180 210 310 R18 280 120 180 R16 280 120 180 R16 250 220 310 R22 80 210 90 R13 320 300 210 R21 280 120 180 R16 180 210 310 R18 180 80 220 R23</p>
    <p>E4 310 80 220 R19 250 220 310 R22 310 80 220 R19 310 230 120 R20 310 230 120 R20 250 220 310 R22 320 300 210 R21 320 300 210 R21 180 210 310 R18 370 320 100 R17 370 320 100 R17 150 50 380 R15</p>
    <p>Super Extents</p>
    <p>S u</p>
    <p>p e</p>
    <p>r-E xte</p>
    <p>n t 1</p>
    <p>S u</p>
    <p>p e</p>
    <p>r-E xte</p>
    <p>n t 2</p>
    <p>Super Extent</p>
    <p>Contiguous group of fixed # of extents</p>
    <p>Super extent size</p>
    <p>Re-order records at super-extent level</p>
    <p>Consequence:  partial ordering v/s global ordering  Benefits = func(super extent size)</p>
    <p>In practice: Super extent size = 100</p>
  </div>
  <div class="page">
    <p>logical replica 1 logical replica 2 logical replica 3</p>
    <p>partitioned C1 partitioned C2 partitioned C3</p>
    <p>C1 C2 C3 C1 C2 C3 C1 C2 C3 10 100 200 R1 110 50 50 R2 120 320 20 R9 50 210 250 R3 220 80 180 R11 110 50 50 R2</p>
    <p>E1 60 220 120 R10 10 100 200 R1 310 380 80 R5 110 50 50 R2 240 120 320 R8 200 380 80 R12 110 140 330 R6 110 140 330 R6 60 220 120 R10 120 320 20 R9 200 150 300 R4 220 80 180 R11 200 380 80 R12 50 210 250 R3 10 100 200 R1 200 150 300 R4 60 220 120 R10 300 320 220 R7</p>
    <p>E2 220 80 180 R11 120 320 20 R9 50 210 250 R3 240 120 320 R8 300 320 220 R7 200 150 300 R4 300 320 220 R7 310 380 80 R5 240 120 320 R8 310 380 80 R5 200 380 80 R12 110 140 330 R6</p>
    <p>E3 80 120 120 R24 310 80 220 R19 370 320 100 R17 150 50 380 R15 180 80 220 R23 80 120 120 R24 180 80 220 R23 80 120 120 R24 310 230 120 R20 180 210 310 R18 280 120 180 R16 280 120 180 R16 250 220 310 R22 80 210 90 R13 320 300 210 R21 280 120 180 R16 180 210 310 R18 180 80 220 R23</p>
    <p>E4 310 80 220 R19 250 220 310 R22 310 80 220 R19 310 230 120 R20 310 230 120 R20 250 220 310 R22 320 300 210 R21 320 300 210 R21 180 210 310 R18 370 320 100 R17 370 320 100 R17 150 50 380 R15</p>
    <p>Super Extents</p>
    <p>S u</p>
    <p>p e</p>
    <p>r-E xte</p>
    <p>n t 1</p>
    <p>S u</p>
    <p>p e</p>
    <p>r-E xte</p>
    <p>n t 2</p>
    <p>Super Extent</p>
    <p>Contiguous group of fixed # of extents</p>
    <p>Super extent size</p>
    <p>Re-order records at super-extent level</p>
    <p>Consequence:  partial ordering v/s global ordering  Benefits = func(super extent size)</p>
    <p>In practice: Super extent size = 100</p>
    <p>Recovery cost still 100x!</p>
  </div>
  <div class="page">
    <p>replica 1 replica 2 replica 3</p>
    <p>C1 C2 C3 C1 C2 C3 C1 C2 C3</p>
    <p>x x x</p>
    <p>E1 x x x</p>
    <p>x x x</p>
    <p>x x x</p>
    <p>x x x</p>
    <p>E2 x x x</p>
    <p>x x x</p>
    <p>x x x</p>
    <p>x x x</p>
    <p>E3 x x x</p>
    <p>x x x</p>
    <p>x x x</p>
    <p>x x x</p>
    <p>E4 x x x</p>
    <p>x x x</p>
    <p>x x x</p>
    <p>Chained Intra-extent bucketing</p>
  </div>
  <div class="page">
    <p>replica 1 replica 2 replica 3</p>
    <p>C1 C2 C3 C1 C2 C3 C1 C2 C3</p>
    <p>x x x</p>
    <p>E1 x x x</p>
    <p>x x x</p>
    <p>x x x</p>
    <p>x x x</p>
    <p>E2 x x x</p>
    <p>x x x</p>
    <p>x x x</p>
    <p>x x x</p>
    <p>E3 x x x</p>
    <p>x x x</p>
    <p>x x x</p>
    <p>x x x</p>
    <p>E4 x x x</p>
    <p>x x x</p>
    <p>x x x</p>
    <p>Chained Intra-extent bucketing</p>
  </div>
  <div class="page">
    <p>replica 1 replica 2 replica 3</p>
    <p>C1 C2 C3 C1 C2 C3 C1 C2 C3</p>
    <p>x x x</p>
    <p>E1 x x x</p>
    <p>x x x</p>
    <p>x x x</p>
    <p>x x x</p>
    <p>E2 x x x</p>
    <p>x x x</p>
    <p>x x x</p>
    <p>x x x</p>
    <p>E3 x x x</p>
    <p>x x x</p>
    <p>x x x</p>
    <p>x x x</p>
    <p>E4 x x x</p>
    <p>x x x</p>
    <p>x x x</p>
    <p>Chained Intra-extent bucketing</p>
  </div>
  <div class="page">
    <p>replica 1 replica 2 replica 3</p>
    <p>C1 C2 C3 C1 C2 C3 C1 C2 C3</p>
    <p>x x x</p>
    <p>E1 x x x</p>
    <p>x x x</p>
    <p>x x x</p>
    <p>x x x</p>
    <p>E2 x x x</p>
    <p>x x x</p>
    <p>x x x</p>
    <p>x x x</p>
    <p>E3 x x x</p>
    <p>x x x</p>
    <p>x x x</p>
    <p>x x x</p>
    <p>E4 x x x</p>
    <p>x x x</p>
    <p>x x x</p>
    <p>Chained Intra-extent bucketing</p>
  </div>
  <div class="page">
    <p>replica 1 replica 2 replica 3</p>
    <p>C1 C2 C3 C1 C2 C3 C1 C2 C3</p>
    <p>x x x</p>
    <p>E1 x x x</p>
    <p>x x x</p>
    <p>x x x</p>
    <p>x x x</p>
    <p>E2 x x x</p>
    <p>x x x</p>
    <p>x x x</p>
    <p>x x x</p>
    <p>E3 x x x</p>
    <p>x x x</p>
    <p>x x x</p>
    <p>x x x</p>
    <p>E4 x x x</p>
    <p>x x x</p>
    <p>x x x</p>
    <p>Chained Intra-extent bucketing</p>
  </div>
  <div class="page">
    <p>replica 1 replica 2 replica 3</p>
    <p>C1 C2 C3 C1 C2 C3 C1 C2 C3</p>
    <p>x x x</p>
    <p>E1 x x x</p>
    <p>x x x</p>
    <p>x x x</p>
    <p>x x x</p>
    <p>E2 x x x</p>
    <p>x x x</p>
    <p>x x x</p>
    <p>x x x</p>
    <p>E3 x x x</p>
    <p>x x x</p>
    <p>x x x</p>
    <p>x x x</p>
    <p>E4 x x x</p>
    <p>x x x</p>
    <p>x x x</p>
    <p>Chained Intra-extent bucketing</p>
  </div>
  <div class="page">
    <p>replica 1 replica 2 replica 3</p>
    <p>C1 C2 C3 C1 C2 C3 C1 C2 C3</p>
    <p>x x x</p>
    <p>E1 x x x</p>
    <p>x x x</p>
    <p>x x x</p>
    <p>x x x</p>
    <p>E2 x x x</p>
    <p>x x x</p>
    <p>x x x</p>
    <p>x x x</p>
    <p>E3 x x x</p>
    <p>x x x</p>
    <p>x x x</p>
    <p>x x x</p>
    <p>E4 x x x</p>
    <p>x x x</p>
    <p>x x x</p>
    <p>Chained Intra-extent bucketing</p>
  </div>
  <div class="page">
    <p>replica 1 replica 2 replica 3</p>
    <p>C1 C2 C3 C1 C2 C3 C1 C2 C3</p>
    <p>x x x</p>
    <p>E1 x x x</p>
    <p>x x x</p>
    <p>x x x</p>
    <p>x x x</p>
    <p>E2 x x x</p>
    <p>x x x</p>
    <p>x x x</p>
    <p>x x x</p>
    <p>E3 x x x</p>
    <p>x x x</p>
    <p>x x x</p>
    <p>x x x</p>
    <p>E4 x x x</p>
    <p>x x x</p>
    <p>x x x</p>
    <p>Chained Intra-extent bucketing</p>
  </div>
  <div class="page">
    <p>replica 1 replica 2 replica 3</p>
    <p>C1 C2 C3 C1 C2 C3 C1 C2 C3</p>
    <p>x x x</p>
    <p>E1 x x x</p>
    <p>x x x</p>
    <p>x x x</p>
    <p>x x x</p>
    <p>E2 x x x</p>
    <p>x x x</p>
    <p>x x x</p>
    <p>x x x</p>
    <p>E3 x x x</p>
    <p>x x x</p>
    <p>x x x</p>
    <p>x x x</p>
    <p>E4 x x x</p>
    <p>x x x</p>
    <p>x x x</p>
    <p>Chained Intra-extent bucketing</p>
  </div>
  <div class="page">
    <p>replica 1 replica 2 replica 3</p>
    <p>C1 C2 C3 C1 C2 C3 C1 C2 C3</p>
    <p>x x x</p>
    <p>E1 x x x</p>
    <p>x x x</p>
    <p>x x x</p>
    <p>x x x</p>
    <p>E2 x x x</p>
    <p>x x x</p>
    <p>x x x</p>
    <p>x x x</p>
    <p>E3 x x x</p>
    <p>x x x</p>
    <p>x x x</p>
    <p>x x x</p>
    <p>E4 x x x</p>
    <p>x x x</p>
    <p>x x x</p>
    <p>Chained Intra-extent bucketing</p>
    <p>Same recovery cost as Physical Replication (in terms of Disk &amp; Network I/O)</p>
  </div>
  <div class="page">
    <p>replica 1 replica 2 replica 3</p>
    <p>C1 C2 C3 C1 C2 C3 C1 C2 C3</p>
    <p>x x x</p>
    <p>E1 x x x</p>
    <p>x x x</p>
    <p>x x x</p>
    <p>x x x</p>
    <p>E2 x x x</p>
    <p>x x x</p>
    <p>x x x</p>
    <p>x x x</p>
    <p>E3 x x x</p>
    <p>x x x</p>
    <p>x x x</p>
    <p>x x x</p>
    <p>E4 x x x</p>
    <p>x x x</p>
    <p>x x x</p>
    <p>Chained Intra-extent bucketing</p>
    <p>Same recovery cost as Physical Replication (in terms of Disk &amp; Network I/O)</p>
    <p>Super extent size = 100  =&gt; Size(Intra-bucket) = 2.5MB</p>
    <p>Disk seek amortized over transfer</p>
  </div>
  <div class="page">
    <p>Recovery Cost Evaluation</p>
    <p>Setup  Dedicated cluster of 500 machines (20 racks x 25 machines)</p>
    <p>Machine configuration  2.4GHz Xeon processor w/ 24 H/W threads</p>
    <p>128GB RAM</p>
    <p>4x 5TB HDD</p>
    <p>4x 500GB SSD</p>
    <p>Recovery Experiment  Ingested large amount of data</p>
    <p>Took down 1 rack of machines</p>
    <p>Measured disk &amp; network utilization</p>
  </div>
  <div class="page">
    <p>Recovery cost: Disk I/O</p>
  </div>
  <div class="page">
    <p>Recovery cost: Disk I/O</p>
    <p>Area under the curves is same</p>
  </div>
  <div class="page">
    <p>Recovery cost: Network I/O</p>
  </div>
  <div class="page">
    <p>Recovery cost: Network I/O</p>
    <p>Area under the curves is same</p>
  </div>
  <div class="page">
    <p>Other storage challenges</p>
    <p>Availability properties</p>
    <p>Fault isolation</p>
    <p>Please refer to paper for details</p>
  </div>
  <div class="page">
    <p>Outline</p>
    <p>Introduction</p>
    <p>Design &amp; Evaluation 1.) Key mechanism at storage layer 2.) Efficient Query Execution</p>
    <p>Implementation</p>
    <p>Summary</p>
  </div>
  <div class="page">
    <p>Efficient Filter Queries</p>
    <p>Super extent 1 (100 extents)</p>
    <p>Super extent 2 (100 extents)</p>
    <p>Replica partitioned</p>
    <p>by A</p>
  </div>
  <div class="page">
    <p>Efficient Filter Queries</p>
    <p>Replica partitioned</p>
    <p>by A</p>
    <p>Partition #1 Partition #2 Partition #3 Partition #100</p>
  </div>
  <div class="page">
    <p>Efficient Filter Queries</p>
    <p>Replica partitioned</p>
    <p>by A</p>
    <p>Partition #1 Partition #2 Partition #3 Partition #100</p>
    <p>Filter on A</p>
  </div>
  <div class="page">
    <p>Efficient Filter Queries</p>
    <p>Replica partitioned</p>
    <p>by A</p>
    <p>Partition #1 Partition #2 Partition #3 Partition #100</p>
    <p>Filter on A</p>
  </div>
  <div class="page">
    <p>Efficient Filter Queries</p>
    <p>Replica partitioned</p>
    <p>by A</p>
    <p>Partition #1 Partition #2 Partition #3 Partition #100</p>
    <p>Filter on A</p>
  </div>
  <div class="page">
    <p>Join Queries: Heterogeneous co-location</p>
    <p>Rack level co-location of partitions across files</p>
    <p>Partition #1 Partition #2 Partition #3 Partition #100</p>
    <p>File 1</p>
  </div>
  <div class="page">
    <p>Join Queries: Heterogeneous co-location</p>
    <p>Rack level co-location of partitions across files</p>
    <p>Partition #1 Partition #2 Partition #3 Partition #100</p>
    <p>File 1</p>
    <p>File 2</p>
  </div>
  <div class="page">
    <p>Join Queries: Heterogeneous co-location</p>
    <p>Rack level co-location of partitions across files</p>
    <p>Partition #1 Partition #2 Partition #3 Partition #100</p>
    <p>File 1</p>
    <p>File 2</p>
    <p>File 1</p>
    <p>File 2</p>
    <p>File 3</p>
    <p>File 4</p>
    <p>Replica 2</p>
  </div>
  <div class="page">
    <p>Join Queries: Heterogeneous co-location</p>
    <p>Rack level co-location of partitions across files</p>
    <p>Partition #1 Partition #2 Partition #3 Partition #100</p>
    <p>File 1</p>
    <p>File 2</p>
    <p>File 1</p>
    <p>File 2</p>
    <p>File 3</p>
    <p>File 4</p>
    <p>Replica 2</p>
    <p>More queries get benefits of</p>
    <p>co-location</p>
  </div>
  <div class="page">
    <p>Efficient Join Queries: Sliced Reads</p>
    <p>File 1 joined with File 2 on Column A</p>
    <p>Partition #1 Partition #2 Partition #3 Partition #100</p>
    <p>File 1</p>
    <p>File 2</p>
  </div>
  <div class="page">
    <p>Efficient Join Queries: Sliced Reads</p>
    <p>File 1 joined with File 2 on Column A</p>
    <p>Partition #1 Partition #2 Partition #3 Partition #100</p>
    <p>File 1</p>
    <p>File 2</p>
    <p>Need finer grained partitioning</p>
  </div>
  <div class="page">
    <p>Extent</p>
    <p>Efficient Join Queries: Sliced Reads</p>
    <p>Storage Node</p>
    <p>File 1 joined with File 2 on Column A</p>
    <p>Partition #1 Partition #2 Partition #3 Partition #100</p>
    <p>File 1</p>
    <p>File 2</p>
    <p>Need finer grained partitioning</p>
    <p>A B C</p>
  </div>
  <div class="page">
    <p>Extent</p>
    <p>Efficient Join Queries: Sliced Reads</p>
    <p>Storage Node</p>
    <p>File 1 joined with File 2 on Column A</p>
    <p>Partition #1 Partition #2 Partition #3 Partition #100</p>
    <p>File 1</p>
    <p>File 2</p>
    <p>Need finer grained partitioning</p>
    <p>A B C</p>
  </div>
  <div class="page">
    <p>Extent</p>
    <p>Efficient Join Queries: Sliced Reads</p>
    <p>Storage Node</p>
    <p>Sliced_read(A, 1)</p>
    <p>File 1 joined with File 2 on Column A</p>
    <p>Partition #1 Partition #2 Partition #3 Partition #100</p>
    <p>File 1</p>
    <p>File 2</p>
    <p>Need finer grained partitioning</p>
    <p>A B C</p>
  </div>
  <div class="page">
    <p>Extent</p>
    <p>Efficient Join Queries: Sliced Reads</p>
    <p>Storage Node</p>
    <p>Sliced_read(A, 1)</p>
    <p>File 1 joined with File 2 on Column A</p>
    <p>Partition #1 Partition #2 Partition #3 Partition #100</p>
    <p>File 1</p>
    <p>File 2</p>
    <p>Need finer grained partitioning</p>
    <p>A B C</p>
  </div>
  <div class="page">
    <p>Extent</p>
    <p>Efficient Join Queries: Sliced Reads</p>
    <p>Storage Node</p>
    <p>Sliced_read(A, 1)</p>
    <p>File 1 joined with File 2 on Column A</p>
    <p>Partition #1 Partition #2 Partition #3 Partition #100</p>
    <p>File 1</p>
    <p>File 2</p>
    <p>Need finer grained partitioning</p>
    <p>A B C</p>
  </div>
  <div class="page">
    <p>Extent</p>
    <p>Efficient Join Queries: Sliced Reads</p>
    <p>Storage Node</p>
    <p>Sliced_read(A, 1)</p>
    <p>File 1 joined with File 2 on Column A</p>
    <p>Partition #1 Partition #2 Partition #3 Partition #100</p>
    <p>File 1</p>
    <p>File 2</p>
    <p>Need finer grained partitioning</p>
    <p>A B C</p>
    <p>Co-ordinated lazy request scheduling</p>
    <p>Selective Caching</p>
  </div>
  <div class="page">
    <p>Extent</p>
    <p>Efficient Join Queries: Sliced Reads</p>
    <p>Storage Node</p>
    <p>Sliced_read(A, 1)</p>
    <p>Sliced_read(A, 2)</p>
    <p>File 1 joined with File 2 on Column A</p>
    <p>Partition #1 Partition #2 Partition #3 Partition #100</p>
    <p>File 1</p>
    <p>File 2</p>
    <p>Need finer grained partitioning</p>
    <p>A B C</p>
    <p>Co-ordinated lazy request scheduling</p>
    <p>Selective Caching</p>
  </div>
  <div class="page">
    <p>Extent</p>
    <p>Efficient Join Queries: Sliced Reads</p>
    <p>Storage Node</p>
    <p>Sliced_read(A, 1)</p>
    <p>Sliced_read(A, 2)</p>
    <p>Sliced_read(A, 3)</p>
    <p>File 1 joined with File 2 on Column A</p>
    <p>Partition #1 Partition #2 Partition #3 Partition #100</p>
    <p>File 1</p>
    <p>File 2</p>
    <p>Need finer grained partitioning</p>
    <p>A B C</p>
    <p>Co-ordinated lazy request scheduling</p>
    <p>Selective Caching</p>
  </div>
  <div class="page">
    <p>Extent</p>
    <p>Efficient Join Queries: Sliced Reads</p>
    <p>Storage Node</p>
    <p>Sliced_read(A, 1)</p>
    <p>Sliced_read(A, 2)</p>
    <p>Sliced_read(A, 3)</p>
    <p>Sliced_read(A, 4)</p>
    <p>File 1 joined with File 2 on Column A</p>
    <p>Partition #1 Partition #2 Partition #3 Partition #100</p>
    <p>File 1</p>
    <p>File 2</p>
    <p>Need finer grained partitioning</p>
    <p>A B C</p>
    <p>Co-ordinated lazy request scheduling</p>
    <p>Selective Caching</p>
  </div>
  <div class="page">
    <p>Extent</p>
    <p>Efficient Join Queries: Sliced Reads</p>
    <p>Storage Node</p>
    <p>Sliced_read(A, 1)</p>
    <p>Sliced_read(A, 2)</p>
    <p>Sliced_read(A, 3)</p>
    <p>Sliced_read(A, 4)</p>
    <p>File 1 joined with File 2 on Column A</p>
    <p>Partition #1 Partition #2 Partition #3 Partition #100</p>
    <p>File 1</p>
    <p>File 2</p>
    <p>Need finer grained partitioning</p>
    <p>A B C</p>
    <p>Co-ordinated lazy request scheduling</p>
    <p>Selective Caching</p>
  </div>
  <div class="page">
    <p>AMPLab Big Data Benchmark</p>
    <p>Execution cost of queries</p>
    <p>N o</p>
    <p>rm a</p>
    <p>li ze</p>
    <p>d e</p>
    <p>xe cu</p>
    <p>ti o</p>
    <p>n c</p>
    <p>o st</p>
    <p>Filter Group by Filter + Join</p>
  </div>
  <div class="page">
    <p>AMPLab Big Data Benchmark</p>
    <p>Execution cost of queries</p>
    <p>N o</p>
    <p>rm a</p>
    <p>li ze</p>
    <p>d e</p>
    <p>xe cu</p>
    <p>ti o</p>
    <p>n c</p>
    <p>o st</p>
    <p>Filter Group by Filter + Join</p>
    <p>Simultaneous benefits on multiple columns</p>
  </div>
  <div class="page">
    <p>Production Queries</p>
    <p>Slice of production telemetry analytics workload</p>
    <p>Costs are in compute hours  Latencies are in minutes</p>
  </div>
  <div class="page">
    <p>Production Queries</p>
    <p>Slice of production telemetry analytics workload</p>
    <p>Costs are in compute hours  Latencies are in minutes</p>
  </div>
  <div class="page">
    <p>Outline</p>
    <p>Introduction</p>
    <p>Design &amp; Evaluation 1.) Key mechanism at storage layer 2.) Efficient Query Execution</p>
    <p>Implementation</p>
    <p>Summary</p>
  </div>
  <div class="page">
    <p>Implementation</p>
    <p>Storage Node</p>
    <p>Storage Node</p>
    <p>Storage Node</p>
    <p>Storage Node</p>
  </div>
  <div class="page">
    <p>Logically_replicate(file, adapter)</p>
    <p>Implementation</p>
    <p>Storage Node</p>
    <p>Storage Node</p>
    <p>Storage Node</p>
    <p>Storage Node</p>
    <p>CSV</p>
  </div>
  <div class="page">
    <p>Logically_replicate(file, adapter)</p>
    <p>Implementation</p>
    <p>Storage Node</p>
    <p>Storage Node</p>
    <p>Storage Node</p>
    <p>Storage Node</p>
    <p>Recover_extent(super-extent info)</p>
    <p>CSV</p>
  </div>
  <div class="page">
    <p>Summary</p>
    <p>INSTalytics: Compute-aware cluster filesystem  Logical replication: Amplifies benefits of partitioning</p>
    <p>Efficient processing of join queries  Heterogeneous co-location</p>
    <p>Sliced Reads</p>
    <p>Significant performance benefits</p>
    <p>Recovery properties not compromised</p>
    <p>Co-design of Compute &amp; Storage layers for efficient analytics at scale</p>
  </div>
  <div class="page">
    <p>Thank you Questions?</p>
  </div>
</Presentation>

<?xml version="1.0" ?>
<Presentation>
  <div class="page">
    <p>A Neural Network A Neural Network Classifier for Junk E-MailClassifier for Junk E-Mail</p>
    <p>Ian Stuart, Sung-Hyuk Cha, and Charles TappertIan Stuart, Sung-Hyuk Cha, and Charles Tappert CSIS Student/Faculty Research DayCSIS Student/Faculty Research Day</p>
    <p>May 7, 2004May 7, 2004</p>
  </div>
  <div class="page">
    <p>Spam, spam, spam, Spam, spam, spam,</p>
  </div>
  <div class="page">
    <p>Fighting spamFighting spam</p>
    <p>Several commercial applications existSeveral commercial applications exist  Server-side: expensiveServer-side: expensive</p>
    <p>Client-side: time-consumingClient-side: time-consuming</p>
    <p>No approach is 100% effectiveNo approach is 100% effective  Spammers are aggressive and adaptableSpammers are aggressive and adaptable</p>
    <p>Best solutions are typically hybrids of Best solutions are typically hybrids of different approaches and criteriadifferent approaches and criteria</p>
  </div>
  <div class="page">
    <p>Common approachesCommon approaches</p>
    <p>Simple filtersSimple filters  Common words or phrasesCommon words or phrases  Unusual punctuation or capitalizationUnusual punctuation or capitalization</p>
    <p>Blacklisting: just say NO (if you can)Blacklisting: just say NO (if you can)</p>
    <p>Reject e-mail from known spammersReject e-mail from known spammers</p>
    <p>Whitelisting: friends only, pleaseWhitelisting: friends only, please</p>
    <p>Accept e-mail only from known correspondentsAccept e-mail only from known correspondents</p>
    <p>Classifiers: examine each e-mail and decideClassifiers: examine each e-mail and decide  Only a few publications on spam classifiersOnly a few publications on spam classifiers</p>
  </div>
  <div class="page">
    <p>Nave Bayesian classifiersNave Bayesian classifiers</p>
    <p>Used in commercial classifiers Used in commercial classifiers  Assumes recognition features are independentAssumes recognition features are independent</p>
    <p>Max likelihood = product of likelihoods of featuresMax likelihood = product of likelihoods of features  E-mail classifier  examines each wordE-mail classifier  examines each word</p>
    <p>Training assigns a probability to each wordTraining assigns a probability to each word  Look up each word/probability in a dictionaryLook up each word/probability in a dictionary  If the product of the probabilities exceeds a given If the product of the probabilities exceeds a given</p>
    <p>threshold, it is spamthreshold, it is spam  Challenge  creating the dictionaryChallenge  creating the dictionary  We compare our Neural Network against two We compare our Neural Network against two</p>
    <p>published Nave Bayesian classifierspublished Nave Bayesian classifiers</p>
  </div>
  <div class="page">
    <p>Nave Bayesian classifier issuesNave Bayesian classifier issues</p>
    <p>How many features (words), which ones?How many features (words), which ones?  How is degradation avoided as spammers How is degradation avoided as spammers</p>
    <p>vocabulary changes?vocabulary changes?  What values are assigned to new words?What values are assigned to new words?  What are the thresholds?What are the thresholds?  How to avoid sabotage of classifier?How to avoid sabotage of classifier?</p>
  </div>
  <div class="page">
    <p>Which one isnt spam?Which one isnt spam? (subject headers)(subject headers)</p>
    <p>5 Be a mighty warrior in bed! vcrhwt ygjztyjjh5 Be a mighty warrior in bed! vcrhwt ygjztyjjh</p>
    <p>Money Back Guarantee_HGHMoney Back Guarantee_HGH</p>
    <p>kindle life pddez liw mzackindle life pddez liw mzac</p>
    <p>v a l i u m - D i a z e p a m used to relieve anxietyv a l i u m - D i a z e p a m used to relieve anxiety</p>
    <p>Fairfield tennis scheduleFairfield tennis schedule</p>
    <p>:Dramatic E,nhancement fo=r .Men = f&quot;fumqid:Dramatic E,nhancement fo=r .Men = f&quot;fumqid</p>
    <p>,Refina'nce now. Don't wait,Refina'nce now. Don't wait</p>
  </div>
  <div class="page">
    <p>Which one isnt spam?Which one isnt spam? (subject headers) (subject headers)</p>
    <p>5 Be a mighty warrior in bed! vcrhwt ygjztyjjh5 Be a mighty warrior in bed! vcrhwt ygjztyjjh</p>
    <p>Money Back Guarantee_HGHMoney Back Guarantee_HGH</p>
    <p>kindle life pddez liw mzackindle life pddez liw mzac</p>
    <p>v a l i u m - D i a z e p a m used to relieve anxietyv a l i u m - D i a z e p a m used to relieve anxiety</p>
    <p>Fairfield tennis scheduleFairfield tennis schedule</p>
    <p>:Dramatic E,nhancement fo=r .Men = f&quot;fumqid:Dramatic E,nhancement fo=r .Men = f&quot;fumqid</p>
    <p>,Refina'nce now. Don't wait,Refina'nce now. Don't wait</p>
  </div>
  <div class="page">
    <p>Spammers make patternsSpammers make patterns</p>
    <p>The more they try to hide, the easier it The more they try to hide, the easier it is to see themis to see them</p>
    <p>Therefore, we use common spammer Therefore, we use common spammer patterns (instead of vocabulary) as patterns (instead of vocabulary) as features for classificationfeatures for classification</p>
    <p>Learn these patterns with a Neural Learn these patterns with a Neural NetworkNetwork</p>
  </div>
  <div class="page">
    <p>Neural Network featuresNeural Network features</p>
    <p>Total of 17 featuresTotal of 17 features  6 from the subject header6 from the subject header</p>
    <p>2 from priority and content-type headers2 from priority and content-type headers</p>
    <p>9 from the e-mail body9 from the e-mail body</p>
  </div>
  <div class="page">
    <p>Features from subject headerFeatures from subject header</p>
  </div>
  <div class="page">
    <p>Features from priority and Features from priority and content-type headerscontent-type headers</p>
  </div>
  <div class="page">
    <p>Features from message bodyFeatures from message body</p>
    <p>To: were both presentTo: were both present 5.5. Number of HTML opening comment tagsNumber of HTML opening comment tags 6.6. Number of hyperlinks (href=)Number of hyperlinks (href=) 7.7. Number of clickable images represented in HTMLNumber of clickable images represented in HTML 8.8. Binary feature indicating whether a text color was set to whiteBinary feature indicating whether a text color was set to white 9.9. Number of URLs in hyperlinks with digits or &amp;, %, or @Number of URLs in hyperlinks with digits or &amp;, %, or @</p>
  </div>
  <div class="page">
    <p>Neural Network spam classifierNeural Network spam classifier</p>
    <p>3-layer, feed-forward network (Perceptron)3-layer, feed-forward network (Perceptron)</p>
    <p>17 input units, variable # hidden layer units, 1 output unit17 input units, variable # hidden layer units, 1 output unit</p>
    <p>Data  1,654 e-mails: 854 spam, 800 legitimateData  1,654 e-mails: 854 spam, 800 legitimate</p>
    <p>Use half of each (spam/non-spam) for training, Use half of each (spam/non-spam) for training, the other half for testingthe other half for testing</p>
    <p>Test with variations of hidden nodes (4 to 14) Test with variations of hidden nodes (4 to 14) and epochs (100 to 500)and epochs (100 to 500)</p>
  </div>
  <div class="page">
    <p>Definitions used for classifier Definitions used for classifier success measuressuccess measures</p>
    <p>nnSS SS = number of spam classified as spam</p>
    <p>nnSL SL = number of spam classified as legitimate</p>
    <p>nnLL LL = number of legitimate classified as legitimate</p>
    <p>nnLS LS = number of legitimate classified as spam</p>
  </div>
  <div class="page">
    <p>Measure of success: precisionMeasure of success: precision</p>
    <p>Precision: the percentage of labeled Precision: the percentage of labeled spam/legitimate e-mail correctly classifiedspam/legitimate e-mail correctly classified</p>
    <p>legitimatelabeledall</p>
    <p>legitimatecorrect LPprecisionLegitimate</p>
    <p>spamlabeledall</p>
    <p>spamscorrect SPprecisionSpam</p>
    <p>)(</p>
    <p>)(</p>
  </div>
  <div class="page">
    <p>Measure of success: precisionMeasure of success: precision</p>
    <p>Precision: the percentage of labeled Precision: the percentage of labeled spam/legitimate e-mail correctly classifiedspam/legitimate e-mail correctly classified</p>
    <p>SLLL</p>
    <p>LL</p>
    <p>LSSS</p>
    <p>SS</p>
    <p>nn</p>
    <p>n LPprecisionLegitimate</p>
    <p>nn</p>
    <p>n SPprecisionSpam</p>
    <p>)(</p>
    <p>)(</p>
  </div>
  <div class="page">
    <p>Measure of success: accuracyMeasure of success: accuracy</p>
    <p>Accuracy: the percentage of actual Accuracy: the percentage of actual spam/legitimate e-mail correctly classifiedspam/legitimate e-mail correctly classified</p>
    <p>legitimateactualall</p>
    <p>legitimatecorrect LRrecallLegitimate</p>
    <p>spamactualall</p>
    <p>spamscorrect SRrecallSpam</p>
    <p>)(</p>
    <p>)(</p>
  </div>
  <div class="page">
    <p>Measure of success: accuracyMeasure of success: accuracy</p>
    <p>Accuracy: the percentage of actual Accuracy: the percentage of actual spam/legitimate e-mail correctly classifiedspam/legitimate e-mail correctly classified</p>
    <p>LSLL</p>
    <p>LL</p>
    <p>SLSS</p>
    <p>SS</p>
    <p>nn</p>
    <p>n LRrecallLegitimate</p>
    <p>nn</p>
    <p>n SRrecallSpam</p>
    <p>)(</p>
    <p>)(</p>
  </div>
  <div class="page">
    <p>Neural Network resultsNeural Network results</p>
    <p>Best overall results with 12 hidden nodes at Best overall results with 12 hidden nodes at 500 epochs500 epochs  Spam Precision: 92.45%Spam Precision: 92.45%  Legitimate Precision: 91.32%Legitimate Precision: 91.32%  Spam Accuracy: 91.80%Spam Accuracy: 91.80%  Legitimate Accuracy : 92.00%Legitimate Accuracy : 92.00%</p>
    <p>35 spams misclassified: 8.20%35 spams misclassified: 8.20%  32 legitimates misclassified: 8.00%32 legitimates misclassified: 8.00%</p>
  </div>
  <div class="page">
    <p>Misclassified e-mailsMisclassified e-mails</p>
    <p>Most spam misclassified as legitimate Most spam misclassified as legitimate were short in length, with few hyperlinkswere short in length, with few hyperlinks</p>
    <p>Most legitimate e-mails misclassified as Most legitimate e-mails misclassified as spam had unusual features for personal spam had unusual features for personal e-mail (that is, they were spam-like in e-mail (that is, they were spam-like in appearance)appearance)</p>
  </div>
  <div class="page">
    <p>Comparing Neural Network and Comparing Neural Network and Nave Bayesian ClassifiersNave Bayesian Classifiers</p>
    <p>Accuracy of the NN classifier is comparable to Accuracy of the NN classifier is comparable to that reported for Nave Bayesian classifiersthat reported for Nave Bayesian classifiers</p>
    <p>NN classifier required fewer features (17 versus NN classifier required fewer features (17 versus 100 in one study and 500 in another)100 in one study and 500 in another)</p>
    <p>NN classifier uses descriptive qualities of words NN classifier uses descriptive qualities of words and messages similar to those used by human and messages similar to those used by human readersreaders</p>
  </div>
  <div class="page">
    <p>Blacklisting ExperimentBlacklisting Experiment</p>
    <p>Manually entered IP addresses of e-mail Manually entered IP addresses of e-mail incorrectly tagged by NN classifierincorrectly tagged by NN classifier  Entered first (original) IP address and, when present, Entered first (original) IP address and, when present,</p>
    <p>second IP address (e.g., mail server or ISP) second IP address (e.g., mail server or ISP)</p>
    <p>Into a website that sends IP addresses to 173 Into a website that sends IP addresses to 173 working spam blacklists and returns the # hits, working spam blacklists and returns the # hits, http://www.declude.com/junkmail/support/ip4r.htmhttp://www.declude.com/junkmail/support/ip4r.htm</p>
    <p>Counted only hit counts greater than one as spam Counted only hit counts greater than one as spam since single-list hits to be anomalies since single-list hits to be anomalies</p>
  </div>
  <div class="page">
    <p>Blacklisting Experimental ResultsBlacklisting Experimental Results</p>
    <p>Of the 32 Of the 32 legitimatelegitimate e-mails misclassified e-mails misclassified by the NN, 53% were identified as spamby the NN, 53% were identified as spam</p>
    <p>Of the 35 Of the 35 spamspam e-mails misclassified by e-mails misclassified by the NN, 97% were identified as spamthe NN, 97% were identified as spam</p>
    <p>These poor results indicate that the These poor results indicate that the blacklisting strategy, at least for these blacklisting strategy, at least for these databases, is inadequate databases, is inadequate</p>
  </div>
  <div class="page">
    <p>ConclusionsConclusions</p>
    <p>NN competitive to Nave Bayesian studies NN competitive to Nave Bayesian studies despite using a much smaller feature setdespite using a much smaller feature set</p>
    <p>Room for refinement of parsing for featuresRoom for refinement of parsing for features  Use of descriptive, more human-like Use of descriptive, more human-like</p>
    <p>features makes NN less subject to features makes NN less subject to degradation than Nave Bayesiandegradation than Nave Bayesian</p>
  </div>
  <div class="page">
    <p>Conclusions (cont.)Conclusions (cont.)</p>
    <p>Neural Network approach is useful and Neural Network approach is useful and accurate, but too many legitimate -&gt; spamaccurate, but too many legitimate -&gt; spam</p>
    <p>Should be powerful when used in Should be powerful when used in conjunction with a whitelist to reduce conjunction with a whitelist to reduce legitimate -&gt; spam (nlegitimate -&gt; spam (nLSLS), increasing spam ), increasing spam precision and legitimate accuracyprecision and legitimate accuracy</p>
    <p>Blacklisting strategy is not very helpfulBlacklisting strategy is not very helpful</p>
  </div>
</Presentation>

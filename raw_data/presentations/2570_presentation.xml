<?xml version="1.0" ?>
<Presentation>
  <div class="page">
    <p>Statistical Debugging with Latent Topic Models</p>
    <p>David Andrzejewski, Anne Mulhern, Ben Liblit, Xiaojin Zhu</p>
    <p>Department of Computer Sciences University of WisconsinMadison</p>
    <p>European Conference on Machine Learning, 2007</p>
    <p>(UWMadison) Topic-based statistical debugging ECML 2007 1 / 21</p>
  </div>
  <div class="page">
    <p>Outline</p>
    <p>(UWMadison) Topic-based statistical debugging ECML 2007 2 / 21</p>
  </div>
  <div class="page"/>
  <div class="page"/>
  <div class="page">
    <p>Debugging</p>
    <p>Debugging as machine learning</p>
    <p>(UWMadison) Topic-based statistical debugging ECML 2007 3 / 21</p>
  </div>
  <div class="page">
    <p>Program Runs as Documents</p>
    <p>Predicates  Vocabulary Predicate counts  Word counts</p>
    <p>Program run  Bag-of-words document Debugging  Latent topic analysis</p>
    <p>(UWMadison) Topic-based statistical debugging ECML 2007 4 / 21</p>
  </div>
  <div class="page">
    <p>Program Runs as Documents</p>
    <p>Predicates  Vocabulary Predicate counts  Word counts</p>
    <p>Program run  Bag-of-words document Debugging  Latent topic analysis</p>
    <p>(UWMadison) Topic-based statistical debugging ECML 2007 4 / 21</p>
  </div>
  <div class="page">
    <p>Program Runs as Documents</p>
    <p>Predicates  Vocabulary Predicate counts  Word counts</p>
    <p>Program run  Bag-of-words document Debugging  Latent topic analysis</p>
    <p>(UWMadison) Topic-based statistical debugging ECML 2007 4 / 21</p>
  </div>
  <div class="page">
    <p>Program Runs as Documents</p>
    <p>Predicates  Vocabulary Predicate counts  Word counts</p>
    <p>Program run  Bag-of-words document Debugging  Latent topic analysis</p>
    <p>(UWMadison) Topic-based statistical debugging ECML 2007 4 / 21</p>
  </div>
  <div class="page">
    <p>Program Runs as Documents</p>
    <p>Predicates  Vocabulary Predicate counts  Word counts</p>
    <p>Program run  Bag-of-words document Debugging  Latent topic analysis</p>
    <p>(UWMadison) Topic-based statistical debugging ECML 2007 4 / 21</p>
  </div>
  <div class="page">
    <p>Hidden topics</p>
    <p>Word counts (observed)</p>
    <p>Weighted latent topics (hidden)</p>
    <p>3, 4 = bug topics</p>
    <p>doc 1</p>
    <p>1</p>
    <p>1</p>
    <p>+ 2</p>
    <p>2</p>
    <p>+ 3</p>
    <p>3</p>
    <p>+ 4</p>
    <p>4</p>
    <p>doc 2</p>
    <p>1</p>
    <p>1</p>
    <p>+ 2</p>
    <p>2</p>
    <p>+ 3</p>
    <p>3</p>
    <p>+ 4</p>
    <p>4</p>
    <p>doc 3</p>
    <p>1</p>
    <p>1</p>
    <p>+ 2</p>
    <p>2</p>
    <p>+ 3</p>
    <p>3</p>
    <p>+ 4</p>
    <p>4</p>
    <p>(UWMadison) Topic-based statistical debugging ECML 2007 5 / 21</p>
  </div>
  <div class="page">
    <p>Hidden topics</p>
    <p>Word counts (observed)</p>
    <p>Weighted latent topics (hidden)</p>
    <p>3, 4 = bug topics  doc 1</p>
    <p>1</p>
    <p>1</p>
    <p>+ 2</p>
    <p>2</p>
    <p>+ 3</p>
    <p>3</p>
    <p>+ 4</p>
    <p>4</p>
    <p>doc 2</p>
    <p>1</p>
    <p>1</p>
    <p>+ 2</p>
    <p>2</p>
    <p>+ 3</p>
    <p>3</p>
    <p>+ 4</p>
    <p>4</p>
    <p>doc 3</p>
    <p>1</p>
    <p>1</p>
    <p>+ 2</p>
    <p>2</p>
    <p>+ 3</p>
    <p>3</p>
    <p>+ 4</p>
    <p>4</p>
    <p>(UWMadison) Topic-based statistical debugging ECML 2007 5 / 21</p>
  </div>
  <div class="page">
    <p>Uncover Hidden Bugs</p>
    <p>Goals I Uncover hidden bugs I NOT predicting whether a single run will fail or not</p>
    <p>F It will do that all on its own...</p>
    <p>Assumptions I Few hidden bugs  many failing runs I  1 bug per failing run</p>
    <p>(UWMadison) Topic-based statistical debugging ECML 2007 6 / 21</p>
  </div>
  <div class="page">
    <p>Uncover Hidden Bugs</p>
    <p>Goals I Uncover hidden bugs I NOT predicting whether a single run will fail or not</p>
    <p>F It will do that all on its own...</p>
    <p>Assumptions I Few hidden bugs  many failing runs I  1 bug per failing run</p>
    <p>(UWMadison) Topic-based statistical debugging ECML 2007 6 / 21</p>
  </div>
  <div class="page">
    <p>Latent Topic Modeling</p>
    <p>Debugging Topic modeling Predicates Words Program runs Documents Bug patterns Topics Active bug patterns Topic weights</p>
    <p>(UWMadison) Topic-based statistical debugging ECML 2007 7 / 21</p>
  </div>
  <div class="page">
    <p>Latent Topic Modeling</p>
    <p>Debugging Topic modeling Predicates Words Program runs Documents Bug patterns Topics Active bug patterns Topic weights</p>
    <p>(UWMadison) Topic-based statistical debugging ECML 2007 7 / 21</p>
  </div>
  <div class="page">
    <p>Latent Topic Modeling</p>
    <p>Debugging Topic modeling Predicates Words Program runs Documents Bug patterns Topics Active bug patterns Topic weights</p>
    <p>(UWMadison) Topic-based statistical debugging ECML 2007 7 / 21</p>
  </div>
  <div class="page">
    <p>Latent Dirichlet Allocation (LDA)</p>
    <p>u</p>
    <p>u</p>
    <p>Nu</p>
    <p>s zw</p>
    <p>D</p>
    <p>dN</p>
    <p>For each topic t t  Dir()</p>
    <p>For each doc d d  Dir() For each word w</p>
    <p>Topic z  d w  z</p>
    <p>(UWMadison) Topic-based statistical debugging ECML 2007 8 / 21</p>
  </div>
  <div class="page">
    <p>Latent Dirichlet Allocation (LDA)</p>
    <p>u</p>
    <p>u</p>
    <p>Nu</p>
    <p>s zw</p>
    <p>D</p>
    <p>dN</p>
    <p>For each topic t t  Dir()</p>
    <p>For each doc d d  Dir() For each word w</p>
    <p>Topic z  d w  z</p>
    <p>(UWMadison) Topic-based statistical debugging ECML 2007 8 / 21</p>
  </div>
  <div class="page">
    <p>Latent Dirichlet Allocation (LDA)</p>
    <p>u</p>
    <p>u</p>
    <p>Nu</p>
    <p>s zw</p>
    <p>D</p>
    <p>dN</p>
    <p>For each topic t t  Dir()</p>
    <p>For each doc d d  Dir() For each word w</p>
    <p>Topic z  d w  z</p>
    <p>(UWMadison) Topic-based statistical debugging ECML 2007 8 / 21</p>
  </div>
  <div class="page">
    <p>Latent Dirichlet Allocation (LDA)</p>
    <p>u</p>
    <p>u</p>
    <p>Nu</p>
    <p>s zw</p>
    <p>D</p>
    <p>dN</p>
    <p>For each topic t t  Dir()</p>
    <p>For each doc d d  Dir() For each word w</p>
    <p>Topic z  d w  z</p>
    <p>(UWMadison) Topic-based statistical debugging ECML 2007 8 / 21</p>
  </div>
  <div class="page">
    <p>Latent Dirichlet Allocation (LDA)</p>
    <p>u</p>
    <p>u</p>
    <p>Nu</p>
    <p>s zw</p>
    <p>D</p>
    <p>dN</p>
    <p>For each topic t t  Dir()</p>
    <p>For each doc d d  Dir() For each word w</p>
    <p>Topic z  d w  z</p>
    <p>(UWMadison) Topic-based statistical debugging ECML 2007 8 / 21</p>
  </div>
  <div class="page">
    <p>LDA motivation</p>
    <p>LDA cannot recover bug patterns</p>
    <p>Strong non-bug patterns also present Most runs successful</p>
    <p>I Usage patterns explain behavior Some runs fail</p>
    <p>I Usage patterns mostly explain behavior I Usage patterns overwhelm bug patterns</p>
    <p>(UWMadison) Topic-based statistical debugging ECML 2007 9 / 21</p>
  </div>
  <div class="page">
    <p>LDA motivation</p>
    <p>LDA cannot recover bug patterns</p>
    <p>Strong non-bug patterns also present Most runs successful</p>
    <p>I Usage patterns explain behavior Some runs fail</p>
    <p>I Usage patterns mostly explain behavior I Usage patterns overwhelm bug patterns</p>
    <p>(UWMadison) Topic-based statistical debugging ECML 2007 9 / 21</p>
  </div>
  <div class="page">
    <p>LDA motivation</p>
    <p>LDA cannot recover bug patterns</p>
    <p>Strong non-bug patterns also present Most runs successful</p>
    <p>I Usage patterns explain behavior Some runs fail</p>
    <p>I Usage patterns mostly explain behavior I Usage patterns overwhelm bug patterns</p>
    <p>(UWMadison) Topic-based statistical debugging ECML 2007 9 / 21</p>
  </div>
  <div class="page">
    <p>LDA motivation</p>
    <p>LDA cannot recover bug patterns</p>
    <p>Strong non-bug patterns also present Most runs successful</p>
    <p>I Usage patterns explain behavior Some runs fail</p>
    <p>I Usage patterns mostly explain behavior I Usage patterns overwhelm bug patterns</p>
    <p>(UWMadison) Topic-based statistical debugging ECML 2007 9 / 21</p>
  </div>
  <div class="page">
    <p>Toy Dataset</p>
    <p>(UWMadison) Topic-based statistical debugging ECML 2007 10 / 21</p>
  </div>
  <div class="page">
    <p>Toy Dataset</p>
    <p>(UWMadison) Topic-based statistical debugging ECML 2007 10 / 21</p>
  </div>
  <div class="page">
    <p>Toy Dataset</p>
    <p>(UWMadison) Topic-based statistical debugging ECML 2007 10 / 21</p>
  </div>
  <div class="page">
    <p>Toy Dataset</p>
    <p>(UWMadison) Topic-based statistical debugging ECML 2007 10 / 21</p>
  </div>
  <div class="page">
    <p>LDA</p>
    <p>u</p>
    <p>u</p>
    <p>Nu</p>
    <p>s zw</p>
    <p>D</p>
    <p>dN</p>
    <p>b b Nb</p>
    <p>f</p>
    <p>o</p>
    <p>w words z topics  topic weights u usage topic multinomials u, s hyperparameters o outcome flag b bug topic multinomials b, f hyperparameters</p>
    <p>(UWMadison) Topic-based statistical debugging ECML 2007 11 / 21</p>
  </div>
  <div class="page">
    <p>LDA</p>
    <p>u</p>
    <p>u</p>
    <p>Nu</p>
    <p>s zw</p>
    <p>D</p>
    <p>dN</p>
    <p>b b Nb</p>
    <p>f</p>
    <p>o</p>
    <p>w words z topics  topic weights u usage topic multinomials u, s hyperparameters o outcome flag b bug topic multinomials b, f hyperparameters</p>
    <p>(UWMadison) Topic-based statistical debugging ECML 2007 11 / 21</p>
  </div>
  <div class="page">
    <p>LDA</p>
    <p>u</p>
    <p>u</p>
    <p>Nu</p>
    <p>s zw</p>
    <p>D</p>
    <p>dN o</p>
    <p>Nb bb</p>
    <p>f</p>
    <p>w words z topics  topic weights u usage topic multinomials u, s hyperparameters o outcome flag b bug topic multinomials b, f hyperparameters</p>
    <p>(UWMadison) Topic-based statistical debugging ECML 2007 11 / 21</p>
  </div>
  <div class="page">
    <p>LDA</p>
    <p>u</p>
    <p>u</p>
    <p>Nu</p>
    <p>s zw</p>
    <p>D</p>
    <p>dN o</p>
    <p>f b</p>
    <p>bN b</p>
    <p>w words z topics  topic weights u usage topic multinomials u, s hyperparameters o outcome flag b bug topic multinomials b, f hyperparameters</p>
    <p>(UWMadison) Topic-based statistical debugging ECML 2007 11 / 21</p>
  </div>
  <div class="page">
    <p>LDA</p>
    <p>Successful run s = [1 1 1 | 0 0] Failing run f = [1 1 1 | 1 1]</p>
    <p>(UWMadison) Topic-based statistical debugging ECML 2007 12 / 21</p>
  </div>
  <div class="page">
    <p>LDA</p>
    <p>Successful run s = [1 1 1 | 0 0] Failing run f = [1 1 1 | 1 1]</p>
    <p>Successful run</p>
    <p>p(|s)</p>
    <p>(UWMadison) Topic-based statistical debugging ECML 2007 12 / 21</p>
  </div>
  <div class="page">
    <p>LDA</p>
    <p>Successful run s = [1 1 1 | 0 0] Failing run f = [1 1 1 | 1 1]</p>
    <p>Failing run</p>
    <p>p(|f )</p>
    <p>(UWMadison) Topic-based statistical debugging ECML 2007 12 / 21</p>
  </div>
  <div class="page">
    <p>Inference</p>
    <p>Need to calculate posterior p(z|w, o) Use z to estimate</p>
    <p>I Topic multinomials  for each topic I Topic weights  for each document</p>
    <p>Collapsed Gibbs Sampling Uses easily obtainable counts Efficient</p>
    <p>p(zk = i|zk , w, o)</p>
    <p>( nik ,jk +</p>
    <p>i jk</p>
    <p>nik , + W</p>
    <p>j   i j</p>
    <p>)( ndkk ,i +</p>
    <p>ok i</p>
    <p>ndkk , + Nu +Nb</p>
    <p>i   ok i</p>
    <p>)</p>
    <p>(UWMadison) Topic-based statistical debugging ECML 2007 13 / 21</p>
  </div>
  <div class="page">
    <p>Inference</p>
    <p>Need to calculate posterior p(z|w, o) Use z to estimate</p>
    <p>I Topic multinomials  for each topic I Topic weights  for each document</p>
    <p>Collapsed Gibbs Sampling Uses easily obtainable counts Efficient</p>
    <p>p(zk = i|zk , w, o)</p>
    <p>( nik ,jk +</p>
    <p>i jk</p>
    <p>nik , + W</p>
    <p>j   i j</p>
    <p>)( ndkk ,i +</p>
    <p>ok i</p>
    <p>ndkk , + Nu +Nb</p>
    <p>i   ok i</p>
    <p>)</p>
    <p>(UWMadison) Topic-based statistical debugging ECML 2007 13 / 21</p>
  </div>
  <div class="page">
    <p>Group failing runs by bug</p>
    <p>Run 1</p>
    <p>... ...</p>
    <p>Run n</p>
    <p>(UWMadison) Topic-based statistical debugging ECML 2007 14 / 21</p>
  </div>
  <div class="page">
    <p>Results</p>
    <p>grep</p>
    <p>topic 6</p>
    <p>to p ic</p>
    <p>moss</p>
    <p>1</p>
    <p>0.60.40.200.20.40.60.8</p>
    <p>1</p>
    <p>0.5</p>
    <p>P C</p>
    <p>A 3</p>
    <p>PCA2PCA1</p>
    <p>(UWMadison) Topic-based statistical debugging ECML 2007 15 / 21</p>
  </div>
  <div class="page">
    <p>Results</p>
    <p>Rand index wrt ground truth</p>
    <p>LDA [1] [2] exif 1.00 0.88 1.00 grep 0.97 0.71 0.77 gzip 0.89 1.00 1.00 moss 0.93 0.93 0.96</p>
    <p>Baselines 1 Statistical Debugging: Simultaneous Isolation of Multiple Bugs,</p>
    <p>Zheng et al ICML 06 2 Scalable Statistical Bug Isolation, Liblit et al PLDI 05</p>
    <p>(UWMadison) Topic-based statistical debugging ECML 2007 16 / 21</p>
  </div>
  <div class="page">
    <p>Top predicates for each bug</p>
    <p>Top predicates for exif bug topic 9 Rank p(z|w ) Predicate w Expert opinion</p>
    <p>(UWMadison) Topic-based statistical debugging ECML 2007 17 / 21</p>
  </div>
  <div class="page">
    <p>Top predicates for each bug</p>
    <p>Top predicates for exif bug topic 9 Rank p(z|w ) Predicate w Expert opinion</p>
    <p>(UWMadison) Topic-based statistical debugging ECML 2007 17 / 21</p>
  </div>
  <div class="page">
    <p>Conclusion</p>
    <p>Debugging can be a machine learning problem LDA overcomes problems with standard LDA LDA successful on real-world data Other possible uses of LDA (eg, sentiment analysis)</p>
    <p>Acknowledgements NLM Training Grant 5T15LM07359, NSF Grant CCF-0621487, AFOSR Grant FA9550-07-1-0210</p>
    <p>(UWMadison) Topic-based statistical debugging ECML 2007 18 / 21</p>
  </div>
  <div class="page">
    <p>LDA  Debugging</p>
    <p>LDA Debugging Words Predicates Documents Program runs Usage topics Usage patterns Bug topics Bug patterns Bug topic documents Failing runs Topic weights Active usage/bug patterns</p>
    <p>(UWMadison) Topic-based statistical debugging ECML 2007 19 / 21</p>
  </div>
  <div class="page">
    <p>Debugging Dataset</p>
    <p>Runs</p>
    <p>Program Lines of Code Bugs Successful Failing</p>
    <p>exif 10,611 2 352 30 grep 15,721 2 609 200 gzip 8,960 2 29 186 moss 35,223 8 1727 1228</p>
    <p>Topics</p>
    <p>Program Word Types Usage Bug</p>
    <p>exif 20 7 2 grep 2,071 5 2 gzip 3,929 5 2 moss 1,982 14 8</p>
    <p>(UWMadison) Topic-based statistical debugging ECML 2007 20 / 21</p>
  </div>
  <div class="page">
    <p>Joint distribution</p>
    <p>p(w, z) = p(w|z)p(z)</p>
    <p>p(w|z) =</p>
    <p>N i</p>
    <p>p(i|)</p>
    <p>W j</p>
    <p>ij nij di</p>
    <p>p(z) =</p>
    <p>D d</p>
    <p>p(d|)</p>
    <p>N i</p>
    <p>di ndi dd</p>
    <p>(UWMadison) Topic-based statistical debugging ECML 2007 21 / 21</p>
  </div>
  <div class="page">
    <p>Joint distribution</p>
    <p>p(w, z) = p(w|z)p(z)</p>
    <p>p(w|z) = N i</p>
    <p>p(i|)</p>
    <p>W j</p>
    <p>ij nij</p>
    <p>di</p>
    <p>p(z) =</p>
    <p>D d</p>
    <p>p(d|)</p>
    <p>N i</p>
    <p>di ndi dd</p>
    <p>(UWMadison) Topic-based statistical debugging ECML 2007 21 / 21</p>
  </div>
  <div class="page">
    <p>Joint distribution</p>
    <p>p(w, z) = p(w|z)p(z)</p>
    <p>p(w|z) = N i</p>
    <p>p(i|)</p>
    <p>W j</p>
    <p>ij nij</p>
    <p>di</p>
    <p>p(z) = D d</p>
    <p>p(d|)</p>
    <p>N i</p>
    <p>di ndi</p>
    <p>dd</p>
    <p>(UWMadison) Topic-based statistical debugging ECML 2007 21 / 21</p>
  </div>
  <div class="page">
    <p>Joint distribution</p>
    <p>p(w, z) = p(w|z)p(z)</p>
    <p>p(w|z) = N i</p>
    <p>p(i|)</p>
    <p>W j</p>
    <p>ij nij</p>
    <p>di</p>
    <p>p(z) = D d</p>
    <p>p(d|)</p>
    <p>N i</p>
    <p>di ndi dd</p>
    <p>(UWMadison) Topic-based statistical debugging ECML 2007 21 / 21</p>
  </div>
  <div class="page">
    <p>Joint distribution</p>
    <p>p(w, z) = p(w|z)p(z)</p>
    <p>p(w|z) = N i</p>
    <p>p(i|)</p>
    <p>W j</p>
    <p>ij nij di</p>
    <p>p(z) = D d</p>
    <p>p(d|)</p>
    <p>N i</p>
    <p>di ndi dd</p>
    <p>(UWMadison) Topic-based statistical debugging ECML 2007 21 / 21</p>
  </div>
</Presentation>

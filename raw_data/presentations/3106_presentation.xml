<?xml version="1.0" ?>
<Presentation>
  <div class="page">
    <p>CIMDIFF: Advanced Difference Tracking Tool for CIM Compliant Devices</p>
    <p>Ramani Routray Shripad Nadgowda IBM Research  Almaden IBM System and Technology Lab, Pune</p>
    <p>2009 IBM Corporation</p>
  </div>
  <div class="page">
    <p>USENIX LISA 2009</p>
    <p>Outline</p>
    <p>Background</p>
    <p>Model and Problem Definition</p>
    <p>System Overview</p>
    <p>Implementation</p>
    <p>2009 IBM Corporation2</p>
    <p>Results</p>
    <p>Conclusion and Future Work</p>
  </div>
  <div class="page">
    <p>USENIX LISA 2009</p>
    <p>Background (I)</p>
    <p>CIM Agent</p>
    <p>Providers</p>
    <p>CIMOM Indication</p>
    <p>Security</p>
    <p>Repository</p>
    <p>CIM Client CIM-XML/HTTP</p>
    <p>MOF</p>
    <p>Web Based Enterprise Management (WBEM)</p>
    <p>CIM_ManagedElement</p>
    <p>2009 IBM Corporation3</p>
    <p>CIM_ManagedElement</p>
    <p>CIM_ManagedSystemElement</p>
    <p>CIM_LogicalElement</p>
    <p>CIM_EnabledLogicalElement</p>
    <p>CIM_System</p>
    <p>CIM_ComputerSystem CIM_FCPort</p>
    <p>CIM_NetworkPort</p>
    <p>CIM_LogicalPort</p>
    <p>CIM_LogicalDevice</p>
    <p>CIM_EnabledLogicalElement</p>
  </div>
  <div class="page">
    <p>USENIX LISA 2009</p>
    <p>Background (II)</p>
    <p>&lt;?xml version=&quot;1.0&quot; ?&gt;</p>
    <p>&lt;CIM CIMVERSION=&quot;2.0&quot; DTDVERSION=&quot;2.0&quot;&gt;</p>
    <p>&lt;MESSAGE ID=&quot;0&quot; PROTOCOLVERSION=&quot;1.0&quot;&gt;</p>
    <p>...</p>
    <p>&lt;INSTANCENAME CLASSNAME=&quot;IBMTSDS_StorageSystem&quot;&gt;</p>
    <p>&lt;KEYBINDING NAME=&quot;Name&quot;&gt;</p>
    <p>&lt;KEYVALUE VALUETYPE=&quot;string&quot;&gt;</p>
    <p>IBM.1750-6887010</p>
    <p>&lt;/KEYVALUE&gt;</p>
    <p>&lt;/KEYBINDING&gt;</p>
    <p>&lt;KEYBINDING NAME=&quot;CreationClassName&quot;&gt;</p>
    <p>&lt;KEYVALUE VALUETYPE=&quot;string&quot;&gt;</p>
    <p>IBMTSDS_StorageSystem</p>
    <p>CIMObjectpath</p>
    <p>(Key CIM Properties)</p>
    <p>2009 IBM Corporation4</p>
    <p>IBMTSDS_StorageSystem</p>
    <p>&lt;/KEYVALUE&gt;</p>
    <p>&lt;/KEYBINDING&gt;</p>
    <p>&lt;/INSTANCENAME&gt;</p>
    <p>&lt;INSTANCE CLASSNAME=&quot;IBMTSDS_StorageSystem&quot;&gt;</p>
    <p>&lt;PROPERTY NAME=&quot;CodeLevel&quot; TYPE=&quot;string&quot;&gt;</p>
    <p>&lt;VALUE TYPE=&quot;string&quot;&gt;5.2.2.399&lt;/VALUE&gt;</p>
    <p>&lt;/PROPERTY&gt;</p>
    <p>&lt;PROPERTY NAME=&quot;NVSMemory&quot; TYPE=&quot;uint32&quot;&gt;</p>
    <p>&lt;VALUE TYPE=&quot;uint32&quot;&gt;256&lt;/VALUE&gt;</p>
    <p>&lt;/PROPERTY&gt;</p>
    <p>&lt;PROPERTY NAME=&quot;CacheMemory&quot; TYPE=&quot;uint32&quot;&gt;</p>
    <p>&lt;VALUE TYPE=&quot;uint32&quot;&gt;2629&lt;/VALUE&gt;</p>
    <p>&lt;/PROPERTY&gt;</p>
    <p>...</p>
    <p>&lt;/INSTANCE&gt;</p>
    <p>CIM</p>
    <p>Instance</p>
    <p>(Non-Key CIM Properties)</p>
  </div>
  <div class="page">
    <p>USENIX LISA 2009</p>
    <p>Motivation and Problem Definition</p>
    <p>Discovery operation by System Management tool  Administrators Query difference between systems</p>
    <p>XML Document difference tracking  NP Hard  Meaningful Difference Tracking</p>
    <p>2009 IBM Corporation5</p>
    <p>Meaningful Difference Tracking</p>
    <p>Cr = { N + }</p>
    <p>N = { Ci | Cop | Cp }</p>
    <p>Ci = { Cop, Cp }</p>
    <p>Cop = { Cp + }</p>
  </div>
  <div class="page">
    <p>USENIX LISA 2009</p>
    <p>Model and Problem Definition (II)</p>
    <p>Temporal</p>
    <p>Temporal-Syntactic Temporal-Semantic</p>
    <p>Snapshot of Same CIM Agent(s) CIMInstance addition/deletion/.. (e.g. CIM_StorageVolume)</p>
    <p>Snapshot of Same CIM Agent(s) Logical Actions : Volume Assignment (e.g. CIM Instance creation/modification Volume, Privilege, ProtocolControllerForUnit Cause of Extrinsic method invocation)</p>
    <p>2009 IBM Corporation6</p>
    <p>Syntactic</p>
    <p>Spatial</p>
    <p>Semantic</p>
    <p>Spatial-Syntactic Spatial-Semantic</p>
    <p>Snapshot of Different CIM Agent(s) Diff in CIM Properties (e.g. CIM_StorageVolume instances)</p>
    <p>Snapshot of Different CIM Agent(s) Diff in Logical Properties (e.g. TotalSpace, AvaliableSpace etc..)</p>
  </div>
  <div class="page">
    <p>USENIX LISA 2009</p>
    <p>System Overview</p>
    <p>CIM Repository &lt;t0, CIMAgenta&gt;</p>
    <p>CIM Repository &lt;t1, CIMAgenta&gt;</p>
    <p>CIM Repository &lt;tm, CIMAgentx&gt;</p>
    <p>CIM Repository &lt;tn, CIMAgenty&gt;</p>
    <p>INPUT</p>
    <p>SAN Simulator</p>
    <p>2009 IBM Corporation7</p>
    <p>OUTPUT</p>
    <p>Difference Tracker</p>
    <p>Hash Maker</p>
    <p>Knowledge Base</p>
    <p>Hierarchy Resolver</p>
    <p>CIMDIFF</p>
  </div>
  <div class="page">
    <p>USENIX LISA 2009</p>
    <p>Hash Maker</p>
    <p>2009 IBM Corporation8</p>
  </div>
  <div class="page">
    <p>USENIX LISA 2009</p>
    <p>KnowledgeBase (I)</p>
    <p>2009 IBM Corporation9</p>
  </div>
  <div class="page">
    <p>USENIX LISA 2009</p>
    <p>KnowledgeBase - Recipe</p>
    <p>2009 IBM Corporation10</p>
  </div>
  <div class="page">
    <p>USENIX LISA 2009</p>
    <p>KnowledgeBase  StorageVolume Creation</p>
    <p>IBMTSDS_Volume</p>
    <p>IBMTSDS_ExtentPool</p>
    <p>IBMTSDS_AllocatedFromExtentPool</p>
    <p>IBMTSDS_RankExtentIBMTSDS_VolumeDistribution</p>
    <p>IBMTSDS_VolumeBasedOnRankExtent</p>
    <p>C</p>
    <p>C</p>
    <p>C</p>
    <p>U</p>
    <p>E</p>
    <p>2009 IBM Corporation11</p>
    <p>IBMTSDS_VolumeBasedOnRankExtent</p>
    <p>IBMTSDS_StorageSystem</p>
    <p>IBMTSDS_StorageSystemToVolumeDistribution IBMTSDS_StorageSystemToVolume</p>
    <p>IBMTSDS_VolStatsMemberOfCollection IBMTSDS_VolumeStatisticalData</p>
    <p>IBMTSDS_VolumeStatistics IBMTSDS_VolumeSettingData</p>
    <p>C C C</p>
    <p>E</p>
    <p>C C</p>
    <p>C C</p>
    <p>C</p>
    <p>E</p>
    <p>U</p>
    <p>Exists</p>
    <p>Create</p>
    <p>Update</p>
  </div>
  <div class="page">
    <p>USENIX LISA 2009</p>
    <p>KnowledgeBase  StorageVolume Assignment</p>
    <p>IBMTSDS_StorageSystem</p>
    <p>IBMTSDS_HostedVolumeGroup</p>
    <p>IBMTSDS_VolumeGroup</p>
    <p>IBMTSDS_MappedVolumeGroup</p>
    <p>IBMTSDS_StorageSystemToSPC</p>
    <p>IBMTSDS_PriviledgeManagementService</p>
    <p>IBMTSDS_ConcreteDependecyPriviledge</p>
    <p>IBMTSDS_Priviledge</p>
    <p>IBMTSDS_MemberOfVolumeGroup</p>
    <p>IBMTSDS_VolumeIBMTSDS_ProtocolControllerForUnit C E</p>
    <p>E</p>
    <p>C</p>
    <p>C</p>
    <p>C</p>
    <p>C</p>
    <p>C</p>
    <p>C E</p>
    <p>C</p>
    <p>2009 IBM Corporation12</p>
    <p>IBMTSDS_SCSIProtocolController</p>
    <p>IBMTSDS_StorageHardwareID</p>
    <p>IBMTSDS_SHWIDToSPC</p>
    <p>IBMTSDS_ConcreteDependecncyStorageHardwareID</p>
    <p>IBMTSDS_StorageHardwareIDManagementService</p>
    <p>IBMTSDS_SCSIProtocolControllerEndPointIBMTSDS_SAPAvailabeForElement</p>
    <p>IBMTSDS_StorageClientSetting</p>
    <p>IBMTSDS_InitiatorElementSettingData</p>
    <p>IBMTSDS_ControllerConfigurationService</p>
    <p>IBMTSDS_ConcreteDependencyController</p>
    <p>IBMTSDS_AuthorizesTarget</p>
    <p>IBMTSDS_FCportIBMTSDS_ProtocolControllerForPort</p>
    <p>IBMTSDS_AuthorizedSubject</p>
    <p>E</p>
    <p>E</p>
    <p>E</p>
    <p>E</p>
    <p>E</p>
    <p>C</p>
    <p>C</p>
    <p>C</p>
    <p>C</p>
    <p>C</p>
    <p>C</p>
    <p>CC</p>
    <p>C</p>
    <p>C</p>
  </div>
  <div class="page">
    <p>USENIX LISA 2009</p>
    <p>Difference Tracker</p>
    <p>calculateMinCostEditScripts(Cr1,Cr2)</p>
    <p>{</p>
    <p>/* Hashing */</p>
    <p>Map Cr1 to T1, Map Cr2 to T2</p>
    <p>Hash T1, Hash T2</p>
    <p>/* Traverse CIM Agent Hierarchy */</p>
    <p>/* Traverse Managed Device Hierarchy */</p>
    <p>Traverse CIM Agent hierarchy &amp;</p>
    <p>Traverse Managed Device hierarchy</p>
    <p>2009 IBM Corporation13</p>
    <p>Traverse Managed Device hierarchy</p>
    <p>{</p>
    <p>/* Check tree isomorphism based on Hash */</p>
    <p>/* Compute Insert, Delete, Update */</p>
    <p>for all Node N in T1 and T2</p>
    <p>for all CIMClass(es)</p>
    <p>for all CIMInstance(s)</p>
    <p>Compare CIMObjectpath</p>
    <p>Compare CIMProperties</p>
    <p>}</p>
    <p>}</p>
  </div>
  <div class="page">
    <p>USENIX LISA 2009</p>
    <p>Implementation</p>
    <p>2009 IBM Corporation14</p>
  </div>
  <div class="page">
    <p>USENIX LISA 2009</p>
    <p>Results</p>
    <p>2009 IBM Corporation15</p>
  </div>
  <div class="page">
    <p>USENIX LISA 2009</p>
    <p>Results</p>
    <p>2009 IBM Corporation16</p>
  </div>
  <div class="page">
    <p>USENIX LISA 2009</p>
    <p>Results</p>
    <p>2009 IBM Corporation17</p>
  </div>
  <div class="page">
    <p>USENIX LISA 2009</p>
    <p>Results</p>
    <p>2009 IBM Corporation18</p>
  </div>
  <div class="page">
    <p>USENIX LISA 2009</p>
    <p>Conclusion and Future Work</p>
    <p>Diff Utility  XML, GNU, CVS,</p>
    <p>Multi-Hierarchical XML Document  Standards Based  KnowledgeBase Driven  Meaningful Diff Tracking</p>
    <p>Powerful tool for system administrators</p>
    <p>2009 IBM Corporation19</p>
    <p>Powerful tool for system administrators &amp; system management tool developers and testers</p>
    <p>Tool can be used in SNIA CTP Environment  Fast Changing Virtual Environment</p>
    <p>Using Machine learning for automatic pattern detection  Visual tool for administrator to specify pattern</p>
  </div>
  <div class="page">
    <p>USENIX LISA 2009</p>
    <p>Thank You!</p>
    <p>2009 IBM Corporation20</p>
    <p>Thank You!</p>
  </div>
</Presentation>

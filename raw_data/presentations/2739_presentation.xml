<?xml version="1.0" ?>
<Presentation>
  <div class="page">
    <p>RAIL: A Case for Redundant Arrays of Inexpensive Links</p>
    <p>in Data Center Networks</p>
    <p>Danyang Zhuo, Monia Ghobadi, Ratul Mahajan, Amar Phanishayee, Xuan Kelvin Zou, Hang Guan, Arvind Krishnamurthy, Thomas Anderson</p>
  </div>
  <div class="page">
    <p>Fiber</p>
    <p>Switch</p>
    <p>[Image from hivelocity]</p>
  </div>
  <div class="page">
    <p>Optical Links are Expensive</p>
    <p>Transceiver 48%</p>
    <p>Fiber 14%</p>
    <p>Switch 34%</p>
    <p>Energy 4%</p>
    <p>Transceiver</p>
  </div>
  <div class="page">
    <p>In this talk..</p>
    <p>First large-scale measurement of optical links in DCN  Significant over-engineering in optics</p>
    <p>Reduce over-engineering by using transceivers beyond design reach limit  Cost saving up to 40% of DCN</p>
    <p>Challenge: Packet loss on a small fraction of links  RAIL protects loss sensitive applications from this packet loss</p>
  </div>
  <div class="page">
    <p>Signal Strength and Bit Error Rate</p>
    <p>Fiber TransceiverTransceiver</p>
    <p>Bit error rate</p>
  </div>
  <div class="page">
    <p>Transceiver Classification</p>
    <p>[Image from robofiber]</p>
  </div>
  <div class="page">
    <p>Transceiver Classification</p>
    <p>[Image from robofiber]</p>
    <p>&lt; &lt;</p>
  </div>
  <div class="page">
    <p>Over-engineering in Optics</p>
    <p>-20 -15 -10 -5 0 5</p>
    <p>C D</p>
    <p>F</p>
    <p>Receive Signal Strength (dBm) TH</p>
    <p>R ES</p>
    <p>H O</p>
    <p>LD</p>
    <p>Uniform randomly</p>
    <p>distributed</p>
    <p>Pervasive across: technology types (10G, 40G, 100G), 20 data centers, 5 major transceiver manufacturers, 10 months</p>
  </div>
  <div class="page">
    <p>Why so much over-engineering?</p>
  </div>
  <div class="page">
    <p>IEEE 802.3 Standards</p>
    <p>Ensure every link is reliable under worst-case assumption  Fiber quality</p>
    <p>Connector loss</p>
    <p>Dispersion</p>
    <p>Derive reach limit based on worst-case assumption</p>
  </div>
  <div class="page">
    <p>IEEE 802.3 Standards</p>
    <p>Switch</p>
  </div>
  <div class="page">
    <p>IEEE 802.3 Standards</p>
    <p>Switch</p>
    <p>ToR ToR</p>
    <p>Switch Switch</p>
  </div>
  <div class="page">
    <p>IEEE 802.3 Standards</p>
    <p>Switch</p>
    <p>ToR ToR</p>
    <p>Switch Switch</p>
  </div>
  <div class="page">
    <p>How to reduce over-engineering?</p>
  </div>
  <div class="page">
    <p>Use Transceivers beyond Design Reach Limit</p>
    <p>$165/port 40G-SR4</p>
    <p>$1249/port 40G-LR4</p>
    <p>??? 200m</p>
    <p>???</p>
  </div>
  <div class="page">
    <p>Use Transceivers beyond Design Reach Limit</p>
    <p>$165/port 40G-SR4</p>
    <p>$1249/port 40G-LR4</p>
  </div>
  <div class="page">
    <p>Use Transceivers beyond Design Reach Limit</p>
    <p>$165/port 40G-SR4</p>
    <p>$1249/port 40G-LR4</p>
  </div>
  <div class="page">
    <p>Reducing DCN Cost</p>
    <p>Pr ic</p>
    <p>e ($</p>
    <p>)</p>
    <p>Reach (m)</p>
    <p>Standard reach Stretched reach</p>
    <p>R1 R1 R2 R2</p>
    <p>P1</p>
    <p>P2</p>
    <p>P3</p>
    <p>R3</p>
    <p>Cost savings</p>
  </div>
  <div class="page">
    <p>Quantifying Stretch Limit  Concatenate short</p>
    <p>fibers to emulate a long fiber.  Use optical attenuator</p>
    <p>to emulate dirty on optical connectors.  Test packet error rate</p>
    <p>and convert it to biterror rate (BER).  Modeling effect of</p>
    <p>stretching on BER.</p>
  </div>
  <div class="page">
    <p>Quantifying Stretch Limit</p>
    <p>B it</p>
    <p>Er ro</p>
    <p>r R at</p>
    <p>e</p>
    <p>Reach (m)</p>
    <p>it Er</p>
    <p>ro r R</p>
    <p>at e</p>
    <p>Attenuation (dB)</p>
    <p>Threshold Threshold</p>
    <p>Reach can be stretched by up to 4x</p>
    <p>Transceiver #1 Transceiver #2 Model</p>
  </div>
  <div class="page">
    <p>Modeling Network Cost</p>
    <p>3-stage Clos network (512 ToRs, 512 Aggs, 256 Cores)</p>
    <p>Uniform link length distribution (max length = 10m  2 km)  Pick cheapest optical technology for each link</p>
    <p>Calculate the total DCN cost by summing up:  Fiber cost</p>
    <p>Transceiver cost</p>
    <p>Switch cost</p>
    <p>Energy cost</p>
    <p>Stretch</p>
  </div>
  <div class="page">
    <p>Cost Saving after Stretch</p>
    <p>C os</p>
    <p>t S av</p>
    <p>in g</p>
    <p>(% )</p>
    <p>Max Link Length</p>
    <p>Low (99% Good Paths) High (95% Good Paths)</p>
  </div>
  <div class="page">
    <p>Cost Saving after Stretch</p>
    <p>C os</p>
    <p>t S av</p>
    <p>in g</p>
    <p>(% )</p>
    <p>Max Link Length</p>
    <p>Low (99% Good Paths) High (95% Good Paths)</p>
    <p>No savings</p>
  </div>
  <div class="page">
    <p>Cost Saving after Stretch</p>
    <p>C os</p>
    <p>t S av</p>
    <p>in g</p>
    <p>(% )</p>
    <p>Max Link Length</p>
    <p>Low (99% Good Paths) High (95% Good Paths)</p>
    <p>Peak savings</p>
  </div>
  <div class="page">
    <p>Cost Saving after Stretch</p>
    <p>C os</p>
    <p>t S av</p>
    <p>in g</p>
    <p>(% )</p>
    <p>Max Link Length</p>
    <p>Low (99% Good Paths) High (95% Good Paths)</p>
    <p>Decreasing savings</p>
  </div>
  <div class="page">
    <p>Impact on Packet Loss</p>
    <p>C D</p>
    <p>F</p>
    <p>Link Packet Loss Rate</p>
    <p>No Stretch Low High</p>
  </div>
  <div class="page">
    <p>How to protect loss-sensitive applications from a small number of low loss links?</p>
  </div>
  <div class="page">
    <p>Possible Solutions</p>
    <p>Strawman: Source-routing  Source server picks a path that meets application requirement</p>
    <p>Hard to scale</p>
    <p>Strawman: Error-correction code  Need to encode with per-path error rate to avoid bandwidth overhead</p>
    <p>Latency of error correction for short flows</p>
  </div>
  <div class="page">
    <p>RAILs Approach</p>
    <p>Virtual Topology  Ensures a maximum end-to-end path packet error rate</p>
    <p>Higher class virtual topology has higher loss rate</p>
    <p>Applications choose virtual topology</p>
    <p>Error correction for higher class  Route with error-correction appropriate for path</p>
  </div>
  <div class="page">
    <p>Virtual Topologies</p>
  </div>
  <div class="page">
    <p>Support Unmodified Applications</p>
    <p>Server exposes multiple virtual NICs where each virtual NIC</p>
    <p>corresponds to a path loss rate guarantee</p>
    <p>Applications simply choose a virtual NIC to bind  Flow is transparently error-encoded when traversing high loss path</p>
    <p>Loss rate is queried from centralized controller</p>
  </div>
  <div class="page">
    <p>Testbed Experiments</p>
    <p>3-stage Clos network (4 ToRs, 4 Aggs, 2 Cores)  10G-SR optical technology</p>
    <p>TCP CUBIC on Linux 3.19</p>
    <p>Use an optical attenuator to degrade the quality of a single link</p>
    <p>Two virtual topologies  Virtual topology #1: Without the degraded link</p>
    <p>Virtual topology #2: With the degraded link</p>
  </div>
  <div class="page">
    <p>Evaluation Methodology</p>
    <p>Comparison  No RAIL</p>
    <p>RAIL</p>
    <p>RAIL w/o EC, use virtual topology #1 to protect flows less than 1MB</p>
    <p>Compute flow completion time normalized by performance on nondegraded network; Flow length distribution from pFabric.</p>
    <p>Binned by flow sizes</p>
  </div>
  <div class="page">
    <p>Evaluations</p>
    <p>N or</p>
    <p>m al</p>
    <p>iz ed</p>
    <p>F C</p>
    <p>T</p>
    <p>Non-degraded No RAIL RAIL RAIL w/o EC</p>
  </div>
  <div class="page">
    <p>Summary</p>
    <p>Room for cost saving in optics used in DCN</p>
    <p>Reducing over-engineering  Stretching design reach limit for optical links</p>
    <p>can save up to 40%</p>
    <p>RAIL protects loss sensitive applications from packet loss due to reduction in overengineering.</p>
  </div>
</Presentation>

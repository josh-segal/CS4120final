<?xml version="1.0" ?>
<Presentation>
  <div class="page">
    <p>NeuOS: A Latency-Predictable Multi-Dimensional Optimization Framework for DNN-driven</p>
    <p>Autonomous Systems</p>
    <p>Soroush Bateni The University of Texas at Dallas</p>
    <p>Cong Liu The University of Texas at Dallas</p>
  </div>
  <div class="page">
    <p>Deep Neural Networks (DNNs) Autonomous Embedded Systems</p>
    <p>The tale of two worlds</p>
    <p>Background</p>
    <p>FC FC</p>
    <p>SoftMax</p>
    <p>Autonomous</p>
    <p>Decision</p>
  </div>
  <div class="page">
    <p>Deep Neural Networks (DNNs) Autonomous Embedded Systems</p>
    <p>The tale of two worlds</p>
    <p>Background</p>
    <p>FC FC</p>
    <p>SoftMax</p>
    <p>Autonomous</p>
    <p>Decision</p>
    <p>Main Objective</p>
    <p>Maximum Accuracy</p>
    <p>Main Objectives</p>
    <p>Timing predictability</p>
    <p>Energy efficiency</p>
    <p>Safety</p>
  </div>
  <div class="page">
    <p>Deep Neural Networks (DNNs) Autonomous Embedded Systems</p>
    <p>Marriage between the two worlds</p>
    <p>Background</p>
    <p>FC FC</p>
    <p>SoftMax</p>
    <p>Autonomous</p>
    <p>Decision</p>
  </div>
  <div class="page">
    <p>The big picture</p>
    <p>Hardware/software</p>
    <p>stack for executing</p>
    <p>DNNs in Autonomous</p>
    <p>Embedded Systems</p>
    <p>Background</p>
    <p>DNN</p>
    <p>Framework/OS</p>
  </div>
  <div class="page">
    <p>The big picture</p>
    <p>Hardware/software</p>
    <p>stack for executing</p>
    <p>DNNs in Autonomous</p>
    <p>Embedded Systems</p>
    <p>Background</p>
    <p>DNN</p>
    <p>The focus of related research</p>
    <p>in AES is currently mostly on</p>
    <p>the DNN and the hardware.</p>
    <p>Framework/OS</p>
  </div>
  <div class="page">
    <p>The big picture</p>
    <p>Hardware/software</p>
    <p>stack for executing</p>
    <p>DNNs in Autonomous</p>
    <p>Embedded Systems</p>
    <p>Background</p>
    <p>DNN</p>
    <p>Efficient DNNs  Quantization</p>
    <p>Lowrank approximation</p>
    <p>Framework/OS</p>
  </div>
  <div class="page">
    <p>The big picture</p>
    <p>Hardware/software</p>
    <p>stack for executing</p>
    <p>DNNs in Autonomous</p>
    <p>Embedded Systems</p>
    <p>Background</p>
    <p>DNN</p>
    <p>Special Processors  AI accelerators</p>
    <p>DNN-focused SoCs</p>
    <p>Framework/OS</p>
  </div>
  <div class="page">
    <p>Where system software/framework can help</p>
    <p>Goals</p>
    <p>DNN</p>
    <p>Challenges  Meet timing requirements</p>
    <p>Be energy efficient</p>
    <p>Minimize accuracy loss.</p>
    <p>All the above goals must be</p>
    <p>achieved at the same time.</p>
    <p>Framework/OS</p>
  </div>
  <div class="page">
    <p>Timing predictable &amp;</p>
    <p>energy efficient</p>
    <p>Can be achieved at system</p>
    <p>level via Dynamic Voltage</p>
    <p>Frequency Scaling (DVFS).</p>
    <p>Timing predictable &amp;</p>
    <p>accurate</p>
    <p>Can be achieved at</p>
    <p>application level via DNN</p>
    <p>configuration change.</p>
    <p>Master of none</p>
    <p>Combining the two (even at</p>
    <p>different rates) will yield</p>
    <p>unpredictable results.</p>
    <p>Jack of all trades, master of none</p>
    <p>Motivation</p>
  </div>
  <div class="page">
    <p>Timing predictable &amp;</p>
    <p>energy efficient</p>
    <p>Can be achieved at system</p>
    <p>level via Dynamic Voltage</p>
    <p>Frequency Scaling (DVFS).</p>
    <p>Timing predictable &amp;</p>
    <p>accurate</p>
    <p>Can be achieved at</p>
    <p>application level via DNN</p>
    <p>configuration change.</p>
    <p>Master of none</p>
    <p>Combining the two (even at</p>
    <p>different rates) will yield</p>
    <p>unpredictable results.</p>
    <p>Jack of all trades, master of none</p>
    <p>Motivation</p>
  </div>
  <div class="page">
    <p>Timing predictable &amp;</p>
    <p>energy efficient</p>
    <p>Can be achieved at system</p>
    <p>level via Dynamic Voltage</p>
    <p>Frequency Scaling (DVFS).</p>
    <p>Timing predictable &amp;</p>
    <p>accurate</p>
    <p>Can be achieved at</p>
    <p>application level via DNN</p>
    <p>configuration change.</p>
    <p>Master of none</p>
    <p>Combining the two (even at</p>
    <p>different rates) will yield</p>
    <p>unpredictable results.</p>
    <p>Jack of all trades, master of none</p>
    <p>Motivation</p>
    <p>Need per-layer</p>
    <p>adjustments.</p>
    <p>Need per-layer</p>
    <p>adjustments. Need coordination.</p>
  </div>
  <div class="page">
    <p>No one is alone</p>
    <p>Multiple ResNet-50 instances executed together</p>
    <p>The underlying system-level solution here is PredJoule1</p>
    <p>Takeaways</p>
    <p>The first DNN instance is</p>
    <p>the winner, other DNN</p>
    <p>instances not as lucky</p>
    <p>because the method used</p>
    <p>here is greedy.</p>
    <p>The DVFS configurations</p>
    <p>chosen only work well for</p>
    <p>the first DNN instance.</p>
    <p>Motivation</p>
    <p>for deep neural networks.&quot; In 2018 IEEE Real-Time Systems Symposium (RTSS) 13</p>
  </div>
  <div class="page">
    <p>No one is alone</p>
    <p>Multiple ResNet-50 instances executed together</p>
    <p>The underlying system-level solution here is PredJoule1</p>
    <p>Takeaways</p>
    <p>The first DNN instance is</p>
    <p>the winner, other DNN</p>
    <p>instances not as lucky</p>
    <p>because the method used</p>
    <p>here is greedy.</p>
    <p>The DVFS configurations</p>
    <p>chosen only work well for</p>
    <p>the first DNN instance.</p>
    <p>Motivation</p>
    <p>for deep neural networks.&quot; In 2018 IEEE Real-Time Systems Symposium (RTSS) 14</p>
    <p>Need cross-DNN</p>
    <p>coordination.</p>
  </div>
  <div class="page">
    <p>Core Targets</p>
    <p>Timing predictable: the system must meet</p>
    <p>deadlines set by the system designer for the</p>
    <p>DNN.</p>
    <p>Energy efficient: the system must use DVFS to</p>
    <p>achieve near-optimal energy usage for DNNs.</p>
    <p>Accurate: the system can change accuracy</p>
    <p>dynamically but must do so cautiously.</p>
    <p>Multi-DNN compatibility: the system should be</p>
    <p>able to coordinate and find an efficient</p>
    <p>solution for all DNN instances.</p>
    <p>Optimization Targets</p>
    <p>The system must also be flexible to adapt to</p>
    <p>different system constraints. We offer three</p>
    <p>optimization targets (switchable by an</p>
    <p>external policy controller):</p>
    <p>Min Energy (Mp) is used when our design is deployed in</p>
    <p>extremely low power scenario such as remote sensing.</p>
    <p>Max Accuracy (MA) is used when our design is deployed</p>
    <p>in extremely mission-critical scenarios.</p>
    <p>Balanced Energy and Accuracy is the scenario where our</p>
    <p>design can choose what is best given the timing</p>
    <p>requirement.</p>
    <p>Design Goals</p>
    <p>Design</p>
  </div>
  <div class="page">
    <p>LAG analysis</p>
    <p>Keep track of per-layer progress</p>
    <p>Proportional Deadline</p>
    <p>Build an ideal schedule by setting sub</p>
    <p>deadlines in proportion to their execution</p>
    <p>time</p>
    <p>Timing predictability</p>
    <p>Design</p>
    <p>Accumulative LAG Per-layer sub-deadline</p>
    <p>Tracked execution time</p>
    <p>Per-layer sub-deadline End-to-end deadline</p>
    <p>for the DNN instance</p>
    <p>Per-layer execution time</p>
  </div>
  <div class="page">
    <p>Building a cohort</p>
    <p>We keep a pair of local</p>
    <p>variables for each DNN</p>
    <p>instance.</p>
    <p>Calculator</p>
    <p>values of LAG in the</p>
    <p>cohort, calculate a</p>
    <p>speedup (or slowdown)</p>
    <p>DVFS configuration for</p>
    <p>that slowdown.</p>
    <p>optimal DVFS</p>
    <p>configurations for each</p>
    <p>DNN instance.</p>
    <p>Xi Calculator</p>
    <p>calculate the required</p>
    <p>(further) speedup (or</p>
    <p>slowdown) for other DNN</p>
    <p>instances.</p>
    <p>possible approximation</p>
    <p>configuration that</p>
    <p>matches that slowdown.</p>
    <p>Coordination</p>
    <p>Design</p>
  </div>
  <div class="page">
    <p>The decision tree Overview of modes</p>
    <p>Optimization</p>
    <p>Design</p>
    <p>1 2 n-1 n</p>
    <p>Calculator</p>
    <p>=</p>
    <p>1 2   1 2</p>
    <p>XiCalculator Xi Calculator</p>
  </div>
  <div class="page">
    <p>The decision tree Overview of modes</p>
    <p>Choosing a  (DVFS configuration) will have consequences in</p>
    <p>terms of accuracy for all DNNs in the cohort. Therefore, the</p>
    <p>question is, which  is the best?</p>
    <p>Min. Energy (Mp) chooses the  that has the least PowerUp value in the</p>
    <p>PowerUp/SpeedUp table, without looking at accuracy loss.</p>
    <p>Max. Accuracy (MA) chooses the  so to minimize the value of  .</p>
    <p>Balanced Energy and Accuracy uses the Bivariate Regression Analysis (BRA) to</p>
    <p>achieve a balanced approach backed by statistical analysis of the tree1.</p>
    <p>Optimization</p>
    <p>Design</p>
    <p>1 2 n-1 n</p>
    <p>Calculator</p>
    <p>=</p>
    <p>1 2   1 2</p>
    <p>XiCalculator Xi Calculator</p>
  </div>
  <div class="page">
    <p>Based on Caffe</p>
    <p>Available as an open-source project on</p>
    <p>GitHub</p>
    <p>No need to use APIs</p>
    <p>No need to redesign DNN models</p>
    <p>Need to generate</p>
    <p>Hash tables</p>
    <p>Lowrank approximated version of your DNN model.</p>
    <p>Tested extensively</p>
    <p>Tested on NVIDIA Jetson TX2 and Jetson</p>
    <p>AGX Xavier</p>
    <p>Tested using image recognition DNNs</p>
    <p>AlexNet, GoogleNet, ResNet-50, VGGNet</p>
    <p>Tested using three cohort sizes</p>
    <p>Small: 1 DNN instance</p>
    <p>Medium: 2-4 DNN instances</p>
    <p>Large: 6-8 DNN instances</p>
    <p>We include a mixed scenario that uses a</p>
    <p>combination of all the DNN models</p>
    <p>Overview</p>
    <p>Implementation and Evaluation</p>
  </div>
  <div class="page">
    <p>Energy</p>
    <p>Evaluation</p>
  </div>
  <div class="page">
    <p>Energy</p>
    <p>Evaluation</p>
  </div>
  <div class="page">
    <p>Latency</p>
    <p>Evaluation</p>
  </div>
  <div class="page">
    <p>Latency</p>
    <p>Evaluation</p>
  </div>
  <div class="page">
    <p>Small cohort</p>
    <p>Medium cohort</p>
    <p>Deadline miss rate same as</p>
    <p>the small cohort.</p>
    <p>Large cohort</p>
    <p>Deadline miss rate same as</p>
    <p>the small cohort.</p>
    <p>Tail Latency</p>
    <p>Evaluation</p>
  </div>
  <div class="page">
    <p>Relative Accuracy</p>
    <p>Evaluation</p>
  </div>
  <div class="page">
    <p>Flexibility</p>
    <p>Evaluation</p>
  </div>
  <div class="page">
    <p>Flexibility</p>
    <p>Evaluation</p>
    <p>on Jetson TX2.</p>
    <p>on Jetson AGX Xavier.</p>
  </div>
  <div class="page">
    <p>Computation</p>
    <p>Relatively negligible execution overhead (in</p>
    <p>ms).</p>
    <p>Memory</p>
    <p>Overhead includes the lowrank version of</p>
    <p>each DNN model. The right side shows how</p>
    <p>much of the total memory of each device is</p>
    <p>occupied.</p>
    <p>Overhead</p>
    <p>Evaluation</p>
  </div>
  <div class="page">
    <p>The system community to the rescue</p>
    <p>Conclusion</p>
    <p>Certain problems cannot be solved at application level (by AI researchers) and at hardware level</p>
    <p>separately</p>
    <p>Ensuring timing predictability, energy efficiency, and accuracy for DNNs in Autonomous Embedded Systems requires coordination</p>
    <p>We presented the design of NeuOS that can achieve these three goals by</p>
    <p>Using LAG analysis to ensure real-time performance</p>
    <p>Efficiently propagating all possible choices</p>
    <p>Having flexibility in terms of choosing the best combination of configurations based on system designers criteria or external policy</p>
    <p>controller</p>
    <p>We extensively evaluated NeuOS</p>
    <p>Using the latest AES devices</p>
    <p>Using prominent image recognition DNNs</p>
    <p>Under multiple configurations, including various cohort sizes</p>
    <p>Against the most prominent accessible solutions available to researchers.</p>
  </div>
  <div class="page">
    <p>Questions</p>
    <p>Please do not hesitate to send your</p>
    <p>questions to soroush@utdallas.edu.</p>
    <p>Source Code</p>
    <p>https://github.com/Soroosh129/Neu</p>
    <p>OS</p>
    <p>Thank you</p>
  </div>
</Presentation>

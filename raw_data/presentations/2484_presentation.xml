<?xml version="1.0" ?>
<Presentation>
  <div class="page">
    <p>Copyright 2010 Hewlett-Packard Development Company, L.P. 1  Copyright 2010 Hewlett-Packard Development Company, L.P.</p>
    <p>Jayaram Mudigonda, HP Labs Praveen Yalagandula, HP Labs Mohammad Al-Fares, UCSD Jeff Mogul, HP Labs</p>
    <p>SPAIN:</p>
    <p>High BW Data-Center Ethernet with</p>
    <p>Unmodified Switches</p>
  </div>
  <div class="page">
    <p>Copyright 2010 Hewlett-Packard Development Company, L.P. 2</p>
    <p>Datacente r Fabric</p>
    <p>Traditional Datacenter Internet</p>
    <p>Internet-facing applications: E-Mail, Web Servers, etc.</p>
  </div>
  <div class="page">
    <p>Copyright 2010 Hewlett-Packard Development Company, L.P. 3</p>
    <p>DC Trends</p>
    <p>Information Explosion</p>
    <p>Application Consolidation Virtualization</p>
    <p>HPC Applications</p>
  </div>
  <div class="page">
    <p>Copyright 2010 Hewlett-Packard Development Company, L.P. 4</p>
    <p>Datacente r Fabric</p>
    <p>DC Trends Internet</p>
    <p>M R</p>
    <p>M</p>
    <p>R</p>
    <p>R R</p>
    <p>R R</p>
    <p>R</p>
    <p>R</p>
    <p>M</p>
    <p>M</p>
    <p>M</p>
    <p>M</p>
    <p>M</p>
    <p>M</p>
    <p>Shuffle phase of Map  Reduce</p>
    <p>RM</p>
  </div>
  <div class="page">
    <p>Copyright 2010 Hewlett-Packard Development Company, L.P. 5</p>
    <p>Datacente r Fabric</p>
    <p>DC Trends Internet</p>
    <p>M R</p>
    <p>M</p>
    <p>R</p>
    <p>R R</p>
    <p>R R</p>
    <p>R</p>
    <p>R</p>
    <p>M</p>
    <p>M</p>
    <p>M</p>
    <p>M</p>
    <p>M</p>
    <p>M</p>
    <p>Shuffle phase of Map  Reduce</p>
    <p>RM</p>
    <p>High bisection bandwidth</p>
  </div>
  <div class="page">
    <p>Copyright 2010 Hewlett-Packard Development Company, L.P. 6</p>
    <p>Datacente r Fabric</p>
    <p>DC Trends Internet</p>
    <p>Flat Network</p>
  </div>
  <div class="page">
    <p>Copyright 2010 Hewlett-Packard Development Company, L.P. 7</p>
    <p>DC Fabric Goals</p>
    <p>High bisection BW Flat network</p>
    <p>Low-cost</p>
  </div>
  <div class="page">
    <p>Copyright 2010 Hewlett-Packard Development Company, L.P. 8</p>
    <p>Ethernet: a good choice</p>
    <p>Commodity  Inexpensive</p>
    <p>Speeds:</p>
    <p>Flat-addressing</p>
    <p>Self-configuring</p>
  </div>
  <div class="page">
    <p>Copyright 2010 Hewlett-Packard Development Company, L.P. 9</p>
    <p>But wait</p>
  </div>
  <div class="page">
    <p>Copyright 2010 Hewlett-Packard Development Company, L.P. 10</p>
    <p>Spanning Tree Protocol (STP) makes Ethernet hard to scale!</p>
  </div>
  <div class="page">
    <p>Copyright 2010 Hewlett-Packard Development Company, L.P. 11</p>
    <p>Spanning Tree Protocol (STP) Root Bandwidth bottleneck</p>
    <p>Unused links</p>
  </div>
  <div class="page">
    <p>Copyright 2010 Hewlett-Packard Development Company, L.P. 12</p>
    <p>Proposal 1: High-port core switch</p>
    <p>A common current approach</p>
  </div>
  <div class="page">
    <p>Copyright 2010 Hewlett-Packard Development Company, L.P. 13</p>
    <p>Expensive Core Switch</p>
    <p>High BW or Multiple Links</p>
  </div>
  <div class="page">
    <p>Copyright 2010 Hewlett-Packard Development Company, L.P. 14</p>
    <p>Proposal 2: L3</p>
    <p>IP Subnetting VL2 [SIGCOMM09]</p>
  </div>
  <div class="page">
    <p>Copyright 2010 Hewlett-Packard Development Company, L.P. 15</p>
    <p>L3 routers</p>
    <p>Expensive No non-IP protocols</p>
    <p>(FCoE)</p>
  </div>
  <div class="page">
    <p>Copyright 2010 Hewlett-Packard Development Company, L.P. 16</p>
    <p>Proposal 3: Modify switches (HW/SW)</p>
    <p>TRILL [IETF] SEATTLE [SIGCOMM08] PortLand [SIGCOMM09]</p>
    <p>Not deployable today!</p>
  </div>
  <div class="page">
    <p>Copyright 2010 Hewlett-Packard Development Company, L.P. 17</p>
    <p>SPAIN</p>
    <p>Unmodified L2 switches</p>
    <p>Multi-pathing</p>
    <p>Arbitrary topologies</p>
  </div>
  <div class="page">
    <p>Copyright 2010 Hewlett-Packard Development Company, L.P. 18</p>
    <p>SPAIN Approach</p>
    <p>Multi-pathing via VLANs</p>
    <p>+ End-host driver to spread load</p>
  </div>
  <div class="page">
    <p>Copyright 2010 Hewlett-Packard Development Company, L.P. 19</p>
    <p>A C B D</p>
    <p>Multi-pathing via VLANs Default VLAN</p>
  </div>
  <div class="page">
    <p>Copyright 2010 Hewlett-Packard Development Company, L.P. 20</p>
    <p>A C B D</p>
    <p>Multi-pathing via VLANs Default VLAN</p>
  </div>
  <div class="page">
    <p>Copyright 2010 Hewlett-Packard Development Company, L.P. 21</p>
    <p>SPAIN</p>
    <p>Unmodified L2 switches</p>
    <p>Multi-pathing via VLANs</p>
    <p>Arbitrary topologies</p>
    <p>Minor End-host modifs</p>
    <p>Low-cost</p>
    <p>High-BW</p>
    <p>DC Fabric</p>
    <p>Today!</p>
  </div>
  <div class="page">
    <p>Copyright 2010 Hewlett-Packard Development Company, L.P. 22</p>
    <p>Outline Introduction SPAIN Components Offline computation End-host driver</p>
    <p>Evaluation Summary</p>
  </div>
  <div class="page">
    <p>Copyright 2010 Hewlett-Packard Development Company, L.P. 23</p>
    <p>Outline Introduction SPAIN Components Offline computation End-host driver</p>
    <p>Evaluation Summary</p>
  </div>
  <div class="page">
    <p>Copyright 2010 Hewlett-Packard Development Company, L.P. 24</p>
    <p>Offline Computation</p>
    <p>Steps: 1. Discover topology 2. Compute paths 3. Layout paths as VLANs</p>
  </div>
  <div class="page">
    <p>Copyright 2010 Hewlett-Packard Development Company, L.P. 25</p>
    <p>Discover topology</p>
    <p>SNMP Queries SPAIN</p>
  </div>
  <div class="page">
    <p>Copyright 2010 Hewlett-Packard Development Company, L.P. 26</p>
    <p>Compute paths Goal: leverage redundancy; improve reliability</p>
    <p>Challenges: large graphs; more pathsmore resources</p>
  </div>
  <div class="page">
    <p>Copyright 2010 Hewlett-Packard Development Company, L.P. 27</p>
    <p>Compute paths Only consider paths between edge</p>
    <p>switches Modified Dijkstras; Prefer edge-disjoint paths</p>
  </div>
  <div class="page">
    <p>Copyright 2010 Hewlett-Packard Development Company, L.P. 28</p>
    <p>VLAN Layout Simple scheme: Each Path as</p>
    <p>VLAN</p>
  </div>
  <div class="page">
    <p>Copyright 2010 Hewlett-Packard Development Company, L.P. 29</p>
    <p>But</p>
    <p>VLAN ID = 12 bits  4096 VLANs!</p>
    <p>IEEE 802.1Q:</p>
  </div>
  <div class="page">
    <p>Copyright 2010 Hewlett-Packard Development Company, L.P. 30</p>
    <p>Simple scheme: Each Path as</p>
    <p>VLAN Scales to only few switches</p>
    <p>VLAN Layout</p>
  </div>
  <div class="page">
    <p>Copyright 2010 Hewlett-Packard Development Company, L.P. 31</p>
    <p>Our approach: 1 VLAN for a set of paths</p>
    <p>VLAN Layout</p>
  </div>
  <div class="page">
    <p>Copyright 2010 Hewlett-Packard Development Company, L.P. 32</p>
    <p>Challenge: Minimize VLANs</p>
    <p>NP-Hard for arbitrary topologies</p>
  </div>
  <div class="page">
    <p>Copyright 2010 Hewlett-Packard Development Company, L.P. 33</p>
    <p>Heuristics:</p>
    <p>VLAN Layout</p>
  </div>
  <div class="page">
    <p>Copyright 2010 Hewlett-Packard Development Company, L.P. 34</p>
    <p># VLANs = 4</p>
    <p>VLAN Layout</p>
  </div>
  <div class="page">
    <p>Copyright 2010 Hewlett-Packard Development Company, L.P. 35</p>
    <p>Outline Introduction SPAIN Components Offline computation End-host driver</p>
    <p>Evaluation Summary</p>
  </div>
  <div class="page">
    <p>Copyright 2010 Hewlett-Packard Development Company, L.P. 36</p>
    <p>SPAIN End-host Driver</p>
    <p>A B</p>
    <p>SPAI N</p>
  </div>
  <div class="page">
    <p>Copyright 2010 Hewlett-Packard Development Company, L.P. 37</p>
    <p>SPAI N</p>
    <p>SPAIN End-host Driver</p>
    <p>A B</p>
    <p>Topology &amp; VLANs</p>
  </div>
  <div class="page">
    <p>Copyright 2010 Hewlett-Packard Development Company, L.P. 38</p>
    <p>SPAIN End-host Driver</p>
    <p>A B</p>
    <p>Flow Table AB, 1 : RED AB, 2 : BLUE</p>
    <p>Flow Table 2</p>
  </div>
  <div class="page">
    <p>Copyright 2010 Hewlett-Packard Development Company, L.P. 39</p>
    <p>Challenges Link &amp; switch failures</p>
    <p>Pathological flooding</p>
    <p>Interoperability</p>
    <p>Host mobility</p>
    <p>Load-balance</p>
    <p>End-host state</p>
  </div>
  <div class="page">
    <p>Copyright 2010 Hewlett-Packard Development Company, L.P. 40</p>
    <p>Failures</p>
    <p>A B</p>
    <p>Flow Table AB : RED</p>
    <p>Flow Table</p>
  </div>
  <div class="page">
    <p>Copyright 2010 Hewlett-Packard Development Company, L.P. 41</p>
    <p>Pathological Flooding</p>
    <p>A B</p>
    <p>Flow Table AB : RED</p>
    <p>Flow Table BA : GREEN</p>
    <p>Does not know the location of B</p>
  </div>
  <div class="page">
    <p>Copyright 2010 Hewlett-Packard Development Company, L.P. 42</p>
    <p>Solution:</p>
    <p>Chirping</p>
  </div>
  <div class="page">
    <p>Copyright 2010 Hewlett-Packard Development Company, L.P. 43</p>
    <p>Chirping</p>
    <p>A B</p>
    <p>Flow Table AB : RED</p>
    <p>Flow Table BA : GREEN</p>
    <p>Does not know the location of B</p>
    <p>C</p>
    <p>Knows the location of B</p>
  </div>
  <div class="page">
    <p>Copyright 2010 Hewlett-Packard Development Company, L.P. 44</p>
    <p>Chirping</p>
    <p>A B</p>
    <p>Flow Table AB : RED BLUE</p>
    <p>Flow Table BA : GREEN</p>
  </div>
  <div class="page">
    <p>Copyright 2010 Hewlett-Packard Development Company, L.P. 45</p>
    <p>Outline Introduction SPAIN Components Offline computation End-host driver</p>
    <p>Evaluation Summary</p>
  </div>
  <div class="page">
    <p>Copyright 2010 Hewlett-Packard Development Company, L.P. 46</p>
    <p>Evaluation</p>
    <p>Simulations</p>
    <p>Real testbed</p>
  </div>
  <div class="page">
    <p>Copyright 2010 Hewlett-Packard Development Company, L.P. 47</p>
    <p>Simulations Topologies:</p>
    <p>CiscoDC</p>
    <p>Core switches</p>
    <p>Aggregation modules m = 2</p>
    <p>Access switches per module a = 2</p>
  </div>
  <div class="page">
    <p>Copyright 2010 Hewlett-Packard Development Company, L.P. 48</p>
    <p>Simulations Topologies:</p>
    <p>CiscoDC FatTree [Al-fares et al. SIGCOMM08]</p>
    <p>#ports/switch p = 4</p>
  </div>
  <div class="page">
    <p>Copyright 2010 Hewlett-Packard Development Company, L.P. 49</p>
    <p>Simulations</p>
    <p>Topologies: CiscoDC Fat</p>
    <p>Tree [Al-fares et al. SIGCOMM08]</p>
    <p>HyperX [Ahn et al. SC09]</p>
  </div>
  <div class="page">
    <p>Copyright 2010 Hewlett-Packard Development Company, L.P. 50</p>
    <p>Simulations Topologies:</p>
    <p>CiscoDC FatTree [Al-fares et al. SIGCOMM08]</p>
    <p>HyperX [Ahn et al. SC09]</p>
    <p>BCube [Guo et al. SIGCOMM09]</p>
    <p>#ports/switch (p) = 2</p>
    <p>Levels (l) = 2</p>
  </div>
  <div class="page">
    <p>Copyright 2010 Hewlett-Packard Development Company, L.P. 51</p>
    <p>Simulations Topologies:</p>
    <p>CiscoDC FatTree [Al-fares et al. SIGCOMM08]</p>
    <p>HyperX [Ahn et al. SC09]</p>
    <p>BCube [Guo et al. SIGCOMM09]</p>
    <p>Metrics: #VLANs Link-Coverage</p>
    <p>Reliability Throughput</p>
  </div>
  <div class="page">
    <p>Copyright 2010 Hewlett-Packard Development Company, L.P. 52</p>
    <p>Simulations Topologies:</p>
    <p>CiscoDC FatTree [Al-fares et al. SIGCOMM08]</p>
    <p>HyperX [Ahn et al. SC09]</p>
    <p>BCube [Guo et al. SIGCOMM09]</p>
    <p>Metrics: #VLANs Link-Coverage</p>
    <p>Reliability Throughput</p>
  </div>
  <div class="page">
    <p>Copyright 2010 Hewlett-Packard Development Company, L.P. 53</p>
    <p>Num. of VLANs</p>
    <p>CiscoDC (8,8)</p>
    <p>Fat-Tree (48)</p>
    <p>HyperX (16)</p>
    <p>B-Cube (48,2)</p>
    <p>#switches</p>
    <p>#VLANs</p>
  </div>
  <div class="page">
    <p>Copyright 2010 Hewlett-Packard Development Company, L.P. 54</p>
    <p>Throughput</p>
    <p>CiscoDC</p>
    <p>Fat-Tree</p>
    <p>HyperX</p>
    <p>B-Cube</p>
    <p>Improveme nt over STP</p>
  </div>
  <div class="page">
    <p>Copyright 2010 Hewlett-Packard Development Company, L.P. 55</p>
    <p>OpenCirrus Experiments</p>
  </div>
  <div class="page">
    <p>Copyright 2010 Hewlett-Packard Development Company, L.P. 56</p>
    <p>CORE SWITCH (CS)</p>
    <p>OpenCirrus Testbed</p>
  </div>
  <div class="page">
    <p>Copyright 2010 Hewlett-Packard Development Company, L.P. 57</p>
    <p>CORE SWITCH (CS)</p>
    <p>C S</p>
    <p>S1 S2 S3</p>
    <p>OpenCirrus Testbed</p>
  </div>
  <div class="page">
    <p>Copyright 2010 Hewlett-Packard Development Company, L.P. 58</p>
    <p>C S</p>
    <p>S1 S2 S3</p>
    <p>OpenCirrus Testbed</p>
  </div>
  <div class="page">
    <p>Copyright 2010 Hewlett-Packard Development Company, L.P. 59</p>
    <p>C S</p>
    <p>S1 S2 S3</p>
    <p>OpenCirrus Testbed</p>
  </div>
  <div class="page">
    <p>Copyright 2010 Hewlett-Packard Development Company, L.P. 60</p>
    <p>Shuffle-like experiment</p>
    <p>Every server to all other servers</p>
  </div>
  <div class="page">
    <p>Copyright 2010 Hewlett-Packard Development Company, L.P. 61</p>
    <p>C S</p>
    <p>S1 S2 S3</p>
    <p>Spanning Tree Protocol(STP)</p>
  </div>
  <div class="page">
    <p>Copyright 2010 Hewlett-Packard Development Company, L.P. 62</p>
    <p>Link utilization in each direction</p>
    <p>Time</p>
  </div>
  <div class="page">
    <p>Copyright 2010 Hewlett-Packard Development Company, L.P. 63</p>
    <p>C S</p>
    <p>S1 S2 S3</p>
    <p>Spanning Tree Protocol(STP)</p>
    <p>Over loaded</p>
    <p>Unuse d</p>
  </div>
  <div class="page">
    <p>Copyright 2010 Hewlett-Packard Development Company, L.P. 64</p>
    <p>C S</p>
    <p>S1 S2 S3</p>
    <p>No bottlenecks</p>
    <p>SPAIN</p>
  </div>
  <div class="page">
    <p>Copyright 2010 Hewlett-Packard Development Company, L.P. 65</p>
    <p>Completion times 832 s</p>
    <p>STP SPAIN</p>
    <p>~50% reduction</p>
  </div>
  <div class="page">
    <p>Copyright 2010 Hewlett-Packard Development Company, L.P. 66</p>
    <p>Aggregate Goodput (Gbps)</p>
    <p>STP SPAIN</p>
  </div>
  <div class="page">
    <p>Copyright 2010 Hewlett-Packard Development Company, L.P. 67</p>
    <p>Aggregate Goodput (Gbps)</p>
    <p>% SPAIN hosts</p>
    <p>Incremental Deployability</p>
  </div>
  <div class="page">
    <p>Copyright 2010 Hewlett-Packard Development Company, L.P. 68</p>
    <p>C S</p>
    <p>S1 S2 S3</p>
    <p>Single Shortest Path(SSP) SEATTLE/ TRILL</p>
    <p>All flows</p>
    <p>on RED All flows</p>
    <p>on GREEN</p>
    <p>All flows on</p>
    <p>GRAY</p>
    <p>SEATTLE/TRILL on unmodified switches with</p>
    <p>SPAIN</p>
  </div>
  <div class="page">
    <p>Copyright 2010 Hewlett-Packard Development Company, L.P. 69</p>
    <p>Comparison with SSP</p>
    <p>SSP SPAIN</p>
    <p>Goodput (Gbps)</p>
    <p>SSP SPAIN</p>
    <p>Completion Time(s)</p>
  </div>
  <div class="page">
    <p>Copyright 2010 Hewlett-Packard Development Company, L.P. 70</p>
    <p>SPAIN Take-away</p>
    <p>Unmodified L2 switches</p>
    <p>Multi-pathing via VLANs</p>
    <p>Arbitrary topologies</p>
    <p>Minor End-host modifs</p>
    <p>Low-cost</p>
    <p>High-BW</p>
    <p>DC Fabric</p>
    <p>Today!</p>
  </div>
  <div class="page">
    <p>Copyright 2010 Hewlett-Packard Development Company, L.P. 71  Copyright 2010 Hewlett-Packard Development Company, L.P. 71</p>
    <p>Q&amp;A</p>
  </div>
</Presentation>

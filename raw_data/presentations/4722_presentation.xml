<?xml version="1.0" ?>
<Presentation>
  <div class="page">
    <p>Automated Configuration of MIP solvers</p>
    <p>Frank Hutter, Holger Hoos, and Kevin Leyton-Brown</p>
    <p>Department of Computer Science University of British Columbia</p>
    <p>Vancouver, Canada {hutter,hoos,kevinlb}@cs.ubc.ca</p>
    <p>CPAIOR 2010, June 16</p>
  </div>
  <div class="page">
    <p>Parameters in Algorithms</p>
    <p>Most algorithms have parameters</p>
    <p>I Decisions that are left open during algorithm design</p>
    <p>numerical parameters (e.g., real-valued thresholds)  categorical parameters (e.g., which heuristic to use)</p>
    <p>I Set to optimize empirical performance</p>
    <p>Prominent parameters in MIP solvers</p>
    <p>I Preprocessing</p>
    <p>I Which type of cuts to apply</p>
    <p>I MIP strategy parameters</p>
    <p>I Details of underlying linear (or quadratic) programming solver</p>
  </div>
  <div class="page">
    <p>Parameters in Algorithms</p>
    <p>Most algorithms have parameters</p>
    <p>I Decisions that are left open during algorithm design</p>
    <p>numerical parameters (e.g., real-valued thresholds)  categorical parameters (e.g., which heuristic to use)</p>
    <p>I Set to optimize empirical performance</p>
    <p>Prominent parameters in MIP solvers</p>
    <p>I Preprocessing</p>
    <p>I Which type of cuts to apply</p>
    <p>I MIP strategy parameters</p>
    <p>I Details of underlying linear (or quadratic) programming solver</p>
  </div>
  <div class="page">
    <p>Example: IBM ILOG CPLEX</p>
    <p>I 76 parameters that affect search trajectory</p>
    <p>Integer programming problems are more sensitive to specific parameter settings, so you may need to experiment with them. [Cplex 12.1 user manual, page 235]</p>
    <p>I Experiment with them</p>
    <p>Perform manual optimization in 76-dimensional space  Complex, unintuitive interactions between parameters  Humans are not good at that</p>
    <p>I Cplex automated tuning tool (since version 11)</p>
    <p>Saves valuable human time  Improves performance</p>
  </div>
  <div class="page">
    <p>Example: IBM ILOG CPLEX</p>
    <p>I 76 parameters that affect search trajectory</p>
    <p>Integer programming problems are more sensitive to specific parameter settings, so you may need to experiment with them. [Cplex 12.1 user manual, page 235]</p>
    <p>I Experiment with them</p>
    <p>Perform manual optimization in 76-dimensional space  Complex, unintuitive interactions between parameters  Humans are not good at that</p>
    <p>I Cplex automated tuning tool (since version 11)</p>
    <p>Saves valuable human time  Improves performance</p>
  </div>
  <div class="page">
    <p>Example: IBM ILOG CPLEX</p>
    <p>I 76 parameters that affect search trajectory</p>
    <p>Integer programming problems are more sensitive to specific parameter settings, so you may need to experiment with them. [Cplex 12.1 user manual, page 235]</p>
    <p>I Experiment with them</p>
    <p>Perform manual optimization in 76-dimensional space  Complex, unintuitive interactions between parameters</p>
    <p>Humans are not good at that</p>
    <p>I Cplex automated tuning tool (since version 11)</p>
    <p>Saves valuable human time  Improves performance</p>
  </div>
  <div class="page">
    <p>Example: IBM ILOG CPLEX</p>
    <p>I 76 parameters that affect search trajectory</p>
    <p>Integer programming problems are more sensitive to specific parameter settings, so you may need to experiment with them. [Cplex 12.1 user manual, page 235]</p>
    <p>I Experiment with them</p>
    <p>Perform manual optimization in 76-dimensional space  Complex, unintuitive interactions between parameters  Humans are not good at that</p>
    <p>I Cplex automated tuning tool (since version 11)</p>
    <p>Saves valuable human time  Improves performance</p>
  </div>
  <div class="page">
    <p>Example: IBM ILOG CPLEX</p>
    <p>I 76 parameters that affect search trajectory</p>
    <p>Integer programming problems are more sensitive to specific parameter settings, so you may need to experiment with them. [Cplex 12.1 user manual, page 235]</p>
    <p>I Experiment with them</p>
    <p>Perform manual optimization in 76-dimensional space  Complex, unintuitive interactions between parameters  Humans are not good at that</p>
    <p>I Cplex automated tuning tool (since version 11)</p>
    <p>Saves valuable human time  Improves performance</p>
  </div>
  <div class="page">
    <p>Our work: automated algorithm configuration</p>
    <p>I Given:</p>
    <p>Runnable algorithm A, its parameters and their domains  Benchmark set of instances   Performance metric m</p>
    <p>I Find:</p>
    <p>Parameter setting (configuration) of A optimizing m on</p>
    <p>I First to handle this with many categorical parameters  E.g. 51/76 Cplex parameters are categorical  1047 possible configurations algorithm configuration</p>
    <p>This paper: application study for MIP solvers I Use existing algorithm configuration tool (ParamILS)</p>
    <p>I Use different MIP solvers (Cplex, Gurobi, lpsolve)</p>
    <p>I Use six different MIP benchmark sets</p>
    <p>I Optimize different objectives (runtime to optimality/MIP gap)</p>
  </div>
  <div class="page">
    <p>Our work: automated algorithm configuration</p>
    <p>I Given:</p>
    <p>Runnable algorithm A, its parameters and their domains  Benchmark set of instances   Performance metric m</p>
    <p>I Find:</p>
    <p>Parameter setting (configuration) of A optimizing m on</p>
    <p>I First to handle this with many categorical parameters  E.g. 51/76 Cplex parameters are categorical  1047 possible configurations algorithm configuration</p>
    <p>This paper: application study for MIP solvers I Use existing algorithm configuration tool (ParamILS)</p>
    <p>I Use different MIP solvers (Cplex, Gurobi, lpsolve)</p>
    <p>I Use six different MIP benchmark sets</p>
    <p>I Optimize different objectives (runtime to optimality/MIP gap)</p>
  </div>
  <div class="page">
    <p>Our work: automated algorithm configuration</p>
    <p>I Given:</p>
    <p>Runnable algorithm A, its parameters and their domains  Benchmark set of instances   Performance metric m</p>
    <p>I Find:</p>
    <p>Parameter setting (configuration) of A optimizing m on</p>
    <p>I First to handle this with many categorical parameters  E.g. 51/76 Cplex parameters are categorical  1047 possible configurations algorithm configuration</p>
    <p>This paper: application study for MIP solvers I Use existing algorithm configuration tool (ParamILS)</p>
    <p>I Use different MIP solvers (Cplex, Gurobi, lpsolve)</p>
    <p>I Use six different MIP benchmark sets</p>
    <p>I Optimize different objectives (runtime to optimality/MIP gap)</p>
  </div>
  <div class="page">
    <p>Our work: automated algorithm configuration</p>
    <p>I Given:</p>
    <p>Runnable algorithm A, its parameters and their domains  Benchmark set of instances   Performance metric m</p>
    <p>I Find:</p>
    <p>Parameter setting (configuration) of A optimizing m on</p>
    <p>I First to handle this with many categorical parameters  E.g. 51/76 Cplex parameters are categorical  1047 possible configurations algorithm configuration</p>
    <p>This paper: application study for MIP solvers I Use existing algorithm configuration tool (ParamILS)</p>
    <p>I Use different MIP solvers (Cplex, Gurobi, lpsolve)</p>
    <p>I Use six different MIP benchmark sets</p>
    <p>I Optimize different objectives (runtime to optimality/MIP gap)</p>
  </div>
  <div class="page">
    <p>Outline</p>
  </div>
  <div class="page">
    <p>Outline</p>
  </div>
  <div class="page">
    <p>Parameter Optimization Tools and Applications</p>
    <p>I Composer [Gratch &amp; Dejong, 92; Gratch and Chien, 96]</p>
    <p>Spacecraft communication scheduling</p>
    <p>I Calibra [Diaz and Laguna, 06]</p>
    <p>Optimized various metaheuristics</p>
    <p>I F-Race [Birattari et al., 04-present]</p>
    <p>Iterated Local Search and Ant Colony Optimization</p>
    <p>I ParamILS [Hutter et al, 07-present]</p>
    <p>SAT (tree &amp; local search), time-tabling, protein folding, ...</p>
    <p>I Stop [Baz, Hunsaker, Brooks &amp; Gosavi, 07 (Tech report)] [Baz, Hunsaker &amp; Prokopyev, Comput Optim Appl, 09]</p>
    <p>Optimized MIP solvers, including Cplex  We only found this work  1 month ago  Main problem: only optimized performance for single instances  Only used small subset of 10 Cplex parameters</p>
  </div>
  <div class="page">
    <p>Parameter Optimization Tools and Applications</p>
    <p>I Composer [Gratch &amp; Dejong, 92; Gratch and Chien, 96]</p>
    <p>Spacecraft communication scheduling</p>
    <p>I Calibra [Diaz and Laguna, 06]</p>
    <p>Optimized various metaheuristics</p>
    <p>I F-Race [Birattari et al., 04-present]</p>
    <p>Iterated Local Search and Ant Colony Optimization</p>
    <p>I ParamILS [Hutter et al, 07-present]</p>
    <p>SAT (tree &amp; local search), time-tabling, protein folding, ...</p>
    <p>I Stop [Baz, Hunsaker, Brooks &amp; Gosavi, 07 (Tech report)] [Baz, Hunsaker &amp; Prokopyev, Comput Optim Appl, 09]</p>
    <p>Optimized MIP solvers, including Cplex  We only found this work  1 month ago</p>
    <p>Main problem: only optimized performance for single instances  Only used small subset of 10 Cplex parameters</p>
  </div>
  <div class="page">
    <p>Parameter Optimization Tools and Applications</p>
    <p>I Composer [Gratch &amp; Dejong, 92; Gratch and Chien, 96]</p>
    <p>Spacecraft communication scheduling</p>
    <p>I Calibra [Diaz and Laguna, 06]</p>
    <p>Optimized various metaheuristics</p>
    <p>I F-Race [Birattari et al., 04-present]</p>
    <p>Iterated Local Search and Ant Colony Optimization</p>
    <p>I ParamILS [Hutter et al, 07-present]</p>
    <p>SAT (tree &amp; local search), time-tabling, protein folding, ...</p>
    <p>I Stop [Baz, Hunsaker, Brooks &amp; Gosavi, 07 (Tech report)] [Baz, Hunsaker &amp; Prokopyev, Comput Optim Appl, 09]</p>
    <p>Optimized MIP solvers, including Cplex  We only found this work  1 month ago  Main problem: only optimized performance for single instances  Only used small subset of 10 Cplex parameters</p>
  </div>
  <div class="page">
    <p>Outline</p>
  </div>
  <div class="page">
    <p>Outline</p>
  </div>
  <div class="page">
    <p>Simple manual approach for configuration</p>
    <p>Start with some parameter configuration</p>
    <p>repeat Modify a single parameter if results on benchmark set improve then</p>
    <p>keep new configuration</p>
    <p>until no more improvement possible (or good enough)</p>
    <p>Manually-executed local search</p>
    <p>ParamILS [Hutter et al., AAAI07 &amp; 09]: Iterated local search: biased random walk over local optima</p>
  </div>
  <div class="page">
    <p>Simple manual approach for configuration</p>
    <p>Start with some parameter configuration</p>
    <p>repeat</p>
    <p>Modify a single parameter</p>
    <p>if results on benchmark set improve then keep new configuration</p>
    <p>until no more improvement possible (or good enough)</p>
    <p>Manually-executed local search</p>
    <p>ParamILS [Hutter et al., AAAI07 &amp; 09]: Iterated local search: biased random walk over local optima</p>
  </div>
  <div class="page">
    <p>Simple manual approach for configuration</p>
    <p>Start with some parameter configuration</p>
    <p>repeat</p>
    <p>Modify a single parameter if results on benchmark set improve then</p>
    <p>keep new configuration</p>
    <p>until no more improvement possible (or good enough)</p>
    <p>Manually-executed local search</p>
    <p>ParamILS [Hutter et al., AAAI07 &amp; 09]: Iterated local search: biased random walk over local optima</p>
  </div>
  <div class="page">
    <p>Simple manual approach for configuration</p>
    <p>Start with some parameter configuration repeat</p>
    <p>Modify a single parameter if results on benchmark set improve then</p>
    <p>keep new configuration</p>
    <p>until no more improvement possible (or good enough)</p>
    <p>Manually-executed local search</p>
    <p>ParamILS [Hutter et al., AAAI07 &amp; 09]: Iterated local search: biased random walk over local optima</p>
  </div>
  <div class="page">
    <p>Simple manual approach for configuration</p>
    <p>Start with some parameter configuration repeat</p>
    <p>Modify a single parameter if results on benchmark set improve then</p>
    <p>keep new configuration</p>
    <p>until no more improvement possible (or good enough)</p>
    <p>Manually-executed local search</p>
    <p>ParamILS [Hutter et al., AAAI07 &amp; 09]: Iterated local search: biased random walk over local optima</p>
  </div>
  <div class="page">
    <p>Simple manual approach for configuration</p>
    <p>Start with some parameter configuration repeat</p>
    <p>Modify a single parameter if results on benchmark set improve then</p>
    <p>keep new configuration</p>
    <p>until no more improvement possible (or good enough)</p>
    <p>Manually-executed local search</p>
    <p>ParamILS [Hutter et al., AAAI07 &amp; 09]: Iterated local search: biased random walk over local optima</p>
  </div>
  <div class="page">
    <p>Instantiations of ParamILS Framework</p>
    <p>How to evaluate each configuration?</p>
    <p>I BasicILS(N ): perform fixed number of N runs to evaluate a configuration</p>
    <p>Variance reduction: use same N instances &amp; seeds for each</p>
    <p>I FocusedILS: choose N () adaptively</p>
    <p>small N () for poor configurations   large N () only for good   typically outperforms BasicILS  used in this study</p>
  </div>
  <div class="page">
    <p>Instantiations of ParamILS Framework</p>
    <p>How to evaluate each configuration?</p>
    <p>I BasicILS(N ): perform fixed number of N runs to evaluate a configuration</p>
    <p>Variance reduction: use same N instances &amp; seeds for each</p>
    <p>I FocusedILS: choose N () adaptively</p>
    <p>small N () for poor configurations   large N () only for good</p>
    <p>typically outperforms BasicILS  used in this study</p>
  </div>
  <div class="page">
    <p>Instantiations of ParamILS Framework</p>
    <p>How to evaluate each configuration?</p>
    <p>I BasicILS(N ): perform fixed number of N runs to evaluate a configuration</p>
    <p>Variance reduction: use same N instances &amp; seeds for each</p>
    <p>I FocusedILS: choose N () adaptively</p>
    <p>small N () for poor configurations   large N () only for good   typically outperforms BasicILS  used in this study</p>
  </div>
  <div class="page">
    <p>Adaptive Choice of Cutoff Time</p>
    <p>I Evaluation of poor configurations takes especially long</p>
    <p>I Can terminate evaluations early</p>
    <p>Incumbent solution provides bound  Can stop evaluation once bound is reached</p>
    <p>I Results</p>
    <p>Provably never hurts  Sometimes substantial speedups</p>
    <p>[Hutter et al., JAIR09]</p>
  </div>
  <div class="page">
    <p>Adaptive Choice of Cutoff Time</p>
    <p>I Evaluation of poor configurations takes especially long I Can terminate evaluations early</p>
    <p>Incumbent solution provides bound  Can stop evaluation once bound is reached</p>
    <p>I Results</p>
    <p>Provably never hurts  Sometimes substantial speedups</p>
    <p>[Hutter et al., JAIR09]</p>
  </div>
  <div class="page">
    <p>Adaptive Choice of Cutoff Time</p>
    <p>I Evaluation of poor configurations takes especially long I Can terminate evaluations early</p>
    <p>Incumbent solution provides bound  Can stop evaluation once bound is reached</p>
    <p>I Results</p>
    <p>Provably never hurts  Sometimes substantial speedups</p>
    <p>[Hutter et al., JAIR09]</p>
  </div>
  <div class="page">
    <p>Outline</p>
  </div>
  <div class="page">
    <p>MIP Solvers &amp; their parameters I Commercial solvers: Cplex 12.1 &amp; Gurobi 2.0.1 I Open-source solver: lpsolve 5.5</p>
    <p>Algorithm Parameter type # params # values Total # configurations Boolean 6 2</p>
    <p>Cplex Categorical 45 37</p>
    <p>Continuous 7 discretized: 58 Boolean 4 2</p>
    <p>Gurobi Categorical 16 35</p>
    <p>Continuous 2 discretized: 5</p>
    <p>lpsolve Boolean 40 2</p>
    <p>Problems with some parameter configurations I Segmentation faults &amp; wrong results I Detect such runs online, give worst possible score</p>
    <p>Local search avoids problematic parameter configurations</p>
    <p>I Concise bug reports helped to fix 2 bugs in Gurobi (!)</p>
  </div>
  <div class="page">
    <p>MIP Solvers &amp; their parameters I Commercial solvers: Cplex 12.1 &amp; Gurobi 2.0.1 I Open-source solver: lpsolve 5.5</p>
    <p>Algorithm Parameter type # params # values Total # configurations Boolean 6 2</p>
    <p>Cplex Categorical 45 37</p>
    <p>Continuous 7 discretized: 58</p>
    <p>Boolean 4 2</p>
    <p>Gurobi Categorical 16 35</p>
    <p>Continuous 2 discretized: 5</p>
    <p>lpsolve Boolean 40 2</p>
    <p>Problems with some parameter configurations I Segmentation faults &amp; wrong results I Detect such runs online, give worst possible score</p>
    <p>Local search avoids problematic parameter configurations</p>
    <p>I Concise bug reports helped to fix 2 bugs in Gurobi (!)</p>
  </div>
  <div class="page">
    <p>MIP Solvers &amp; their parameters I Commercial solvers: Cplex 12.1 &amp; Gurobi 2.0.1 I Open-source solver: lpsolve 5.5</p>
    <p>Algorithm Parameter type # params # values Total # configurations Boolean 6 2</p>
    <p>Cplex Categorical 45 37</p>
    <p>Continuous 7 discretized: 58 Boolean 4 2</p>
    <p>Gurobi Categorical 16 35</p>
    <p>Continuous 2 discretized: 5</p>
    <p>lpsolve Boolean 40 2</p>
    <p>Problems with some parameter configurations I Segmentation faults &amp; wrong results I Detect such runs online, give worst possible score</p>
    <p>Local search avoids problematic parameter configurations</p>
    <p>I Concise bug reports helped to fix 2 bugs in Gurobi (!)</p>
  </div>
  <div class="page">
    <p>MIP Solvers &amp; their parameters I Commercial solvers: Cplex 12.1 &amp; Gurobi 2.0.1 I Open-source solver: lpsolve 5.5</p>
    <p>Algorithm Parameter type # params # values Total # configurations Boolean 6 2</p>
    <p>Cplex Categorical 45 37</p>
    <p>Continuous 7 discretized: 58 Boolean 4 2</p>
    <p>Gurobi Categorical 16 35</p>
    <p>Continuous 2 discretized: 5</p>
    <p>lpsolve Boolean 40 2</p>
    <p>Problems with some parameter configurations I Segmentation faults &amp; wrong results I Detect such runs online, give worst possible score</p>
    <p>Local search avoids problematic parameter configurations</p>
    <p>I Concise bug reports helped to fix 2 bugs in Gurobi (!)</p>
  </div>
  <div class="page">
    <p>MIP Solvers &amp; their parameters I Commercial solvers: Cplex 12.1 &amp; Gurobi 2.0.1 I Open-source solver: lpsolve 5.5</p>
    <p>Algorithm Parameter type # params # values Total # configurations Boolean 6 2</p>
    <p>Cplex Categorical 45 37</p>
    <p>Continuous 7 discretized: 58 Boolean 4 2</p>
    <p>Gurobi Categorical 16 35</p>
    <p>Continuous 2 discretized: 5</p>
    <p>lpsolve Boolean 40 2</p>
    <p>Problems with some parameter configurations I Segmentation faults &amp; wrong results</p>
    <p>I Detect such runs online, give worst possible score</p>
    <p>Local search avoids problematic parameter configurations</p>
    <p>I Concise bug reports helped to fix 2 bugs in Gurobi (!)</p>
  </div>
  <div class="page">
    <p>MIP Solvers &amp; their parameters I Commercial solvers: Cplex 12.1 &amp; Gurobi 2.0.1 I Open-source solver: lpsolve 5.5</p>
    <p>Algorithm Parameter type # params # values Total # configurations Boolean 6 2</p>
    <p>Cplex Categorical 45 37</p>
    <p>Continuous 7 discretized: 58 Boolean 4 2</p>
    <p>Gurobi Categorical 16 35</p>
    <p>Continuous 2 discretized: 5</p>
    <p>lpsolve Boolean 40 2</p>
    <p>Problems with some parameter configurations I Segmentation faults &amp; wrong results I Detect such runs online, give worst possible score</p>
    <p>Local search avoids problematic parameter configurations</p>
    <p>I Concise bug reports helped to fix 2 bugs in Gurobi (!)</p>
  </div>
  <div class="page">
    <p>MIP Solvers &amp; their parameters I Commercial solvers: Cplex 12.1 &amp; Gurobi 2.0.1 I Open-source solver: lpsolve 5.5</p>
    <p>Algorithm Parameter type # params # values Total # configurations Boolean 6 2</p>
    <p>Cplex Categorical 45 37</p>
    <p>Continuous 7 discretized: 58 Boolean 4 2</p>
    <p>Gurobi Categorical 16 35</p>
    <p>Continuous 2 discretized: 5</p>
    <p>lpsolve Boolean 40 2</p>
    <p>Problems with some parameter configurations I Segmentation faults &amp; wrong results I Detect such runs online, give worst possible score</p>
    <p>Local search avoids problematic parameter configurations</p>
    <p>I Concise bug reports helped to fix 2 bugs in Gurobi (!) 14</p>
  </div>
  <div class="page">
    <p>Outline</p>
  </div>
  <div class="page">
    <p>Benchmark sets used</p>
    <p>Domain Type #instances Citation Comp. sustainability (SUST) MILP 2 000 [Gomes et al, 08]</p>
    <p>Combinatorial auctions (WDP) MILP 2 000 [Leyton-Brown et al., 00] Mixed integer knapsack (MIK) MILP 120 [Atamturk, 03]</p>
    <p>and 3 more ...</p>
    <p>Split benchmarks 50:50 into training and test sets</p>
    <p>I Optimized parameters on the training set</p>
    <p>I Reported performance on the test set</p>
    <p>I Necessary to check for over-tuning</p>
  </div>
  <div class="page">
    <p>Benchmark sets used</p>
    <p>Domain Type #instances Citation Comp. sustainability (SUST) MILP 2 000 [Gomes et al, 08]</p>
    <p>Combinatorial auctions (WDP) MILP 2 000 [Leyton-Brown et al., 00] Mixed integer knapsack (MIK) MILP 120 [Atamturk, 03]</p>
    <p>and 3 more ...</p>
    <p>Split benchmarks 50:50 into training and test sets</p>
    <p>I Optimized parameters on the training set</p>
    <p>I Reported performance on the test set</p>
    <p>I Necessary to check for over-tuning</p>
  </div>
  <div class="page">
    <p>Setup of configuration experiments</p>
    <p>Perform 10 independent runs of ParamILS</p>
    <p>I Select configuration  of run with best training performance</p>
    <p>Compare test performance of: I ParamILSs configuration</p>
    <p>I Default algorithm settings I Cplex tuning tool</p>
    <p>Gurobi and lpsolve: no tuning tool available</p>
  </div>
  <div class="page">
    <p>Setup of configuration experiments</p>
    <p>Perform 10 independent runs of ParamILS</p>
    <p>I Select configuration  of run with best training performance</p>
    <p>Compare test performance of: I ParamILSs configuration</p>
    <p>I Default algorithm settings I Cplex tuning tool</p>
    <p>Gurobi and lpsolve: no tuning tool available</p>
  </div>
  <div class="page">
    <p>Outline</p>
  </div>
  <div class="page">
    <p>Minimization of Runtime to Optimal Solution I Optimal: relative optimality gap of 0.0001</p>
    <p>(Cplex and Gurobi default)</p>
    <p>I Ran ParamILS for 2 days on 10 machines I Mean speedup (on test instances)</p>
    <p>Cplex 2x to 50x  lpsolve 1x (no speedup) to 150x  Gurobi 1.2x to 2.3x</p>
  </div>
  <div class="page">
    <p>Minimization of Runtime to Optimal Solution I Optimal: relative optimality gap of 0.0001</p>
    <p>(Cplex and Gurobi default)</p>
    <p>I Ran ParamILS for 2 days on 10 machines</p>
    <p>I Mean speedup (on test instances)  Cplex 2x to 50x  lpsolve 1x (no speedup) to 150x  Gurobi 1.2x to 2.3x</p>
  </div>
  <div class="page">
    <p>Minimization of Runtime to Optimal Solution</p>
    <p>I Optimal: relative optimality gap of 0.0001 (Cplex and Gurobi default)</p>
    <p>I Ran ParamILS for 2 days on 10 machines I Mean speedup (on test instances)</p>
    <p>Cplex 2x to 50x</p>
    <p>lpsolve 1x (no speedup) to 150x  Gurobi 1.2x to 2.3x</p>
    <p>Default [CPU s]</p>
    <p>C o n fi g . fo</p>
    <p>u n d b</p>
    <p>y P</p>
    <p>a ra</p>
    <p>m IL</p>
    <p>S [ C</p>
    <p>P U</p>
    <p>s ]</p>
    <p>Train</p>
    <p>Test</p>
    <p>Cplex on SUST instances (50x) 19</p>
  </div>
  <div class="page">
    <p>Minimization of Runtime to Optimal Solution</p>
    <p>I Optimal: relative optimality gap of 0.0001 (Cplex and Gurobi default)</p>
    <p>I Ran ParamILS for 2 days on 10 machines I Mean speedup (on test instances)</p>
    <p>Cplex 2x to 50x  lpsolve 1x (no speedup) to 150x</p>
    <p>Gurobi 1.2x to 2.3x</p>
    <p>Default [CPU s]</p>
    <p>C o n fi g . fo</p>
    <p>u n d b</p>
    <p>y P</p>
    <p>a ra</p>
    <p>m IL</p>
    <p>S [ C</p>
    <p>P U</p>
    <p>s ]</p>
    <p>Train</p>
    <p>Test</p>
    <p>Cplex on SUST instances (50x)</p>
    <p>Default [CPU s]</p>
    <p>C o n fi g . fo</p>
    <p>u n d b</p>
    <p>y P</p>
    <p>a ra</p>
    <p>m IL</p>
    <p>S [ C</p>
    <p>P U</p>
    <p>s ]</p>
    <p>Train</p>
    <p>Traintimeout</p>
    <p>Test</p>
    <p>Testtimeout</p>
    <p>lpsolve on WDP instances (150x) 19</p>
  </div>
  <div class="page">
    <p>Minimization of Runtime to Optimal Solution</p>
    <p>I Optimal: relative optimality gap of 0.0001 (Cplex and Gurobi default)</p>
    <p>I Ran ParamILS for 2 days on 10 machines I Mean speedup (on test instances)</p>
    <p>Cplex 2x to 50x  lpsolve 1x (no speedup) to 150x  Gurobi 1.2x to 2.3x</p>
    <p>Default [CPU s]</p>
    <p>C o n fi g . fo</p>
    <p>u n d b</p>
    <p>y P</p>
    <p>a ra</p>
    <p>m IL</p>
    <p>S [ C</p>
    <p>P U</p>
    <p>s ]</p>
    <p>Train</p>
    <p>Test</p>
    <p>Cplex on SUST instances (50x)</p>
    <p>Default [CPU s]</p>
    <p>C o n fi g . fo</p>
    <p>u n d b</p>
    <p>y P</p>
    <p>a ra</p>
    <p>m IL</p>
    <p>S [ C</p>
    <p>P U</p>
    <p>s ]</p>
    <p>Train</p>
    <p>Traintimeout</p>
    <p>Test</p>
    <p>Testtimeout</p>
    <p>Gurobi on SUST instances (2.3x) 19</p>
  </div>
  <div class="page">
    <p>Minimization of Runtime to Optimal Solution</p>
    <p>I Optimal: relative optimality gap of 0.0001 (Cplex and Gurobi default)</p>
    <p>I Ran ParamILS for 2 days on 10 machines I Mean speedup (on test instances)</p>
    <p>Cplex 2x to 50x  lpsolve 1x (no speedup) to 150x  Gurobi 1.2x to 2.3x</p>
    <p>Default [CPU s]</p>
    <p>C o n fi g . fo</p>
    <p>u n d b</p>
    <p>y P</p>
    <p>a ra</p>
    <p>m IL</p>
    <p>S [ C</p>
    <p>P U</p>
    <p>s ]</p>
    <p>Train</p>
    <p>Test</p>
    <p>Gurobi on MIK instances (1.2x)</p>
    <p>Default [CPU s]</p>
    <p>C o n fi g . fo</p>
    <p>u n d b</p>
    <p>y P</p>
    <p>a ra</p>
    <p>m IL</p>
    <p>S [ C</p>
    <p>P U</p>
    <p>s ]</p>
    <p>Train</p>
    <p>Traintimeout</p>
    <p>Test</p>
    <p>Testtimeout</p>
    <p>Gurobi on SUST instances (2.3x) 19</p>
  </div>
  <div class="page">
    <p>Comparison to Cplex tuning tool</p>
    <p>I Cplex tuning tool</p>
    <p>Evaluates predefined good configurations, returns best one  Required runtime varies (from &lt; 1h to weeks)</p>
    <p>I ParamILS: anytime algorithm</p>
    <p>At each time step, keeps track of its incumbent</p>
    <p>Cplex on MIK instances</p>
    <p>Configuration budget [CPU s]</p>
    <p>P e</p>
    <p>rf o</p>
    <p>rm a</p>
    <p>n c e</p>
    <p>[ C</p>
    <p>P U</p>
    <p>s ]</p>
    <p>Default CPLEX tuning tool ParamILS</p>
    <p>Cplex on SUST instances</p>
  </div>
  <div class="page">
    <p>Comparison to Cplex tuning tool</p>
    <p>I Cplex tuning tool</p>
    <p>Evaluates predefined good configurations, returns best one  Required runtime varies (from &lt; 1h to weeks)</p>
    <p>I ParamILS: anytime algorithm</p>
    <p>At each time step, keeps track of its incumbent</p>
    <p>Cplex on MIK instances</p>
    <p>Configuration budget [CPU s]</p>
    <p>P e</p>
    <p>rf o</p>
    <p>rm a</p>
    <p>n c e</p>
    <p>[ C</p>
    <p>P U</p>
    <p>s ]</p>
    <p>Default CPLEX tuning tool ParamILS</p>
    <p>Cplex on SUST instances</p>
  </div>
  <div class="page">
    <p>Comparison to Cplex tuning tool</p>
    <p>I Cplex tuning tool</p>
    <p>Evaluates predefined good configurations, returns best one  Required runtime varies (from &lt; 1h to weeks)</p>
    <p>I ParamILS: anytime algorithm</p>
    <p>At each time step, keeps track of its incumbent</p>
    <p>Configuration budget [CPU s]</p>
    <p>P e rf</p>
    <p>o rm</p>
    <p>a n c e [ C</p>
    <p>P U</p>
    <p>s ]</p>
    <p>Default CPLEX tuning tool</p>
    <p>Cplex on MIK instances</p>
    <p>Configuration budget [CPU s]</p>
    <p>P e</p>
    <p>rf o</p>
    <p>rm a</p>
    <p>n c e</p>
    <p>[ C</p>
    <p>P U</p>
    <p>s ]</p>
    <p>Default CPLEX tuning tool ParamILS</p>
    <p>Cplex on SUST instances</p>
  </div>
  <div class="page">
    <p>Comparison to Cplex tuning tool</p>
    <p>I Cplex tuning tool</p>
    <p>Evaluates predefined good configurations, returns best one  Required runtime varies (from &lt; 1h to weeks)</p>
    <p>I ParamILS: anytime algorithm</p>
    <p>At each time step, keeps track of its incumbent</p>
    <p>Configuration budget [CPU s]</p>
    <p>P e</p>
    <p>rf o</p>
    <p>rm a</p>
    <p>n c e</p>
    <p>[ C</p>
    <p>P U</p>
    <p>s ]</p>
    <p>Default CPLEX tuning tool ParamILS</p>
    <p>Cplex on MIK instances</p>
    <p>Configuration budget [CPU s]</p>
    <p>P e</p>
    <p>rf o</p>
    <p>rm a</p>
    <p>n c e</p>
    <p>[ C</p>
    <p>P U</p>
    <p>s ]</p>
    <p>Default CPLEX tuning tool ParamILS</p>
    <p>Cplex on SUST instances</p>
  </div>
  <div class="page">
    <p>Comparison to Cplex tuning tool</p>
    <p>I Cplex tuning tool</p>
    <p>Evaluates predefined good configurations, returns best one  Required runtime varies (from &lt; 1h to weeks)</p>
    <p>I ParamILS: anytime algorithm</p>
    <p>At each time step, keeps track of its incumbent</p>
    <p>Configuration budget [CPU s]</p>
    <p>P e</p>
    <p>rf o</p>
    <p>rm a</p>
    <p>n c e</p>
    <p>[ C</p>
    <p>P U</p>
    <p>s ]</p>
    <p>Default CPLEX tuning tool ParamILS</p>
    <p>Cplex on MIK instances</p>
    <p>Configuration budget [CPU s]</p>
    <p>P e</p>
    <p>rf o</p>
    <p>rm a</p>
    <p>n c e</p>
    <p>[ C</p>
    <p>P U</p>
    <p>s ]</p>
    <p>Default CPLEX tuning tool ParamILS</p>
    <p>Cplex on SUST instances</p>
  </div>
  <div class="page">
    <p>Minimization of Optimality Gap</p>
    <p>I Objective: minimal optimality gap within 10 seconds runtime</p>
    <p>I Ran ParamILS for 5 hours on 10 machines</p>
    <p>I Reduction factors of average optimality gap (on test set)</p>
    <p>Cplex 1.3x to 8.6x  lpsolve 1x (no reduction) to 46x  Gurobi 1.1x to 2.2x</p>
  </div>
  <div class="page">
    <p>Minimization of Optimality Gap</p>
    <p>I Objective: minimal optimality gap within 10 seconds runtime</p>
    <p>I Ran ParamILS for 5 hours on 10 machines</p>
    <p>I Reduction factors of average optimality gap (on test set)</p>
    <p>Cplex 1.3x to 8.6x  lpsolve 1x (no reduction) to 46x  Gurobi 1.1x to 2.2x</p>
  </div>
  <div class="page">
    <p>Minimization of Optimality Gap</p>
    <p>I Objective: minimal optimality gap within 10 seconds runtime</p>
    <p>I Ran ParamILS for 5 hours on 10 machines</p>
    <p>I Reduction factors of average optimality gap (on test set)</p>
    <p>Cplex 1.3x to 8.6x  lpsolve 1x (no reduction) to 46x  Gurobi 1.1x to 2.2x</p>
  </div>
  <div class="page">
    <p>Outline</p>
  </div>
  <div class="page">
    <p>Conclusions</p>
    <p>MIP solvers can be configured automatically</p>
    <p>I Configuration tool ParamILS available online:</p>
    <p>http://www.cs.ubc.ca/labs/beta/Projects/ParamILS/  off-the-shelf tool (knows nothing about MIP or MIP solvers!)</p>
    <p>I Sometimes substantial improvements</p>
    <p>I Saves valuable human time</p>
    <p>Requirements</p>
    <p>I Representative instance set</p>
    <p>100 instances sometimes not enough  If you generate instances, please make more (e.g., 2000)!</p>
    <p>I CPU time (here: 10  2 days per domain)</p>
  </div>
  <div class="page">
    <p>Conclusions</p>
    <p>MIP solvers can be configured automatically</p>
    <p>I Configuration tool ParamILS available online:</p>
    <p>http://www.cs.ubc.ca/labs/beta/Projects/ParamILS/  off-the-shelf tool (knows nothing about MIP or MIP solvers!)</p>
    <p>I Sometimes substantial improvements</p>
    <p>I Saves valuable human time</p>
    <p>Requirements</p>
    <p>I Representative instance set</p>
    <p>100 instances sometimes not enough  If you generate instances, please make more (e.g., 2000)!</p>
    <p>I CPU time (here: 10  2 days per domain)</p>
  </div>
  <div class="page">
    <p>Conclusions</p>
    <p>MIP solvers can be configured automatically</p>
    <p>I Configuration tool ParamILS available online:</p>
    <p>http://www.cs.ubc.ca/labs/beta/Projects/ParamILS/  off-the-shelf tool (knows nothing about MIP or MIP solvers!)</p>
    <p>I Sometimes substantial improvements</p>
    <p>I Saves valuable human time</p>
    <p>Requirements</p>
    <p>I Representative instance set</p>
    <p>100 instances sometimes not enough  If you generate instances, please make more (e.g., 2000)!</p>
    <p>I CPU time (here: 10  2 days per domain)</p>
  </div>
  <div class="page">
    <p>Future Work</p>
    <p>I Model-based techniques</p>
    <p>Fit a model that predicts performance of a given configuration on a given instance</p>
    <p>Use that model to quantify</p>
    <p>+ Importance of each parameter + Interaction of parameters + Interaction of parameters and instance characteristics</p>
    <p>I Per-instance approaches for heterogeneous benchmarks  Given a new unseen instance:</p>
    <p>+ Compute instance characteristics (fast) + Use parameter config. predicted to be best for the instance</p>
  </div>
  <div class="page">
    <p>Future Work</p>
    <p>I Model-based techniques</p>
    <p>Fit a model that predicts performance of a given configuration on a given instance</p>
    <p>Use that model to quantify</p>
    <p>+ Importance of each parameter + Interaction of parameters + Interaction of parameters and instance characteristics</p>
    <p>I Per-instance approaches for heterogeneous benchmarks  Given a new unseen instance:</p>
    <p>+ Compute instance characteristics (fast) + Use parameter config. predicted to be best for the instance</p>
  </div>
  <div class="page">
    <p>Future Work</p>
    <p>I Model-based techniques</p>
    <p>Fit a model that predicts performance of a given configuration on a given instance</p>
    <p>Use that model to quantify</p>
    <p>+ Importance of each parameter + Interaction of parameters + Interaction of parameters and instance characteristics</p>
    <p>I Per-instance approaches for heterogeneous benchmarks  Given a new unseen instance:</p>
    <p>+ Compute instance characteristics (fast) + Use parameter config. predicted to be best for the instance</p>
  </div>
  <div class="page">
    <p>Thanks to:</p>
    <p>I Providers of instance benchmark sets</p>
    <p>Louis-Martin Rousseau  Bistra Dilkina  Berkeley Computational Optimization Lab</p>
    <p>I Commercial MIP solvers for free full academic license</p>
    <p>IBM (Cplex)  Gurobi</p>
    <p>I lpsolve developers for their solver</p>
    <p>I Compute clusters</p>
    <p>Westgrid  CFI-funded arrow cluster</p>
    <p>I Funding agencies</p>
    <p>Postdoc fellowship from CBIE  MITACS  NSERC</p>
  </div>
  <div class="page">
    <p>Backup slides</p>
  </div>
  <div class="page">
    <p>Differences to STOP [Baz et al, 09]</p>
    <p>Baz et al optimized for single instances</p>
    <p>In practice, users would typically be tuning for a family of related instances rather than for an individual instance</p>
    <p>I Generalization to sets of instances is nontrivial</p>
    <p>Cannot afford to run all instances for each configuration FocusedILS adapts # runs per configuration</p>
    <p>Further differences</p>
    <p>I Baz et al used older Cplex version (9.0)</p>
    <p>defaults improved in newer Cplex versions</p>
    <p>I Baz et al considered (only) 10 Cplex parameters</p>
    <p>and also not all possible values for each parameter  in order to improve Stops performance requires domain knowledge</p>
  </div>
  <div class="page">
    <p>Configuration of MIP Solvers: Optimality Gap</p>
    <p>I Objective: minimal optimality gap within 10 seconds runtime</p>
    <p>I Ran ParamILS for 5 hours on 10 machines I Reduction factors of average optimality gap (on test inst.)</p>
    <p>Cplex 1.3x to 8.6x  lpsolve 1x (no reduction) to 46x  Gurobi 1.1x to 2.2x</p>
    <p>Default [% MIP gap]</p>
    <p>A u to</p>
    <p>c o n fi g . [%</p>
    <p>M IP</p>
    <p>g a p ]</p>
    <p>Train</p>
    <p>Test</p>
    <p>Cplex on MIK instances (8.6x)</p>
    <p>Default [% MIP gap]</p>
    <p>A u to</p>
    <p>c o n fi g . [%</p>
    <p>M IP</p>
    <p>g a p ]</p>
    <p>Train</p>
    <p>Test</p>
    <p>lpsolve on MIK instances (46x)</p>
  </div>
  <div class="page">
    <p>Configuration of MIP Solvers: Optimality Gap</p>
    <p>I Objective: minimal optimality gap within 10 seconds runtime I Ran ParamILS for 5 hours on 10 machines</p>
    <p>I Reduction factors of average optimality gap (on test inst.)  Cplex 1.3x to 8.6x  lpsolve 1x (no reduction) to 46x  Gurobi 1.1x to 2.2x</p>
    <p>Default [% MIP gap]</p>
    <p>A u to</p>
    <p>c o n fi g . [%</p>
    <p>M IP</p>
    <p>g a p ]</p>
    <p>Train</p>
    <p>Test</p>
    <p>Cplex on MIK instances (8.6x)</p>
    <p>Default [% MIP gap]</p>
    <p>A u to</p>
    <p>c o n fi g . [%</p>
    <p>M IP</p>
    <p>g a p ]</p>
    <p>Train</p>
    <p>Test</p>
    <p>lpsolve on MIK instances (46x)</p>
  </div>
  <div class="page">
    <p>Configuration of MIP Solvers: Optimality Gap</p>
    <p>I Objective: minimal optimality gap within 10 seconds runtime I Ran ParamILS for 5 hours on 10 machines I Reduction factors of average optimality gap (on test inst.)</p>
    <p>Cplex 1.3x to 8.6x  lpsolve 1x (no reduction) to 46x  Gurobi 1.1x to 2.2x</p>
    <p>Default [% MIP gap]</p>
    <p>A u to</p>
    <p>c o n fi g . [%</p>
    <p>M IP</p>
    <p>g a p ]</p>
    <p>Train</p>
    <p>Test</p>
    <p>Cplex on MIK instances (8.6x)</p>
    <p>Default [% MIP gap]</p>
    <p>A u to</p>
    <p>c o n fi g . [%</p>
    <p>M IP</p>
    <p>g a p ]</p>
    <p>Train</p>
    <p>Test</p>
    <p>lpsolve on MIK instances (46x)</p>
  </div>
  <div class="page">
    <p>Configuration of MIP Solvers: Optimality Gap</p>
    <p>I Objective: minimal optimality gap within 10 seconds runtime I Ran ParamILS for 5 hours on 10 machines I Reduction factors of average optimality gap (on test inst.)</p>
    <p>Cplex 1.3x to 8.6x  lpsolve 1x (no reduction) to 46x  Gurobi 1.1x to 2.2x</p>
    <p>Default [% MIP gap]</p>
    <p>A u to</p>
    <p>c o n fi g . [%</p>
    <p>M IP</p>
    <p>g a p ]</p>
    <p>Train</p>
    <p>Test</p>
    <p>Cplex on MIK instances (8.6x)</p>
    <p>Default [% MIP gap]</p>
    <p>A u to</p>
    <p>c o n fi g . [%</p>
    <p>M IP</p>
    <p>g a p ]</p>
    <p>Train</p>
    <p>Test</p>
    <p>lpsolve on MIK instances (46x) 28</p>
  </div>
</Presentation>

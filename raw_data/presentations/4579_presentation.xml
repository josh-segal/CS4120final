<?xml version="1.0" ?>
<Presentation>
  <div class="page">
    <p>Zurich Research Laboratory</p>
    <p>IWAN 03 | 12. December 2003 | Kyoto www.zurich.ibm.com</p>
    <p>Andreas Kind, Roman Pletka and Marcel Waldvogel</p>
    <p>The Role of Network Processors in Active Networks</p>
  </div>
  <div class="page">
    <p>Zurich Research Laboratory</p>
    <p>Overview</p>
    <p>Network Processor programmability  Applications of NPs  Advantages of NP-based ANs  Our new NP-based AN framework</p>
    <p>- Requirements - Safety hierarchy - Implementation experience</p>
    <p>Conclusion and outlook</p>
  </div>
  <div class="page">
    <p>Zurich Research Laboratory</p>
    <p>Network Processor Programmability</p>
    <p>Horizontally layered software architecture  NP instruction set on the lowest layer provides means for packet handling.</p>
    <p>NP APIs (www.npforum.org) and protocols (IETF ForCES) dedicated to dataplane, control-plane, and management plane services.</p>
    <p>Ingress</p>
    <p>Switch Fabric</p>
    <p>Network Processor Egress</p>
    <p>Control Processor</p>
    <p>D a</p>
    <p>ta</p>
    <p>C o</p>
    <p>n tr</p>
    <p>o l</p>
    <p>M n</p>
    <p>g m</p>
    <p>n t</p>
    <p>Node Services APIs</p>
    <p>Network Services APIs</p>
    <p>Appl Network</p>
    <p>Appl</p>
  </div>
  <div class="page">
    <p>Zurich Research Laboratory</p>
    <p>Applications of NPs</p>
    <p>Content switching and load balancing Transparently distributing client requests across different servers.</p>
    <p>Traffic differentiation QoS and traffic engineering require differentiation based on classification, policing, and forwarding functions at edge and core routers leading to increased data-plane processing.</p>
    <p>Network security Security functions for protecting systems and networks such as encryption, intrusion detection, and firewalling.</p>
    <p>Terminal mobility NP help mobile IP equipment manufacturers to adjust their products fast to evolving protocols in mobile IP convergence.</p>
    <p>Active networking ANs require significantly more data-plane processing and require routers to expose their state of operation in order to allow reconfiguration of forwarding functions.</p>
  </div>
  <div class="page">
    <p>Zurich Research Laboratory</p>
    <p>Advantages of NP-based ANs</p>
    <p>Key idea in AN: Decouple network services from the networking infrastructure by use of active packets and active nodes.</p>
    <p>Historically, despite of innovative ideas ANs never were widely deployed in production networks. Network equipment manufacturers as well as network operators believed ANs have a negative inpact on efficiency in packet processing.</p>
    <p>The interpretation of byte-coded active programs come with additional processing overhead which can not be provided in routers using ASICs or FPGAs.</p>
    <p>With the advent of network processors ANs get an upcurrent that builds a feasible technical solution in the ever changing and increasing requirements (e.g., new protocols, standards ).</p>
    <p>In addition, ANs profit from recent safety and security advances which are practicable using network processors.</p>
  </div>
  <div class="page">
    <p>Zurich Research Laboratory</p>
    <p>Requirements</p>
    <p>Safe byte-code language Architectural neutrality, provides intrinsic safety properties (bounds on CPU, memory, and networking bandwidth =&gt; SNAP).</p>
    <p>Resource bound Bound in 2 dimensions: per-node resources and the number of nodes/links the packet will visit.</p>
    <p>Safety levels Definition of a safety hierarchy in order to monitor control-plane and data-plane activities.</p>
    <p>Sandbox environment Any active code is executed in a safe environment called the active networking sandbox (ANSB).</p>
    <p>Router services Dynamically enhance router functionality to overcome limitations of the byte-code language.</p>
    <p>Static router services are defined as opcodes in the byte-code language (e.g., IP address lookup, interface enumeration, flow queue management, or congestion status information).</p>
    <p>Dynamic router services tailored to networking tasks with a focus on control-plane functionality (e.g., AQM, scheduling, policing).</p>
    <p>Routing Active packets will not interfere with routing protocols. Alternative routes are possible as long as defined in the local forwarding table.</p>
  </div>
  <div class="page">
    <p>Zurich Research Laboratory</p>
    <p>Safety hierarchy for ANs</p>
    <p>Dynamic router services: registering new router services</p>
    <p>Authentication of active packets needed using public key infrastructure.</p>
    <p>Complex policy insertion and manipulation</p>
    <p>Simple policy modification and manipulation</p>
    <p>Creation of new packets and resource-intensive router services (e.g., lookups)</p>
    <p>Simple packet byte-code</p>
    <p>Admission control at the edge of the network, trusted within a domain.</p>
    <p>Running in a sandbox environment, limited by predefined rules and installed router services.</p>
    <p>Sandbox environment based on the knowledge of the instruction performance.</p>
    <p>Safety issues solved by restrictions in the language definition and the use of a sandbox environment.</p>
    <p>No active code present in packets</p>
    <p>Corresponds to the traditional packet forwarding process in IP networks.</p>
    <p>Safety Level</p>
  </div>
  <div class="page">
    <p>Zurich Research Laboratory</p>
    <p>AN Models on Network Processors</p>
    <p>Host Processor</p>
    <p>embedded GPP</p>
    <p>Data path forwarding engines</p>
    <p>Traditional model</p>
    <p>Data path forwarding engines</p>
    <p>The offloading model</p>
    <p>Host Processor embedded GPPNP</p>
    <p>NP</p>
  </div>
  <div class="page">
    <p>Zurich Research Laboratory</p>
    <p>Architectural Overview</p>
    <p>- Layer 2 - Layer 3 - Layer 4</p>
    <p>Routing AN Code Handler</p>
    <p>PolicerClassification AQM Scheduler</p>
    <p>PCI-X-to-Ethernet Bridge EPC-to-ePPC Interface</p>
    <p>Proxy Device Driver Device Driver</p>
    <p>Routing Table</p>
    <p>Netlink</p>
    <p>NPDD</p>
    <p>NPCP</p>
    <p>Resource Manager</p>
    <p>TC</p>
    <p>External attached CP</p>
    <p>IP Stack IP Stack</p>
    <p>NPDD</p>
    <p>ANSB</p>
    <p>C o</p>
    <p>n tr</p>
    <p>o l E</p>
    <p>le m</p>
    <p>e n</p>
    <p>ts</p>
    <p>K e</p>
    <p>rn e</p>
    <p>l S</p>
    <p>p a</p>
    <p>ce U</p>
    <p>s e</p>
    <p>r S</p>
    <p>p a</p>
    <p>ce ePPC (NP)</p>
    <p>F o</p>
    <p>rw a</p>
    <p>rd in</p>
    <p>g</p>
    <p>E le</p>
    <p>m e</p>
    <p>n ts</p>
    <p>N P</p>
    <p>Routing Protocols</p>
  </div>
  <div class="page">
    <p>Zurich Research Laboratory</p>
    <p>Ingress Data-path processing on NPs</p>
    <p>P h</p>
    <p>ys ic</p>
    <p>a l L</p>
    <p>a ye</p>
    <p>r D</p>
    <p>e vi</p>
    <p>c e</p>
    <p>s L2 Processing</p>
    <p>Ingress</p>
    <p>Active Networking Code Handler</p>
    <p>Frame Size</p>
    <p>Dst MAC Address</p>
    <p>Hdr Checksum</p>
    <p>Unicast/Multicast</p>
    <p>Start IP Lookup</p>
    <p>Ingress Counter</p>
    <p>TTL Test</p>
    <p>IP Options</p>
    <p>L4 Processing ?</p>
    <p>L3 Processing L4 Processing</p>
    <p>Ingress Flow Control (RED, BAT, ...)</p>
    <p>L4 Classification</p>
    <p>S w</p>
    <p>itc h</p>
    <p>I n</p>
    <p>te rf</p>
    <p>a c e</p>
  </div>
  <div class="page">
    <p>Zurich Research Laboratory</p>
    <p>Egress Data-path processing on NPs</p>
    <p>L3 Processing</p>
    <p>Egress</p>
    <p>Active Networking Code Handler</p>
    <p>EPCT Lookup</p>
    <p>Port Type (Enet)</p>
    <p>Enet Encapsulation</p>
    <p>Enqueue</p>
    <p>ARP Table Lookup</p>
    <p>opt. VLAN Tag</p>
    <p>DSCP Remark</p>
    <p>Fragmentation</p>
    <p>Egress Counter</p>
    <p>L2 Processing Scheduler</p>
    <p>Egress Flow Control (RED, BAT, )</p>
    <p>S w</p>
    <p>it c h</p>
    <p>I n</p>
    <p>te rf</p>
    <p>a ce</p>
    <p>P h</p>
    <p>ys ic</p>
    <p>a l L</p>
    <p>a ye</p>
    <p>r D</p>
    <p>e vi</p>
    <p>c e</p>
    <p>s</p>
    <p>Flow Queues</p>
    <p>Port Queues</p>
    <p>Combined WFQ and Priority Scheduler</p>
  </div>
  <div class="page">
    <p>Zurich Research Laboratory</p>
    <p>Conclusion &amp; Outlook</p>
    <p>NPs in ANs booster flexibility without compromising neither performance nor safety.</p>
    <p>In general and in the context of the proposed AN framework the deployment of ANs can benefit from NP technology and hence simplify the development of new services.</p>
    <p>Security and safety advantages result from a combination of stringent requirements.</p>
    <p>Offloading of active code from the control point to the NPs GPP =&gt; additional physical barrier between packet-processing cores and the ePPC on the NP.</p>
  </div>
</Presentation>

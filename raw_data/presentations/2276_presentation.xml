<?xml version="1.0" ?>
<Presentation>
  <div class="page">
    <p>Prefetching in Hybrid Main Memory Systems</p>
    <p>Subisha V, Varun Gohil, Nisarg Ujjainkar, Manu Awasthi*</p>
    <p>IIT Gandhinagar *Ashoka University</p>
    <p>HotStorage 2020 1</p>
  </div>
  <div class="page">
    <p>Outline of the Presentation</p>
    <p>Background</p>
    <p>Insights</p>
    <p>Prefetcher Design</p>
    <p>Evaluation</p>
    <p>Future Work</p>
  </div>
  <div class="page">
    <p>Outline of the Presentation</p>
    <p>Background</p>
    <p>Insights</p>
    <p>Prefetcher Design</p>
    <p>Evaluation</p>
    <p>Future Work</p>
  </div>
  <div class="page">
    <p>DRAM Scaling Challenge</p>
    <p>Solving the DRAM Scaling Challenge, Samira Khan, ARM Research Summit 2018</p>
    <p>ar s</p>
    <p>ear s</p>
    <p>DRAM Density Scaling slowing down</p>
  </div>
  <div class="page">
    <p>DRAM Scaling Challenge</p>
    <p>Solving the DRAM Scaling Challenge, Samira Khan, ARM Research Summit 2018</p>
    <p>ar s</p>
    <p>ear s</p>
    <p>Genomics Neural Nets</p>
    <p>Virtual Reality In-Memory</p>
    <p>Frameworks</p>
    <p>DRAM Density Scaling slowing down Workloads require higher memory capacity</p>
  </div>
  <div class="page">
    <p>Emerging Memory Technologies</p>
    <p>and many more ...</p>
  </div>
  <div class="page">
    <p>Emerging Memory Technologies</p>
    <p>Better density</p>
    <p>Energy efficient</p>
  </div>
  <div class="page">
    <p>Emerging Memory Technologies</p>
    <p>Better density</p>
    <p>Energy efficient</p>
    <p>Longer access latencies</p>
    <p>Finite write endurance</p>
  </div>
  <div class="page">
    <p>Hybrid Main Memory</p>
    <p>Use DRAM and NVM synergistically</p>
  </div>
  <div class="page">
    <p>Hybrid Main Memory</p>
    <p>Use DRAM and NVM synergistically</p>
    <p>Single Address Space Variant</p>
  </div>
  <div class="page">
    <p>Hybrid Main Memory</p>
    <p>Use DRAM and NVM synergistically</p>
    <p>DRAM as a Cache Variant</p>
  </div>
  <div class="page">
    <p>Alloy Cache</p>
    <p>State of the art DRAM Cache design</p>
  </div>
  <div class="page">
    <p>Alloy Cache</p>
    <p>State of the art DRAM Cache design</p>
    <p>Acts as a direct mapped cache to NVM</p>
    <p>Fetches data at cacheline granularity</p>
  </div>
  <div class="page">
    <p>Alloy Cache</p>
    <p>State of the art DRAM Cache design</p>
    <p>Acts as a direct mapped cache to NVM</p>
    <p>Fetches data at cacheline granularity</p>
    <p>Cacheline size is 72B</p>
  </div>
  <div class="page">
    <p>Alloy Cache Page</p>
    <p>4KB contiguous memory chunk</p>
  </div>
  <div class="page">
    <p>Alloy Cache Page</p>
    <p>4KB contiguous memory chunk</p>
  </div>
  <div class="page">
    <p>Alloy Cache Page</p>
    <p>4KB contiguous memory chunk</p>
    <p>Empty Cachelines</p>
  </div>
  <div class="page">
    <p>Outline of the Presentation</p>
    <p>Background</p>
    <p>Insights</p>
    <p>Prefetcher Design</p>
    <p>Evaluation</p>
    <p>Future Work</p>
  </div>
  <div class="page">
    <p>Insights</p>
    <p>PARSEC</p>
  </div>
  <div class="page">
    <p>Insights 20</p>
  </div>
  <div class="page">
    <p>Insights 21</p>
  </div>
  <div class="page">
    <p>Insights</p>
    <p>Workloads exhibit page-level spatial locality in NVM</p>
  </div>
  <div class="page">
    <p>Insights 23</p>
  </div>
  <div class="page">
    <p>Insights</p>
    <p>Unallocated/Empty Page</p>
    <p>Allocated Page</p>
  </div>
  <div class="page">
    <p>Insights</p>
    <p>A large portion of DRAM Cache is unallocated</p>
  </div>
  <div class="page">
    <p>Outline of the Presentation</p>
    <p>Background</p>
    <p>Insights</p>
    <p>Prefetcher Design</p>
    <p>Evaluation</p>
    <p>Future Work</p>
  </div>
  <div class="page">
    <p>Prefetcher Design</p>
    <p>Page-Level Spatial Locality in NVM</p>
    <p>Prefetch at page granularity</p>
  </div>
  <div class="page">
    <p>Prefetcher Design</p>
    <p>Page-Level Spatial Locality in NVM</p>
    <p>Prefetch at page granularity</p>
    <p>DRAM Cache is largely unallocated</p>
    <p>Place prefetched pages in DRAM Cache</p>
  </div>
  <div class="page">
    <p>Prefetcher Design 29</p>
  </div>
  <div class="page">
    <p>Prefetcher Design</p>
    <p>When to prefetch?</p>
  </div>
  <div class="page">
    <p>Prefetcher Design</p>
    <p>When to prefetch?</p>
    <p>Where to place prefetched data in DRAM Cache?</p>
  </div>
  <div class="page">
    <p>Prefetcher Design</p>
    <p>When to prefetch?</p>
    <p>Where to place prefetched data in DRAM Cache?</p>
    <p>How to identify type of data at DRAM Cache location?</p>
  </div>
  <div class="page">
    <p>Prefetcher Design</p>
    <p>When to prefetch?</p>
    <p>Where to place prefetched data in DRAM Cache?</p>
    <p>How to identify type of data at DRAM Cache location?</p>
    <p>How to check if data is in a prefetched page?</p>
  </div>
  <div class="page">
    <p>When to Prefetch? 34</p>
  </div>
  <div class="page">
    <p>When to Prefetch?</p>
    <p>Prefetch a page if</p>
    <p>#cacheline access  Access Threshold (AT)</p>
    <p>#unique cacheline access  Unique Access Threshold (UAT)</p>
  </div>
  <div class="page">
    <p>When to Prefetch?</p>
    <p>NVM Page Classifier (NPC)</p>
    <p>Stores cacheline access history of recently used pages</p>
  </div>
  <div class="page">
    <p>NVM Page Classifier Entry</p>
    <p>N : Max number of pages that can be present in NVM</p>
    <p>AT: Access Threshold</p>
  </div>
  <div class="page">
    <p>NVM Page Classifier Entry</p>
    <p>N : Max number of pages that can be present in NVM</p>
    <p>AT: Access Threshold</p>
  </div>
  <div class="page">
    <p>NVM Page Classifier Entry</p>
    <p>N : Max number of pages that can be present in NVM</p>
    <p>AT: Access Threshold</p>
  </div>
  <div class="page">
    <p>NVM Page Classifier Entry</p>
    <p>N : Max number of pages that can be present in NVM</p>
    <p>AT: Access Threshold</p>
  </div>
  <div class="page">
    <p>NVM Page Classifier Entry</p>
    <p>N : Max number of pages that can be present in NVM</p>
    <p>AT: Access Threshold</p>
  </div>
  <div class="page">
    <p>NVM Page Classifier Entry</p>
    <p>N : Max number of pages that can be present in NVM</p>
    <p>AT: Access Threshold</p>
  </div>
  <div class="page">
    <p>Where to place Prefetched Page? 43</p>
  </div>
  <div class="page">
    <p>Where to place Prefetched Page?</p>
    <p>Last Unallocated DRAM Cache page</p>
  </div>
  <div class="page">
    <p>Where to place Prefetched Page?</p>
    <p>Empty Page Classifier (EPC)</p>
    <p>Stores the location of unallocated DRAM Cache pages</p>
  </div>
  <div class="page">
    <p>Empty Page Classifier (EPC) 46</p>
  </div>
  <div class="page">
    <p>Empty Page Classifier (EPC) 47</p>
  </div>
  <div class="page">
    <p>Empty Page Classifier (EPC) 48</p>
  </div>
  <div class="page">
    <p>Empty Page Classifier (EPC) 49</p>
  </div>
  <div class="page">
    <p>Empty Page Classifier (EPC) 50</p>
  </div>
  <div class="page">
    <p>Empty Page Classifier (EPC) 51</p>
  </div>
  <div class="page">
    <p>Empty Page Classifier (EPC)</p>
    <p>Page Number = (4096  Level 1 index) + (64  Level 2 index) + Level 3 index</p>
  </div>
  <div class="page">
    <p>Identifying type of data in DRAM Cache 53</p>
  </div>
  <div class="page">
    <p>Identifying type of data in DRAM Cache</p>
    <p>A DRAM Cache location might be</p>
    <p>Prefetched page</p>
  </div>
  <div class="page">
    <p>Identifying type of data in DRAM Cache</p>
    <p>A DRAM Cache location might be</p>
    <p>Prefetched page</p>
    <p>Alloy Cache Page</p>
  </div>
  <div class="page">
    <p>Identifying type of data in DRAM Cache</p>
    <p>A DRAM Cache location might be</p>
    <p>Prefetched page</p>
    <p>Alloy Cache Page</p>
    <p>Empty</p>
  </div>
  <div class="page">
    <p>Identifying type of data in DRAM Cache</p>
    <p>A DRAM Cache location might be</p>
    <p>Prefetched page</p>
    <p>Alloy Cache Page</p>
    <p>Empty</p>
    <p>Need to distinguish them to ensure correctness</p>
  </div>
  <div class="page">
    <p>Identifying type of data in DRAM Cache State 0: Empty Location</p>
    <p>State 1: Clean Prefetched Page</p>
    <p>State 2: Alloy Cache Page</p>
    <p>State 3: Dirty Prefetched Page</p>
  </div>
  <div class="page">
    <p>Identifying type of data in DRAM Cache</p>
    <p>State 0: Empty Location</p>
    <p>State 1: Clean Prefetched Page</p>
    <p>State 2: Alloy Cache Page</p>
    <p>State 3: Dirty Prefetched Page</p>
  </div>
  <div class="page">
    <p>Identifying type of data in DRAM Cache</p>
    <p>State 0: Empty Location</p>
    <p>State 1: Clean Prefetched Page</p>
    <p>State 2: Alloy Cache Page</p>
    <p>State 3: Dirty Prefetched Page</p>
  </div>
  <div class="page">
    <p>Identifying type of data in DRAM Cache</p>
    <p>State 0: Empty Location</p>
    <p>State 1: Clean Prefetched Page</p>
    <p>State 2: Alloy Cache Page</p>
    <p>State 3: Dirty Prefetched Page</p>
  </div>
  <div class="page">
    <p>Identifying type of data in DRAM Cache</p>
    <p>State 0: Empty Location</p>
    <p>State 1: Clean Prefetched Page</p>
    <p>State 2: Alloy Cache Page</p>
    <p>State 3: Dirty Prefetched Page</p>
  </div>
  <div class="page">
    <p>Identifying type of data in DRAM Cache</p>
    <p>Type Classifier (TC)</p>
    <p>Stores the state of the DRAM Cache location</p>
  </div>
  <div class="page">
    <p>Type Classifier Entry 64</p>
  </div>
  <div class="page">
    <p>Type Classifier Entry 65</p>
  </div>
  <div class="page">
    <p>Type Classifier Entry 66</p>
  </div>
  <div class="page">
    <p>Checking if data is in a prefetched page 67</p>
  </div>
  <div class="page">
    <p>Checking if data is in a prefetched page</p>
    <p>Page Redirection Table (PRT)</p>
    <p>Hash Table storing tags of prefetched data</p>
  </div>
  <div class="page">
    <p>Page Redirection Table Entry</p>
    <p>D : Max number of pages that can be present</p>
    <p>in DRAM Cache</p>
  </div>
  <div class="page">
    <p>Page Redirection Table Entry</p>
    <p>D : Max number of pages that can be present</p>
    <p>in DRAM Cache</p>
  </div>
  <div class="page">
    <p>Page Redirection Table Entry</p>
    <p>D : Max number of pages that can be present</p>
    <p>in DRAM Cache</p>
  </div>
  <div class="page">
    <p>Page Redirection Table Entry</p>
    <p>D : Max number of pages that can be present</p>
    <p>in DRAM Cache</p>
  </div>
  <div class="page">
    <p>Outline of the Presentation</p>
    <p>Background</p>
    <p>Insights</p>
    <p>Prefetcher Design</p>
    <p>Evaluation</p>
    <p>Future Work</p>
  </div>
  <div class="page">
    <p>Evaluation</p>
    <p>ZSim + NVMain</p>
    <p>1 GB Alloy Cache, 64 GB Phase Change Memory</p>
    <p>8 core, 2.6 GHz processor</p>
    <p>Use CACTI for access latency of structures</p>
    <p>PARSEC benchmark</p>
  </div>
  <div class="page">
    <p>Evaluation 75</p>
  </div>
  <div class="page">
    <p>Evaluation</p>
    <p>Sequential access behavior</p>
  </div>
  <div class="page">
    <p>Evaluation</p>
  </div>
  <div class="page">
    <p>Evaluation 78</p>
  </div>
  <div class="page">
    <p>Evaluation</p>
  </div>
  <div class="page">
    <p>Evaluation</p>
  </div>
  <div class="page">
    <p>Outline of the Presentation</p>
    <p>Background</p>
    <p>Insights</p>
    <p>Prefetcher Design</p>
    <p>Evaluation</p>
    <p>Future Work</p>
  </div>
  <div class="page">
    <p>Future Work</p>
    <p>Evaluate our prefetcher on</p>
    <p>Memory-intensive SPEC workloads</p>
    <p>Graph workloads having irregular memory access patterns</p>
    <p>Compare with similar recent works</p>
  </div>
  <div class="page">
    <p>Key Takeaways</p>
    <p>Prefetch at page granularity to exploit page-level spatial locality.</p>
    <p>Place prefetched page in DRAM Cache to improve its utilization</p>
    <p>We observe 16-40% increase in IPC on PARSEC.</p>
    <p>gohil.varun@iitgn.ac.in Contact Us:</p>
    <p>manu.awasthi@ashoka.edu.in</p>
    <p>Link to Paper:</p>
  </div>
</Presentation>

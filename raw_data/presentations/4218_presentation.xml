<?xml version="1.0" ?>
<Presentation>
  <div class="page">
    <p>On Evaluation of Adversarial Perturbations for</p>
    <p>Sequence-to-Sequence Models Paul Michel, Xian Li,</p>
    <p>Graham Neubig, Juan Pino</p>
  </div>
  <div class="page">
    <p>Adversarial Attacks/Perturbations</p>
    <p>Apply a small (indistinguishable) perturbation to the input that elicit large changes in the output</p>
  </div>
  <div class="page">
    <p>Adversarial Attacks/Perturbations</p>
    <p>Apply a small (indistinguishable) perturbation to the input that elicit large changes in the output</p>
    <p>Figure from Goodfellow et al. (2014)</p>
  </div>
  <div class="page">
    <p>Adversarial Attacks/Perturbations</p>
    <p>Apply a small (indistinguishable) perturbation to the input that elicit large changes in the output</p>
    <p>Figure from Goodfellow et al. (2014)</p>
  </div>
  <div class="page">
    <p>Adversarial Attacks/Perturbations</p>
    <p>Apply a small (indistinguishable) perturbation to the input that elicit large changes in the output</p>
    <p>Figure from Goodfellow et al. (2014)</p>
  </div>
  <div class="page">
    <p>Adversarial Attacks/Perturbations</p>
    <p>Apply a small (indistinguishable) perturbation to the input that elicit large changes in the output</p>
    <p>Figure from Goodfellow et al. (2014)</p>
  </div>
  <div class="page">
    <p>Small perturbations are well defined in vision  Small l2 ~= indistinguishable to the human eye</p>
    <p>Indistinguishable Perturbations</p>
    <p>... l2 distance</p>
  </div>
  <div class="page">
    <p>Small perturbations are well defined in vision  Small l2 ~= indistinguishable to the human eye</p>
    <p>What about text?</p>
    <p>Indistinguishable Perturbations</p>
    <p>... l2 distance</p>
  </div>
  <div class="page">
    <p>Not all Text Perturbations are Equal</p>
    <p>Hes very friendly</p>
  </div>
  <div class="page">
    <p>Not all Text Perturbations are Equal</p>
    <p>Hes very friendly</p>
    <p>Hes pretty friendly [Similar meaning]</p>
  </div>
  <div class="page">
    <p>Not all Text Perturbations are Equal</p>
    <p>Hes very friendly</p>
    <p>Hes pretty friendlyHes very annoying [Different meaning] [Similar meaning]</p>
  </div>
  <div class="page">
    <p>Not all Text Perturbations are Equal</p>
    <p>Hes very friendly</p>
    <p>Hes pretty friendlyHes very annoying Hes She friendly [Different meaning] [Similar meaning] [Nonsensical]</p>
  </div>
  <div class="page">
    <p>Not all Text Perturbations are Equal</p>
    <p>Hes very friendly</p>
    <p>Hes pretty friendlyHes very annoying Hes She friendly [Different meaning] [Similar meaning] [Nonsensical]</p>
    <p>Hes very freindly [Typo]</p>
  </div>
  <div class="page">
    <p>Not all Text Perturbations are Equal</p>
    <p>Cant expect the model to output the same output!</p>
    <p>Hes very friendly</p>
    <p>Hes pretty friendlyHes very annoying Hes She friendly [Different meaning] [Similar meaning] [Nonsensical]</p>
    <p>Hes very freindly [Typo]</p>
  </div>
  <div class="page">
    <p>Not all Text Perturbations are Equal</p>
    <p>Cant expect the model to output the same output!</p>
    <p>Hes very friendly</p>
    <p>Hes pretty friendlyHes very annoying Hes She friendly [Different meaning] [Similar meaning] [Nonsensical]</p>
    <p>Hes very freindly [Typo]</p>
    <p>This paper: Why and How you should evaluate adversarial perturbations</p>
  </div>
  <div class="page">
    <p>A Framework for Evaluating Adversarial Attacks</p>
  </div>
  <div class="page">
    <p>Problem Definition</p>
    <p>Ils le rinvestissent directement en engageant plus de procs.</p>
    <p>Original</p>
    <p>They plow it right back into filing more troll lawsuits.</p>
    <p>Reference</p>
  </div>
  <div class="page">
    <p>Problem Definition</p>
    <p>Ils le rinvestissent directement en engageant plus de procs.</p>
    <p>Original</p>
    <p>They plow it right back into filing more troll lawsuits.</p>
    <p>Reference</p>
  </div>
  <div class="page">
    <p>Problem Definition</p>
    <p>Ils le rinvestissent directement en engageant plus de procs.</p>
    <p>Original They direct it directly by engaging more cases.</p>
    <p>Base output</p>
    <p>They plow it right back into filing more troll lawsuits.</p>
    <p>Reference</p>
  </div>
  <div class="page">
    <p>Problem Definition</p>
    <p>Evaluate</p>
    <p>Ils le rinvestissent directement en engageant plus de procs.</p>
    <p>Original They direct it directly by engaging more cases.</p>
    <p>Base output</p>
    <p>They plow it right back into filing more troll lawsuits.</p>
    <p>Reference</p>
  </div>
  <div class="page">
    <p>Problem Definition</p>
    <p>Evaluate</p>
    <p>Attack</p>
    <p>Ils le rinvestissent directement en engageant plus de procs.</p>
    <p>Original</p>
    <p>Ilss le rinvestissent dierctement en engagaent plus de procs.</p>
    <p>Adv. src</p>
    <p>They direct it directly by engaging more cases.</p>
    <p>Base output</p>
    <p>They plow it right back into filing more troll lawsuits.</p>
    <p>Reference</p>
  </div>
  <div class="page">
    <p>Problem Definition</p>
    <p>Evaluate</p>
    <p>Attack</p>
    <p>Ils le rinvestissent directement en engageant plus de procs.</p>
    <p>Original</p>
    <p>Ilss le rinvestissent dierctement en engagaent plus de procs.</p>
    <p>Adv. src</p>
    <p>They direct it directly by engaging more cases.</p>
    <p>Base output</p>
    <p>.. de plus.Adv. output</p>
    <p>They plow it right back into filing more troll lawsuits.</p>
    <p>Reference</p>
  </div>
  <div class="page">
    <p>Problem Definition</p>
    <p>Evaluate</p>
    <p>Attack Evaluate too!</p>
    <p>Ils le rinvestissent directement en engageant plus de procs.</p>
    <p>Original</p>
    <p>Ilss le rinvestissent dierctement en engagaent plus de procs.</p>
    <p>Adv. src</p>
    <p>They direct it directly by engaging more cases.</p>
    <p>Base output</p>
    <p>.. de plus.Adv. output</p>
    <p>They plow it right back into filing more troll lawsuits.</p>
    <p>Reference</p>
  </div>
  <div class="page">
    <p>Source Side Evaluation</p>
    <p>Evaluate meaning preservation on the source side</p>
    <p>Where is a similarity metric such that</p>
    <p>Hes pretty friendlyHes very friendly &gt; Hes very annoyingHes very friendly</p>
    <p>Hes pretty friendlyHes very friendly &gt; Hes She friendlyHes very friendly</p>
    <p>[...]</p>
  </div>
  <div class="page">
    <p>Given , a similarity metric on the target side</p>
    <p>Target Side Evaluation</p>
  </div>
  <div class="page">
    <p>Given , a similarity metric on the target side</p>
    <p>Target Side Evaluation</p>
    <p>Evaluate relative meaning destruction on the target side</p>
  </div>
  <div class="page">
    <p>Given , a similarity metric on the target side</p>
    <p>Target Side Evaluation</p>
    <p>Evaluate relative meaning destruction on the target side</p>
  </div>
  <div class="page">
    <p>Given , a similarity metric on the target side</p>
    <p>Target Side Evaluation</p>
    <p>Evaluate relative meaning destruction on the target side</p>
  </div>
  <div class="page">
    <p>Given , a similarity metric on the target side</p>
    <p>Target Side Evaluation</p>
    <p>Evaluate relative meaning destruction on the target side</p>
  </div>
  <div class="page">
    <p>Given , a similarity metric on the target side</p>
    <p>Target Side Evaluation</p>
    <p>Evaluate relative meaning destruction on the target side</p>
  </div>
  <div class="page">
    <p>Given , a similarity metric on the target side</p>
    <p>Target Side Evaluation</p>
    <p>Evaluate relative meaning destruction on the target side</p>
  </div>
  <div class="page">
    <p>Successful Adversarial Attacks</p>
    <p>Ensure that:</p>
  </div>
  <div class="page">
    <p>Successful Adversarial Attacks</p>
    <p>Ensure that:</p>
    <p>Source meaning destruction</p>
  </div>
  <div class="page">
    <p>Successful Adversarial Attacks</p>
    <p>Ensure that:</p>
    <p>Target meaning destructionSource meaning destruction</p>
  </div>
  <div class="page">
    <p>Successful Adversarial Attacks</p>
    <p>Ensure that:</p>
    <p>Target meaning destructionSource meaning destruction</p>
    <p>Destroy the meaning on the target side more than on the source side</p>
  </div>
  <div class="page">
    <p>Which similarity metric to use?</p>
    <p>Human evaluation  6 point scale, details in paper</p>
    <p>How would you rate the similarity between the meaning of these two sentences?</p>
    <p>unnatural 5. Meaning is essentially equal and the two sentences are</p>
    <p>well-formed [Language]</p>
  </div>
  <div class="page">
    <p>Which similarity metric to use?</p>
    <p>Human evaluation  6 point scale, details in paper</p>
    <p>BLEU [Papineni et al., 2002]  Geometric mean of n-gram precision + length penalty</p>
    <p>How would you rate the similarity between the meaning of these two sentences?</p>
    <p>unnatural 5. Meaning is essentially equal and the two sentences are</p>
    <p>well-formed [Language]</p>
  </div>
  <div class="page">
    <p>Which similarity metric to use?</p>
    <p>Human evaluation  6 point scale, details in paper</p>
    <p>BLEU [Papineni et al., 2002]  Geometric mean of n-gram precision + length penalty</p>
    <p>METEOR [Banerjee and Lavie, 2005]  Word matching taking into account stemming, synonyms, paraphrases...</p>
    <p>How would you rate the similarity between the meaning of these two sentences?</p>
    <p>unnatural 5. Meaning is essentially equal and the two sentences are</p>
    <p>well-formed [Language]</p>
  </div>
  <div class="page">
    <p>Which similarity metric to use?</p>
    <p>Human evaluation  6 point scale, details in paper</p>
    <p>BLEU [Papineni et al., 2002]  Geometric mean of n-gram precision + length penalty</p>
    <p>METEOR [Banerjee and Lavie, 2005]  Word matching taking into account stemming, synonyms, paraphrases...</p>
    <p>chrF [Popovi, 2015]  Character n-gram F-score</p>
    <p>How would you rate the similarity between the meaning of these two sentences?</p>
    <p>unnatural 5. Meaning is essentially equal and the two sentences are</p>
    <p>well-formed [Language]</p>
  </div>
  <div class="page">
    <p>Experimental Setting</p>
  </div>
  <div class="page">
    <p>Data and Models</p>
    <p>Data  IWSLT 2016 dataset</p>
    <p>{Czech, German, French}  English</p>
    <p>Models  LSTM based model</p>
    <p>Transformer based model</p>
    <p>Both word and sub-word based models</p>
  </div>
  <div class="page">
    <p>Gradient Based Adversarial Attacks on Text  Idea: Back propagate through the model to score possible substitutions</p>
    <p>Le gros chien .</p>
  </div>
  <div class="page">
    <p>Gradient Based Adversarial Attacks on Text  Idea: Back propagate through the model to score possible substitutions</p>
    <p>Le</p>
    <p>Encoder</p>
    <p>gros chien .</p>
  </div>
  <div class="page">
    <p>Gradient Based Adversarial Attacks on Text  Idea: Back propagate through the model to score possible substitutions</p>
    <p>Decoder</p>
    <p>The big dog .</p>
    <p>The big dog . &lt;eos&gt;</p>
    <p>Le</p>
    <p>Encoder</p>
    <p>gros chien .</p>
  </div>
  <div class="page">
    <p>Gradient Based Adversarial Attacks on Text  Idea: Back propagate through the model to score possible substitutions</p>
    <p>Decoder</p>
    <p>The big dog .</p>
    <p>The big dog . &lt;eos&gt;</p>
    <p>Le</p>
    <p>Encoder</p>
    <p>gros chien .</p>
    <p>Adversarial loss</p>
  </div>
  <div class="page">
    <p>Gradient Based Adversarial Attacks on Text  Idea: Back propagate through the model to score possible substitutions</p>
    <p>Decoder</p>
    <p>The big dog .</p>
    <p>The big dog . &lt;eos&gt;</p>
    <p>Le</p>
    <p>Encoder</p>
    <p>gros chien .</p>
    <p>Adversarial loss</p>
  </div>
  <div class="page">
    <p>Gradient Based Adversarial Attacks on Text  Idea: Back propagate through the model to score possible substitutions</p>
    <p>Decoder</p>
    <p>The big dog .</p>
    <p>The big dog . &lt;eos&gt;</p>
    <p>Le</p>
    <p>Encoder</p>
    <p>gros chien .</p>
    <p>Adversarial loss</p>
    <p>, ...</p>
    <p>chat ...</p>
    <p>petit ...</p>
    <p>un ...</p>
  </div>
  <div class="page">
    <p>Constrained Adversarial Attacks</p>
  </div>
  <div class="page">
    <p>Constrained Adversarial Attacks: kNN</p>
    <p>Only replace words with 10 nearest neighbors in embedding space</p>
    <p>Example from our fren Transformer source embeddings</p>
    <p>grand (tall SING+MASC)  grands (tall PL+MASC)  grande (tall SING+FEM)  grandes (tall PL+FEM)  gros (fat SING+MASC)  grosse (fat SING+FEM)</p>
    <p>math (math)  maths (maths)  mathmatique (mathematic)  mathmatiques (mathematics)  objective (objective [ADJ] SING+FEM)</p>
  </div>
  <div class="page">
    <p>Constrained Adversarial Attacks: CharSwap</p>
    <p>Only swap word internal characters to get OOVs</p>
    <p>grand  grnad</p>
    <p>adversarial  advresarial</p>
    <p>[...]</p>
    <p>If thats impossible, repeat the last character</p>
    <p>he  heeeeeee</p>
    <p>Realistic typos</p>
  </div>
  <div class="page">
    <p>Constrained Adversarial Attacks</p>
  </div>
  <div class="page">
    <p>Choosing an Similarity Metric</p>
    <p>Human vs automatic (pearson r):  Humans score original/adversarial input  Humans score original/adversarial output  Compare scores to automatic metric with</p>
    <p>Pearson correlation</p>
  </div>
  <div class="page">
    <p>Choosing an Similarity Metric</p>
    <p>Human vs automatic (pearson r):  Humans score original/adversarial input  Humans score original/adversarial output  Compare scores to automatic metric with</p>
    <p>Pearson correlation</p>
  </div>
  <div class="page">
    <p>chrF better  = := chrF  := RDchrF</p>
    <p>(Relative Decrease in chrF)</p>
    <p>Choosing an Similarity Metric</p>
    <p>Human vs automatic (pearson r):  Humans score original/adversarial input  Humans score original/adversarial output  Compare scores to automatic metric with</p>
    <p>Pearson correlation</p>
  </div>
  <div class="page">
    <p>Effect of Constraints on Evaluation B</p>
    <p>et te</p>
    <p>r ta</p>
    <p>rg et</p>
    <p>d es</p>
    <p>tr uc</p>
    <p>tio n</p>
    <p>Better source preservation</p>
  </div>
  <div class="page">
    <p>Effect of Constraints on Adversarial Training</p>
  </div>
  <div class="page">
    <p>Effect of Constraints on Adversarial Training</p>
    <p>Adversarial training  training with adversarial examples</p>
    <p>= 0: Standard training   = 1 : Training only on adversarial examples</p>
    <p>Standard input</p>
    <p>Adversarial input</p>
  </div>
  <div class="page">
    <p>Effect of Constraints on Adversarial Training</p>
    <p>Adversarial training  training with adversarial examples</p>
    <p>= 0: Standard training   = 1 : Training only on adversarial examples</p>
    <p>Training with Unconstrained attacks vs CharSwap attacks  Evaluate on</p>
    <p>robustness to CharSwap attacks  Accuracy on non-adversarial data</p>
    <p>Standard input</p>
    <p>Adversarial input</p>
  </div>
  <div class="page">
    <p>Effect of Constraints on Adversarial Training: Adversarial Robustness  Robustness to CharSwap attacks on the validation set</p>
    <p>lower is better</p>
  </div>
  <div class="page">
    <p>Effect of Constraints on Adversarial Training: Adversarial Robustness  Robustness to CharSwap attacks on the validation set</p>
    <p>lower is better</p>
  </div>
  <div class="page">
    <p>Effect of Constraints on Adversarial Training: Adversarial Robustness  Robustness to CharSwap attacks on the validation set</p>
    <p>lower is better</p>
  </div>
  <div class="page">
    <p>Effect of Constraints on Adversarial Training: Adversarial Robustness  Robustness to CharSwap attacks on the validation set</p>
    <p>lower is better</p>
    <p>Adversarial training  better robustness</p>
  </div>
  <div class="page">
    <p>Target chrF on the original test set</p>
    <p>Effect of Constraints on Adversarial Training: Accuracy on Non-Adversarial Input</p>
    <p>Higher is better</p>
  </div>
  <div class="page">
    <p>Target chrF on the original test set</p>
    <p>Effect of Constraints on Adversarial Training: Accuracy on Non-Adversarial Input</p>
    <p>Higher is better</p>
  </div>
  <div class="page">
    <p>Target chrF on the original test set</p>
    <p>Effect of Constraints on Adversarial Training: Accuracy on Non-Adversarial Input</p>
    <p>Higher is better</p>
  </div>
  <div class="page">
    <p>Target chrF on the original test set</p>
    <p>Effect of Constraints on Adversarial Training: Accuracy on Non-Adversarial Input</p>
    <p>Higher is better</p>
    <p>Unconstrained attacks  hurts accuracy</p>
  </div>
  <div class="page">
    <p>Takeway</p>
    <p>When doing adversarial attacks  Evaluate meaning preservation on the source side</p>
    <p>How would you rate the similarity between the meaning of these two sentences?</p>
    <p>[Language]</p>
  </div>
  <div class="page">
    <p>Takeway</p>
    <p>When doing adversarial attacks  Evaluate meaning preservation on the source side</p>
    <p>How would you rate the similarity between the meaning of these two sentences?</p>
    <p>[Language]</p>
    <p>When doing adversarial training  Consider adding constraints to your attacks</p>
  </div>
  <div class="page">
    <p>Not only true for seq2seq!  Easily transposed to classification, etc..  Just adapt and accordingly</p>
    <p>Takeway</p>
    <p>When doing adversarial attacks  Evaluate meaning preservation on the source side</p>
    <p>How would you rate the similarity between the meaning of these two sentences?</p>
    <p>[Language]</p>
    <p>When doing adversarial training  Consider adding constraints to your attacks</p>
  </div>
  <div class="page">
    <p>TEAPOT</p>
    <p>Tool implementing our evaluation framework</p>
    <p>pip install teapot-nlp  github.com/pmichel31415/teapot-nlp</p>
  </div>
  <div class="page">
    <p>Questions</p>
  </div>
  <div class="page">
    <p>Gradient Based Adversarial Attacks on Text  Idea: Word substitution  Adding word vector difference</p>
    <p>Use the 1st order approximation to maximize the loss</p>
  </div>
  <div class="page">
    <p>Human Evaluation: the Gold Standard</p>
    <p>How would you rate the similarity between the meaning of these two sentences?</p>
    <p>unnatural 5. Meaning is essentially equal and the two sentences are</p>
    <p>well-formed [Language]</p>
    <p>Check for semantic similarity and fluency</p>
  </div>
  <div class="page">
    <p>Example of a Successful Attack</p>
    <p>(source chrF = 80.89, target RDchrF = 84.06)</p>
    <p>Original Ils le rinvestissent directement en engageant plus de procs.</p>
    <p>Adv. src. Ilss le rinvestissent dierctement en engagaent plus de procs.</p>
    <p>Ref. They plow it right back into filing more troll lawsuits.</p>
    <p>Base output They direct it directly by engaging more cases.</p>
    <p>Adv. output .. de plus.</p>
  </div>
  <div class="page">
    <p>Example of an Unsuccessful Attack</p>
    <p>(source chrF = 54.46, target RDchrF = 0.00)</p>
    <p>Original Ctait en Juillet 1969.</p>
    <p>Adv. src. Ctiat en Jiullet 1969.</p>
    <p>Ref. This is from July, 1969.</p>
    <p>Base output This was in July 1969.</p>
    <p>Adv. output This is. in 1969.</p>
  </div>
</Presentation>

<?xml version="1.0" ?>
<Presentation>
  <div class="page">
    <p>Frequency Configuration for LP-WANs in a Heartbeat</p>
    <p>Akshay Gadre1, Revathy Narayanan1,2, Anh Luong1, Anthony Rowe1, Bob Iannucci1, Swarun Kumar1</p>
    <p>Find out more about Chime at : https://www.witechlab.com/chime.html</p>
  </div>
  <div class="page">
    <p>Future City-Scale Internet-of-Things</p>
  </div>
  <div class="page">
    <p>Range 1-10 kms</p>
    <p>Battery Life 10 years on AA battery</p>
    <p>Bandwidth 125 KHz</p>
    <p>LoRaWAN Operates in 915 MHz ISM band</p>
    <p>Low-Power Wide-Area Networks</p>
    <p>(LP-WANs)</p>
  </div>
  <div class="page">
    <p>Battery Life of a LP-WAN client</p>
    <p>BATTERY USAGE</p>
    <p>TX Sleep RX Leakage</p>
    <p>Wireless Communication 97% of battery usage</p>
    <p>Battery Life 10 years on AA battery</p>
    <p>Significantly Lower Battery Life</p>
    <p>Urban Wireless Impairments</p>
  </div>
  <div class="page">
    <p>Saving power in LP-WANs</p>
    <p>Fading Interference Obstructions</p>
    <p>Frequency of Operation Datarate</p>
    <p>Received Signal Power</p>
    <p>Battery Consumption</p>
    <p>Client cannot control</p>
    <p>Client Config</p>
    <p>Transmit Time</p>
    <p>Higher Datarate</p>
    <p>Factors affecting the received signal power</p>
  </div>
  <div class="page">
    <p>Frequency Configuration</p>
  </div>
  <div class="page">
    <p>Frequency Configuration</p>
    <p>Too many frequency configurations to choose from</p>
    <p>Large variations in received signal power</p>
    <p>Frequency</p>
    <p>Rx SNR</p>
    <p>(in dB)</p>
  </div>
  <div class="page">
    <p>Campus-Scale Motivation Study</p>
    <p>median</p>
    <p>Top 3.6%</p>
    <p>Current state-of-the-art (pick a random freq)</p>
  </div>
  <div class="page">
    <p>Brute force approach for frequency configuration</p>
    <p>#</p>
    <p>Frequency</p>
    <p>Rx SNR</p>
    <p>(in dB)</p>
  </div>
  <div class="page">
    <p>Wireless channel quality changes every few minutes</p>
    <p>In fact, even interpolation-based methods are ineffective in estimating a good frequency.</p>
    <p>All that brute force effort rendered futile</p>
  </div>
  <div class="page">
    <p>Can low-power clients find a good frequency-of-operation, without sacrificing their battery life?</p>
  </div>
  <div class="page">
    <p>Chime  Frequency Configuration for LP-WANs in a Heartbeat</p>
    <p>First system which can estimate an optimal frequency using one packet</p>
    <p>Evaluated over a 0.329 sq.km. testbed at CMU campus in Pittsburgh.</p>
    <p>Achieved average 230% improvement in client battery life</p>
  </div>
  <div class="page">
    <p>What causes signal power to vary across frequencies?</p>
    <p>Frequency</p>
    <p>Rx SNR</p>
    <p>(in dB)</p>
    <p>RX signal power flat across frequencies RX signal power varies across frequencies</p>
    <p>Frequency</p>
    <p>Rx SNR</p>
    <p>(in dB)</p>
  </div>
  <div class="page">
    <p>Urban Multipath</p>
    <p>Time Time</p>
    <p>Constructive (In phase)</p>
    <p>Destructive (Out of phase)</p>
  </div>
  <div class="page">
    <p>Urban Multipath</p>
    <p>Phase of each path = 2 f</p>
    <p>Frequency</p>
    <p>Rx SNR</p>
    <p>(in dB)</p>
    <p>Constructive (In phase)</p>
    <p>Destructive (Out of phase)</p>
    <p>Estimate Rx SNR across frequencies</p>
    <p>Estimate the multipath</p>
    <p>Chimes approach</p>
    <p>Time-of-flight</p>
  </div>
  <div class="page">
    <p>Chime  Frequency Configuration for LP-WANs in a Heartbeat</p>
    <p>One Packet @ Freq ft</p>
    <p>Reverse Engineer Multipath</p>
    <p>Synchronized Phase Measurements</p>
    <p>Typical approach to identify multipath (R2F2)</p>
    <p>Reverse Engineer Multipath</p>
    <p>More general distributed settings</p>
    <p>Single antenna base stations</p>
  </div>
  <div class="page">
    <p>Client Base station</p>
    <p>Synchronized Phase Measurements</p>
    <p>Client phase offsets</p>
    <p>Base station phase offsets</p>
    <p>Base station</p>
    <p>Common across</p>
    <p>Base stations</p>
    <p>2  1 No client offsets</p>
  </div>
  <div class="page">
    <p>Client Base station</p>
    <p>Synchronized Phase Measurements</p>
    <p>Master Base station</p>
    <p>Need to measure phases of both at the same time and frequency!</p>
    <p>Each base station adds different offset</p>
    <p>Master base station removes base station offsets</p>
  </div>
  <div class="page">
    <p>Need to measure phases of both at the same time and frequency!</p>
    <p>COLLISION!</p>
    <p>Time</p>
    <p>LP-WAN packets long - Too much drift</p>
    <p>Long packets =&gt; More driftCOLLISION!</p>
    <p>Frequency</p>
    <p>Client Packet</p>
    <p>Master Base Station Packet</p>
  </div>
  <div class="page">
    <p>Need to measure both phases at the same time and frequency!</p>
    <p>Time</p>
    <p>Frequency</p>
    <p>Still different frequencies?</p>
    <p>Master Base station</p>
    <p>Packet</p>
    <p>Client Packet</p>
    <p>Offset Free Channel</p>
    <p>fknown</p>
    <p>Client Packet</p>
    <p>Master Base Station Packet</p>
    <p>No base station offsets</p>
  </div>
  <div class="page">
    <p>Chime  Frequency Configuration for LP-WANs in a Heartbeat</p>
    <p>Reverse Engineer Multipath</p>
    <p>Synchronized Phase MeasurementsOne Packet @ Freq ft</p>
  </div>
  <div class="page">
    <p>Reverse Engineer Complex Web of Multipath</p>
    <p>Base station 1</p>
    <p>Base station 2</p>
    <p>Not drawn to scale</p>
    <p>Virtual Sources</p>
    <p>Chime estimates the multipath by estimating these virtual sources</p>
    <p>Behavior of reflectors</p>
    <p>Where are the reflectors?</p>
  </div>
  <div class="page">
    <p>` Estimate the behavior of reflectors</p>
    <p>Base station 1</p>
    <p>Base station 2</p>
    <p>A</p>
    <p>B 1 = 1 + 1</p>
    <p>2 = 2 + 2</p>
    <p>Given the location of A and B, we can estimate</p>
  </div>
  <div class="page">
    <p>Base station 1</p>
    <p>Base station 2</p>
    <p>1 = 1 + 1 + 1 + 1</p>
    <p>2 = 2 + 2 +2 +2</p>
    <p>A</p>
    <p>B</p>
    <p>C D Too many variables, too few equations</p>
    <p>Estimate the behavior of reflectors</p>
  </div>
  <div class="page">
    <p>` Feasibility of multipath model</p>
    <p>Multipath model only works if # reflectors &lt; # base stations</p>
    <p>Base station</p>
  </div>
  <div class="page">
    <p>` Where are the reflectors?</p>
    <p>1 = 1 + 1 2 = 2 + 2</p>
    <p>Given the location of A and B, we can estimate</p>
    <p>For all virtual source locations A and B Calculate {1,1, 2, 2}</p>
    <p>Estimate  Check goodness-of-fit G(,) =</p>
    <p>=1 2</p>
    <p>End Choose A,B,= argmax</p>
    <p>A,B, (,)</p>
    <p>(More details in the paper)</p>
    <p>Locally convex</p>
    <p>Speed up using SGD</p>
  </div>
  <div class="page">
    <p>Chime  Frequency Configuration for LP-WANs in a Heartbeat</p>
    <p>Recombine at all target frequencies</p>
    <p>. . .f1 f2 fk</p>
    <p>Find best frequency</p>
    <p>Reverse Engineer Multipath</p>
    <p>One Packet @ Freq ft</p>
  </div>
  <div class="page">
    <p>Chime  Estimating optimal frequency of operation</p>
    <p>For each path,</p>
    <p>Channel of multiple paths</p>
    <p>Channel quality across frequencies</p>
    <p>Choosing optimal frequency-of-operation</p>
    <p>1  2</p>
    <p>2 = 2@1 + 2@2+ 2@3 +</p>
    <p>2 2 = 22</p>
    <p>What about interference and noise? Wideband base station can measure it to make an informed decision</p>
    <p>= argmax</p>
    <p>2</p>
    <p>interference + noise</p>
  </div>
  <div class="page">
    <p>Chime  Frequency Configuration for LP-WANs in a Heartbeat</p>
    <p>few seconds 0.0024% of battery capacity1 packet#</p>
    <p>Recombine at all target frequencies</p>
    <p>. . .f1 f2 fk</p>
    <p>Find best frequency</p>
    <p>Reverse Engineer Multipath</p>
    <p>One Packet @ Freq ft</p>
    <p>Advise optimum frequency of operation</p>
    <p>= argmax</p>
    <p>2</p>
    <p>interference + noise</p>
  </div>
  <div class="page">
    <p>Implementation and Evaluation</p>
    <p>USRP GPSDO Clock</p>
    <p>Base station</p>
    <p>Client device</p>
    <p>Semtech SX1276 LoRaWAN transceiver</p>
    <p>Evaluation Testbed</p>
    <p>Base stations</p>
    <p>Key facts SF 10 | 125 KHz BW</p>
    <p>Processing in the cloud 0.7 km</p>
  </div>
  <div class="page">
    <p>Variation in synchronized phase measurements</p>
    <p>Reverse Engineer Multipath</p>
    <p>Synchronized Phase Measurements</p>
  </div>
  <div class="page">
    <p>Battery Life Benefits</p>
    <p>=&gt; 230% increase in battery life*</p>
    <p>*Based on battery life model for transmit only clients from Charm</p>
  </div>
  <div class="page">
    <p>Coherent Combining</p>
    <p>LoRaWAN client</p>
    <p>Packet decoded collaboratively</p>
    <p>at the cloud</p>
    <p>Baseline = Charm gain over random frequency of operation vs. median frequency of operation</p>
    <p>Charm</p>
  </div>
  <div class="page">
    <p>Other Results</p>
    <p>Comparison with interpolation using multiple frequencies</p>
    <p>CDF of accuracy of predicted SINR</p>
    <p>Ability to identify frequency nulls</p>
    <p>More details in the paper</p>
  </div>
  <div class="page">
    <p>Related Work Synchronizing Base Stations Estimating multipath Frequency Configuration</p>
    <p>WiFi</p>
    <p>Cellular</p>
    <p>LP-WAN</p>
    <p>MegaMIMO</p>
    <p>ref client</p>
    <p>Argos</p>
    <p>Uses a reference antenna for MU-MIMO systems</p>
    <p>Chronos</p>
    <p>Frequency Hopping to estimate multipath</p>
    <p>R2F2</p>
    <p>Brute force approach</p>
    <p>Measures uplink channel using downlink channel (Uses massive antenna array)</p>
    <p>More drift over longer packets Narrow bandwidth Single antenna base stations</p>
  </div>
  <div class="page">
    <p>Limitations</p>
    <p>Mobility of clients</p>
    <p>Leverages sparsity of multipath in urban settings</p>
    <p>Does not model fleeting reflectors</p>
  </div>
  <div class="page">
    <p>Chime  Frequency Configuration for LP-WANs in a Heartbeat</p>
    <p>First system which can estimate an optimal frequency using one packet</p>
    <p>Evaluated over a 0.329 sq.km. testbed at CMU campus in Pittsburgh.</p>
    <p>Achieved average 230% increase in battery life</p>
    <p>https://www.witechlab.com/chime.html</p>
  </div>
</Presentation>

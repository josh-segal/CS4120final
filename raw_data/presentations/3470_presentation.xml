<?xml version="1.0" ?>
<Presentation>
  <div class="page">
    <p>On the Topologies Formed by Selfish Peers</p>
    <p>Thomas Moscibroda Stefan Schmid</p>
    <p>Roger Wattenhofer</p>
    <p>IPTPS 2006 Santa Barbara, California, USA</p>
  </div>
  <div class="page">
    <p>Stefan Schmid, ETH Zurich @ IPTPS 2006 2</p>
    <p>Motivation</p>
    <p>CPU Cycles</p>
    <p>Memory</p>
    <p>Bandwidth</p>
    <p>Power of Peer-to-Peer Computing =</p>
    <p>Accumulation of Resources of Individual Peers</p>
    <p>Collaboration is of peers is vital!</p>
    <p>However, many free riders in practice!</p>
  </div>
  <div class="page">
    <p>Stefan Schmid, ETH Zurich @ IPTPS 2006 3</p>
    <p>Motivation</p>
    <p>Free riding  Downloading without uploading</p>
    <p>Using storage of other peers without contributing own disk space</p>
    <p>Etc.</p>
    <p>In this talk: selfish neighbor selection in unstructured P2P systems</p>
    <p>Goals of selfish peer:</p>
    <p>(1) Maintain links only to a few neighbors (small out-degree)</p>
    <p>(2) Small latencies to all other peers in the system (fast lookups)</p>
    <p>What is the impact on the P2P topologies?</p>
  </div>
  <div class="page">
    <p>Stefan Schmid, ETH Zurich @ IPTPS 2006 4</p>
    <p>Talk Overview</p>
    <p>Problem statement</p>
    <p>Game-theoretic tools</p>
    <p>How good / bad are topologies formed by selfish peers?</p>
    <p>Stability of topologies formed by selfish peers</p>
    <p>Conclusion</p>
  </div>
  <div class="page">
    <p>Stefan Schmid, ETH Zurich @ IPTPS 2006 5</p>
    <p>Problem Statement (1)</p>
    <p>n peers {0, , n-1}</p>
    <p>distributed in a metric space  Metric space defines distances between peers  triangle inequality, etc.</p>
    <p>E.g., Euclidean plane</p>
    <p>Metric Space</p>
  </div>
  <div class="page">
    <p>Stefan Schmid, ETH Zurich @ IPTPS 2006 6</p>
    <p>Problem Statement (2)</p>
    <p>Each peer can choose  to which</p>
    <p>and how many</p>
    <p>other peers its connects</p>
    <p>i</p>
    <p>Yields a directed graph G</p>
  </div>
  <div class="page">
    <p>Stefan Schmid, ETH Zurich @ IPTPS 2006 7</p>
    <p>Problem Statement (3)</p>
    <p>Goal of a selfish peer:</p>
    <p>(1) Maintain a small number of neighbors only (out-degree)</p>
    <p>(2) Small stretches to all other peers in the system - Only little memory used</p>
    <p>- Small maintenance overhead Fast lookups!  Shortest distance using edges</p>
    <p>of peers in G</p>
    <p>divided by shortest direct</p>
    <p>distance</p>
  </div>
  <div class="page">
    <p>Stefan Schmid, ETH Zurich @ IPTPS 2006 8</p>
    <p>Cost of a peer:  Number of neighbors (out-degree) times a parameter</p>
    <p>plus stretches to all other peers</p>
    <p>captures the trade-off between link and stretch cost</p>
    <p>costi =  outdegi + i j stretchG(i, j)</p>
    <p>Problem Statement (4)</p>
    <p>Goal of a peer: Minimize its cost!</p>
  </div>
  <div class="page">
    <p>Stefan Schmid, ETH Zurich @ IPTPS 2006 9</p>
    <p>Talk Overview</p>
    <p>Problem statement</p>
    <p>Game-theoretic tools</p>
    <p>How good / bad are topologies formed by selfish peers?</p>
    <p>Stability of topologies formed by selfish peers</p>
    <p>Conclusion</p>
  </div>
  <div class="page">
    <p>Stefan Schmid, ETH Zurich @ IPTPS 2006 10</p>
    <p>Game-theoretic Tools (1)</p>
    <p>Social Cost  Sum of costs of all individual peers:</p>
    <p>Cost = i costi = i ( outdegi + i j stretchG(i, j))</p>
    <p>Social Optimum OPT  Topology with minimal social cost of a given problem instance  =&gt; topology formed by collaborating peers!</p>
    <p>What topologies do selfish peers form?</p>
    <p>=&gt; Concepts of Nash equilibrium and Price of Anarchy</p>
  </div>
  <div class="page">
    <p>Stefan Schmid, ETH Zurich @ IPTPS 2006 11</p>
    <p>Game-theoretic Tools (2)</p>
    <p>Nash equilibrium  Result of selfish behavior =&gt; topology formed by selfish peers  Topology in which no peer can reduce its costs by changing its neighbor</p>
    <p>set  In the following, let NASH be social cost of worst equilibrium</p>
    <p>Price of Anarchy  Captures the impact of selfish behavior by comparison with optimal solution</p>
    <p>Formally: social costs of worst Nash equilibrium divided by optimal social cost</p>
    <p>PoA = maxI {NASH(I) / OPT(I)}</p>
  </div>
  <div class="page">
    <p>Stefan Schmid, ETH Zurich @ IPTPS 2006 12</p>
    <p>Talk Overview</p>
    <p>Problem statement</p>
    <p>Game-theoretic tools</p>
    <p>How good / bad are topologies formed by selfish peers?</p>
    <p>Stability of topologies formed by selfish peers</p>
    <p>Conclusion</p>
  </div>
  <div class="page">
    <p>Stefan Schmid, ETH Zurich @ IPTPS 2006 13</p>
    <p>Analysis: Social Optimum</p>
    <p>For connectivity, at least n links are necessary  =&gt; OPT   n</p>
    <p>Each peer has at least stretch 1 to all other peers  =&gt; OPT  n  (n-1)  1 = (n2)</p>
    <p>Theorem: Optimal social costs are at least</p>
    <p>OPT 2  n + n2)</p>
  </div>
  <div class="page">
    <p>Stefan Schmid, ETH Zurich @ IPTPS 2006 14</p>
    <p>Analysis: Social Cost of Nash Equilibria</p>
    <p>In any Nash equilibrium, no stretch exceeds +1  Otherwise, its worth connecting to the corresponding peer  Holds for any metric space!</p>
    <p>A peer can connect to at most n-1 other peers</p>
    <p>Thus: costi   O(n) + (  O(n)</p>
    <p>=&gt; social cost Cost 2 O( n2)</p>
    <p>Theorem:</p>
    <p>In any metric space, NASH 2  n2)</p>
  </div>
  <div class="page">
    <p>Stefan Schmid, ETH Zurich @ IPTPS 2006 15</p>
    <p>Analysis: Price of Anarchy (Upper Bound)</p>
    <p>Since OPT = ( n + n2) ...</p>
    <p>and since NASH = O( n2 ),</p>
    <p>we have the following upper bound for the price of anarchy:</p>
    <p>Theorem:</p>
    <p>In any metric space, PoA 2 (min{, n}).</p>
  </div>
  <div class="page">
    <p>Stefan Schmid, ETH Zurich @ IPTPS 2006 16</p>
    <p>Analysis: Price of Anarchy (Lower Bound) (1)</p>
    <p>Price of anarchy is tight, i.e., it also holds that</p>
    <p>Theorem: The price of anarchy is</p>
    <p>PoA 2 min{ ,n})</p>
    <p>This is already true in a 1-dimensional Euclidean space:</p>
    <p>1 2 3 4 5 i-1 i i+1 n</p>
    <p>2 3  4  i-2 i-1 i  n-1</p>
    <p>Peer:</p>
    <p>Position:</p>
  </div>
  <div class="page">
    <p>Stefan Schmid, ETH Zurich @ IPTPS 2006 17</p>
    <p>Price of Anarchy: Lower Bound (2)</p>
    <p>1 2 3 4 5 i-1 i i+1 n</p>
    <p>2 3  4  i-2 i-1 i  n-1</p>
    <p>Peer:</p>
    <p>Position:</p>
    <p>To prove:</p>
    <p>(1) is a selfish topology = instance forms a Nash equilibrium</p>
    <p>(2) has large costs compared to OPT</p>
    <p>= the social cost of this instance is ( n2)</p>
    <p>Note: Social optimum is at most O( n + n2):</p>
  </div>
  <div class="page">
    <p>Stefan Schmid, ETH Zurich @ IPTPS 2006 18</p>
    <p>Price of Anarchy: Lower Bound (3)</p>
    <p>Proof Sketch: Nash?  Even peers:</p>
    <p>For connectivity, at least one link to a peer on the left is needed</p>
    <p>With this link, all peers on the left can be reached with an optimal stretch 1</p>
    <p>No link to the right can reduce the stretch costs to other peers by more than</p>
    <p>Odd peers:  For connectivity, at least one link to a peer on the left is needed</p>
    <p>With this link, all peers on the left can be reached with an optimal stretch 1</p>
    <p>Moreover, it can be shown that all alternative or additional links to the right entail larger costs</p>
    <p>2 3  4</p>
    <p>5</p>
  </div>
  <div class="page">
    <p>Stefan Schmid, ETH Zurich @ IPTPS 2006 19</p>
    <p>Price of Anarchy: Lower Bound (4)</p>
    <p>Idea why social cost are ( n2): (n2) stretches of size ()</p>
    <p>The stretches from all odd peers i to a even peers j&gt;i have stretch &gt; /2</p>
    <p>2 3  4</p>
    <p>And also the stretches between even peer i and even peer j&gt;i are &gt; /2</p>
  </div>
  <div class="page">
    <p>Stefan Schmid, ETH Zurich @ IPTPS 2006 20</p>
    <p>Price of Anarchy</p>
    <p>PoA can grow linearly in the total number of peers</p>
    <p>Theorem: The price of anarchy is</p>
    <p>PoA 2 min{ ,n})</p>
    <p>PoA can grow linearly in the relative importance of degree costs</p>
  </div>
  <div class="page">
    <p>Stefan Schmid, ETH Zurich @ IPTPS 2006 21</p>
    <p>Talk Overview</p>
    <p>Problem statement</p>
    <p>Game-theoretic tools</p>
    <p>How good / bad are topologies formed by selfish peers?</p>
    <p>Stability of topologies formed by selfish peers</p>
    <p>Conclusion</p>
  </div>
  <div class="page">
    <p>Stefan Schmid, ETH Zurich @ IPTPS 2006 22</p>
    <p>Stability (1)</p>
    <p>Peers change their neighbors to improve their individual costs.</p>
    <p>Theorem:</p>
    <p>Even in the absence of churn, peer mobility or other sources of dynamism, the system may never stabilize (i.e., P2P system never reaches a Nash equilibrium)!</p>
    <p>How long thus it take until no peer has an incentive to change its neighbors anymore?</p>
  </div>
  <div class="page">
    <p>Stefan Schmid, ETH Zurich @ IPTPS 2006 23</p>
    <p>Stability (2)</p>
    <p>Example for =0.6</p>
    <p>Euclidean plane:</p>
    <p>1 2</p>
    <p>a</p>
    <p>b c</p>
    <p>arbitrary small number</p>
  </div>
  <div class="page">
    <p>Stefan Schmid, ETH Zurich @ IPTPS 2006 24</p>
    <p>Stability (3)</p>
    <p>1 2</p>
    <p>a</p>
    <p>b c</p>
    <p>Example sequence:</p>
    <p>Again initial situation</p>
    <p>=&gt; Changes repeat forever!</p>
    <p>Generally, it can be shown that there is no set of links for</p>
    <p>this instance where no peer has an incentive to change.</p>
  </div>
  <div class="page">
    <p>Stefan Schmid, ETH Zurich @ IPTPS 2006 25</p>
    <p>Stability (4)</p>
    <p>So far: no Nash equilibrium for =0.6</p>
    <p>1</p>
    <p>But example can be extended for  of all magnitudes: - Replace single peers by group of k=n/5 very close peers on a line - No pure Nash equilibrium for =0.6k</p>
    <p>2</p>
    <p>cb</p>
    <p>a</p>
    <p>k</p>
  </div>
  <div class="page">
    <p>Stefan Schmid, ETH Zurich @ IPTPS 2006 26</p>
    <p>Talk Overview</p>
    <p>Problem statement</p>
    <p>Game-theoretic tools</p>
    <p>How good / bad are topologies formed by selfish peers?</p>
    <p>Stability of topologies formed by selfish peers</p>
    <p>Conclusion</p>
  </div>
  <div class="page">
    <p>Stefan Schmid, ETH Zurich @ IPTPS 2006 27</p>
    <p>Conclusion</p>
    <p>Unstructured topologies created by selfish peers</p>
    <p>Efficiency of topology deteriorates linearly in the relative importance of links compared to stretch costs, and in the number of peers</p>
    <p>Instable even in static environments</p>
    <p>Future Work:</p>
    <p>- Complexity of stability? NP-hard!</p>
    <p>- Routing or congestion aspects?</p>
    <p>- Other forms of selfish behavior?</p>
    <p>- More local view of peers?</p>
    <p>- Mechanism design?</p>
  </div>
  <div class="page">
    <p>Stefan Schmid, ETH Zurich @ IPTPS 2006 28</p>
    <p>Questions?</p>
    <p>Thank you for your attention!</p>
    <p>Acknowledgments:</p>
    <p>Uri Nadav from Tel Aviv University, Israel</p>
    <p>Yvonne Anne Oswald from ETH, Switzerland</p>
  </div>
</Presentation>

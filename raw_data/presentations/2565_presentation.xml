<?xml version="1.0" ?>
<Presentation>
  <div class="page">
    <p>Operational Experiences with Disk Imaging in a Multi-Tenant Datacenter</p>
    <p>Kevin Atkinson, Gary Wong, and Robert Ricci</p>
  </div>
  <div class="page">
    <p>!2</p>
  </div>
  <div class="page">
    <p>!2</p>
  </div>
  <div class="page">
    <p>!2</p>
  </div>
  <div class="page">
    <p>!2</p>
  </div>
  <div class="page">
    <p>!2</p>
  </div>
  <div class="page">
    <p>!2</p>
  </div>
  <div class="page">
    <p>!2</p>
  </div>
  <div class="page">
    <p>!3</p>
    <p>Properties of disk images and their usage have consequences for: !</p>
    <p>Storage  Caching  Pre-loading  Distribution</p>
  </div>
  <div class="page">
    <p>!4</p>
  </div>
  <div class="page">
    <p>!4</p>
    <p>What does the working set look like?</p>
  </div>
  <div class="page">
    <p>!4</p>
    <p>What does the working set look like?</p>
    <p>What do the images themselves look like?</p>
  </div>
  <div class="page">
    <p>!4</p>
    <p>What does the working set look like?</p>
    <p>What do the images themselves look like?</p>
    <p>What are the key factors in pre-loading?</p>
  </div>
  <div class="page">
    <p>The dataset</p>
    <p>Four years (2009-2013): 279,972 requests  Users: 1,301 individuals, 368 organizations  Unique images: 714  Emulab</p>
    <p>~600 PCs</p>
    <p>Facility / user image model</p>
    <p>!5</p>
  </div>
  <div class="page">
    <p>User Behavior</p>
  </div>
  <div class="page">
    <p>Emulab is a pretty odd beast and its users are even</p>
    <p>weirder.</p>
    <p>!7</p>
  </div>
  <div class="page">
    <p>Reviewer D</p>
    <p>Emulab is a pretty odd beast and its users are even</p>
    <p>weirder.</p>
    <p>!7</p>
  </div>
  <div class="page">
    <p>Reviewer D [Emulab user]</p>
    <p>Emulab is a pretty odd beast and its users are even</p>
    <p>weirder.</p>
    <p>!7</p>
  </div>
  <div class="page">
    <p>Facility vs. user images</p>
    <p>!8</p>
    <p>Facility User 55.6% 44.4%</p>
  </div>
  <div class="page">
    <p>Facility vs. user images</p>
    <p>!8</p>
    <p>Facility User 55.6% 44.4%</p>
  </div>
  <div class="page">
    <p>Facility vs. user images</p>
    <p>!8</p>
    <p>Facility User 55.6% 44.4%</p>
  </div>
  <div class="page">
    <p>Image popularity</p>
    <p>!9</p>
  </div>
  <div class="page">
    <p>Image popularity</p>
    <p>!9</p>
  </div>
  <div class="page">
    <p>Image popularity</p>
    <p>!9</p>
  </div>
  <div class="page">
    <p>Image popularity</p>
    <p>!9</p>
  </div>
  <div class="page">
    <p>Image popularity</p>
    <p>!9</p>
    <p>Exponential</p>
  </div>
  <div class="page">
    <p>Image popularity</p>
    <p>!9</p>
    <p>Exponential Heavy-Tailed</p>
  </div>
  <div class="page">
    <p>Image popularity</p>
    <p>!9</p>
    <p>Exponential Heavy-Tailed</p>
  </div>
  <div class="page">
    <p>Scaling: total images</p>
    <p>!10</p>
  </div>
  <div class="page">
    <p>Scaling: total images</p>
    <p>!10</p>
  </div>
  <div class="page">
    <p>Scaling: total images</p>
    <p>!10</p>
  </div>
  <div class="page">
    <p>Scaling: total images</p>
    <p>!10</p>
    <p>As userbase grows, user images dominate the totals</p>
  </div>
  <div class="page">
    <p>Daily working set</p>
    <p>!11</p>
  </div>
  <div class="page">
    <p>Daily working set</p>
    <p>!11</p>
    <p>Small image set each day  good caching potential</p>
  </div>
  <div class="page">
    <p>Scaling: working set</p>
    <p>!12</p>
  </div>
  <div class="page">
    <p>Scaling: working set</p>
    <p>!12</p>
  </div>
  <div class="page">
    <p>Scaling: working set</p>
    <p>!12</p>
  </div>
  <div class="page">
    <p>Scaling: working set</p>
    <p>!12</p>
    <p>Facility will max out</p>
  </div>
  <div class="page">
    <p>Scaling: working set</p>
    <p>!12</p>
    <p>Facility will max out</p>
    <p>In the limit, highly popular facility images account for most requests</p>
  </div>
  <div class="page">
    <p>Image Contents</p>
  </div>
  <div class="page">
    <p>Block-level similarity</p>
    <p>!14</p>
    <p>Base</p>
  </div>
  <div class="page">
    <p>Block-level similarity</p>
    <p>!14</p>
    <p>Base</p>
    <p>Derived</p>
  </div>
  <div class="page">
    <p>Block-level similarity</p>
    <p>!14</p>
    <p>Base</p>
    <p>Derived</p>
  </div>
  <div class="page">
    <p>Block-level similarity</p>
    <p>!14</p>
    <p>Percentage of blocks that need to be written to transform the base image into derived</p>
    <p>Base</p>
    <p>Derived</p>
  </div>
  <div class="page">
    <p>Block-level similarity</p>
    <p>!15</p>
    <p>Derived: User image Base: Most similar facility image</p>
  </div>
  <div class="page">
    <p>Block-level similarity</p>
    <p>!15</p>
    <p>Derived: User image Base: Most similar facility image</p>
  </div>
  <div class="page">
    <p>Block-level similarity</p>
    <p>!15</p>
    <p>Derived: User image Base: Most similar facility image</p>
  </div>
  <div class="page">
    <p>Pre-Loading</p>
  </div>
  <div class="page">
    <p>Pre-loading: Size</p>
    <p>!17</p>
  </div>
  <div class="page">
    <p>Pre-loading: Size</p>
    <p>!17</p>
    <p>Spare Capacity</p>
  </div>
  <div class="page">
    <p>Pre-loading: Size</p>
    <p>!17</p>
    <p>Spare Capacity</p>
    <p>Mostly Full</p>
  </div>
  <div class="page">
    <p>Pre-loading: Size</p>
    <p>!17</p>
    <p>Spare Capacity</p>
    <p>Mostly Full</p>
    <p>WSS for facility images maxes out on large facilities</p>
  </div>
  <div class="page">
    <p>Pre-loading: Size</p>
    <p>!17</p>
    <p>Spare Capacity</p>
    <p>Mostly Full</p>
    <p>WSS for facility images maxes out on large facilities</p>
  </div>
  <div class="page">
    <p>Pre-loading: Rate</p>
    <p>!18</p>
  </div>
  <div class="page">
    <p>Pre-loading: Rate</p>
    <p>!18</p>
  </div>
  <div class="page">
    <p>Pre-loading: Rate</p>
    <p>!18</p>
    <p>Invest in fast, scalable imaging</p>
  </div>
  <div class="page">
    <p>Conclusions</p>
  </div>
  <div class="page">
    <p>General conclusions  Deduplicating, two-tier storage attractive</p>
    <p>Caching can be effective</p>
    <p>Image lifespan, idle periods  Treat facility and user images differently</p>
    <p>Facility better targets for pre-loading  Differential loading requires new strategies</p>
    <p>Potential savings, outline of optimization problem  Images per organization, WSS per week</p>
    <p>!20</p>
  </div>
  <div class="page">
    <p>!21</p>
    <p>Explore the data, reproduce our results: !</p>
    <p>http://aptlab.net/p/tbres/nsdi14</p>
  </div>
  <div class="page">
    <p>No dominant images</p>
    <p>!22</p>
  </div>
  <div class="page">
    <p>No dominant images</p>
    <p>!22</p>
    <p>No image dominates long-term, popular images change frequently</p>
  </div>
  <div class="page">
    <p>Image lifespan</p>
    <p>!23</p>
  </div>
  <div class="page">
    <p>Image lifespan</p>
    <p>!23</p>
    <p>A few days</p>
  </div>
  <div class="page">
    <p>Image lifespan</p>
    <p>!23</p>
    <p>A few days</p>
    <p>Four Years</p>
  </div>
  <div class="page">
    <p>Image lifespan</p>
    <p>!23</p>
    <p>A few days</p>
    <p>Four Years</p>
    <p>Two-tiered storage system attractive</p>
  </div>
  <div class="page">
    <p>Savings from deltas</p>
    <p>!24</p>
  </div>
  <div class="page">
    <p>Images per organization</p>
    <p>!25</p>
  </div>
  <div class="page">
    <p>Idle images</p>
    <p>!26</p>
  </div>
  <div class="page">
    <p>WSS per week</p>
    <p>!27</p>
  </div>
  <div class="page">
    <p>Top images</p>
    <p>!28</p>
    <p>RHL90-STD [D] 21,993 7.9%</p>
    <p>FEDORA10-STD 18,042 6.4%</p>
    <p>UBUNTU10-STD 14,402 5.1%</p>
    <p>RHL90-STD 13,182 4.7%</p>
    <p>FC4-UPDATE 12,097 4.3% u 715/10 11,156 4.0%</p>
    <p>FBSD410-STD 8,916 3.2%</p>
    <p>FEDORA8-STD 8,153 2.9% u 237/69 7,512 2.7% u 296/35 7,179 2.6% u 787/24 6,243 2.2%</p>
    <p>UBUNTU70-STD 6,021 2.2%</p>
    <p>UBUNTU12-64-STD 5,834 2.1%</p>
  </div>
  <div class="page">
    <p>Size considerations</p>
    <p>Small facilities with few idle disks</p>
    <p>Pre-loading not valuable  Large facilities - focus on:</p>
    <p>Scalable reloading mechanisms</p>
    <p>Prediction and optimization for user requests</p>
    <p>!29</p>
  </div>
</Presentation>

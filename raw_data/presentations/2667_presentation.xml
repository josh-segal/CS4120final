<?xml version="1.0" ?>
<Presentation>
  <div class="page">
    <p>XFabric: a Reconfigurable In-Rack Network for Rack-Scale Computers</p>
    <p>Sergey Legtchenko, Nicholas Chen, Daniel Cletheroe, Antony Rowstron, Hugh Williams, Xiaohan Zhao</p>
  </div>
  <div class="page">
    <p>Increasing Performance per $ in Data Centers</p>
    <p>Hardware designed for data centers</p>
    <p>Racks as units of deployment &amp; operation Google Jupiter</p>
    <p>(data center fabric) Pelican</p>
    <p>Cold Storage</p>
    <p>SoC CPU NIC/Packet switch</p>
    <p>d ports</p>
    <p>Controllers: IO, memory...  Systems on Chip (SoCs)</p>
    <p>Rack scale computer</p>
    <p>e.g. Boston Viridis  Server = Calxeda SoC  900 (wimpy) CPUs</p>
    <p>80 servers  160 CPUs</p>
    <p>Open CloudServer (OCS) rackStandard rack  40 servers  80 CPUs</p>
    <p>In-rack consolidation$$$/server $/server</p>
  </div>
  <div class="page">
    <p>In-rack Networks for Rack-Scale Computers</p>
    <p>Challenge: reducing in-rack network cost</p>
    <p>Full bisection bandwidth: 9 Tbps  Cost: $$$$$</p>
    <p>900 ports</p>
    <p>Multi-tiered?  High power draw/cost  &gt;900 ports</p>
    <p>ToR switch?</p>
    <p>Direct connect topology (e.g. mesh)  SoCs with packet switches</p>
    <p>Low cost  Oversubscribed</p>
    <p>d ports/SoC</p>
    <p>Rack scale computer</p>
    <p>e.g. Boston Viridis  Server = Calxeda SoC  900 (wimpy) CPUs</p>
  </div>
  <div class="page">
    <p>Oversubscription in Direct-Connect Topologies</p>
    <p>SoC A</p>
    <p>CPU Packet switch</p>
    <p>SoC C</p>
    <p>CPU Packet switch</p>
    <p>SoC B</p>
    <p>CPU Packet switch</p>
    <p>SoC D</p>
    <p>CPU Packet switch</p>
    <p>Multi-hop routing  Path length impacts performance  Higher, less predictable latency  Lower goodput</p>
    <p>A-&gt;D</p>
    <p>Example: 3D Torus with 512 SoCs  Average hop count = 6  6x oversubscription</p>
    <p>Path length is low if the topology is adapted to traffic</p>
  </div>
  <div class="page">
    <p>XFabric: a Reconfigurable Topology</p>
    <p>SoC A</p>
    <p>CPU Packet switch</p>
    <p>SoC C</p>
    <p>CPU Packet switch</p>
    <p>SoC B</p>
    <p>CPU Packet switch</p>
    <p>SoC D</p>
    <p>CPU Packet switch</p>
    <p>Rack</p>
    <p>Adapting topology to traffic  Lower path length  Reduced oversubscription</p>
  </div>
  <div class="page">
    <p>XFabric: a Reconfigurable Topology</p>
    <p>SoC A</p>
    <p>CPU Packet switch</p>
    <p>SoC C</p>
    <p>CPU Packet switch</p>
    <p>SoC B</p>
    <p>CPU Packet switch</p>
    <p>SoC D</p>
    <p>CPU Packet switch</p>
    <p>Rack</p>
    <p>Adapting topology to traffic  Lower path length  Reduced oversubscription</p>
    <p>Circuit switched fabric  Electrical signal forwarding  No queuing, no packet inspection</p>
    <p>Physical circuit</p>
  </div>
  <div class="page">
    <p>XFabric: a Reconfigurable Topology</p>
    <p>SoC A</p>
    <p>CPU Packet switch</p>
    <p>SoC C</p>
    <p>CPU Packet switch</p>
    <p>SoC B</p>
    <p>CPU Packet switch</p>
    <p>SoC D</p>
    <p>CPU Packet switch</p>
    <p>Rack</p>
    <p>Adapting topology to traffic  Lower path length  Reduced oversubscription</p>
    <p>Circuit switched fabric  Electrical signal forwarding  No queuing, no packet inspection</p>
    <p>A-&gt;D</p>
  </div>
  <div class="page">
    <p>XFabric: a Reconfigurable Topology</p>
    <p>SoC A</p>
    <p>CPU Packet switch</p>
    <p>SoC C</p>
    <p>CPU Packet switch</p>
    <p>SoC B</p>
    <p>CPU Packet switch</p>
    <p>SoC D</p>
    <p>CPU Packet switch</p>
    <p>Rack</p>
    <p>Adapting topology to traffic  Lower path length  Reduced oversubscription</p>
    <p>Circuit switched fabric  Electrical signal forwarding  No queuing, no packet inspection</p>
    <p>A-&gt;D</p>
  </div>
  <div class="page">
    <p>XFabric Architecture</p>
    <p>SoC A</p>
    <p>CPU Packet switch</p>
    <p>SoC C</p>
    <p>CPU Packet switch</p>
    <p>SoC B</p>
    <p>CPU Packet switch</p>
    <p>SoC D</p>
    <p>CPU Packet switch</p>
    <p>Rack</p>
    <p>Uplinks</p>
    <p>Controller (process on one SoC in the rack)</p>
    <p>Generate topology Minimize path length</p>
    <p>Configure data plane  Assign circuits  Update SoC routing</p>
    <p>Estimate demand</p>
    <p>Control plane</p>
    <p>Periodic topology reconfiguration  Dynamic uplink placement</p>
    <p>Data center aggregation switch</p>
  </div>
  <div class="page">
    <p>Circuit-Switching Fabric Cost</p>
    <p>SoC A</p>
    <p>CPU Packet switch</p>
    <p>SoC C</p>
    <p>CPU Packet switch</p>
    <p>SoC B</p>
    <p>CPU Packet switch</p>
    <p>SoC D</p>
    <p>CPU Packet switch</p>
    <p>Rack</p>
    <p>Challenge: high port count  Too high port count for one ASIC</p>
    <p>Commodity ASICs  160 ports @ 10 Gbps  Max size: ~350 ports</p>
    <p>Cost : $3/port</p>
    <p>e.g. 300 SoCs, 6 ports/SoC: 1,800 ports</p>
  </div>
  <div class="page">
    <p>Circuit-Switching Fabric Cost</p>
    <p>SoC A</p>
    <p>CPU Packet switch</p>
    <p>SoC C</p>
    <p>CPU Packet switch</p>
    <p>SoC B</p>
    <p>CPU Packet switch</p>
    <p>SoC D</p>
    <p>CPU Packet switch</p>
    <p>Rack</p>
    <p>Challenge: high port count  Too high port count for one ASIC  Folded Clos total cost: $27K</p>
    <p>Commodity ASICs  160 ports @ 10 Gbps  Max size: ~350 ports</p>
    <p>Cost : $3/port</p>
    <p>e.g. 300 SoCs, 6 ports/SoC: 1,800 ports</p>
    <p>x30 300 port ASICs</p>
  </div>
  <div class="page">
    <p>Reducing Circuit-Switching Fabric Cost</p>
    <p>SoC A</p>
    <p>CPU Packet switch</p>
    <p>SoC C</p>
    <p>CPU Packet switch</p>
    <p>SoC B</p>
    <p>CPU Packet switch</p>
    <p>SoC D</p>
    <p>CPU Packet switch</p>
    <p>Rack</p>
    <p>Trading off reconfigurability for cost  Full reconfigurability:  Any 2 ports can be connected</p>
  </div>
  <div class="page">
    <p>Reducing Circuit-Switching Fabric Cost</p>
    <p>SoC A</p>
    <p>CPU Packet switch</p>
    <p>SoC C</p>
    <p>CPU Packet switch</p>
    <p>SoC B</p>
    <p>CPU Packet switch</p>
    <p>SoC D</p>
    <p>CPU Packet switch</p>
    <p>Rack</p>
    <p>Trading off reconfigurability for cost  Full reconfigurability:  Any 2 ports can be connected</p>
    <p>Partial reconfigurability:  Port can connected to subset of ports</p>
  </div>
  <div class="page">
    <p>Reducing Circuit-Switching Fabric Cost</p>
    <p>SoC A</p>
    <p>CPU Packet switch</p>
    <p>SoC C</p>
    <p>CPU Packet switch</p>
    <p>SoC B</p>
    <p>CPU Packet switch</p>
    <p>SoC D</p>
    <p>CPU Packet switch</p>
    <p>Rack</p>
    <p>Connected to port 0 on all SoCs</p>
    <p>Connected to port N on all SoCs</p>
    <p>Trading off reconfigurability for cost  Full reconfigurability:  Any 2 ports can be connected</p>
    <p>Partial reconfigurability:  Port can connected to subset of ports</p>
  </div>
  <div class="page">
    <p>Reducing Circuit-Switching Fabric Cost</p>
    <p>SoC A</p>
    <p>CPU Packet switch</p>
    <p>SoC C</p>
    <p>CPU Packet switch</p>
    <p>SoC B</p>
    <p>CPU Packet switch</p>
    <p>SoC D</p>
    <p>CPU Packet switch</p>
    <p>Rack</p>
    <p>Trading off reconfigurability for cost  Full reconfigurability:  Any 2 ports can be connected</p>
    <p>Partial reconfigurability:  Port can connected to subset of ports</p>
    <p>x5 Lower cost compared to full reconfigurability: $5.4K</p>
    <p>x6 300-port ASICs</p>
  </div>
  <div class="page">
    <p>XFabric Performance at Rack Scale</p>
    <p>Flow-based simulation, 343 SoCs, 6 ports/SoC</p>
  </div>
  <div class="page">
    <p>XFabric Performance at Rack Scale</p>
    <p>Flow-based simulation, 343 SoCs, 6 ports/SoC  Varying traffic skew</p>
    <p>Skew (cluster size)</p>
    <p>Pa th</p>
    <p>le ng</p>
    <p>th (#</p>
    <p>ho ps</p>
    <p>)</p>
    <p>Skewed</p>
    <p>Uniform</p>
    <p>(7x7x7)</p>
  </div>
  <div class="page">
    <p>XFabric Performance at Rack Scale</p>
    <p>Flow-based simulation, 343 SoCs, 6 ports/SoC  Varying traffic skew  Production cluster workload</p>
    <p>Traffic matrix from TCP flow trace</p>
    <p>Production 0 1 2 3 4 5 6</p>
    <p>Skew (cluster size)</p>
    <p>Pa th</p>
    <p>le ng</p>
    <p>th (#</p>
    <p>ho ps</p>
    <p>) Lower is better</p>
    <p>Pa th</p>
    <p>le ng</p>
    <p>th (#</p>
    <p>ho ps</p>
    <p>)</p>
    <p>Skewed</p>
    <p>Uniform</p>
    <p>(7x7x7)</p>
    <p>(7x7x7)</p>
  </div>
  <div class="page">
    <p>XFabric Prototype Performance</p>
    <p>XFabric prototype  SoC emulated by server</p>
    <p>Gen2: 160 ports @ 10Gbps</p>
    <p>Server</p>
    <p>Software Packet Switch</p>
    <p>Filter driver</p>
    <p>Application</p>
    <p>Gen1: 32 ports @ 1Gbps</p>
    <p>27 servers  Unmodified TCP/IP applications  6 circuit switches, custom PCB design</p>
  </div>
  <div class="page">
    <p>XFabric Prototype Performance</p>
    <p>XFabric prototype  SoC emulated by server  27 servers  Unmodified TCP/IP applications  6 circuit switches, custom PCB design</p>
    <p>Gen1: 32 ports @ 1Gbps Gen2: 160 ports @ 10Gbps</p>
    <p>Server</p>
    <p>Software Packet Switch</p>
    <p>Filter driver</p>
    <p>Application</p>
    <p>XFabric23% improvement</p>
    <p>Co m</p>
    <p>pl eti</p>
    <p>on ti</p>
    <p>m e</p>
    <p>(n or</p>
    <p>m al</p>
    <p>iz ed</p>
    <p>t o</p>
    <p>ru s)</p>
    <p>Reconfiguration period (sec)</p>
  </div>
  <div class="page">
    <p>Conclusion</p>
    <p>Rack-Scale Computers  Higher performance per $  Up to hundreds of SoCs/rack</p>
    <p>XFabric: in-rack network with reconfigurable topology  Dynamic adaptation to traffic demand  Low cost</p>
    <p>Deploying new circuit switch hardware  Electrical circuit switching, 160 ports @ 10Gbps</p>
  </div>
</Presentation>

<?xml version="1.0" ?>
<Presentation>
  <div class="page">
    <p>Traffic Shaping to Optimize Ad Delivery</p>
    <p>Deepayan Chakrabarti Erik Vee</p>
  </div>
  <div class="page">
    <p>Traffic Shaping</p>
    <p>Which article summary should</p>
    <p>be picked?</p>
    <p>Ans: The one with highest expected CTR</p>
    <p>Which ad should be displayed?</p>
    <p>Ans: The ad that minimizes underdelivery</p>
    <p>Article pool</p>
  </div>
  <div class="page">
    <p>Underdelivery</p>
    <p>Advertisers are guaranteed some impressions (say, 1M) over some time (say, 2 months)  only to users matching their specs  only when they visit certain types of pages  only on certain positions on the page</p>
    <p>An underdelivering ad is one that is likely to miss its guarantee</p>
  </div>
  <div class="page">
    <p>Traffic Shaping</p>
    <p>Which article summary should</p>
    <p>be picked?</p>
    <p>Ans: The one with highest expected CTR</p>
    <p>Which ad should be displayed?</p>
    <p>Ans: The ad that minimizes underdelivery</p>
    <p>Goal: Combine the two</p>
  </div>
  <div class="page">
    <p>Traffic Shaping</p>
    <p>Goal: Bias the article summary selection to  reduce under-delivery  but insignificant drop in CTR  AND do this in real-time</p>
  </div>
  <div class="page">
    <p>Outline</p>
    <p>Formulation as an optimization problem  Real-time solution  Empirical results</p>
  </div>
  <div class="page">
    <p>Formulation</p>
    <p>j:(ads)</p>
    <p>:(user, article, position) Fully Qualified Impression</p>
    <p>i:(user, article)</p>
    <p>k:(user)</p>
    <p>j</p>
    <p>i</p>
    <p>k</p>
    <p>Goal: Infer traffic shaping fractions wki</p>
    <p>Supply sk</p>
    <p>CT R</p>
    <p>c ki</p>
    <p>T ra</p>
    <p>ffi c</p>
    <p>sh ap</p>
    <p>in g</p>
    <p>fra cti</p>
    <p>on w k</p>
    <p>i</p>
    <p>Demand dj</p>
    <p>Ad delivery fraction</p>
    <p>j</p>
  </div>
  <div class="page">
    <p>Formulation</p>
    <p>Full traffic shaping graph:  All forecasted user traffic X</p>
    <p>all available articles  arriving at the homepage,  or directly on article page</p>
    <p>Goal: Infer wki  But forced to infer j as</p>
    <p>well Full Traffic Shaping Graph</p>
    <p>A</p>
    <p>B</p>
    <p>C</p>
    <p>Tr aff</p>
    <p>ic</p>
    <p>sh ap</p>
    <p>ing</p>
    <p>fra cti</p>
    <p>on w ki</p>
    <p>Ad delivery fraction</p>
    <p>j</p>
    <p>CT R</p>
    <p>c ki</p>
  </div>
  <div class="page">
    <p>Outline</p>
    <p>Formulation as an optimization problem  Real-time solution  Empirical results</p>
  </div>
  <div class="page">
    <p>Formulation  Reformulation: {wki, j} zj</p>
    <p>Convex program  can be solved optimally</p>
  </div>
  <div class="page">
    <p>Formulation</p>
    <p>But we have another problem  At runtime, we must shape every incoming user</p>
    <p>without looking at the entire graph</p>
    <p>Solution:  Periodically solve the convex problem offline  Store a cache derived from this solution  Reconstruct the optimal solution for each user at</p>
    <p>runtime, using only the cache</p>
  </div>
  <div class="page">
    <p>Real-time solution</p>
    <p>Cache these</p>
    <p>Reconstruct using these</p>
    <p>All constraints can be expressed as constraints on</p>
  </div>
  <div class="page">
    <p>Results</p>
    <p>Data:  Historical traffic logs from April, 2011  25K user nodes</p>
    <p>Total supply weight &gt; 50B impressions  100K ads</p>
  </div>
  <div class="page">
    <p>Lift in impressions</p>
    <p>L ift</p>
    <p>in im</p>
    <p>p re</p>
    <p>ss io</p>
    <p>n s</p>
    <p>d e</p>
    <p>liv e</p>
    <p>re d</p>
    <p>t o</p>
    <p>u</p>
    <p>n d</p>
    <p>e rp</p>
    <p>e rf</p>
    <p>o rm</p>
    <p>in g</p>
    <p>a d</p>
    <p>s</p>
    <p>Fraction of traffic that is not shaped</p>
    <p>Nearly threefold improvement via</p>
    <p>traffic shaping</p>
  </div>
  <div class="page">
    <p>Average CTR</p>
    <p>A ve</p>
    <p>ra g</p>
    <p>e C</p>
    <p>T R</p>
    <p>( a</p>
    <p>s p</p>
    <p>e rc</p>
    <p>e n</p>
    <p>ta g</p>
    <p>e</p>
    <p>o f</p>
    <p>m a</p>
    <p>xi m</p>
    <p>u m</p>
    <p>C T</p>
    <p>R )</p>
    <p>Fraction of traffic that is not shaped</p>
    <p>CTR drop &lt; 10%</p>
  </div>
  <div class="page">
    <p>Summary</p>
    <p>3x underdelivery reduction with &lt;10% CTR drop  2.6x reduction with 4% CTR drop  Runtime application needs only a small cache</p>
  </div>
</Presentation>

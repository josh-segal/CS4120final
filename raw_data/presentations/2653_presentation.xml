<?xml version="1.0" ?>
<Presentation>
  <div class="page">
    <p>Bitcoin-NG A Scalable Blockchain Protocol</p>
    <p>NSDI, Santa Clara, CA, March 2016</p>
    <p>Computer Science, Cornell University Initiative for Cryptocurrencies and Contracts</p>
    <p>Ittay Eyal</p>
    <p>Adem Efe Gencer</p>
    <p>Emin Gn Sirer</p>
    <p>Robbert Van Renesse</p>
    <p>IC3</p>
  </div>
  <div class="page">
    <p>Hardware</p>
    <p>Security</p>
    <p>Payment Services</p>
    <p>Exchanges</p>
    <p>Cryptocurrency</p>
  </div>
  <div class="page">
    <p>The Blockchain Promise</p>
    <p>Bank-to-bank settlements  Cheap remittance  Device-to-device payments (IoT)</p>
  </div>
  <div class="page">
    <p>The Blockchain Promise</p>
    <p>Bank-to-bank settlements  Cheap remittance  Device-to-device payments (IoT)</p>
    <p>Requires a bigger and faster boat</p>
  </div>
  <div class="page">
    <p>Bitcoin-NG: A Scalable Blockchain Protocol  A replicated state machine (Monte-Carlo)  Extreme-churn robustness  High performance</p>
    <p>(10x throughput, fraction of latency)</p>
    <p>Evaluation  Novel performance metrics  Experiments with unmodified nodes</p>
    <p>Low latency  High throughput</p>
  </div>
  <div class="page">
    <p>Blockchain: A Replicated State Machine</p>
    <p>1  1</p>
    <p>Log</p>
    <p>A B</p>
    <p>1  2 1  1</p>
    <p>C</p>
  </div>
  <div class="page">
    <p>The Blockchain</p>
    <p>Log</p>
    <p>block</p>
    <p>header</p>
  </div>
  <div class="page">
    <p>The Blockchain</p>
    <p>Log</p>
    <p>block</p>
    <p>header</p>
  </div>
  <div class="page">
    <p>The Blockchain</p>
    <p>Log</p>
    <p>hash( ) &lt; target*</p>
    <p>* target: a deterministic function of previous blocks</p>
  </div>
  <div class="page">
    <p>The Blockchain</p>
  </div>
  <div class="page">
    <p>The Blockchain</p>
  </div>
  <div class="page">
    <p>The Blockchain</p>
    <p>Exponential, with constant mean interval</p>
  </div>
  <div class="page">
    <p>Incentive for Mining</p>
    <p>Internal Prize:  Minting  Fees</p>
    <p>Wins proportional to computation power</p>
  </div>
  <div class="page">
    <p>Forks</p>
    <p>Natural in a distributed system</p>
  </div>
  <div class="page">
    <p>Fork Resolution</p>
    <p>Longest chain wins  Transactions are reverted  Double-spending a threat</p>
  </div>
  <div class="page">
    <p>Fork Resolution</p>
    <p>A transaction is confirmed when it is buried deep enough</p>
  </div>
  <div class="page">
    <p>Security-Performance Tradeoff Nakamotos Blockchain exhibits a tradeoff: [Sompolinsky+15, Lewenberg+15]</p>
    <p>Security Performance</p>
  </div>
  <div class="page">
    <p>Metrics</p>
    <p>Bandwidth</p>
    <p>Latency  Consensus delay</p>
    <p>Security  Mining power utilization  Fairness</p>
  </div>
  <div class="page">
    <p>Mining Power Utilization</p>
    <p>( + )</p>
    <p>==&gt; vulnerability to rollback</p>
  </div>
  <div class="page">
    <p>Fairness Known Miner Sizes</p>
    <p>[blockchain.info, April 2015]</p>
    <p>Presence:</p>
    <p>= 80%</p>
    <p>= 60%</p>
    <p>Fairness: Actual presenceFair presence = 60% 80%</p>
    <p>= 3/4</p>
    <p>==&gt; tendency towards centralization</p>
  </div>
  <div class="page">
    <p>Block Frequency Experiments</p>
    <p>==&gt; More forks ==&gt; worse security</p>
    <p>Increasing block frequency  Static bandwidth</p>
  </div>
  <div class="page">
    <p>Block Size Experiments</p>
    <p>Static block frequency  Increasing block size</p>
    <p>==&gt; More forks ==&gt; worse security</p>
  </div>
  <div class="page">
    <p>Replicated state machine performance is typically bounded by single node performance</p>
    <p>Can this be achieved for the blockchain model?</p>
    <p>An Inherent Tradeoff?</p>
    <p>Security Performance</p>
  </div>
  <div class="page">
    <p>Nakamoto Blocks</p>
  </div>
  <div class="page">
    <p>Nakamoto Blocks</p>
  </div>
  <div class="page">
    <p>Nakamoto Blocks</p>
  </div>
  <div class="page">
    <p>Nakamoto Blocks</p>
    <p>epoch</p>
    <p>Serialization</p>
  </div>
  <div class="page">
    <p>Nakamoto Blocks</p>
    <p>epoch</p>
  </div>
  <div class="page">
    <p>Nakamoto Blocks</p>
    <p>epoch</p>
  </div>
  <div class="page">
    <p>Bitcoin-NG</p>
    <p>epoch</p>
    <p>Le ad</p>
    <p>er e</p>
    <p>le ct</p>
    <p>io n</p>
  </div>
  <div class="page">
    <p>Bitcoin-NG</p>
    <p>Key blocks:  No content  Leader election</p>
    <p>Microblocks:  Only content  No contention</p>
  </div>
  <div class="page">
    <p>Bitcoin-NG</p>
    <p>PoW  public</p>
    <p>key K</p>
    <p>signed with k</p>
  </div>
  <div class="page">
    <p>Bitcoin-NG long exponential intervals (10 min)</p>
    <p>short deterministic intervals (10 sec)</p>
  </div>
  <div class="page">
    <p>Bitcoin-NG Incentives Next miner: Include previous microblocks Leader: Place transactions in microblocks</p>
    <p>Counting microblocks for chain selection breaks security (Selfish Mining)</p>
  </div>
  <div class="page">
    <p>Bitcoin-NG Incentives</p>
    <p>fees</p>
    <p>Next miner: Include previous microblocks Leader: Place transactions in microblocks</p>
    <p>Chain selection rule  Heaviest chain  Microblocks carry no weight</p>
    <p>Fee distribution (exact bounds and analysis in paper)</p>
  </div>
  <div class="page">
    <p>Test Bed sudo ip link add vlo04 type veth peer name vlo04b sudo ip link add vlo05 type veth peer name vlo05b sudo ip link add vlo06 type veth peer name vlo06b sudo ip link add vlo07 type veth peer name vlo07b # Assign one side of each virtual ethernet link to a namespace: sudo ip link set vlo01b netns node-020-01 sudo ip link set vlo02b netns node-020-02 sudo ip link set vlo03b netns node-020-03 sudo ip link set vlo04b netns node-020-04 sudo ip link set vlo05b netns node-020-05 sudo ip link set vlo06b netns node-020-06 sudo ip link set vlo07b netns node-020-07 # Bring links up: (10.2.1.100+i at namespaces; 10.2.1.0+i here): sudo ifconfig vlo01 10.2.1.1/24 up sudo ifconfig vlo02 10.2.2.1/24 up sudo ifconfig vlo03 10.2.3.1/24 up sudo ifconfig vlo04 10.2.4.1/24 up sudo ifconfig vlo05 10.2.5.1/24 up sudo ifconfig vlo06 10.2.6.1/24 up sudo ifconfig vlo07 10.2.7.1/24 up sudo ip netns exec node-020-01 ifconfig vlo01b 10.2.1.100/24 up sudo ip netns exec node-020-02 ifconfig vlo02b 10.2.2.100/24 up</p>
    <p># Node node- 020-04 : sudo iptables -A FORWARD -i eth e -- DETALER,DEHSILBATSE,WEN etats-TPECCA j sudo iptables -t nat -A PREROUTING -p tcp -d DETALER,DEHSILBA - TAND j--ot 10.2.4.100:20040 sudo iptables -A FORWARD -i eth e -- DETALER,DEHSILBATSE,WEN etats-TPECCA j sudo iptables -t nat -A PREROUTING -p tcp -d DETALER,DEHSILBA - TAND j--ot 10.2.4.100:20041 # Node node- 020-05 : sudo iptables -A FORWARD -i eth e -- DETALER,DEHSILBATSE,WEN etats-TPECCA j sudo iptables -t nat -A PREROUTING -p tcp -d DETALER,DEHSILBA - TAND j--ot 10.2.5.100:20050 sudo iptables -A FORWARD -i eth e -- DETALER,DEHSILBATSE,WEN etats-TPECCA j sudo iptables -t nat -A PREROUTING -p tcp -d DETALER,DEHSILBA - TAND j--ot 10.2.5.100:20051 # Node node- 020-06 : sudo iptables -A FORWARD -i eth e -- DETALER,DEHSILBATSE,WEN etats-TPECCA j sudo iptables -t nat -A PREROUTING -p tcp -d DETALER,DEHSILBA - TAND j--ot 10 2 6 100:20060</p>
    <p>~1000 standard clients (no virtualization) Implemented based on the Bitcoin-Core client</p>
    <p>Infrastructure: 150 machines x 7 cores 1Gb network</p>
  </div>
  <div class="page">
    <p>Test Bed sudo ip link add vlo04 type veth peer name vlo04b sudo ip link add vlo05 type veth peer name vlo05b sudo ip link add vlo06 type veth peer name vlo06b sudo ip link add vlo07 type veth peer name vlo07b # Assign one side of each virtual ethernet link to a namespace: sudo ip link set vlo01b netns node-020-01 sudo ip link set vlo02b netns node-020-02 sudo ip link set vlo03b netns node-020-03 sudo ip link set vlo04b netns node-020-04 sudo ip link set vlo05b netns node-020-05 sudo ip link set vlo06b netns node-020-06 sudo ip link set vlo07b netns node-020-07 # Bring links up: (10.2.1.100+i at namespaces; 10.2.1.0+i here): sudo ifconfig vlo01 10.2.1.1/24 up sudo ifconfig vlo02 10.2.2.1/24 up sudo ifconfig vlo03 10.2.3.1/24 up sudo ifconfig vlo04 10.2.4.1/24 up sudo ifconfig vlo05 10.2.5.1/24 up sudo ifconfig vlo06 10.2.6.1/24 up sudo ifconfig vlo07 10.2.7.1/24 up sudo ip netns exec node-020-01 ifconfig vlo01b 10.2.1.100/24 up sudo ip netns exec node-020-02 ifconfig vlo02b 10.2.2.100/24 up</p>
    <p># Node node- 020-04 : sudo iptables -A FORWARD -i eth e -- DETALER,DEHSILBATSE,WEN etats-TPECCA j sudo iptables -t nat -A PREROUTING -p tcp -d DETALER,DEHSILBA - TAND j--ot 10.2.4.100:20040 sudo iptables -A FORWARD -i eth e -- DETALER,DEHSILBATSE,WEN etats-TPECCA j sudo iptables -t nat -A PREROUTING -p tcp -d DETALER,DEHSILBA - TAND j--ot 10.2.4.100:20041 # Node node- 020-05 : sudo iptables -A FORWARD -i eth e -- DETALER,DEHSILBATSE,WEN etats-TPECCA j sudo iptables -t nat -A PREROUTING -p tcp -d DETALER,DEHSILBA - TAND j--ot 10.2.5.100:20050 sudo iptables -A FORWARD -i eth e -- DETALER,DEHSILBATSE,WEN etats-TPECCA j sudo iptables -t nat -A PREROUTING -p tcp -d DETALER,DEHSILBA - TAND j--ot 10.2.5.100:20051 # Node node- 020-06 : sudo iptables -A FORWARD -i eth e -- DETALER,DEHSILBATSE,WEN etats-TPECCA j sudo iptables -t nat -A PREROUTING -p tcp -d DETALER,DEHSILBA - TAND j--ot 10 2 6 100:20060</p>
    <p>Network emulation:</p>
    <p>Latency and BW: Based on our measurements [Croman+15]</p>
    <p>Implementation: Virtual network interfaces and kernel rate limiting</p>
    <p>Validation: Block propagation matches known trends [Decker&amp;Wattenhofer13]</p>
  </div>
  <div class="page">
    <p>Test Bed sudo ip link add vlo04 type veth peer name vlo04b sudo ip link add vlo05 type veth peer name vlo05b sudo ip link add vlo06 type veth peer name vlo06b sudo ip link add vlo07 type veth peer name vlo07b # Assign one side of each virtual ethernet link to a namespace: sudo ip link set vlo01b netns node-020-01 sudo ip link set vlo02b netns node-020-02 sudo ip link set vlo03b netns node-020-03 sudo ip link set vlo04b netns node-020-04 sudo ip link set vlo05b netns node-020-05 sudo ip link set vlo06b netns node-020-06 sudo ip link set vlo07b netns node-020-07 # Bring links up: (10.2.1.100+i at namespaces; 10.2.1.0+i here): sudo ifconfig vlo01 10.2.1.1/24 up sudo ifconfig vlo02 10.2.2.1/24 up sudo ifconfig vlo03 10.2.3.1/24 up sudo ifconfig vlo04 10.2.4.1/24 up sudo ifconfig vlo05 10.2.5.1/24 up sudo ifconfig vlo06 10.2.6.1/24 up sudo ifconfig vlo07 10.2.7.1/24 up sudo ip netns exec node-020-01 ifconfig vlo01b 10.2.1.100/24 up sudo ip netns exec node-020-02 ifconfig vlo02b 10.2.2.100/24 up</p>
    <p># Node node- 020-04 : sudo iptables -A FORWARD -i eth e -- DETALER,DEHSILBATSE,WEN etats-TPECCA j sudo iptables -t nat -A PREROUTING -p tcp -d DETALER,DEHSILBA - TAND j--ot 10.2.4.100:20040 sudo iptables -A FORWARD -i eth e -- DETALER,DEHSILBATSE,WEN etats-TPECCA j sudo iptables -t nat -A PREROUTING -p tcp -d DETALER,DEHSILBA - TAND j--ot 10.2.4.100:20041 # Node node- 020-05 : sudo iptables -A FORWARD -i eth e -- DETALER,DEHSILBATSE,WEN etats-TPECCA j sudo iptables -t nat -A PREROUTING -p tcp -d DETALER,DEHSILBA - TAND j--ot 10.2.5.100:20050 sudo iptables -A FORWARD -i eth e -- DETALER,DEHSILBATSE,WEN etats-TPECCA j sudo iptables -t nat -A PREROUTING -p tcp -d DETALER,DEHSILBA - TAND j--ot 10.2.5.100:20051 # Node node- 020-06 : sudo iptables -A FORWARD -i eth e -- DETALER,DEHSILBATSE,WEN etats-TPECCA j sudo iptables -t nat -A PREROUTING -p tcp -d DETALER,DEHSILBA - TAND j--ot 10 2 6 100:20060</p>
    <p>Mining power distribution: Based on one-year statistics of operational Bitcoin system</p>
    <p>Ra tio</p>
    <p>o f</p>
    <p>M in</p>
    <p>in g</p>
    <p>Po w</p>
    <p>er</p>
    <p>Temporal Miner Index (Descending power)</p>
  </div>
  <div class="page">
    <p>Block Frequency</p>
    <p>Block frequency [1/sec]</p>
    <p>Consensus Delay</p>
    <p>Bitcoin</p>
    <p>Bitcoin-NG</p>
    <p>go od</p>
  </div>
  <div class="page">
    <p>Block Frequency</p>
    <p>Block frequency [1/sec]</p>
    <p>Fairness</p>
    <p>Bitcoin</p>
    <p>Bitcoin-NG</p>
    <p>go od</p>
  </div>
  <div class="page">
    <p>Block Frequency</p>
    <p>Block frequency [1/sec]</p>
    <p>Mining Power Utilization Bitcoin</p>
    <p>Bitcoin-NG</p>
    <p>go od</p>
  </div>
  <div class="page">
    <p>Block Size</p>
    <p>Fairness</p>
    <p>Bitcoin</p>
    <p>Bitcoin-NG</p>
    <p>go od</p>
    <p>Block size [byte]</p>
  </div>
  <div class="page">
    <p>Block Size</p>
    <p>Mining Power utilization</p>
    <p>Bitcoin</p>
    <p>Bitcoin-NG</p>
    <p>go od</p>
    <p>Block size [byte]</p>
  </div>
  <div class="page">
    <p>Related Work The Block Size Debate Bitcoin-NG solves an inherent protocol shortcoming.</p>
    <p>GHOST protocol, inclusive blockchains Partial solutions. Perhaps could be used in concert with NG</p>
    <p>Centralized solutions of the BFT consensus family Bitcoin-NG maintains Bitcoins weak model</p>
    <p>Byzcoin, Hybrid Consensus Uses Bitcoin-NGs technique with epoch-length quorums to improve security and latency even further.</p>
  </div>
  <div class="page">
    <p>Summary</p>
    <p>sudo ip link add vlo04 type veth peer name vlo04b sudo ip link add vlo05 type veth peer name vlo05b sudo ip link add vlo06 type veth peer name vlo06b sudo ip link add vlo07 type veth peer name vlo07b sudo ifconfig vlo05 10.2.5.1/24 up sudo ifconfig vlo06 10.2.6.1/24 up sudo ifconfig vlo07 10.2.7.1/24 up sudo ip netns exec node-020-01 ifconfig vlo01b 10.2.1.100/24 up sudo ip netns exec node-020-02 ifconfig vlo02b 10.2.2.100/24 up</p>
    <p># Node node- 020-04 : sudo iptables -A FORWARD -i eth 0-olv o04-p</p>
    <p>Bitcoin-NG</p>
    <p>High bandwidth  Low latency  Secure</p>
    <p>Ittay Eyal, Adem Efe Gencer, Emin Gn Sirer, and Robbert Van Renesse. Bitcoin-NG, A Scalable Blockchain Protocol.</p>
  </div>
  <div class="page">
    <p>Security Concern</p>
    <p>Unlike Nakamotos chain, Bitcoin-NGs leader is a sitting duck</p>
    <p>Only the leaders key is static. Microblock generation can be distributed</p>
  </div>
  <div class="page">
    <p>Microblock Guarantees  With Nakamotos Blockchain:</p>
    <p>fork by risking block prize  With Bitcoin-NG:</p>
    <p>Free forking?</p>
  </div>
  <div class="page">
    <p>Microblock Guarantees</p>
    <p>Poison transaction cancels cheater reward  Poisoner receives nominal prize</p>
    <p>With Nakamotos Blockchain: fork by risking block prize</p>
    <p>With Bitcoin-NG: Free forking? No.</p>
  </div>
  <div class="page">
    <p>Incentive Compatibility</p>
    <p>? ?</p>
  </div>
  <div class="page">
    <p>Broken Chain Selection Rule Next miner: Include previous microblocks</p>
    <p>Microblocks carry small weight? Leader: Place transactions in micro blocks</p>
    <p>Leader gets fees?</p>
    <p>? ?</p>
  </div>
  <div class="page">
    <p>Broken Chain Selection Rule</p>
    <p>Create secret chain:</p>
    <p>Always beat majority:</p>
    <p>Next miner: Include previous microblocks Microblocks carry small weight?</p>
    <p>Leader: Place transactions in microblocks Leader gets fees?</p>
  </div>
  <div class="page">
    <p>Block Size</p>
    <p>Block size [byte]</p>
    <p>Consensus Delay</p>
    <p>Bitcoin Bitcoin-NG</p>
    <p>go od</p>
  </div>
</Presentation>

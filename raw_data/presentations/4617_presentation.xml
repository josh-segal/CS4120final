<?xml version="1.0" ?>
<Presentation>
  <div class="page">
    <p>2006 Hewlett-Packard Development Company, L.P. The information contained herein is subject to change without notice</p>
    <p>JouleSort: A Balanced Energy-Efficiency Benchmark</p>
    <p>Suzanne Rivoire (Stanford), Mehul Shah (HP Labs),</p>
    <p>ParthaRanganathan (HP Labs), Christos Kozyrakis (Stanford)</p>
  </div>
  <div class="page">
    <p>Energy Use is Important (1 of 2)</p>
    <p>From data centers to mobile devices</p>
    <p>Data center: power and cooling</p>
    <p>World wide cost of purchasing and operating servers</p>
    <p>$29 billion</p>
    <p>&quot;If performance per watt remains constant  power costs could easily overtake hardware costs &quot;</p>
    <p>[Barroso,12/05] (Google)</p>
  </div>
  <div class="page">
    <p>Energy Use is Important (2 of 2)</p>
    <p>Data center: power and cooling</p>
    <p>Implications on reliability, density, and scalability</p>
    <p>Pollution  4M tons CO2 [C. Patel et al., 2006]</p>
    <p>Load on utilities</p>
    <p>Desktops: electricity costs</p>
    <p>Mobile devices: battery life affects usability</p>
  </div>
  <div class="page">
    <p>Inspire energy-efficiency improvements</p>
    <p>Current efforts  E.g., MIPS/Watt, SPECint/Watt, SWaP,</p>
    <p>E.g., Ongoing activity in Green Grid, EPA, SPEC Power,</p>
    <p>But often   Focused on specific component</p>
    <p>Under-specified or under construction</p>
    <p>Application specific: realistic but complex</p>
    <p>No simple holistic benchmark</p>
    <p>Benchmarks</p>
  </div>
  <div class="page">
    <p>JouleSort: Simple and Holistic</p>
    <p>Primarily meant for system designers</p>
    <p>Simple: easy to setup and experiment</p>
    <p>Evaluate disruptive technology, gain insights</p>
    <p>Technology bellwether: anticipate trends</p>
    <p>Measure whole-system energy-efficiency</p>
    <p>Workload, metric, and guidelines</p>
    <p>Based on external sort</p>
  </div>
  <div class="page">
    <p>Our Contributions</p>
    <p>I: JouleSort: Holistic energy-efficiency benchmark</p>
    <p>Design: workload, metrics, guidelines</p>
    <p>Rationale and pitfalls</p>
    <p>II: Energy-efficient system design: 2007 winner</p>
    <p>3.5X better than previous estimated best</p>
    <p>Insights on future designs</p>
  </div>
  <div class="page">
    <p>Why External Sort? (1 of 2)</p>
    <p>Simple, balanced workload</p>
    <p>Exercises all core components</p>
    <p>CPU, memory, disk, I/O, OS, filesystem</p>
    <p>Applies to systems small and large</p>
    <p>PDAs, Laptops, Desktop, Supercomputers</p>
    <p>Representative of sequential I/O tasks</p>
    <p>Data warehousing, Business analytics, etc.</p>
  </div>
  <div class="page">
    <p>Why External Sort? (2 of 2)</p>
    <p>Hard to cheat</p>
    <p>Measure system while doing useful work</p>
    <p>Technology trend bellwether</p>
    <p>E.g. supercomputers to clusters, GPU?</p>
    <p>Holistic measure of improvement</p>
  </div>
  <div class="page">
    <p>Existing Sort Benchmarks</p>
    <p>Pure performance</p>
    <p>MinuteSort: How much can you sort in 1 min ?</p>
    <p>TeraByte: How fast can you sort 1 TB ?</p>
    <p>Cost efficient</p>
    <p>PennySort: How much can you sort for 1 penny ?</p>
    <p>Performance-Price: Maximum SRecs/$ in 1 min ?</p>
  </div>
  <div class="page">
    <p>Our ^ JouleSort Proposal</p>
    <p>Workload</p>
    <p>Sort 100-byte records with 10-byte keys</p>
    <p>From file on non-volatile store to file on non-volatile store</p>
    <p>Metric?</p>
    <p>Energy (Joules) = Power (Watts)* Time (secs)</p>
    <p>Fixed time budget (like MinuteSort, Price-Perf Sort)  1 minute budget</p>
    <p>Measure records sorted and Joules</p>
    <p>Winner: max SortedRecs/Joule?</p>
    <p>Initial</p>
  </div>
  <div class="page">
    <p>Records Sorted</p>
    <p>S R e c s /J .</p>
    <p>Records Sorted</p>
    <p>Problem with Fixed Time Budget</p>
    <p>Biased toward systems that sort fewer records</p>
    <p>Better efficiency with 1-pass sort and sleep</p>
    <p>System not doing useful work</p>
    <p>&lt; 10 sec Energy not linear</p>
    <p>function of N</p>
    <p>S o rt</p>
    <p>e d R</p>
    <p>e c s /J</p>
    <p>o u le</p>
  </div>
  <div class="page">
    <p>Our ^ JouleSort Proposal</p>
    <p>Fixed input size (like TeraByte)</p>
    <p>Three classes: 10GB, 100GB, 1TB</p>
    <p>Winner: minimum energy</p>
    <p>Report SortedRecs/Joule (like MPG for cars)</p>
    <p>Inter-class comparisons imperfect</p>
    <p>Adjust classes as technology improves</p>
    <p>Categories</p>
    <p>Daytona street-car: sold and supported</p>
    <p>Indy no-holds-barred</p>
    <p>Revised</p>
  </div>
  <div class="page">
    <p>Energy Measurement</p>
    <p>Power</p>
    <p>Power Meter</p>
    <p>System Measured</p>
    <p>Monitoring System</p>
    <p>Wall AC-Power</p>
    <p>Power readings</p>
    <p>(serial cable) Sort timing (network)</p>
  </div>
  <div class="page">
    <p>Energy Measurement</p>
    <p>Power</p>
    <p>Power Meter</p>
    <p>System Measured</p>
    <p>Monitoring System</p>
    <p>Wall AC-Power</p>
    <p>Power readings</p>
    <p>(serial cable) Sort timing (network)</p>
    <p>Measure energy of all components</p>
    <p>No unaccounted potential energy</p>
    <p>Cooling devices attached to system</p>
    <p>20-25 C at inlet or within 1 foot of device</p>
  </div>
  <div class="page">
    <p>Energy Measurement</p>
    <p>Power</p>
    <p>Power Meter</p>
    <p>System Measured</p>
    <p>Monitoring System</p>
    <p>Wall AC-Power</p>
    <p>Power readings</p>
    <p>(serial cable) Sort timing (network)</p>
    <p>Measure true power from wall</p>
    <p>Applies to AC and DC</p>
    <p>Report power-factor</p>
    <p>Leverage SPEC-Power/EPA specifications</p>
  </div>
  <div class="page">
    <p>Energy Measurement</p>
    <p>Power</p>
    <p>Power Meter</p>
    <p>System Measured</p>
    <p>Monitoring System</p>
    <p>Wall AC-Power</p>
    <p>Power readings</p>
    <p>(serial cable) Sort timing (network)</p>
    <p>Take at least 3 consecutive readings</p>
    <p>Report average</p>
  </div>
  <div class="page">
    <p>Road Map</p>
    <p>I: JouleSort: Holistic energy-efficiency benchmark</p>
    <p>Design: workload, metrics, guidelines</p>
    <p>Rationale and pitfalls</p>
    <p>II: Energy-efficient system design: 2007 winner</p>
    <p>3.5X better than previous estimated best</p>
    <p>Insights on future designs</p>
  </div>
  <div class="page">
    <p>SortedRecs/Joule vs. Time</p>
    <p>Year</p>
    <p>Pennysort Daytona</p>
    <p>Pennysort Indy</p>
    <p>MinuteSort Daytona</p>
    <p>MinuteSort Indy</p>
    <p>Terabyte Daytona</p>
    <p>Terabyte Indy</p>
    <p>Datamation</p>
    <p>Historical Analysis (Estimate) S o rt e d R e c s /J o u le</p>
  </div>
  <div class="page">
    <p>SortedRecs/Joule vs. Time</p>
    <p>Year</p>
    <p>Pennysort Daytona</p>
    <p>Pennysort Indy</p>
    <p>MinuteSort Daytona</p>
    <p>MinuteSort Indy</p>
    <p>Terabyte Daytona</p>
    <p>Terabyte Indy</p>
    <p>Datamation</p>
    <p>Historical Analysis (Estimate)</p>
    <p>Cost-Efficient Sorts: 24% / yr</p>
    <p>Perf-Oriented Sorts: 12% / yr</p>
    <p>S o rt e d R e c s /J o u le</p>
    <p>Target: GPUTeraSort</p>
    <p>~3200 SortedRecs/Joule</p>
  </div>
  <div class="page">
    <p>A Look at Existing Systems</p>
    <p>Power (Watt)</p>
    <p>~320059GBn/a9GPUTeraSort (estimated)</p>
    <p>~340010GB1%1Modern Laptop</p>
    <p>~380010GB90%+12Sort-balanced Fileserver</p>
    <p>~120010GB26%2Low-end server DL360G3</p>
    <p>CPU %</p>
    <p>~3005GB1Low-power Blade</p>
    <p>SortedRecs per Joule</p>
    <p>Input Size</p>
    <p># Disks</p>
  </div>
  <div class="page">
    <p>A Look at Existing Systems</p>
    <p>Power (Watt)</p>
    <p>~320059GBn/a9GPUTeraSort (estimated)</p>
    <p>~340010GB1%1Modern Laptop</p>
    <p>~380010GB90%+12Sort-balanced Fileserver</p>
    <p>~120010GB26%2Low-end server DL360G3</p>
    <p>CPU %</p>
    <p>~3005GB1Low-power Blade</p>
    <p>SortedRecs per Joule</p>
    <p>Input Size</p>
    <p># Disks</p>
    <p>DL360G5 server: 180W</p>
    <p>Disk trays + disks: 226W</p>
    <p>Active Idle: 370W</p>
  </div>
  <div class="page">
    <p>Optimizing for Energy-Efficiency: Step 1</p>
    <p>Lower power components w/o equal perf. loss</p>
    <p>FileserverFileserver Our winnerOur winner</p>
    <p>Sort BW: 313 MB/s</p>
    <p>Sort BW: 236 MB/s</p>
  </div>
  <div class="page">
    <p>Optimizing for Energy-Efficiency: Step 1</p>
    <p>Lower power components w/o equal perf. loss</p>
    <p>FileserverFileserver Our winnerOur winner</p>
    <p>Seagate Barracuda</p>
    <p>Seq. BW: 80MB/s</p>
    <p>Hitachi Travelstar</p>
    <p>Seq. BW: 40MB/s</p>
  </div>
  <div class="page">
    <p>Disks Used</p>
    <p>S o rt e d R e c s /J o u le</p>
    <p>S o rt e d R e c s /s e c</p>
    <p>(x 1 0 E 4 )</p>
    <p>SRecs/J Perf</p>
    <p>Optimizing for Energy Efficiency: Step 2  Maximize performance</p>
    <p>Balanced sort: enough disks to fully utilize CPU</p>
    <p>Disks running near peak BW</p>
    <p>GPUTeraSort</p>
  </div>
  <div class="page">
    <p>Winner 100GB Category</p>
    <p>11300 SortedRecs/Joule</p>
    <p>3.5x better than GPUTeraSort</p>
    <p>Average Power: 100W</p>
    <p>Ordinal Technologys NSort (thanks Chris Nyberg)</p>
  </div>
  <div class="page">
    <p>Winner 100GB Category</p>
    <p>Asus motherboard:</p>
    <p>Mobile CPU + 2 PCI-e slots</p>
    <p>Asus motherboard:</p>
    <p>Mobile CPU + 2 PCI-e slots</p>
    <p>RocketRAID Disk ControllersRocketRAID Disk Controllers</p>
    <p>Detailed SW/HW sensitivity</p>
    <p>experiments in paper</p>
  </div>
  <div class="page">
    <p>Insights for Future Designs</p>
    <p>All components matter  CPU, Disks, Memory,</p>
    <p>Low hanging fruit: use low-power HW</p>
    <p>Current technology  Limited dynamic range</p>
    <p>For fixed HW: peak efficiency = peak performance</p>
    <p>Want scale-down efficiency  1TB  100GB and give best of both</p>
  </div>
  <div class="page">
    <p>Other Issues</p>
    <p>Benchmark design</p>
    <p>Data-center cooling and control</p>
    <p>Display power, GPUs, etc.</p>
    <p>Total cost of ownership</p>
    <p>System design</p>
    <p>Flash is becoming practical</p>
    <p>Cheaper, faster, and lower power</p>
  </div>
  <div class="page">
    <p>Conclusion</p>
    <p>Energy-use is important  From data centers to handhelds</p>
    <p>JouleSort  Simple, holistic energy-efficiency benchmark</p>
    <p>Built energy-efficient sorting system  3.5x better than 2006 estimated winner (GPUTeraSort)</p>
    <p>Insights: low-power HW, limited dynamic range</p>
    <p>Part of Sort Benchmark suite  Entries welcome for 2008</p>
    <p>http://joulesort.stanford.edu</p>
  </div>
</Presentation>

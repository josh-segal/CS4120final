<?xml version="1.0" ?>
<Presentation>
  <div class="page">
    <p>Efficient P2P Search by Exploiting Localities in Peer Community and Individual Peers</p>
    <p>A DISC04 paper</p>
    <p>Lei Guo1 Song Jiang2 Li Xiao3 and Xiaodong Zhang1</p>
  </div>
  <div class="page">
    <p>Peer-to-Peer Search</p>
    <p>Two Performance Objectives  Individual peer: improve the search quality</p>
    <p>Internet management: minimize the search cost</p>
    <p>Fast, fast, fast, and the more the better!</p>
    <p>P2P user</p>
    <p>Dont be so greedy, the Internet is shared by all the people!</p>
    <p>Network manager</p>
  </div>
  <div class="page">
    <p>Existing Solutions</p>
    <p>Generally aims to one of the two objectives and have performance limits to the other</p>
    <p>Flooding:  Most effective for users experience</p>
    <p>Least efficient for network resource utilization</p>
    <p>Random walk:  Traffic efficient, but</p>
    <p>Long response time and limited number of search results</p>
  </div>
  <div class="page">
    <p>Super-Node Architecture</p>
    <p>Super-node  Index server for its leaf nodes</p>
    <p>Problems  Index based search has limits</p>
    <p>Hard for full-text search  Impossible for encrypted content search</p>
    <p>Not responsible for the content quality of its leaf nodes  The structure becomes large and inefficient.</p>
    <p>A leaf node has to connect to multiple super-nodes to avoid single point failure</p>
    <p>Generating an increasingly large number of super-nodes</p>
  </div>
  <div class="page">
    <p>Gnutella Population in One Day (2003)</p>
    <p>number of peers</p>
    <p>number of super peers</p>
    <p>One super node only connects to 3-4 peers in average!</p>
  </div>
  <div class="page">
    <p>Outline</p>
    <p>Our Measurement Study</p>
    <p>CAC: Constructing Content Abundant Cluster</p>
    <p>SPIRP: Selectively Prefetching Indices from Responding Peers</p>
    <p>CAC-SPIRP: Combining CAC and SPIRP</p>
    <p>Performance Evaluation</p>
    <p>Conclusion</p>
  </div>
  <div class="page">
    <p>Our Measurement Study</p>
    <p>Existing measurement studies  A small percentage of popular files account for most</p>
    <p>shared storage and transmissions in P2P systems  A small amount of peers contribute majority number</p>
    <p>of files in P2P.  They are only the indirect evidence of content locality</p>
    <p>Some files may be never accessed, or accessed rarely</p>
    <p>Our purpose  Fully understand the localities in the peer community</p>
    <p>and individual peers  Get first-hand traces for our simulation study</p>
  </div>
  <div class="page">
    <p>Trace Collection</p>
    <p>Four-day crawling on the Gnutella network  Open source code of LimeWire Gnutella  Session based collection (for the whole life time of</p>
    <p>peers)</p>
    <p>Query sending traces by different peers  25,764 peers  409,129 queries</p>
    <p>Content indices of different peers  Full indices of 18,255 peers  37% free riders</p>
  </div>
  <div class="page">
    <p>Top Content Providers (in percentage)</p>
    <p>Q u e</p>
    <p>ri e</p>
    <p>s R</p>
    <p>e p lie</p>
    <p>d b</p>
    <p>y To</p>
    <p>p Q</p>
    <p>u e</p>
    <p>ry R</p>
    <p>e sp</p>
    <p>o n</p>
    <p>d e</p>
    <p>rs (</p>
    <p>% )</p>
    <p>R e</p>
    <p>s u</p>
    <p>lts R</p>
    <p>e p lie</p>
    <p>d b</p>
    <p>y To</p>
    <p>p R</p>
    <p>e s u lt P</p>
    <p>ro vi</p>
    <p>d e</p>
    <p>rs (</p>
    <p>% )</p>
    <p>Content Locality in the Peer Community</p>
    <p>A small group of peers can reply nearly all queries and provide most of resultsA small group of peers can reply nearly all queries and provide most of results</p>
    <p>Number of Queries 100 101 102 103 104</p>
    <p>P e</p>
    <p>rc e</p>
    <p>n ta</p>
    <p>g e</p>
    <p>o f</p>
    <p>P e</p>
    <p>e rs</p>
    <p>( %</p>
    <p>)100</p>
    <p>P e</p>
    <p>rc e</p>
    <p>n ta</p>
    <p>g e</p>
    <p>o f</p>
    <p>P e</p>
    <p>e rs</p>
    <p>(%</p>
    <p>)</p>
    <p>Number of Results 100 102 104 106</p>
  </div>
  <div class="page">
    <p>The Localities of Search Interests of Individual Peers</p>
    <p>A peer can get search results from a small number of its top query responders: they share the same search interests</p>
    <p>Similar to the idea in Locality of Interest scheme, but our conclusion is based on real P2P systems</p>
    <p>Top Query Responders Top Result Providers top 1 top 10 top 5% top 10% top 20% top 1 top 10 top 5% top 10% top 20%</p>
    <p>Q u</p>
    <p>e ry</p>
    <p>C o</p>
    <p>n tr</p>
    <p>ib u</p>
    <p>ti o</p>
    <p>n s (</p>
    <p>% )</p>
    <p>R e</p>
    <p>s u</p>
    <p>lt C</p>
    <p>o n</p>
    <p>tr ib</p>
    <p>u ti o</p>
    <p>n s (</p>
    <p>% )</p>
  </div>
  <div class="page">
    <p>Reorganizing the P2P Management Structure</p>
    <p>Clustering those small number of content abundant peers</p>
    <p>Prefetching indices from those top query responders</p>
  </div>
  <div class="page">
    <p>CAC: Constructing Content Abundant Cluster</p>
    <p>Objectives  Clustering those small number of content abundant</p>
    <p>peers in P2P overlay</p>
    <p>Providing high quality and fast service</p>
    <p>Content Abundant Cluster  An overlay on top of P2P network</p>
    <p>Self-evaluate, self-identify, and self-organize</p>
    <p>Persistent public service for all peers in the system</p>
    <p>Strong content-based (not index-based)</p>
  </div>
  <div class="page">
    <p>ClusteringLeveling</p>
    <p>CAC: System Structure</p>
    <p>C A CC A C</p>
    <p>X</p>
    <p>Dynamic Update</p>
  </div>
  <div class="page">
    <p>CAC: Search Operations</p>
    <p>Queries are sent to CAC first  Up-flowing operation  Flooding in CAC</p>
    <p>Unsatisfied queries are propagated from CAC to the whole system  Down-flooding operation</p>
    <p>Propagated from low levels to high levels</p>
  </div>
  <div class="page">
    <p>Up-flowing</p>
    <p>C A CC A C</p>
  </div>
  <div class="page">
    <p>Down-flooding</p>
    <p>C A CC A C</p>
    <p>Unused links</p>
  </div>
  <div class="page">
    <p>SPIRP: Selectively Prefetching Indices from Responding Peers</p>
    <p>Basic operations  Peer I initiates a query q</p>
    <p>Query hits: displays the results  Misses: sends q</p>
    <p>Peer R responds query q  sends query results as well as  piggybacks indices of all shared files</p>
    <p>Peer I receives response  Display the searching results as well as  stores piggybacked indices</p>
    <p>Indices updating  Active updating indices by responding peers  Updating indices demanded by requesting peers</p>
    <p>Replacement of file indices</p>
  </div>
  <div class="page">
    <p>Where are these files?</p>
    <p>Pop music</p>
    <p>Classic music</p>
    <p>SPIRP Technique</p>
    <p>R1</p>
    <p>R2</p>
    <p>Query = Beethoven mp3</p>
    <p>I</p>
  </div>
  <div class="page">
    <p>SPIRP Technique</p>
    <p>pop</p>
    <p>classic</p>
    <p>NULLNULL</p>
    <p>R1</p>
    <p>R2</p>
    <p>Query = Beetle mp3</p>
    <p>Where are these files? I</p>
  </div>
  <div class="page">
    <p>SPIRP Technique classic</p>
    <p>pop</p>
    <p>R1</p>
    <p>R2</p>
    <p>Query = Beetle mp3</p>
    <p>I</p>
  </div>
  <div class="page">
    <p>SPIRP Technique classic</p>
    <p>pop</p>
    <p>R1</p>
    <p>R2</p>
    <p>Query = Beetle mp3</p>
    <p>No enough space to save indicesI</p>
  </div>
  <div class="page">
    <p>SPIRP Technique classic</p>
    <p>pop</p>
    <p>R1</p>
    <p>R2</p>
    <p>Replace complete I</p>
    <p>Query = Beetle mp3</p>
  </div>
  <div class="page">
    <p>CAC-SPIRP</p>
    <p>CAC: application level infrastructure  Significantly reducing bandwidth consumption  Good response time when queries success in CAC  Long response time when queries fail in CAC</p>
    <p>SPIRP: client-oriented and overlay independent  Significantly reducing response time  Small traffic when queries can be satisfied in cache  Same traffic as flooding when cache misses</p>
    <p>CAC-SPIRP  Easy to combine the two techniques  Consider the trade-off between the two performance objectives  Has both merits of search quality and search cost</p>
  </div>
  <div class="page">
    <p>Simulation Environment</p>
    <p>Content trace and query trace  4 day Gnutella crawling in our measurement</p>
    <p>Overlay topology  Traces by Clip2 Distributed Search Solutions  Topology generated by GT-ITM</p>
    <p>Session duration  Pareto distribution fitted from measurement</p>
    <p>results P(x) = 14.5311 * x -1.8598</p>
  </div>
  <div class="page">
    <p>Evaluation Metrics</p>
    <p>Query success rate relative to the success rate by flooding  cluster relative success rate for CAC  local relative success rate for SPIRP</p>
    <p>Overall network traffic  accumulated communication traffics for all queries, responses,</p>
    <p>and index transferring</p>
    <p>Average response time  use the number of routing hops</p>
    <p>Evaluate for different query satisfactions  1, 10, 50 results, representing different user demands</p>
  </div>
  <div class="page">
    <p>Performance Evaluation for CAC</p>
    <p>O ve</p>
    <p>ra ll</p>
    <p>T ra</p>
    <p>ff ic</p>
    <p>( N</p>
    <p>o rm</p>
    <p>a liz</p>
    <p>e d</p>
    <p>)</p>
    <p>O ve</p>
    <p>ra ll</p>
    <p>T ra</p>
    <p>ff ic</p>
    <p>( N</p>
    <p>o rm</p>
    <p>a liz</p>
    <p>e d</p>
    <p>)</p>
    <p>O ve</p>
    <p>ra ll</p>
    <p>T ra</p>
    <p>ff ic</p>
    <p>( N</p>
    <p>o rm</p>
    <p>a liz</p>
    <p>e d</p>
    <p>)</p>
    <p>Minimum Results = 1 Minimum Results = 10 Minimum Results = 50</p>
    <p>Minimum Results = 1 Minimum Results = 10 Minimum Results = 50</p>
    <p>Minimum Results = 1 Minimum Results = 10 Minimum Results = 50</p>
  </div>
  <div class="page">
    <p>CAC Member Selection</p>
    <p>R e</p>
    <p>la ti ve</p>
    <p>C lu</p>
    <p>st e</p>
    <p>r S</p>
    <p>u c ce</p>
    <p>ss R</p>
    <p>a te</p>
    <p>Minimum Results = 1 Minimum Results = 10 Minimum Results = 50</p>
    <p>A ve</p>
    <p>ra g e</p>
    <p>R e</p>
    <p>sp o</p>
    <p>n se</p>
    <p>T im</p>
    <p>e (</p>
    <p>N o</p>
    <p>rm a</p>
    <p>liz e</p>
    <p>d )</p>
    <p>O ve</p>
    <p>ra ll</p>
    <p>T ra</p>
    <p>ff ic</p>
    <p>( N</p>
    <p>o rm</p>
    <p>a liz</p>
    <p>e d</p>
    <p>)</p>
    <p>Minimum Results = 1 Minimum Results = 10 Minimum Results = 50</p>
    <p>Minimum Results = 1 Minimum Results = 10 Minimum Results = 50</p>
    <p>Overall traffic is not sensitive to CAC member quality  Traffic can be significantly reduced even for</p>
    <p>randomly selected CAC members  CAC download flooding is very efficient</p>
  </div>
  <div class="page">
    <p>CAC-SPIRP Overall Performance Peers having 1 to 5 queries satisfied Peers having 10 to 20 queries satisfied Peers having 30 to 40 queries satisfied Peers having at least 50 queries satisfied</p>
    <p>Peers having 1 to 5 queries satisfied Peers having 10 to 20 queries satisfied Peers having 30 to 40 queries satisfied Peers having at least 50 queries satisfied</p>
    <p>Query Satisfaction = 1 Query Satisfaction = 10 Query Satisfaction = 50</p>
    <p>A ve</p>
    <p>ra g</p>
    <p>e R</p>
    <p>e sp</p>
    <p>o n</p>
    <p>se T</p>
    <p>im e</p>
    <p>( N</p>
    <p>o rm</p>
    <p>a liz</p>
    <p>e d</p>
    <p>) 2</p>
    <p>A ve</p>
    <p>ra g e</p>
    <p>R e</p>
    <p>sp o</p>
    <p>n se</p>
    <p>T im</p>
    <p>e (</p>
    <p>N o</p>
    <p>rm a</p>
    <p>liz e</p>
    <p>d ) 1</p>
    <p>A ve</p>
    <p>ra g e</p>
    <p>R e</p>
    <p>sp o</p>
    <p>n se</p>
    <p>T im</p>
    <p>e (</p>
    <p>N o</p>
    <p>rm a</p>
    <p>liz e</p>
    <p>d ) 1</p>
    <p>CAC-SPIRP reduces both the overall traffic and response time significantly</p>
  </div>
  <div class="page">
    <p>Conclusion</p>
    <p>CAC-SPIRP resolves the P2Psearch problem from two contradictive aspects  For Internet management</p>
    <p>CAC: a content abundant cluster to provide high quality and fast services without introducing too many traffic</p>
    <p>For user experience  SPIRP: a client prefetching technique to speed up</p>
    <p>search by avoiding unnecessary queries</p>
  </div>
</Presentation>

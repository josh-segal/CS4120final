<?xml version="1.0" ?>
<Presentation>
  <div class="page">
    <p>TrInc: Small Trusted Hardware for Large Distributed Systems</p>
    <p>John R. Douceur Jacob R. Lorch</p>
    <p>Thomas Moscibroda Microsoft Research</p>
    <p>Dave Levin University of Maryland</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>Trust in distributed systems</p>
    <p>Selfish Participants</p>
    <p>Malicious Participants</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>Trust in distributed systems</p>
    <p>Selfish Participants</p>
    <p>Malicious Participants</p>
    <p>A participant equivocates by sending conflicting messages to others</p>
    <p>Powerful tool: Equivocation</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>Equivocation is common and powerful</p>
    <p>Byz. Generals</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>Equivocation is common and powerful</p>
    <p>Byz. Generals</p>
    <p>Retreat</p>
    <p>Advance</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>Equivocation is common and powerful</p>
    <p>Byz. Generals</p>
    <p>Retreat</p>
    <p>Advance</p>
    <p>Voting</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>Equivocation is common and powerful</p>
    <p>Byz. Generals</p>
    <p>Retreat</p>
    <p>Advance</p>
    <p>Tally w/o s vote</p>
    <p>Counted your vote</p>
    <p>Voting</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>Equivocation is common and powerful</p>
    <p>Byz. Generals</p>
    <p>Retreat</p>
    <p>Advance</p>
    <p>Tally w/o s vote</p>
    <p>Counted your vote</p>
    <p>Voting BitTorrent</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>Equivocation is common and powerful</p>
    <p>Byz. Generals</p>
    <p>Retreat</p>
    <p>Advance</p>
    <p>Tally w/o s vote</p>
    <p>Counted your vote</p>
    <p>I dont have piece 5</p>
    <p>I have piece 5</p>
    <p>Voting BitTorrent</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>Equivocation is common and powerful</p>
    <p>Byz. Generals</p>
    <p>Retreat</p>
    <p>Advance</p>
    <p>Tally w/o s vote</p>
    <p>Counted your vote</p>
    <p>I dont have piece 5</p>
    <p>I have piece 5</p>
    <p>Voting BitTorrent</p>
    <p>AuctionsLeader election Trusted logs</p>
    <p>Digital cash</p>
    <p>Version control Online games</p>
    <p>DHTssoBGP</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>f malicious users</p>
    <p>If completely untrusted, 3f+1 users needed for consensus [Lamport et al, 1982]</p>
    <p>Equivocation is common and powerful</p>
    <p>Byz. Generals</p>
    <p>Retreat</p>
    <p>Advance</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>If users cannot equivocate, only 2f+1 users are needed [Chun et al, 2007]</p>
    <p>f malicious users</p>
    <p>If completely untrusted, 3f+1 users needed for consensus [Lamport et al, 1982]</p>
    <p>Equivocation is common and powerful</p>
    <p>Byz. Generals</p>
    <p>Retreat</p>
    <p>Advance</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>New design space  All participants have a</p>
    <p>trusted component</p>
    <p>Enter Trusted Hardware</p>
    <p>Equivocation can be rendered impossible with trusted hardware</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>New design space  All participants have a</p>
    <p>trusted component</p>
    <p>Enter Trusted Hardware</p>
    <p>Equivocation can be rendered impossible with trusted hardware</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>New design space  All participants have a</p>
    <p>trusted component</p>
    <p>Enter Trusted Hardware</p>
    <p>Equivocation can be rendered impossible with trusted hardware</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>New design space  All participants have a</p>
    <p>trusted component</p>
    <p>Enter Trusted Hardware</p>
    <p>Equivocation can be rendered impossible with trusted hardware</p>
    <p>To be practical, the hardware must be small  Ubiquity via low cost  Tamper-resilient  Easier to verify a small TCB</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>Contributions</p>
    <p>TrInc  A new, practical primitive for eliminating equivocation</p>
    <p>Applications of TrInc</p>
    <p>Implementation in currently available hardware</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>Contributions</p>
    <p>Applications of TrInc</p>
    <p>Implementation in currently available hardware</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>Motivating question</p>
    <p>What is the minimal abstraction needed to make equivocation impossible?</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>Motivating question</p>
    <p>What is the minimal abstraction needed to make equivocation impossible?</p>
    <p>A counter and a key are enough</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>TrInc: Trusted Incrementer</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>TrInc: Trusted Incrementer</p>
    <p>Attestations bind data to counters</p>
    <p>K</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>TrInc: Trusted Incrementer</p>
    <p>Attestations bind data to counters</p>
    <p>Bind this data to counter value 36</p>
    <p>K</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>TrInc: Trusted Incrementer</p>
    <p>Attestations bind data to counters</p>
    <p>Attest( 36, data)</p>
    <p>Bind this data to counter value 36</p>
    <p>K</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>TrInc: Trusted Incrementer</p>
    <p>Attestations bind data to counters</p>
    <p>Attest( 36, data)</p>
    <p>Bind this data to counter value 36</p>
    <p>K</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>TrInc: Trusted Incrementer</p>
    <p>Attestations bind data to counters</p>
    <p>Attest( 36, data)</p>
    <p>Bind this data to counter value 36</p>
    <p>K</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>TrInc: Trusted Incrementer</p>
    <p>Attestations bind data to counters</p>
    <p>Attest( 36, data)</p>
    <p>Bind this data to counter value 36</p>
    <p>K</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>TrInc: Trusted Incrementer</p>
    <p>Attestations bind data to counters</p>
    <p>Attest( 36, data) &lt; 34, 36, data &gt;K</p>
    <p>Bind this data to counter value 36</p>
    <p>K</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>TrInc Attestations</p>
    <p>&lt; 34, 36, data &gt;K</p>
    <p>&lt; 36, 36, nonce &gt;K</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>TrInc Attestations</p>
    <p>Can only move to a state once  data is forever bound to 36  There was nothing bound to 35</p>
    <p>&lt; 34, 36, data &gt;K</p>
    <p>&lt; 36, 36, nonce &gt;K</p>
    <p>Advance attestation</p>
    <p>What is your current counter?  Nonces assure freshness</p>
    <p>There is nothing beyond 36 (yet)</p>
    <p>Status attestation</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>Multiple counters</p>
    <p>Need multiple trusted counters  Systems running concurrently  Some systems benefit from more counters</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>Hardware that contains 1 counter is a Trinket  Allocates and frees counters  Establishes session keys</p>
    <p>Trinket</p>
    <p>Multiple counters</p>
    <p>Need multiple trusted counters  Systems running concurrently  Some systems benefit from more counters</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>TrInc is practical</p>
    <p>Trusted Platform Module (TPM) is ubiquitous</p>
    <p>Has what we need  Tamper-resistance  Counters (currently 4)  Crypto  Small amount of storage</p>
    <p>It just lacks the right interface</p>
    <p>TPM Penetration Source: IDC 2006</p>
    <p>Desktop PCs Mobile PCs x86 Servers</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>Contributions</p>
    <p>Applications of TrInc</p>
    <p>Implementation in currently available hardware</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>Contributions</p>
    <p>TrInc  A new, practical primitive for eliminating equivocation</p>
    <p>Applications of TrInc</p>
    <p>Implementation in currently available hardware</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>What can TrInc do?</p>
    <p>Trusted append-only logs</p>
    <p>Prevent under-reporting in BitTorrent</p>
    <p>Reduces communication in PeerReview</p>
    <p>BFT with fewer nodes and messages</p>
    <p>Ensure fresh data in DHTs</p>
    <p>Prevent Sybil attacks</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>What can TrInc do?</p>
    <p>Trusted append-only logs</p>
    <p>Prevent under-reporting in BitTorrent</p>
    <p>Reduces communication in PeerReview</p>
    <p>BFT with fewer nodes and messages</p>
    <p>Ensure fresh data in DHTs</p>
    <p>Prevent Sybil attacks</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>What can TrInc do?</p>
    <p>Trusted append-only logs</p>
    <p>Prevent under-reporting in BitTorrent</p>
    <p>Reduces communication in PeerReview</p>
    <p>BFT with fewer nodes and messages</p>
    <p>Ensure fresh data in DHTs</p>
    <p>Prevent Sybil attacks</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>Implementing a trusted log in TrInc</p>
    <p>Append(data): Bind new data to the end of the log</p>
    <p>Lookup(sequence num): No equivocating on what is or is not stored</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>Implementing a trusted log in TrInc</p>
    <p>Append(data): Bind new data to the end of the log</p>
    <p>Lookup(sequence num): No equivocating on what is or is not stored</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>Implementing a trusted log in TrInc</p>
    <p>&lt; &gt;8,9, &lt; &gt;3,8,</p>
    <p>Untrusted storage</p>
    <p>&lt; &gt;9,10,</p>
    <p>Append(data): Bind new data to the end of the log</p>
    <p>Lookup(sequence num): No equivocating on what is or is not stored</p>
    <p>&lt; &gt;9,10,</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>Implementing a trusted log in TrInc</p>
    <p>&lt; &gt;8,9, &lt; &gt;3,8,</p>
    <p>append</p>
    <p>Untrusted storage</p>
    <p>&lt; &gt;9,10,</p>
    <p>Append(data): Bind new data to the end of the log</p>
    <p>Lookup(sequence num): No equivocating on what is or is not stored</p>
    <p>&lt; &gt;9,10,</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>Implementing a trusted log in TrInc</p>
    <p>&lt; &gt;8,9, &lt; &gt;3,8,</p>
    <p>Untrusted storage</p>
    <p>&lt; &gt;9,10,</p>
    <p>attest(11,, )</p>
    <p>Append(data): Bind new data to the end of the log</p>
    <p>Lookup(sequence num): No equivocating on what is or is not stored</p>
    <p>&lt; &gt;9,10,</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>Implementing a trusted log in TrInc</p>
    <p>&lt; &gt;8,9, &lt; &gt;3,8,</p>
    <p>Untrusted storage</p>
    <p>&lt; &gt;9,10,</p>
    <p>Append(data): Bind new data to the end of the log</p>
    <p>Lookup(sequence num): No equivocating on what is or is not stored</p>
    <p>&lt; &gt;9,10,</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>Implementing a trusted log in TrInc</p>
    <p>&lt; &gt;8,9, &lt; &gt;3,8,</p>
    <p>Untrusted storage</p>
    <p>&lt; &gt;9,10,</p>
    <p>Append(data): Bind new data to the end of the log</p>
    <p>Lookup(sequence num): No equivocating on what is or is not stored</p>
    <p>&lt; &gt;9,10,</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>Implementing a trusted log in TrInc</p>
    <p>&lt; &gt;8,9, &lt; &gt;3,8,</p>
    <p>&lt; &gt;10,11,</p>
    <p>Untrusted storage</p>
    <p>&lt; &gt;9,10,</p>
    <p>Append(data): Bind new data to the end of the log</p>
    <p>Lookup(sequence num): No equivocating on what is or is not stored</p>
    <p>&lt; &gt;9,10,</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>Implementing a trusted log in TrInc</p>
    <p>&lt; &gt;8,9, &lt; &gt;3,8,</p>
    <p>&lt; &gt;10,11,</p>
    <p>Untrusted storage</p>
    <p>&lt; &gt;9,10,</p>
    <p>Append(data): Bind new data to the end of the log</p>
    <p>Lookup(sequence num): No equivocating on what is or is not stored</p>
    <p>&lt; &gt;9,10,</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>Implementing a trusted log in TrInc</p>
    <p>&lt; &gt;8,9, &lt; &gt;3,8,</p>
    <p>&lt; &gt;10,11,</p>
    <p>lookup 10</p>
    <p>Untrusted storage</p>
    <p>&lt; &gt;9,10,</p>
    <p>Append(data): Bind new data to the end of the log</p>
    <p>Lookup(sequence num): No equivocating on what is or is not stored</p>
    <p>&lt; &gt;9,10,</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>Implementing a trusted log in TrInc</p>
    <p>&lt; &gt;8,9, &lt; &gt;3,8,</p>
    <p>&lt; &gt;10,11,</p>
    <p>lookup 10</p>
    <p>Untrusted storage</p>
    <p>&lt; &gt;9,10,</p>
    <p>Append(data): Bind new data to the end of the log</p>
    <p>Lookup(sequence num): No equivocating on what is or is not stored</p>
    <p>&lt; &gt;9,10,</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>Implementing a trusted log in TrInc</p>
    <p>&lt; &gt;8,9, &lt; &gt;3,8,</p>
    <p>&lt; &gt;10,11,</p>
    <p>lookup 10</p>
    <p>Untrusted storage</p>
    <p>&lt; &gt;9,10,</p>
    <p>Append(data): Bind new data to the end of the log</p>
    <p>Lookup(sequence num): No equivocating on what is or is not stored</p>
    <p>&lt; &gt;9,10,</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>Implementing a trusted log in TrInc</p>
    <p>&lt; &gt;8,9, &lt; &gt;3,8,</p>
    <p>&lt; &gt;10,11,</p>
    <p>Untrusted storage</p>
    <p>&lt; &gt;9,10,</p>
    <p>Append(data): Bind new data to the end of the log</p>
    <p>Lookup(sequence num): No equivocating on what is or is not stored</p>
    <p>&lt; &gt;9,10,</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>Implementing a trusted log in TrInc</p>
    <p>&lt; &gt;8,9, &lt; &gt;3,8,</p>
    <p>&lt; &gt;10,11,</p>
    <p>Untrusted storage</p>
    <p>&lt; &gt;9,10,</p>
    <p>Append(data): Bind new data to the end of the log</p>
    <p>Lookup(sequence num): No equivocating on what is or is not stored</p>
    <p>&lt; &gt;9,10,</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>Implementing a trusted log in TrInc</p>
    <p>&lt; &gt;8,9, &lt; &gt;3,8,</p>
    <p>&lt; &gt;10,11,</p>
    <p>Untrusted storage</p>
    <p>&lt; &gt;9,10, Few hardware accesses Fast lookups</p>
    <p>Append(data): Bind new data to the end of the log</p>
    <p>Lookup(sequence num): No equivocating on what is or is not stored</p>
    <p>&lt; &gt;9,10,</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>TrInc-A2M</p>
    <p>Attested Append-only Memory (A2M)  Stores logs in trusted storage  Accesses trusted storage for all methods</p>
    <p>A2M shown to solve  Byzantine fault tolerance using fewer nodes  SUNDR file system  Quorum/Update protocol</p>
    <p>By construction, TrInc solves these systems, too</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>What can TrInc do?</p>
    <p>Trusted append-only logs</p>
    <p>Prevent under-reporting in BitTorrent</p>
    <p>Reduces communication in PeerReview</p>
    <p>BFT with fewer nodes and messages</p>
    <p>Ensure fresh data in DHTs</p>
    <p>Prevent Sybil attacks</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>What can TrInc do?</p>
    <p>Trusted append-only logs</p>
    <p>Prevent under-reporting in BitTorrent</p>
    <p>Reduces communication in PeerReview</p>
    <p>BFT with fewer nodes and messages</p>
    <p>Ensure fresh data in DHTs</p>
    <p>Prevent Sybil attacks</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>BitTorrent primer</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>BitTorrent primer</p>
    <p>Fast, users share the work</p>
    <p>File pieces</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>BitTorrent primer</p>
    <p>Fast, users share the work</p>
    <p>File pieces</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>BitTorrent primer</p>
    <p>Fast, users share the work</p>
    <p>File pieces</p>
    <p>Does not have piece 2</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>BitTorrent primer</p>
    <p>Fast, users share the work</p>
    <p>File pieces</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>BitTorrent primer</p>
    <p>Fast, users share the work</p>
    <p>File pieces</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>BitTorrent primer</p>
    <p>Fast, users share the work</p>
    <p>File pieces</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>BitTorrent primer</p>
    <p>Fast, users share the work</p>
    <p>File pieces</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>BitTorrent primer</p>
    <p>Fast, users share the work</p>
    <p>File pieces</p>
    <p>Interested</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>BitTorrent primer</p>
    <p>Fast, users share the work</p>
    <p>File pieces</p>
    <p>Interested</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>Piece under-reporting is equivocation</p>
    <p>Yields prolonged interest from others and faster download times</p>
    <p>[SIGCOMM08]</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>Piece under-reporting is equivocation</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>Piece under-reporting is equivocation</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>Piece under-reporting is equivocation</p>
    <p>Ack</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>Piece under-reporting is equivocation</p>
    <p>Ack</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>Piece under-reporting is equivocation</p>
    <p>I received</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>Piece under-reporting is equivocation</p>
    <p>I never received</p>
    <p>I received</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>Applying TrInc</p>
    <p>What does the counter represent?  The number of pieces received</p>
    <p>To what do peers attest?  Their bitfield  The most recent piece received</p>
    <p>When do peers attest?  When they receive  When they sync their counters</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>TrInc-BitTorrent</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>TrInc-BitTorrent</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>TrInc-BitTorrent</p>
    <p>I have and most recently received1</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>TrInc-BitTorrent</p>
    <p>I have and most recently received1</p>
    <p>I have and most recently received2</p>
    <p>I have and most recently received3</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>TrInc-BitTorrent</p>
    <p>Counter matches the bitfield size</p>
    <p>I have and most recently received1</p>
    <p>I have and most recently received2</p>
    <p>I have and most recently received3</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>TrInc-BitTorrent</p>
    <p>Counter matches the bitfield size</p>
    <p>I have and most recently received1</p>
    <p>I have and most recently received2</p>
    <p>I have and most recently received3</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>TrInc-BitTorrent</p>
    <p>Counter matches the bitfield size</p>
    <p>Attests to most recent piece</p>
    <p>I have and most recently received1</p>
    <p>I have and most recently received2</p>
    <p>I have and most recently received3</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>TrInc-BitTorrent</p>
    <p>Counter matches the bitfield size</p>
    <p>Attests to most recent piece</p>
    <p>I have and most recently received1</p>
    <p>I have and most recently received2</p>
    <p>I have and most recently received3</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>Why attest to the latest piece?</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>Why attest to the latest piece?</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>Why attest to the latest piece?</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>Why attest to the latest piece?</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>Why attest to the latest piece?</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>Why attest to the latest piece?</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>Why attest to the latest piece?</p>
    <p>to me</p>
    <p>Looks good to me</p>
    <p>Looks good to me</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>Why attest to the latest piece?</p>
    <p>to me</p>
    <p>Looks good to me</p>
    <p>Looks good to me</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>Why attest to the latest piece?</p>
    <p>to me</p>
    <p>Looks good to me</p>
    <p>Looks good to me</p>
    <p>Lesson: Without the full log, must ensure proper behavior at each step</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>Macrobenchmarks</p>
    <p>TrInc-BitTorrent  Solves piece under-reporting</p>
    <p>TrInc-A2M  Reduces hardware requirements  Higher throughput</p>
    <p>TrInc-PeerReview  Reduces the communication</p>
    <p>necessary to achieve fault detection</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>Contributions</p>
    <p>TrInc  A new, practical primitive for eliminating equivocation</p>
    <p>Applications of TrInc</p>
    <p>Implementation in currently available hardware</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>Contributions</p>
    <p>TrInc  A new, practical primitive for eliminating equivocation</p>
    <p>Applications of TrInc</p>
    <p>Implementation in currently available hardware</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>Implementation</p>
    <p>Gemalto .NET Smartcard  Crypto unit (RSA &amp; 3-DES)  32-bit micro-controller  80 KB persistent memory</p>
    <p>A few dozen lines of C#</p>
    <p>Case studies  TrInc-A2M  TrInc-PeerReview  TrInc-BitTorrent</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>TrInc microbenchmarks</p>
    <p>noop Asym Attest Asym Attest Symm attest Symm Attest Verify (advance) (status)</p>
    <p>O pe</p>
    <p>ra ti o n</p>
    <p>ti m</p>
    <p>e (m</p>
    <p>se c)</p>
    <p>(advance) (status)</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>TrInc microbenchmarks</p>
    <p>noop Asym Attest Asym Attest Symm attest Symm Attest Verify (advance) (status)</p>
    <p>O pe</p>
    <p>ra ti o n</p>
    <p>ti m</p>
    <p>e (m</p>
    <p>se c)</p>
    <p>(advance) (status)</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>TrInc microbenchmarks</p>
    <p>noop Asym Attest Asym Attest Symm attest Symm Attest Verify (advance) (status)</p>
    <p>O pe</p>
    <p>ra ti o n</p>
    <p>ti m</p>
    <p>e (m</p>
    <p>se c)</p>
    <p>(advance) (status)</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>TrInc microbenchmarks</p>
    <p>noop Asym Attest Asym Attest Symm attest Symm Attest Verify (advance) (status)</p>
    <p>O pe</p>
    <p>ra ti o n</p>
    <p>ti m</p>
    <p>e (m</p>
    <p>se c)</p>
    <p>(advance) (status)</p>
    <p>Only 2x</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>Why so slow?</p>
    <p>Fundamentally new application of trusted hardware  Typically used for bootstrapping  TrInc makes it intrinsic to the protocol</p>
    <p>It can be faster  There just has not been the call for it prior to TrInc</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>Summary</p>
    <p>Equivocation is a versatile and powerful</p>
    <p>A small amount of trust can secure a large system</p>
    <p>TrInc is  Minimal  A counter and a key  Versatile  Applies to a wide range of systems  Practical  Uses the same components available today</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>TrInc speeds up A2M</p>
    <p>Append Lookup Lookup Lookup End Truncate Advance</p>
    <p>TrInc-A2M A2M</p>
    <p>(successful) (too early) (forgotten)</p>
    <p>O pe</p>
    <p>ra ti o n</p>
    <p>ti m</p>
    <p>e (m</p>
    <p>se c)</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>TrInc speeds up A2M</p>
    <p>Append Lookup Lookup Lookup End Truncate Advance</p>
    <p>TrInc-A2M A2M</p>
    <p>(successful) (too early) (forgotten)</p>
    <p>O pe</p>
    <p>ra ti o n</p>
    <p>ti m</p>
    <p>e (m</p>
    <p>se c)</p>
    <p>TrInc does not go to h/w for successful lookups</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>TrInc speeds up A2M</p>
    <p>Append Lookup Lookup Lookup End Truncate Advance</p>
    <p>TrInc-A2M A2M</p>
    <p>(successful) (too early) (forgotten)</p>
    <p>O pe</p>
    <p>ra ti o n</p>
    <p>ti m</p>
    <p>e (m</p>
    <p>se c)</p>
    <p>TrInc does not go to h/w for successful lookups TrInc requires</p>
    <p>attestations</p>
  </div>
  <div class="page">
    <p>SIGCOMM08 - BitTorrent is an Auction Dave Levin</p>
    <p>Block Revelation</p>
  </div>
  <div class="page">
    <p>SIGCOMM08 - BitTorrent is an Auction Dave Levin</p>
    <p>Block Revelation</p>
  </div>
  <div class="page">
    <p>SIGCOMM08 - BitTorrent is an Auction Dave Levin</p>
    <p>Block Revelation</p>
  </div>
  <div class="page">
    <p>SIGCOMM08 - BitTorrent is an Auction Dave Levin</p>
    <p>Block Revelation</p>
  </div>
  <div class="page">
    <p>SIGCOMM08 - BitTorrent is an Auction Dave Levin</p>
    <p>Block Revelation</p>
  </div>
  <div class="page">
    <p>SIGCOMM08 - BitTorrent is an Auction Dave Levin</p>
    <p>Block Revelation</p>
  </div>
  <div class="page">
    <p>SIGCOMM08 - BitTorrent is an Auction Dave Levin</p>
    <p>Block Revelation</p>
  </div>
  <div class="page">
    <p>SIGCOMM08 - BitTorrent is an Auction Dave Levin</p>
    <p>Block Revelation</p>
  </div>
  <div class="page">
    <p>SIGCOMM08 - BitTorrent is an Auction Dave Levin</p>
    <p>Block Revelation</p>
  </div>
  <div class="page">
    <p>SIGCOMM08 - BitTorrent is an Auction Dave Levin</p>
    <p>Block Revelation</p>
  </div>
  <div class="page">
    <p>SIGCOMM08 - BitTorrent is an Auction Dave Levin</p>
    <p>Block Revelation</p>
  </div>
  <div class="page">
    <p>SIGCOMM08 - BitTorrent is an Auction Dave Levin</p>
    <p>Block Revelation</p>
  </div>
  <div class="page">
    <p>SIGCOMM08 - BitTorrent is an Auction Dave Levin</p>
    <p>Block Revelation</p>
    <p>Strategically under-report</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>TrInc-BitTorrent Results</p>
    <p>C um</p>
    <p>ul at</p>
    <p>iv e</p>
    <p>nu m</p>
    <p>be r o</p>
    <p>f b lo</p>
    <p>ck s</p>
    <p>ob ta</p>
    <p>in ed</p>
    <p>Time into the download (sec)</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>TrInc-BitTorrent Results</p>
    <p>C um</p>
    <p>ul at</p>
    <p>iv e</p>
    <p>nu m</p>
    <p>be r o</p>
    <p>f b lo</p>
    <p>ck s</p>
    <p>ob ta</p>
    <p>in ed</p>
    <p>Time into the download (sec)</p>
    <p>C um</p>
    <p>ul at</p>
    <p>iv e</p>
    <p>nu m</p>
    <p>be r o</p>
    <p>f b lo</p>
    <p>ck s</p>
    <p>ob ta</p>
    <p>in ed</p>
    <p>Time into the download (sec)</p>
    <p>Representative peer</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>TrInc-BitTorrent Results</p>
    <p>C um</p>
    <p>ul at</p>
    <p>iv e</p>
    <p>nu m</p>
    <p>be r o</p>
    <p>f b lo</p>
    <p>ck s</p>
    <p>ob ta</p>
    <p>in ed</p>
    <p>Time into the download (sec)</p>
    <p>C um</p>
    <p>ul at</p>
    <p>iv e</p>
    <p>nu m</p>
    <p>be r o</p>
    <p>f b lo</p>
    <p>ck s</p>
    <p>ob ta</p>
    <p>in ed</p>
    <p>Time into the download (sec)</p>
    <p>Representative peer</p>
    <p>C um</p>
    <p>ul at</p>
    <p>iv e</p>
    <p>nu m</p>
    <p>be r o</p>
    <p>f b lo</p>
    <p>ck s</p>
    <p>ob ta</p>
    <p>in ed</p>
    <p>Time into the download (sec)</p>
    <p>Representative peer Under-reporter: from all</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>TrInc-BitTorrent Results</p>
    <p>C um</p>
    <p>ul at</p>
    <p>iv e</p>
    <p>nu m</p>
    <p>be r o</p>
    <p>f b lo</p>
    <p>ck s</p>
    <p>ob ta</p>
    <p>in ed</p>
    <p>Time into the download (sec)</p>
    <p>C um</p>
    <p>ul at</p>
    <p>iv e</p>
    <p>nu m</p>
    <p>be r o</p>
    <p>f b lo</p>
    <p>ck s</p>
    <p>ob ta</p>
    <p>in ed</p>
    <p>Time into the download (sec)</p>
    <p>Representative peer</p>
    <p>C um</p>
    <p>ul at</p>
    <p>iv e</p>
    <p>nu m</p>
    <p>be r o</p>
    <p>f b lo</p>
    <p>ck s</p>
    <p>ob ta</p>
    <p>in ed</p>
    <p>Time into the download (sec)</p>
    <p>Representative peer Under-reporter: from all</p>
    <p>Under-reporter pulls ahead</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>TrInc-BitTorrent Results</p>
    <p>C um</p>
    <p>ul at</p>
    <p>iv e</p>
    <p>nu m</p>
    <p>be r o</p>
    <p>f b lo</p>
    <p>ck s</p>
    <p>ob ta</p>
    <p>in ed</p>
    <p>Time into the download (sec)</p>
    <p>C um</p>
    <p>ul at</p>
    <p>iv e</p>
    <p>nu m</p>
    <p>be r o</p>
    <p>f b lo</p>
    <p>ck s</p>
    <p>ob ta</p>
    <p>in ed</p>
    <p>Time into the download (sec)</p>
    <p>Representative peer</p>
    <p>C um</p>
    <p>ul at</p>
    <p>iv e</p>
    <p>nu m</p>
    <p>be r o</p>
    <p>f b lo</p>
    <p>ck s</p>
    <p>ob ta</p>
    <p>in ed</p>
    <p>Time into the download (sec)</p>
    <p>Representative peer Under-reporter: from all</p>
    <p>Under-reporter pulls ahead</p>
    <p>But ultimately downloads slower</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>TrInc-BitTorrent Results</p>
    <p>C um</p>
    <p>ul at</p>
    <p>iv e</p>
    <p>nu m</p>
    <p>be r o</p>
    <p>f b lo</p>
    <p>ck s</p>
    <p>ob ta</p>
    <p>in ed</p>
    <p>Time into the download (sec)</p>
    <p>C um</p>
    <p>ul at</p>
    <p>iv e</p>
    <p>nu m</p>
    <p>be r o</p>
    <p>f b lo</p>
    <p>ck s</p>
    <p>ob ta</p>
    <p>in ed</p>
    <p>Time into the download (sec)</p>
    <p>Representative peer</p>
    <p>C um</p>
    <p>ul at</p>
    <p>iv e</p>
    <p>nu m</p>
    <p>be r o</p>
    <p>f b lo</p>
    <p>ck s</p>
    <p>ob ta</p>
    <p>in ed</p>
    <p>Time into the download (sec)</p>
    <p>Representative peer Under-reporter: from all</p>
    <p>C um</p>
    <p>ul at</p>
    <p>iv e</p>
    <p>nu m</p>
    <p>be r o</p>
    <p>f b lo</p>
    <p>ck s</p>
    <p>ob ta</p>
    <p>in ed</p>
    <p>Time into the download (sec)</p>
    <p>Representative peer Under-reporter: from all</p>
    <p>Under-reporter: from seed</p>
    <p>Under-reporter pulls ahead</p>
    <p>But ultimately downloads slower</p>
  </div>
  <div class="page">
    <p>TrInc  NSDI 2009 Dave Levin</p>
    <p>Truth-tellers A median of 6% from the seeder</p>
    <p>Under-reporter 73% of file</p>
    <p>from the seeder</p>
    <p>TrInc-BitTorrent Results</p>
    <p>C um</p>
    <p>ul at</p>
    <p>iv e</p>
    <p>nu m</p>
    <p>be r o</p>
    <p>f b lo</p>
    <p>ck s</p>
    <p>ob ta</p>
    <p>in ed</p>
    <p>Time into the download (sec)</p>
    <p>C um</p>
    <p>ul at</p>
    <p>iv e</p>
    <p>nu m</p>
    <p>be r o</p>
    <p>f b lo</p>
    <p>ck s</p>
    <p>ob ta</p>
    <p>in ed</p>
    <p>Time into the download (sec)</p>
    <p>Representative peer</p>
    <p>C um</p>
    <p>ul at</p>
    <p>iv e</p>
    <p>nu m</p>
    <p>be r o</p>
    <p>f b lo</p>
    <p>ck s</p>
    <p>ob ta</p>
    <p>in ed</p>
    <p>Time into the download (sec)</p>
    <p>Representative peer Under-reporter: from all</p>
    <p>C um</p>
    <p>ul at</p>
    <p>iv e</p>
    <p>nu m</p>
    <p>be r o</p>
    <p>f b lo</p>
    <p>ck s</p>
    <p>ob ta</p>
    <p>in ed</p>
    <p>Time into the download (sec)</p>
    <p>Representative peer Under-reporter: from all</p>
    <p>Under-reporter: from seed</p>
    <p>Under-reporter pulls ahead</p>
    <p>But ultimately downloads slower</p>
  </div>
</Presentation>

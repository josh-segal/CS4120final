<?xml version="1.0" ?>
<Presentation>
  <div class="page">
    <p>A Self-Configurable Geo-Replicated Cloud Storage System</p>
    <p>Masoud Saeida Ardekani, Inria &amp; UPMC</p>
    <p>Douglas B. Terry, Microsoft Research</p>
    <p>Special thanks to:</p>
    <p>Marcos K. Aguilera, Mahesh Balakrishnan, Ramakrishna Kotla</p>
    <p>OSDI 2014</p>
  </div>
  <div class="page">
    <p>primary</p>
    <p>secondary</p>
    <p>Scenario</p>
  </div>
  <div class="page">
    <p>primary</p>
    <p>secondary</p>
    <p>Key point: Configurations need to adapt.</p>
    <p>Scenario</p>
    <p>The events, characters and firms depicted in this talk are fictitious. Any similarity to</p>
    <p>actual labs, living or dead, or to actual firms, is purely coincidental.</p>
  </div>
  <div class="page">
    <p>Configuration Service</p>
    <p>Selects new configuration to improve overall utility delivered to clients</p>
    <p>Installs new configuration while clients continue to read and write data</p>
  </div>
  <div class="page">
    <p>Storage System Model</p>
    <p>Configuration =</p>
    <p>Primary core</p>
    <p>Secondary nodes</p>
    <p>sync replication</p>
    <p>lazy replication</p>
    <p>Based on Pileus [SOSP 2013]</p>
  </div>
  <div class="page">
    <p>Consistency-based SLAs</p>
    <p>Applications declare acceptable consistency/latency pairs and utility</p>
    <p>E.g. shopping cart</p>
    <p>strong 300 ms.</p>
    <p>consistency latency</p>
    <p>read my writes 300 ms.</p>
    <p>utility</p>
    <p>eventual 300 ms. 3. 0.1</p>
  </div>
  <div class="page">
    <p>Selecting a Configuration</p>
    <p>Configuration Service</p>
    <p>SLAs</p>
    <p>clients read/writes</p>
    <p>latencies</p>
    <p>Config. Generator</p>
    <p>constraints - # of replicas - location - cost</p>
    <p>cost</p>
    <p>configuration</p>
    <p>maximizes utility</p>
    <p>cost</p>
  </div>
  <div class="page">
    <p>Installing a New Configuration</p>
    <p>Configuration Service</p>
    <p>Current</p>
    <p>New Actions</p>
    <p>Move Primary Add Primary Downgrade Primary Add Secondary Remove Secondary Adjust Sync Period</p>
  </div>
  <div class="page">
    <p>Example: Move Primary</p>
  </div>
  <div class="page">
    <p>Leasing Configurations</p>
    <p>Slow</p>
    <p>CS</p>
    <p>Fast</p>
    <p>Client</p>
    <p>Fast Slow</p>
    <p>Slow mode = unsure of current configuration Fast mode = hold lease on configuration for  seconds</p>
  </div>
  <div class="page">
    <p>Client Operations</p>
    <p>Read</p>
    <p>Write</p>
    <p>Fast Slow</p>
    <p>Read from best replica (ala Pileus)</p>
    <p>Do speculative read then check</p>
    <p>configuration</p>
    <p>Write to all primaries</p>
    <p>Lock configuration, then write</p>
  </div>
  <div class="page">
    <p>Implementation Notes</p>
    <p>Built on Azure Blob Store</p>
    <p>C.S. stores configuration blob</p>
    <p>read periodically by clients</p>
    <p>RiP flag stored as metadata</p>
    <p>Clients periodically write SLAs, read/write ratios, and latencies to blobs</p>
    <p>read by C.S. during reconfiguration</p>
    <p>C.S. can run intermittently</p>
    <p>system</p>
    <p>clients</p>
    <p>config CONFIG.TXT</p>
    <p>USERA.DAT</p>
    <p>USERB.DAT</p>
  </div>
  <div class="page">
    <p>Evaluation Setup</p>
    <p>Consistency Latency Utility</p>
    <p>Strong 100 ms 1.0</p>
    <p>RMW 100 ms 0.7</p>
    <p>Eventual 250 ms 0.5</p>
    <p>YCSB [SoCC10] Workload B (95% Read, 5% Write) 1000 Objects (1KB each)</p>
    <p>US Europe Asia</p>
    <p>Constraints Replication factor  2 Single primary</p>
    <p>Social Network SLA</p>
    <p>secondary</p>
    <p>primary</p>
    <p>unused</p>
    <p># of clients</p>
  </div>
  <div class="page">
    <p>Evaluation</p>
    <p>U T</p>
    <p>IL IT</p>
    <p>Y</p>
    <p>No-Reconfiguration</p>
  </div>
  <div class="page">
    <p>Evaluation</p>
    <p>U T</p>
    <p>IL IT</p>
    <p>Y</p>
    <p>No-Reconfiguration Every 4 hour</p>
    <p>Make Europe Primary</p>
    <p>Move Secondary</p>
    <p>to U.S.</p>
    <p>Make Asia Primary</p>
    <p>Move Secondary</p>
    <p>to Asia</p>
    <p>Make U.S. Primary</p>
  </div>
  <div class="page">
    <p>Improved Consistency</p>
    <p>Strong 33%</p>
    <p>RMW 33%</p>
    <p>Eventual 34%</p>
    <p>No-Reonfiguration</p>
    <p>Strong 49%</p>
    <p>RMW 34%</p>
    <p>Eventual 17%</p>
    <p>Every 4 hour</p>
  </div>
  <div class="page">
    <p>Conclusions</p>
    <p>Storage systems should adapt to changing client demands</p>
    <p>Utility/cost is a useful metric for selecting improved configurations</p>
    <p>Automatic reconfiguration can occur in parallel with running applications</p>
    <p>Substantial consistency gains are possible</p>
  </div>
</Presentation>

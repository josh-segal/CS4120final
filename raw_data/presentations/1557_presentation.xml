<?xml version="1.0" ?>
<Presentation>
  <div class="page">
    <p>On the Performance Variation in Modern Storage Stacks</p>
    <p>Zhen Cao1, Vasily Tarasov2, Hari Prasath Raman1, Dean Hildebrand2, and Erez Zadok1</p>
    <p>2017 Stony Brook University</p>
    <p>Motivation</p>
    <p>Motivation (cont.) l Stable performance is critical</p>
    <p>uBenchmarking  Inaccurate conclusions</p>
    <p>uProduction systems  Clients satisfaction</p>
    <p>l Performance variation is complicated uVarious sources uTime-consuming to measure</p>
    <p>l Storage stacks are important contributors l First systematic study</p>
    <p>Background l Measurements for performance</p>
    <p>uThroughput  Window size matters</p>
    <p>uLatency</p>
    <p>Background (cont.) Measurements for variations</p>
    <p>u Relative Standard Deviation</p>
    <p>u (Coefficient of Variation)</p>
    <p>u</p>
    <p>u Understate impacts of outliers</p>
    <p>u Relative Range u</p>
    <p>Background (cont.) Measurements for variations</p>
    <p>u Relative Standard Deviation</p>
    <p>u (Coefficient of Variation)</p>
    <p>u</p>
    <p>u Understate impacts of outliers</p>
    <p>u Relative Range u</p>
  </div>
  <div class="page">
    <p>Background (cont.) Measurements for variations</p>
    <p>u Relative Standard Deviation</p>
    <p>u (Coefficient of Variation)</p>
    <p>u</p>
    <p>u Understate impacts of outliers</p>
    <p>u Relative Range u</p>
    <p>Methodology l Important parameters</p>
    <p>uFile Systems  Ext4, XFS, Btrfs</p>
    <p>uF/S parameters  Block Size, Inode Size, etc.</p>
    <p>uI/O Schedulers uDevices: HDDs, SSDs</p>
    <p>l Latin Hypercube Sampling uExplore many-factor systems</p>
    <p>On the Performance Variation in Modern Storage Stacks (FAST17)</p>
    <p>Methodology l Important parameters</p>
    <p>uFile Systems  Ext4, XFS, Btrfs</p>
    <p>uF/S parameters  Block Size, Inode Size, etc.</p>
    <p>uI/O Schedulers uDevices: HDDs, SSDs</p>
    <p>l Latin Hypercube Sampling uExplore many-factor systems</p>
    <p>On the Performance Variation in Modern Storage Stacks (FAST17) 10</p>
    <p>Experiment Settings l Machines</p>
    <p>u1 Intel Xeon quad-core 2.4GHz CPU, 4GB RAM uDevices: SAS, SATA, SSD</p>
    <p>l Filebench uWorkloads</p>
    <p>Mailserver, Fileserver, Webserver uFileset size: 10GB (2.5  RAM size) uRunning time</p>
    <p>2,000s for Mailserver; otherwise 800s</p>
    <p>l 10+ runs for each experiment 3/2/2017 On the Performance Variation in Modern Storage Stacks (FAST17)</p>
    <p>Performance Variation: Overview</p>
    <p>R e la</p>
    <p>ti v</p>
    <p>e R</p>
    <p>a n</p>
    <p>g e</p>
    <p>Avg. Throughput (IOPS) (log10)</p>
    <p>Ext4-HDD Ext4-SSD</p>
    <p>XFS-HDD XFS-SSD</p>
    <p>Btrfs-HDD Btrfs-SSD</p>
    <p>Workload: Mailserver</p>
    <p>On the Performance Variation in Modern Storage Stacks (FAST17) 12</p>
    <p>Performance Variation: Overview</p>
    <p>R e la</p>
    <p>ti v</p>
    <p>e R</p>
    <p>a n</p>
    <p>g e</p>
    <p>Avg. Throughput (IOPS) (log10)</p>
    <p>Ext4-HDD Ext4-SSD</p>
    <p>XFS-HDD XFS-SSD</p>
    <p>Btrfs-HDD Btrfs-SSD</p>
    <p>Workload: Mailserver</p>
    <p>On the Performance Variation in Modern Storage Stacks (FAST17)</p>
  </div>
  <div class="page">
    <p>Performance Variation: Overview</p>
    <p>R e la</p>
    <p>ti v</p>
    <p>e R</p>
    <p>a n</p>
    <p>g e</p>
    <p>Avg. Throughput (IOPS) (log10)</p>
    <p>Ext4-HDD Ext4-SSD</p>
    <p>XFS-HDD XFS-SSD</p>
    <p>Btrfs-HDD Btrfs-SSD</p>
    <p>Workload: Mailserver</p>
    <p>On the Performance Variation in Modern Storage Stacks (FAST17) 14</p>
    <p>Performance Variation: Overview</p>
    <p>R e la</p>
    <p>ti v</p>
    <p>e R</p>
    <p>a n</p>
    <p>g e</p>
    <p>Avg. Throughput (IOPS) (log10)</p>
    <p>Ext4-HDD Ext4-SSD</p>
    <p>XFS-HDD XFS-SSD</p>
    <p>Btrfs-HDD Btrfs-SSD</p>
    <p>Workload: Mailserver</p>
    <p>On the Performance Variation in Modern Storage Stacks (FAST17)</p>
    <p>Performance Variation: Overview</p>
    <p>R e la</p>
    <p>ti v</p>
    <p>e R</p>
    <p>a n</p>
    <p>g e</p>
    <p>Avg. Throughput (IOPS) (log10)</p>
    <p>Ext4-HDD Ext4-SSD</p>
    <p>XFS-HDD XFS-SSD</p>
    <p>Btrfs-HDD Btrfs-SSD</p>
    <p>Workload: Mailserver</p>
    <p>On the Performance Variation in Modern Storage Stacks (FAST17) 16</p>
    <p>Performance Variation: Overview</p>
    <p>R e la</p>
    <p>ti v</p>
    <p>e R</p>
    <p>a n</p>
    <p>g e</p>
    <p>Avg. Throughput (IOPS) (log10)</p>
    <p>Ext4-HDD Ext4-SSD</p>
    <p>XFS-HDD XFS-SSD</p>
    <p>Btrfs-HDD Btrfs-SSD</p>
    <p>Workload: Mailserver</p>
    <p>On the Performance Variation in Modern Storage Stacks (FAST17)</p>
    <p>Performance Variation: Overview</p>
    <p>R e la</p>
    <p>ti v</p>
    <p>e R</p>
    <p>a n</p>
    <p>g e</p>
    <p>Avg. Throughput (IOPS) (log10)</p>
    <p>Ext4-HDD Ext4-SSD</p>
    <p>XFS-HDD XFS-SSD</p>
    <p>Btrfs-HDD Btrfs-SSD</p>
    <p>Workload: Mailserver</p>
    <p>On the Performance Variation in Modern Storage Stacks (FAST17) 18</p>
    <p>Performance Variation: Overview</p>
    <p>R e la</p>
    <p>ti v</p>
    <p>e R</p>
    <p>a n</p>
    <p>g e</p>
    <p>Avg. Throughput (IOPS) (log10)</p>
    <p>Ext4-HDD Ext4-SSD</p>
    <p>XFS-HDD XFS-SSD</p>
    <p>Btrfs-HDD Btrfs-SSD</p>
    <p>Workload: Mailserver</p>
    <p>On the Performance Variation in Modern Storage Stacks (FAST17)</p>
  </div>
  <div class="page">
    <p>Performance Variation: Overview</p>
    <p>R e la</p>
    <p>ti v</p>
    <p>e R</p>
    <p>a n</p>
    <p>g e</p>
    <p>Avg. Throughput (IOPS) (log10)</p>
    <p>Ext4-HDD Ext4-SSD</p>
    <p>XFS-HDD XFS-SSD</p>
    <p>Btrfs-HDD Btrfs-SSD</p>
    <p>Workload: Mailserver</p>
    <p>HDD l Throughput</p>
    <p>u 200 ~ 2,000 l Range</p>
    <p>u Up to 42%</p>
    <p>On the Performance Variation in Modern Storage Stacks (FAST17) 20</p>
    <p>Performance Variation: Overview</p>
    <p>R e la</p>
    <p>ti v</p>
    <p>e R</p>
    <p>a n</p>
    <p>g e</p>
    <p>Avg. Throughput (IOPS) (log10)</p>
    <p>Ext4-HDD Ext4-SSD</p>
    <p>XFS-HDD XFS-SSD</p>
    <p>Btrfs-HDD Btrfs-SSD</p>
    <p>Workload: Mailserver</p>
    <p>HDD l Throughput</p>
    <p>u 200 ~ 2,000 l Range</p>
    <p>u Up to 42%</p>
    <p>SSD l Throughput</p>
    <p>u 2,000 ~ 20,000</p>
    <p>l Range u Up to 11%</p>
    <p>On the Performance Variation in Modern Storage Stacks (FAST17)</p>
    <p>Performance Variation: Overview</p>
    <p>R e la</p>
    <p>ti v</p>
    <p>e R</p>
    <p>a n</p>
    <p>g e</p>
    <p>Avg. Throughput (IOPS) (log10)</p>
    <p>Ext4-HDD Ext4-SSD</p>
    <p>XFS-HDD XFS-SSD</p>
    <p>Btrfs-HDD Btrfs-SSD</p>
    <p>Workload: Mailserver</p>
    <p>Ext4 l Up to 42% l Most above</p>
    <p>On the Performance Variation in Modern Storage Stacks (FAST17) 22</p>
    <p>Performance Variation: Overview</p>
    <p>R e la</p>
    <p>ti v</p>
    <p>e R</p>
    <p>a n</p>
    <p>g e</p>
    <p>Avg. Throughput (IOPS) (log10)</p>
    <p>Ext4-HDD Ext4-SSD</p>
    <p>XFS-HDD XFS-SSD</p>
    <p>Btrfs-HDD Btrfs-SSD</p>
    <p>Workload: Mailserver</p>
    <p>Ext4 l Up to 42% l Most above</p>
    <p>l Most under 18%</p>
    <p>On the Performance Variation in Modern Storage Stacks (FAST17)</p>
    <p>Performance Variation: Overview</p>
    <p>R e la</p>
    <p>ti v</p>
    <p>e R</p>
    <p>a n</p>
    <p>g e</p>
    <p>Avg. Throughput (IOPS) (log10)</p>
    <p>Ext4-HDD Ext4-SSD</p>
    <p>XFS-HDD XFS-SSD</p>
    <p>Btrfs-HDD Btrfs-SSD</p>
    <p>Workload: Mailserver</p>
    <p>Ext4 l Up to 42% l Most above</p>
    <p>l Most under 18%</p>
    <p>Btrfs l Most under</p>
    <p>On the Performance Variation in Modern Storage Stacks (FAST17) 24</p>
    <p>R e la</p>
    <p>ti v</p>
    <p>e R</p>
    <p>a n</p>
    <p>g e</p>
    <p>Sampled Configurations</p>
    <p>Mailserver Fileserver Webserver</p>
    <p>Performance Variation: Overview (cont.)</p>
  </div>
  <div class="page">
    <p>R e la</p>
    <p>ti v</p>
    <p>e R</p>
    <p>a n</p>
    <p>g e</p>
    <p>Sampled Configurations</p>
    <p>Mailserver Fileserver Webserver</p>
    <p>Performance Variation: Overview (cont.)</p>
    <p>R e la</p>
    <p>ti v</p>
    <p>e R</p>
    <p>a n</p>
    <p>g e</p>
    <p>Sampled Configurations</p>
    <p>Mailserver Fileserver Webserver</p>
    <p>Performance Variation: Overview (cont.)</p>
    <p>R e la</p>
    <p>ti v e R</p>
    <p>a n g e</p>
    <p>Sampled Configurations</p>
    <p>Mailserver Fileserver Webserver</p>
    <p>Performance Variation: Overview (cont.)</p>
    <p>R e la</p>
    <p>ti v e R</p>
    <p>a n g e</p>
    <p>Sampled Configurations</p>
    <p>Mailserver Fileserver Webserver</p>
    <p>Performance Variation: Overview (cont.)</p>
    <p>R e la</p>
    <p>ti v</p>
    <p>e R</p>
    <p>a n</p>
    <p>g e</p>
    <p>Sampled Configurations</p>
    <p>Mailserver Fileserver Webserver</p>
    <p>Performance Variation: Overview (cont.)</p>
    <p>R e la</p>
    <p>ti v</p>
    <p>e R</p>
    <p>a n</p>
    <p>g e</p>
    <p>Sampled Configurations</p>
    <p>Mailserver Fileserver Webserver</p>
    <p>Performance Variation: Overview (cont.)</p>
  </div>
  <div class="page">
    <p>R e la</p>
    <p>ti v</p>
    <p>e R</p>
    <p>a n</p>
    <p>g e</p>
    <p>Sampled Configurations</p>
    <p>Mailserver Fileserver Webserver</p>
    <p>Performance Variation: Overview (cont.)</p>
    <p>Ext4 Case Study</p>
    <p>baseline</p>
    <p>T h</p>
    <p>ro u</p>
    <p>g h</p>
    <p>p u</p>
    <p>t (I</p>
    <p>O P</p>
    <p>S )</p>
    <p>Workload: Fileserver</p>
    <p>On the Performance Variation in Modern Storage Stacks (FAST17)</p>
    <p>Ext4 Case Study</p>
    <p>baseline</p>
    <p>T h</p>
    <p>ro u</p>
    <p>g h</p>
    <p>p u</p>
    <p>t (I</p>
    <p>O P</p>
    <p>S )</p>
    <p>Workload: Fileserver</p>
    <p>On the Performance Variation in Modern Storage Stacks (FAST17) 34</p>
    <p>Ext4 Case Study</p>
    <p>baseline</p>
    <p>T h</p>
    <p>ro u</p>
    <p>g h</p>
    <p>p u</p>
    <p>t (I</p>
    <p>O P</p>
    <p>S )</p>
    <p>Workload: Fileserver</p>
    <p>On the Performance Variation in Modern Storage Stacks (FAST17)</p>
    <p>max 1st quartile median 3rd quartile</p>
    <p>min</p>
    <p>Ext4 Case Study</p>
    <p>baseline</p>
    <p>T h</p>
    <p>ro u</p>
    <p>g h</p>
    <p>p u</p>
    <p>t (I</p>
    <p>O P</p>
    <p>S )</p>
    <p>Workload: Fileserver</p>
    <p>On the Performance Variation in Modern Storage Stacks (FAST17)</p>
    <p>actual data points</p>
    <p>Ext4 Case Study</p>
    <p>baseline</p>
    <p>T h</p>
    <p>ro u</p>
    <p>g h</p>
    <p>p u</p>
    <p>t (I</p>
    <p>O P</p>
    <p>S )</p>
    <p>l baseline</p>
    <p>Workload: Fileserver</p>
    <p>On the Performance Variation in Modern Storage Stacks (FAST17)</p>
  </div>
  <div class="page">
    <p>Ext4 Case Study</p>
    <p>baseline</p>
    <p>T h</p>
    <p>ro u</p>
    <p>g h</p>
    <p>p u</p>
    <p>t (I</p>
    <p>O P</p>
    <p>S )</p>
    <p>l baseline l +no_lazy</p>
    <p>u mkfs.ext4 E lazy_itable_init=0</p>
    <p>Workload: Fileserver</p>
    <p>On the Performance Variation in Modern Storage Stacks (FAST17)</p>
    <p>baseline</p>
    <p>+no_lazy</p>
    <p>T h</p>
    <p>ro u</p>
    <p>g h</p>
    <p>p u</p>
    <p>t (I</p>
    <p>O P</p>
    <p>S )</p>
    <p>Ext4 Case Study</p>
    <p>baseline</p>
    <p>T h</p>
    <p>ro u</p>
    <p>g h</p>
    <p>p u</p>
    <p>t (I</p>
    <p>O P</p>
    <p>S )</p>
    <p>l baseline l +no_lazy</p>
    <p>u mkfs.ext4 E lazy_itable_init=0</p>
    <p>Workload: Fileserver</p>
    <p>On the Performance Variation in Modern Storage Stacks (FAST17)</p>
    <p>baseline</p>
    <p>+no_lazy</p>
    <p>T h</p>
    <p>ro u</p>
    <p>g h</p>
    <p>p u</p>
    <p>t (I</p>
    <p>O P</p>
    <p>S )</p>
    <p>Ext4 Case Study</p>
    <p>baseline</p>
    <p>T h</p>
    <p>ro u</p>
    <p>g h</p>
    <p>p u</p>
    <p>t (I</p>
    <p>O P</p>
    <p>S )</p>
    <p>l baseline l +no_lazy</p>
    <p>u mkfs.ext4 E lazy_itable_init=0</p>
    <p>l +umount u sync  umount + mount</p>
    <p>Workload: Fileserver</p>
    <p>On the Performance Variation in Modern Storage Stacks (FAST17)</p>
    <p>baseline</p>
    <p>+no_lazy</p>
    <p>T h</p>
    <p>ro u</p>
    <p>g h</p>
    <p>p u</p>
    <p>t (I</p>
    <p>O P</p>
    <p>S )</p>
    <p>baseline</p>
    <p>+no_lazy</p>
    <p>+um ount</p>
    <p>T h</p>
    <p>ro u</p>
    <p>g h</p>
    <p>p u</p>
    <p>t (I</p>
    <p>O P</p>
    <p>S )</p>
    <p>Ext4 Case Study</p>
    <p>baseline</p>
    <p>T h</p>
    <p>ro u</p>
    <p>g h</p>
    <p>p u</p>
    <p>t (I</p>
    <p>O P</p>
    <p>S )</p>
    <p>l baseline l +no_lazy</p>
    <p>u mkfs.ext4 E lazy_itable_init=0</p>
    <p>l +umount u sync  umount + mount</p>
    <p>Workload: Fileserver</p>
    <p>On the Performance Variation in Modern Storage Stacks (FAST17)</p>
    <p>baseline</p>
    <p>+no_lazy</p>
    <p>T h</p>
    <p>ro u</p>
    <p>g h</p>
    <p>p u</p>
    <p>t (I</p>
    <p>O P</p>
    <p>S )</p>
    <p>baseline</p>
    <p>+no_lazy</p>
    <p>+um ount</p>
    <p>T h</p>
    <p>ro u</p>
    <p>g h</p>
    <p>p u</p>
    <p>t (I</p>
    <p>O P</p>
    <p>S )</p>
    <p>Ext4 Case Study</p>
    <p>baseline</p>
    <p>T h</p>
    <p>ro u</p>
    <p>g h</p>
    <p>p u</p>
    <p>t (I</p>
    <p>O P</p>
    <p>S )</p>
    <p>l baseline l +no_lazy</p>
    <p>u mkfs.ext4 E lazy_itable_init=0</p>
    <p>l +umount u sync  umount + mount</p>
    <p>l +alloc u Preserve layout</p>
    <p>u e.g., dd if=/dev/sde1</p>
    <p>Workload: Fileserver</p>
    <p>On the Performance Variation in Modern Storage Stacks (FAST17)</p>
    <p>baseline</p>
    <p>+no_lazy</p>
    <p>T h</p>
    <p>ro u</p>
    <p>g h</p>
    <p>p u</p>
    <p>t (I</p>
    <p>O P</p>
    <p>S )</p>
    <p>baseline</p>
    <p>+no_lazy</p>
    <p>+um ount</p>
    <p>T h</p>
    <p>ro u</p>
    <p>g h</p>
    <p>p u</p>
    <p>t (I</p>
    <p>O P</p>
    <p>S )</p>
    <p>baseline</p>
    <p>+no_lazy</p>
    <p>+um ount</p>
    <p>+alloc</p>
    <p>T h</p>
    <p>ro u</p>
    <p>g h</p>
    <p>p u</p>
    <p>t (I</p>
    <p>O P</p>
    <p>S )</p>
    <p>Ext4 Case Study</p>
    <p>baseline</p>
    <p>T h</p>
    <p>ro u</p>
    <p>g h</p>
    <p>p u</p>
    <p>t (I</p>
    <p>O P</p>
    <p>S )</p>
    <p>l baseline l +no_lazy</p>
    <p>u mkfs.ext4 E lazy_itable_init=0</p>
    <p>l +umount u sync  umount + mount</p>
    <p>l +alloc u Preserve layout</p>
    <p>u e.g., dd if=/dev/sde1</p>
    <p>Workload: Fileserver</p>
    <p>On the Performance Variation in Modern Storage Stacks (FAST17)</p>
    <p>baseline</p>
    <p>+no_lazy</p>
    <p>T h</p>
    <p>ro u</p>
    <p>g h</p>
    <p>p u</p>
    <p>t (I</p>
    <p>O P</p>
    <p>S )</p>
    <p>baseline</p>
    <p>+no_lazy</p>
    <p>+um ount</p>
    <p>T h</p>
    <p>ro u</p>
    <p>g h</p>
    <p>p u</p>
    <p>t (I</p>
    <p>O P</p>
    <p>S )</p>
    <p>baseline</p>
    <p>+no_lazy</p>
    <p>+um ount</p>
    <p>+alloc</p>
    <p>T h</p>
    <p>ro u</p>
    <p>g h</p>
    <p>p u</p>
    <p>t (I</p>
    <p>O P</p>
    <p>S )</p>
  </div>
  <div class="page">
    <p>Ext4 Case Study</p>
    <p>baseline</p>
    <p>T h</p>
    <p>ro u</p>
    <p>g h</p>
    <p>p u</p>
    <p>t (I</p>
    <p>O P</p>
    <p>S )</p>
    <p>l baseline l +no_lazy</p>
    <p>u mkfs.ext4 E lazy_itable_init=0</p>
    <p>l +umount u sync  umount + mount</p>
    <p>l +alloc u Preserve layout</p>
    <p>u e.g., dd if=/dev/sde1</p>
    <p>Workload: Fileserver</p>
    <p>On the Performance Variation in Modern Storage Stacks (FAST17)</p>
    <p>baseline</p>
    <p>+no_lazy</p>
    <p>T h</p>
    <p>ro u</p>
    <p>g h</p>
    <p>p u</p>
    <p>t (I</p>
    <p>O P</p>
    <p>S )</p>
    <p>baseline</p>
    <p>+no_lazy</p>
    <p>+um ount</p>
    <p>T h</p>
    <p>ro u</p>
    <p>g h</p>
    <p>p u</p>
    <p>t (I</p>
    <p>O P</p>
    <p>S )</p>
    <p>baseline</p>
    <p>+no_lazy</p>
    <p>+um ount</p>
    <p>+alloc</p>
    <p>T h</p>
    <p>ro u</p>
    <p>g h</p>
    <p>p u</p>
    <p>t (I</p>
    <p>O P</p>
    <p>S )</p>
    <p>T h ro</p>
    <p>u g h p u t</p>
    <p>(I O</p>
    <p>P S</p>
    <p>)</p>
    <p>Block Number</p>
    <p>default alloc. policy</p>
    <p>Ext4 Case Study (cont.)</p>
    <p>Workload: Fileserver</p>
    <p>On the Performance Variation in Modern Storage Stacks (FAST17)</p>
    <p>T h ro</p>
    <p>u g h p u t</p>
    <p>(I O</p>
    <p>P S</p>
    <p>)</p>
    <p>Block Number</p>
    <p>default alloc. policy</p>
    <p>Ext4 Case Study (cont.)</p>
    <p>Workload: Fileserver</p>
    <p>On the Performance Variation in Modern Storage Stacks (FAST17) 46</p>
    <p>T h ro</p>
    <p>u g h p u t</p>
    <p>(I O</p>
    <p>P S</p>
    <p>)</p>
    <p>Block Number</p>
    <p>default alloc. policy</p>
    <p>Ext4 Case Study (cont.)</p>
    <p>Workload: Fileserver</p>
    <p>On the Performance Variation in Modern Storage Stacks (FAST17)</p>
    <p>T h ro</p>
    <p>u g h p u t</p>
    <p>(I O</p>
    <p>P S</p>
    <p>)</p>
    <p>Block Number</p>
    <p>default alloc. policy</p>
    <p>Ext4 Case Study (cont.)</p>
    <p>Workload: Fileserver</p>
    <p>On the Performance Variation in Modern Storage Stacks (FAST17) 48</p>
    <p>T h ro</p>
    <p>u g h p u t</p>
    <p>(I O</p>
    <p>P S</p>
    <p>)</p>
    <p>Block Number</p>
    <p>default alloc. policy</p>
    <p>Ext4 Case Study (cont.)</p>
    <p>Workload: Fileserver</p>
    <p>On the Performance Variation in Modern Storage Stacks (FAST17)</p>
  </div>
  <div class="page">
    <p>T h ro</p>
    <p>u g h p u t</p>
    <p>(I O</p>
    <p>P S</p>
    <p>)</p>
    <p>Block Number</p>
    <p>default alloc. policy</p>
    <p>Ext4 Case Study (cont.)</p>
    <p>Workload: Fileserver</p>
    <p>On the Performance Variation in Modern Storage Stacks (FAST17)</p>
    <p>Ext4 Case Study (cont.)</p>
    <p>T h</p>
    <p>ro u</p>
    <p>g h</p>
    <p>p u</p>
    <p>t (I</p>
    <p>O P</p>
    <p>S )</p>
    <p>Block Number</p>
    <p>default alloc. policy s_hash_seed=null</p>
    <p>Workload: Fileserver</p>
    <p>On the Performance Variation in Modern Storage Stacks (FAST17)</p>
    <p>Throughput vs. Time</p>
    <p>T hr</p>
    <p>ou gh</p>
    <p>pu t (</p>
    <p>IO PS</p>
    <p>)</p>
    <p>Time (hours)</p>
    <p>Ext4 Btrfs XFS</p>
    <p>Workload: Fileserver</p>
    <p>On the Performance Variation in Modern Storage Stacks (FAST17)</p>
    <p>Window Size: 120s</p>
    <p>Throughput vs. Time</p>
    <p>T hr</p>
    <p>ou gh</p>
    <p>pu t (</p>
    <p>IO PS</p>
    <p>)</p>
    <p>Time (hours)</p>
    <p>Ext4 Btrfs XFS</p>
    <p>Workload: Fileserver</p>
    <p>On the Performance Variation in Modern Storage Stacks (FAST17)</p>
    <p>Window Size: 120s</p>
    <p>Throughput vs. Time</p>
    <p>T hr</p>
    <p>ou gh</p>
    <p>pu t (</p>
    <p>IO PS</p>
    <p>)</p>
    <p>Time (hours)</p>
    <p>Ext4 Btrfs XFS</p>
    <p>Workload: Fileserver</p>
    <p>On the Performance Variation in Modern Storage Stacks (FAST17)</p>
    <p>Window Size: 120s</p>
    <p>Throughput vs. Time</p>
    <p>T hr</p>
    <p>ou gh</p>
    <p>pu t (</p>
    <p>IO PS</p>
    <p>)</p>
    <p>Time (hours)</p>
    <p>Ext4 Btrfs XFS</p>
    <p>Workload: Fileserver</p>
    <p>On the Performance Variation in Modern Storage Stacks (FAST17)</p>
    <p>Window Size: 120s</p>
  </div>
  <div class="page">
    <p>Throughput vs. Time</p>
    <p>T hr</p>
    <p>ou gh</p>
    <p>pu t (</p>
    <p>IO PS</p>
    <p>)</p>
    <p>Time (hours)</p>
    <p>Ext4 Btrfs XFS</p>
    <p>Workload: Fileserver</p>
    <p>On the Performance Variation in Modern Storage Stacks (FAST17)</p>
    <p>Window Size: 120s</p>
    <p>Throughput vs. Time</p>
    <p>Workload: Fileserver</p>
    <p>l Ext4 u 14% ~ 43%</p>
    <p>T hr</p>
    <p>ou gh</p>
    <p>pu t (</p>
    <p>IO PS</p>
    <p>)</p>
    <p>Time (hours)</p>
    <p>Ext4 Btrfs XFS</p>
    <p>On the Performance Variation in Modern Storage Stacks (FAST17)</p>
    <p>Window Size: 120s</p>
    <p>Throughput vs. Time</p>
    <p>Workload: Fileserver</p>
    <p>l Ext4 u 14% ~ 43%</p>
    <p>l Btrfs u 2% ~ 23%</p>
    <p>T hr</p>
    <p>ou gh</p>
    <p>pu t (</p>
    <p>IO PS</p>
    <p>)</p>
    <p>Time (hours)</p>
    <p>Ext4 Btrfs XFS</p>
    <p>On the Performance Variation in Modern Storage Stacks (FAST17)</p>
    <p>Window Size: 120s</p>
    <p>Throughput vs. Time</p>
    <p>Workload: Fileserver</p>
    <p>l Ext4 u 14% ~ 43%</p>
    <p>l Btrfs u 2% ~ 23%</p>
    <p>l XFS u 7% ~ 65%</p>
    <p>T hr</p>
    <p>ou gh</p>
    <p>pu t (</p>
    <p>IO PS</p>
    <p>)</p>
    <p>Time (hours)</p>
    <p>Ext4 Btrfs XFS</p>
    <p>On the Performance Variation in Modern Storage Stacks (FAST17)</p>
    <p>Window Size: 120s</p>
    <p>Throughput vs. Time (cont.)</p>
    <p>C u m</p>
    <p>. P</p>
    <p>c t.</p>
    <p>o f</p>
    <p>T im</p>
    <p>e W</p>
    <p>in d o w</p>
    <p>s (%</p>
    <p>)</p>
    <p>Relative Range (%)</p>
    <p>Ext4 Workload: Fileserver</p>
    <p>On the Performance Variation in Modern Storage Stacks (FAST17) 60</p>
    <p>Throughput vs. Time (cont.)</p>
    <p>C u m</p>
    <p>. P</p>
    <p>c t.</p>
    <p>o f</p>
    <p>T im</p>
    <p>e W</p>
    <p>in d o w</p>
    <p>s (%</p>
    <p>)</p>
    <p>Relative Range (%)</p>
    <p>Ext4 Workload: Fileserver</p>
    <p>On the Performance Variation in Modern Storage Stacks (FAST17)</p>
  </div>
  <div class="page">
    <p>Throughput vs. Time (cont.)</p>
    <p>C u m</p>
    <p>. P</p>
    <p>c t.</p>
    <p>o f</p>
    <p>T im</p>
    <p>e W</p>
    <p>in d o w</p>
    <p>s (%</p>
    <p>)</p>
    <p>Relative Range (%)</p>
    <p>Ext4 Workload: Fileserver</p>
    <p>On the Performance Variation in Modern Storage Stacks (FAST17) 62</p>
    <p>Throughput vs. Time (cont.)</p>
    <p>C u m</p>
    <p>. P</p>
    <p>c t.</p>
    <p>o f</p>
    <p>T im</p>
    <p>e W</p>
    <p>in d o w</p>
    <p>s (%</p>
    <p>)</p>
    <p>Relative Range (%)</p>
    <p>Ext4 Workload: Fileserver</p>
    <p>On the Performance Variation in Modern Storage Stacks (FAST17)</p>
    <p>Throughput vs. Time (cont.)</p>
    <p>C u m</p>
    <p>. P</p>
    <p>c t.</p>
    <p>o f</p>
    <p>T im</p>
    <p>e W</p>
    <p>in d o w</p>
    <p>s (%</p>
    <p>)</p>
    <p>Relative Range (%)</p>
    <p>Ext4 Workload: Fileserver</p>
    <p>On the Performance Variation in Modern Storage Stacks (FAST17) 64</p>
    <p>Throughput vs. Time (cont.)</p>
    <p>C u m</p>
    <p>. P</p>
    <p>c t.</p>
    <p>o f</p>
    <p>T im</p>
    <p>e W</p>
    <p>in d o w</p>
    <p>s (%</p>
    <p>)</p>
    <p>Relative Range (%)</p>
    <p>C u m</p>
    <p>. P</p>
    <p>c t.</p>
    <p>o f</p>
    <p>T im</p>
    <p>e W</p>
    <p>in d o w</p>
    <p>s (%</p>
    <p>)</p>
    <p>Relative Range (%)</p>
    <p>Ext4 XFS Workload: Fileserver</p>
    <p>On the Performance Variation in Modern Storage Stacks (FAST17)</p>
    <p>Throughput vs. Time (cont.)</p>
    <p>C u m</p>
    <p>. P</p>
    <p>c t.</p>
    <p>o f</p>
    <p>T im</p>
    <p>e W</p>
    <p>in d o w</p>
    <p>s (%</p>
    <p>)</p>
    <p>Relative Range (%)</p>
    <p>C u m</p>
    <p>. P</p>
    <p>c t.</p>
    <p>o f</p>
    <p>T im</p>
    <p>e W</p>
    <p>in d o w</p>
    <p>s (%</p>
    <p>)</p>
    <p>Relative Range (%)</p>
    <p>Ext4 XFS Workload: Fileserver</p>
    <p>On the Performance Variation in Modern Storage Stacks (FAST17) 66</p>
    <p>Throughput vs. Time (cont.)</p>
    <p>C u m</p>
    <p>. P</p>
    <p>c t.</p>
    <p>o f</p>
    <p>T im</p>
    <p>e W</p>
    <p>in d o w</p>
    <p>s (%</p>
    <p>)</p>
    <p>Relative Range (%)</p>
    <p>C u m</p>
    <p>. P</p>
    <p>c t.</p>
    <p>o f</p>
    <p>T im</p>
    <p>e W</p>
    <p>in d o w</p>
    <p>s (%</p>
    <p>)</p>
    <p>Relative Range (%)</p>
    <p>Ext4 XFS Workload: Fileserver</p>
    <p>On the Performance Variation in Modern Storage Stacks (FAST17)</p>
  </div>
  <div class="page">
    <p>Latency Variation</p>
    <p>C u m</p>
    <p>. P</p>
    <p>c t.</p>
    <p>o f</p>
    <p>L a te</p>
    <p>n c y (</p>
    <p>% )</p>
    <p>Latency (ms) (log10)</p>
    <p>read</p>
    <p>l Ext4 - HDD u 32%</p>
    <p>l Fileserver u create u delete u open u read u stat u write</p>
    <p>On the Performance Variation in Modern Storage Stacks (FAST17) 68</p>
    <p>Latency Variation</p>
    <p>C u m</p>
    <p>. P</p>
    <p>c t.</p>
    <p>o f</p>
    <p>L a te</p>
    <p>n c y (</p>
    <p>% )</p>
    <p>Latency (ms) (log10)</p>
    <p>read</p>
    <p>l Ext4 - HDD u 32%</p>
    <p>l Fileserver u create u delete u open u read u stat u write</p>
    <p>On the Performance Variation in Modern Storage Stacks (FAST17)</p>
    <p>Latency Variation</p>
    <p>C u m</p>
    <p>. P</p>
    <p>c t.</p>
    <p>o f</p>
    <p>L a te</p>
    <p>n c y (</p>
    <p>% )</p>
    <p>Latency (ms) (log10)</p>
    <p>read</p>
    <p>l Ext4 - HDD u 32%</p>
    <p>l Fileserver u create u delete u open u read u stat u write</p>
    <p>On the Performance Variation in Modern Storage Stacks (FAST17) 70</p>
    <p>Latency Variation</p>
    <p>C u m</p>
    <p>. P</p>
    <p>c t.</p>
    <p>o f</p>
    <p>L a te</p>
    <p>n c y (</p>
    <p>% )</p>
    <p>Latency (ms) (log10)</p>
    <p>C u m</p>
    <p>. P</p>
    <p>c t.</p>
    <p>o f</p>
    <p>L a te</p>
    <p>n c y (</p>
    <p>% )</p>
    <p>Latency (ms) (log10)</p>
    <p>create read</p>
    <p>On the Performance Variation in Modern Storage Stacks (FAST17)</p>
    <p>Conclusions l First systematic study of storage</p>
    <p>performance variations l Characterization from various perspectives l Randomization in file systems l Lazy initialization and background activities</p>
    <p>contribute to instability l We will make datasets public</p>
    <p>Future Work l Aged file systems l More workloads/benchmark tools l More Devices</p>
    <p>uNear full-capacity SSDs uPCM, SMR, etc.</p>
    <p>l More storage layers uRAID, LVM, etc.</p>
  </div>
  <div class="page">
    <p>On the Performance Variation in Modern Storage Stacks</p>
    <p>Zhen Cao1, Vasily Tarasov2, Hari Prasath Raman1, Dean Hildebrand2, and Erez Zadok1</p>
    <p>2017 Stony Brook University</p>
  </div>
</Presentation>

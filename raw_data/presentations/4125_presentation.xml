<?xml version="1.0" ?>
<Presentation>
  <div class="page">
    <p>C o</p>
    <p>m p</p>
    <p>r Sc</p>
    <p>ie n</p>
    <p>c e</p>
    <p>, Te</p>
    <p>xa s</p>
    <p>A &amp;</p>
    <p>M U</p>
    <p>n iv</p>
    <p>e rs</p>
    <p>ity Residual-Based Measurement of Peer and Link Lifetimes in Gnutella Networks ResidualResidual--Based Measurement of Peer Based Measurement of Peer and Link Lifetimes in Gnutella Networksand Link Lifetimes in Gnutella Networks</p>
    <p>XiaomingXiaoming WangWang Joint work with Joint work with ZhongmeiZhongmei Yao and Dmitri Yao and Dmitri LoguinovLoguinov Internet Research LabInternet Research Lab Computer Science DepartmentComputer Science Department Texas A&amp;M UniversityTexas A&amp;M University</p>
    <p>May 8, 2007May 8, 2007</p>
  </div>
  <div class="page">
    <p>C o</p>
    <p>m p</p>
    <p>r Sc</p>
    <p>ie n</p>
    <p>c e</p>
    <p>, Te</p>
    <p>xa s</p>
    <p>A &amp;</p>
    <p>M U</p>
    <p>n iv</p>
    <p>e rs</p>
    <p>ity</p>
    <p>AgendaAgendaAgenda</p>
    <p>Introduction</p>
    <p>Related work  Create-Based Method (CBM)</p>
    <p>Analysis of CBM</p>
    <p>Proposed method  Residual-Based Estimator (RIDE)</p>
    <p>Comparison of overhead</p>
    <p>Experiments</p>
    <p>Conclusion</p>
  </div>
  <div class="page">
    <p>C o</p>
    <p>m p</p>
    <p>r Sc</p>
    <p>ie n</p>
    <p>c e</p>
    <p>, Te</p>
    <p>xa s</p>
    <p>A &amp;</p>
    <p>M U</p>
    <p>n iv</p>
    <p>e rs</p>
    <p>ity</p>
    <p>IntroductionIntroductionIntroduction</p>
    <p>Current peer-to-peer networks  Have a large number of participating users  Are organized in a decentralized infrastructure</p>
    <p>Measurements are needed for validation purposes  Lifetime distribution  Inter-arrival delays  Availability  Topological information  Traffic flow rate</p>
    <p>our focus</p>
  </div>
  <div class="page">
    <p>C o</p>
    <p>m p</p>
    <p>r Sc</p>
    <p>ie n</p>
    <p>c e</p>
    <p>, Te</p>
    <p>xa s</p>
    <p>A &amp;</p>
    <p>M U</p>
    <p>n iv</p>
    <p>e rs</p>
    <p>ity</p>
    <p>Introduction  Lifetime SamplingIntroduction Introduction  Lifetime SamplingLifetime Sampling</p>
    <p>Measuring lifetime distribution  Collecting lifetime samples</p>
    <p>The lifetime of a user can be measured only if one observes both its birth and death</p>
    <p>To detect arrivals and departures, one must have periodic snapshots of the whole system</p>
  </div>
  <div class="page">
    <p>C o</p>
    <p>m p</p>
    <p>r Sc</p>
    <p>ie n</p>
    <p>c e</p>
    <p>, Te</p>
    <p>xa s</p>
    <p>A &amp;</p>
    <p>M U</p>
    <p>n iv</p>
    <p>e rs</p>
    <p>ity</p>
    <p>Introduction  Lifetime MeasurementIntroductionIntroduction  Lifetime MeasurementLifetime Measurement</p>
    <p>Take snapshots of the system every  time units</p>
    <p>Consider a user with lifetime   The user is captured in the</p>
    <p>snapshots taken at time points</p>
    <p>Then, the measured lifetime of this user is rounded up to</p>
    <p>Create-Based Method (CBM)</p>
    <p>...</p>
    <p>lifetime</p>
    <p>measured to be</p>
    <p>interval</p>
  </div>
  <div class="page">
    <p>C o</p>
    <p>m p</p>
    <p>r Sc</p>
    <p>ie n</p>
    <p>c e</p>
    <p>, Te</p>
    <p>xa s</p>
    <p>A &amp;</p>
    <p>M U</p>
    <p>n iv</p>
    <p>e rs</p>
    <p>ity</p>
    <p>AgendaAgendaAgenda</p>
    <p>Introduction</p>
    <p>Related work  Create-Based Method (CBM)</p>
    <p>Analysis of CBM</p>
    <p>Proposed method  Residual-Based Estimator (RIDE)</p>
    <p>Comparison of overhead</p>
    <p>Experiments</p>
    <p>Conclusion</p>
  </div>
  <div class="page">
    <p>C o</p>
    <p>m p</p>
    <p>r Sc</p>
    <p>ie n</p>
    <p>c e</p>
    <p>, Te</p>
    <p>xa s</p>
    <p>A &amp;</p>
    <p>M U</p>
    <p>n iv</p>
    <p>e rs</p>
    <p>ity</p>
    <p>Related Work  CBM SamplingRelated Work Related Work  CBM SamplingCBM Sampling</p>
    <p>first half second halfObservation window  start</p>
    <p>valid samples</p>
    <p>appears before</p>
    <p>disappears after</p>
    <p>longer than</p>
  </div>
  <div class="page">
    <p>C o</p>
    <p>m p</p>
    <p>r Sc</p>
    <p>ie n</p>
    <p>c e</p>
    <p>, Te</p>
    <p>xa s</p>
    <p>A &amp;</p>
    <p>M U</p>
    <p>n iv</p>
    <p>e rs</p>
    <p>ity</p>
    <p>Related Work  CBM EstimatorsRelated Work Related Work  CBM CBM EstimatorsEstimators</p>
    <p>Denote by   the estimated value for the probability a random lifetime  is no larger than  We want        to hold for discrete</p>
    <p>points</p>
    <p>Two CBM estimators have been proposed  Roselli 2000</p>
    <p>Saroiu 2002, Bustamante 2003, Stutzbach 2006 total valid samples</p>
    <p>valid samples smaller than</p>
    <p>total observed samples that appear in the first half window</p>
    <p>criteria of unbiased estimator CDF function</p>
  </div>
  <div class="page">
    <p>C o</p>
    <p>m p</p>
    <p>r Sc</p>
    <p>ie n</p>
    <p>c e</p>
    <p>, Te</p>
    <p>xa s</p>
    <p>A &amp;</p>
    <p>M U</p>
    <p>n iv</p>
    <p>e rs</p>
    <p>ity</p>
    <p>AgendaAgendaAgenda</p>
    <p>Introduction</p>
    <p>Related work  Create-Based Method (CBM)</p>
    <p>Analysis of CBM</p>
    <p>Proposed method  Residual-Based Estimator (RIDE)</p>
    <p>Comparison of overhead</p>
    <p>Experiments</p>
    <p>Conclusion</p>
  </div>
  <div class="page">
    <p>C o</p>
    <p>m p</p>
    <p>r Sc</p>
    <p>ie n</p>
    <p>c e</p>
    <p>, Te</p>
    <p>xa s</p>
    <p>A &amp;</p>
    <p>M U</p>
    <p>n iv</p>
    <p>e rs</p>
    <p>ity</p>
    <p>CBM  Round-off ErrorsCBM CBM  RoundRound--off Errorsoff Errors</p>
    <p>Round-off errors may cause bias in CBM</p>
    <p>MI SS</p>
    <p>ED</p>
    <p>measured to be</p>
    <p>measured to be</p>
    <p>measured to be</p>
    <p>INC ON</p>
    <p>SIS TE</p>
    <p>NT</p>
  </div>
  <div class="page">
    <p>C o</p>
    <p>m p</p>
    <p>r Sc</p>
    <p>ie n</p>
    <p>c e</p>
    <p>, Te</p>
    <p>xa s</p>
    <p>A &amp;</p>
    <p>M U</p>
    <p>n iv</p>
    <p>e rs</p>
    <p>ity</p>
    <p>CBM  Model CBM CBM  Model Model</p>
    <p>Theorem 1: Both CBM estimators differ from the actual lifetime distribution as follows</p>
    <p>where</p>
    <p>In fact, actual  can be recovered from  only if  are known  However,  can be neither measured in practice nor</p>
    <p>calculated without knowing</p>
    <p>Therefore,  as well as  are inherently biased</p>
    <p>probability of round-off errors</p>
    <p>probability</p>
    <p>not affected by T more accurate target</p>
  </div>
  <div class="page">
    <p>C o</p>
    <p>m p</p>
    <p>r Sc</p>
    <p>ie n</p>
    <p>c e</p>
    <p>, Te</p>
    <p>xa s</p>
    <p>A &amp;</p>
    <p>M U</p>
    <p>n iv</p>
    <p>e rs</p>
    <p>ity</p>
    <p>CBM  Simulations with  CBM CBM  Simulations with Simulations with</p>
    <p>Actual lifetimes follow a Pareto distribution ,   ,  hours,  hours</p>
    <p>min  min</p>
    <p>is non-Pareto Larger , more error</p>
  </div>
  <div class="page">
    <p>C o</p>
    <p>m p</p>
    <p>r Sc</p>
    <p>ie n</p>
    <p>c e</p>
    <p>, Te</p>
    <p>xa s</p>
    <p>A &amp;</p>
    <p>M U</p>
    <p>n iv</p>
    <p>e rs</p>
    <p>ity</p>
    <p>CBM  Simulations with CBM CBM  Simulations with Simulations with</p>
    <p>Estimator  preserves the Pareto shape  for small   But makes the Pareto scale  inaccurate</p>
    <p>min  min</p>
    <p>parallel to the actual distribution</p>
    <p>makes estimated  less accurate</p>
  </div>
  <div class="page">
    <p>C o</p>
    <p>m p</p>
    <p>r Sc</p>
    <p>ie n</p>
    <p>c e</p>
    <p>, Te</p>
    <p>xa s</p>
    <p>A &amp;</p>
    <p>M U</p>
    <p>n iv</p>
    <p>e rs</p>
    <p>ity</p>
    <p>AgendaAgendaAgenda</p>
    <p>Introduction</p>
    <p>Related work  Create-Based Method (CBM)</p>
    <p>Analysis of CBM</p>
    <p>Proposed method  Residual-Based Estimator (RIDE)</p>
    <p>Comparison of overhead</p>
    <p>Experiments</p>
    <p>Conclusion</p>
  </div>
  <div class="page">
    <p>C o</p>
    <p>m p</p>
    <p>r Sc</p>
    <p>ie n</p>
    <p>c e</p>
    <p>, Te</p>
    <p>xa s</p>
    <p>A &amp;</p>
    <p>M U</p>
    <p>n iv</p>
    <p>e rs</p>
    <p>ity</p>
    <p>Residual-Based Method  Motivation ResidualResidual--Based Method Based Method  Motivation Motivation</p>
    <p>Larger  implies more bias in CBM  It is desirable to crawl the system as frequently as</p>
    <p>possible</p>
    <p>Smaller  means more traffic overhead  Moreover,  cannot be smaller than the time</p>
    <p>needed for crawling the entire system</p>
    <p>There is an inherent tradeoff between accuracy and overhead in CBM</p>
    <p>We propose Residual-Based Estimator (RIDE)</p>
  </div>
  <div class="page">
    <p>C o</p>
    <p>m p</p>
    <p>r Sc</p>
    <p>ie n</p>
    <p>c e</p>
    <p>, Te</p>
    <p>xa s</p>
    <p>A &amp;</p>
    <p>M U</p>
    <p>n iv</p>
    <p>e rs</p>
    <p>ity</p>
    <p>RIDE  SamplingRIDE RIDE  SamplingSampling</p>
    <p>RIDE samples the residual lifetime  of users in   From time  until the user dies</p>
    <p>valid samples</p>
    <p>invalid samples</p>
    <p>{ }</p>
  </div>
  <div class="page">
    <p>C o</p>
    <p>m p</p>
    <p>r Sc</p>
    <p>ie n</p>
    <p>c e</p>
    <p>, Te</p>
    <p>xa s</p>
    <p>A &amp;</p>
    <p>M U</p>
    <p>n iv</p>
    <p>e rs</p>
    <p>ity</p>
    <p>RIDE  SubsamplingRIDE RIDE  SubsamplingSubsampling</p>
    <p>RIDE acquires all valid samples in the initial set  during the very first crawl  This allows us to randomly subsample the users in set</p>
    <p>Suppose we track the residuals of only  percent of the entire initial set   Significantly reduce traffic requirements</p>
    <p>Note that subsampling is not possible in CBM  It requires full system crawls to discover new users</p>
  </div>
  <div class="page">
    <p>C o</p>
    <p>m p</p>
    <p>r Sc</p>
    <p>ie n</p>
    <p>c e</p>
    <p>, Te</p>
    <p>xa s</p>
    <p>A &amp;</p>
    <p>M U</p>
    <p>n iv</p>
    <p>e rs</p>
    <p>ity</p>
    <p>RIDE  Estimator RIDE RIDE  Estimator Estimator</p>
    <p>RIDE has all valid samples starting from   It will never miss any sample nor have any round-off</p>
    <p>errors</p>
    <p>Theorem 2: The following equation defines an unbiased estimator</p>
    <p>PDF of residuals lifetimesestimated probability</p>
  </div>
  <div class="page">
    <p>C o</p>
    <p>m p</p>
    <p>r Sc</p>
    <p>ie n</p>
    <p>c e</p>
    <p>, Te</p>
    <p>xa s</p>
    <p>A &amp;</p>
    <p>M U</p>
    <p>n iv</p>
    <p>e rs</p>
    <p>ity</p>
    <p>RIDE  Simulations without SubsamplingRIDE RIDE  Simulations without Simulations without SubsamplingSubsampling</p>
    <p>Lifetimes are Pareto with ,      hours,  hours,  min,  M</p>
    <p>obtained from Pareto fit of the estimated curve</p>
  </div>
  <div class="page">
    <p>C o</p>
    <p>m p</p>
    <p>r Sc</p>
    <p>ie n</p>
    <p>c e</p>
    <p>, Te</p>
    <p>xa s</p>
    <p>A &amp;</p>
    <p>M U</p>
    <p>n iv</p>
    <p>e rs</p>
    <p>ity</p>
    <p>makes Pareto fit closer to the correct value</p>
    <p>RIDE  Simulations with SubsamplingRIDE RIDE  Simulations with Simulations with SubsamplingSubsampling</p>
    <p>Applying inverse average</p>
    <p>variable in the estimated tail</p>
    <p>before inverse average</p>
    <p>after inverse average</p>
  </div>
  <div class="page">
    <p>C o</p>
    <p>m p</p>
    <p>r Sc</p>
    <p>ie n</p>
    <p>c e</p>
    <p>, Te</p>
    <p>xa s</p>
    <p>A &amp;</p>
    <p>M U</p>
    <p>n iv</p>
    <p>e rs</p>
    <p>ity</p>
    <p>RIDE  Simulations with SubsamplingRIDE RIDE  Simulations with Simulations with SubsamplingSubsampling</p>
    <p>Applying inverse average</p>
    <p>gives pretty</p>
    <p>accurate estimation</p>
  </div>
  <div class="page">
    <p>C o</p>
    <p>m p</p>
    <p>r Sc</p>
    <p>ie n</p>
    <p>c e</p>
    <p>, Te</p>
    <p>xa s</p>
    <p>A &amp;</p>
    <p>M U</p>
    <p>n iv</p>
    <p>e rs</p>
    <p>ity</p>
    <p>AgendaAgendaAgenda</p>
    <p>Introduction</p>
    <p>Related work  Create-Based Method (CBM)</p>
    <p>Analysis of CBM</p>
    <p>Proposed method  Residual-Based Estimator (RIDE)</p>
    <p>Comparison of overhead</p>
    <p>Experiments</p>
    <p>Conclusion</p>
  </div>
  <div class="page">
    <p>C o</p>
    <p>m p</p>
    <p>r Sc</p>
    <p>ie n</p>
    <p>c e</p>
    <p>, Te</p>
    <p>xa s</p>
    <p>A &amp;</p>
    <p>M U</p>
    <p>n iv</p>
    <p>e rs</p>
    <p>ity</p>
    <p>Overhead ComparisonOverhead ComparisonOverhead Comparison</p>
    <p>Theorem 3: Total bandwidth overhead of sampling using CBM and RIDE is given by:</p>
    <p>Define   the ratio of overhead of CBM and RIDE</p>
    <p>cost of crawling a user</p>
    <p>users concurrently in the system</p>
    <p>residual CDF</p>
    <p>subsampling percentage</p>
  </div>
  <div class="page">
    <p>C o</p>
    <p>m p</p>
    <p>r Sc</p>
    <p>ie n</p>
    <p>c e</p>
    <p>, Te</p>
    <p>xa s</p>
    <p>A &amp;</p>
    <p>M U</p>
    <p>n iv</p>
    <p>e rs</p>
    <p>ity  Pareto lifetime with  hours,  min</p>
    <p>In fact, we can choose proper  based on the size of the initial set    is fixed at some pre-determined value, e.g.,</p>
    <p>Overhead Comparison (cont.)Overhead Comparison (cont.)Overhead Comparison (cont.)</p>
    <p>larger , more savings</p>
    <p>smaller , more savings</p>
    <p>RIDE saves overhead by a fact of more than 800</p>
  </div>
  <div class="page">
    <p>C o</p>
    <p>m p</p>
    <p>r Sc</p>
    <p>ie n</p>
    <p>c e</p>
    <p>, Te</p>
    <p>xa s</p>
    <p>A &amp;</p>
    <p>M U</p>
    <p>n iv</p>
    <p>e rs</p>
    <p>ity</p>
    <p>AgendaAgendaAgenda</p>
    <p>Introduction</p>
    <p>Related work  Create-Based Method (CBM)</p>
    <p>Analysis of CBM</p>
    <p>Proposed method  Residual-Based Estimator (RIDE)</p>
    <p>Comparison of overhead</p>
    <p>Experiments</p>
    <p>Conclusion</p>
  </div>
  <div class="page">
    <p>C o</p>
    <p>m p</p>
    <p>r Sc</p>
    <p>ie n</p>
    <p>c e</p>
    <p>, Te</p>
    <p>xa s</p>
    <p>A &amp;</p>
    <p>M U</p>
    <p>n iv</p>
    <p>e rs</p>
    <p>ity  Gnutella is fully distributed  However, it allows to query the neighbor list of any</p>
    <p>node</p>
    <p>Using Breadth-First-Search (BFS), we can take the snapshots of the users in the system  Peers , , ,</p>
    <p>Moreover, we can infer link information from query replies  Links</p>
    <p>Experiments  Gnutella Experiments Experiments  Gnutella Gnutella Query Request</p>
    <p>Neighbors:  Peer</p>
    <p>Crawler</p>
    <p>peer snapshot</p>
    <p>link snapshot</p>
  </div>
  <div class="page">
    <p>C o</p>
    <p>m p</p>
    <p>r Sc</p>
    <p>ie n</p>
    <p>c e</p>
    <p>, Te</p>
    <p>xa s</p>
    <p>A &amp;</p>
    <p>M U</p>
    <p>n iv</p>
    <p>e rs</p>
    <p>ity</p>
    <p>Experiments  Gnutella CrawlerExperiments Experiments  Gnutella CrawlerGnutella Crawler</p>
    <p>We implemented a Gnutella crawler  GnuSpider  BFS search among ultra-peers  Up to   simultaneous connections  contacted ultra-peers per min</p>
    <p>Entire system crawled in min on July 22, 2006  million users (million ultra and million leaves)</p>
    <p>First crawl obtains  responsive ultra-peers  Subsampling      min,  hours</p>
  </div>
  <div class="page">
    <p>C o</p>
    <p>m p</p>
    <p>r Sc</p>
    <p>ie n</p>
    <p>c e</p>
    <p>, Te</p>
    <p>xa s</p>
    <p>A &amp;</p>
    <p>M U</p>
    <p>n iv</p>
    <p>e rs</p>
    <p>ity</p>
    <p>Experiments  Lifetime DistributionsExperiments Experiments  Lifetime DistributionsLifetime Distributions</p>
    <p>responsive ultrapeer</p>
    <p>associated links</p>
    <p>Lifetimes are Pareto with very heavy-tailed    and  for ultrapeers and links</p>
  </div>
  <div class="page">
    <p>C o</p>
    <p>m p</p>
    <p>r Sc</p>
    <p>ie n</p>
    <p>c e</p>
    <p>, Te</p>
    <p>xa s</p>
    <p>A &amp;</p>
    <p>M U</p>
    <p>n iv</p>
    <p>e rs</p>
    <p>ity</p>
    <p>ConclusionConclusionConclusion</p>
    <p>CBM is generally biased for   It may not scale to large networks</p>
    <p>RIDE can reduce traffic overhead by several orders of magnitude  Generally more accurate and scalable than CBM</p>
    <p>Ultrapeer lifetimes are Pareto with        (Bustamante 2003)</p>
    <p>Link lifetimes exhibit much lighter tails with     More volatile than ultrapeers</p>
  </div>
</Presentation>

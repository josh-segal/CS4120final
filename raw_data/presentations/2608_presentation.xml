<?xml version="1.0" ?>
<Presentation>
  <div class="page">
    <p>Klotski: Reprioritizing Web Content to Improve User Experience on Mobile Devices</p>
    <p>Michael Butkiewicz, Daimeng Wang, Zhe Wu, Harsha V. Madhyastha, Vyas Sekar</p>
    <p>UC Riverside  University of Michigan  CMU</p>
  </div>
  <div class="page">
    <p>Motivation: Slow Mobile Web</p>
  </div>
  <div class="page">
    <p>Motivation: Slow Mobile Web</p>
  </div>
  <div class="page">
    <p>Motivation: Slow Mobile Web</p>
    <p>Slow page loads  Less users, Lost business</p>
  </div>
  <div class="page">
    <p>Wide Range of Existing Solutions</p>
  </div>
  <div class="page">
    <p>Wide Range of Existing Solutions</p>
    <p>Compression</p>
    <p>Caching</p>
  </div>
  <div class="page">
    <p>Mobile format web pages</p>
    <p>Wide Range of Existing Solutions</p>
    <p>Compression</p>
    <p>SPDY Caching</p>
  </div>
  <div class="page">
    <p>Mobile format web pages</p>
    <p>Wide Range of Existing Solutions</p>
    <p>Compression</p>
    <p>SPDY Caching</p>
    <p>Faster Networks Better web</p>
    <p>browsers</p>
  </div>
  <div class="page">
    <p>Mobile format web pages</p>
    <p>Wide Range of Existing Solutions</p>
    <p>Compression</p>
    <p>SPDY Caching</p>
    <p>Faster Networks Better web</p>
    <p>browsers</p>
    <p>Common Focus: Reduce Page Load Times</p>
  </div>
  <div class="page">
    <p>Reducing Load Time is Not Enough</p>
    <p>Rising Website Complexity</p>
  </div>
  <div class="page">
    <p>Rising Website Complexity Falling User Tolerance</p>
    <p>Reducing Load Time is Not Enough</p>
  </div>
  <div class="page">
    <p>Our Approach: Dynamic Reprioritization</p>
    <p>Forseeable Future: High load times norm, not exception</p>
  </div>
  <div class="page">
    <p>Our Approach: Dynamic Reprioritization</p>
    <p>Forseeable Future: High load times norm, not exception</p>
    <p>Reformulate the problem:</p>
  </div>
  <div class="page">
    <p>Our Approach: Dynamic Reprioritization</p>
    <p>Forseeable Future: High load times norm, not exception</p>
    <p>Reformulate the problem:</p>
    <p>How to reduce page load time?</p>
  </div>
  <div class="page">
    <p>Our Approach: Dynamic Reprioritization</p>
    <p>Forseeable Future: High load times norm, not exception</p>
    <p>Reformulate the problem:</p>
    <p>How to reduce page load time?</p>
    <p>How to Prioritize the content most important to user?</p>
  </div>
  <div class="page">
    <p>Our Approach: Dynamic Reprioritization</p>
    <p>Forseeable Future: High load times norm, not exception</p>
    <p>Reformulate the problem:</p>
    <p>How to reduce page load time?</p>
    <p>How to Prioritize the content most important to user?</p>
    <p>Typical tolerance limit of 2-4 seconds</p>
    <p>Deliver high utility resources within time budget</p>
  </div>
  <div class="page">
    <p>Our Approach: Dynamic Reprioritization</p>
    <p>Forseeable Future: High load times norm, not exception</p>
    <p>Reformulate the problem:</p>
    <p>How to reduce page load time?</p>
    <p>How to Prioritize the content most important to user?</p>
    <p>Typical tolerance limit of 2-4 seconds</p>
    <p>Deliver high utility resources within time budget</p>
    <p>Our solution: Klotski proxy  No modifications to clients and web servers!</p>
  </div>
  <div class="page">
    <p>Klotski in Action! Original Page Load at 3s Klotski Page Load at 3s</p>
  </div>
  <div class="page">
    <p>Klotski: Idealized View</p>
    <p>Klotski Proxy</p>
    <p>Web Server</p>
    <p>Webpage Resource</p>
  </div>
  <div class="page">
    <p>Klotski: Idealized View</p>
    <p>Klotski Proxy</p>
    <p>Web Server</p>
    <p>Webpage Resource</p>
  </div>
  <div class="page">
    <p>Klotski: Idealized View</p>
    <p>Klotski Proxy</p>
    <p>High Priority Resource</p>
    <p>Low Priority Resource</p>
    <p>Web Server</p>
  </div>
  <div class="page">
    <p>Klotski: Idealized View</p>
    <p>Klotski Proxy</p>
    <p>High Priority Resource</p>
    <p>Low Priority Resource</p>
    <p>Web Server</p>
    <p>time budget</p>
  </div>
  <div class="page">
    <p>Challenges with Idealized View</p>
    <p>Klotski Proxy</p>
    <p>High Priority Resource</p>
    <p>Low Priority Resource</p>
    <p>Web Server</p>
    <p>time budget</p>
    <p>C1: Dynamic content + dependencies</p>
  </div>
  <div class="page">
    <p>Challenges with Idealized View</p>
    <p>Klotski Proxy</p>
    <p>High Priority Resource</p>
    <p>Low Priority Resource</p>
    <p>Web Server</p>
    <p>C1: Dynamic content + dependencies C2: Fast selection of subset to prioritize</p>
    <p>time budget</p>
  </div>
  <div class="page">
    <p>Challenges with Idealized View</p>
    <p>Klotski Proxy</p>
    <p>High Priority Resource</p>
    <p>Low Priority Resource</p>
    <p>Web Server</p>
    <p>C1: Dynamic content + dependencies C2: Fast selection of subset to prioritize C3: How long will a subset take?</p>
    <p>time budget</p>
  </div>
  <div class="page">
    <p>Image</p>
    <p>Challenge 1: Dynamic Content and Dependencies</p>
    <p>Klotski Proxy</p>
    <p>Robust Dependency Knowledge</p>
    <p>High Priority Resource</p>
    <p>Low Priority Resource</p>
    <p>Web Server</p>
    <p>A Javascript</p>
    <p>A requires</p>
    <p>A</p>
    <p>time budget</p>
  </div>
  <div class="page">
    <p>Dependency DAG</p>
    <p>HTML</p>
    <p>CSS IMAGE 1SCRIPT</p>
    <p>IMAGE 2 IMAGE 3</p>
    <p>Intuition: Page structure is stable  Prior work on static dependencies</p>
    <p>E.g., WebProphet, WProf</p>
  </div>
  <div class="page">
    <p>Dependency DAG</p>
    <p>HTML</p>
    <p>CSS IMAGE 1SCRIPT</p>
    <p>IMAGE 2 IMAGE 3</p>
    <p>Prior work on static dependencies  E.g., WebProphet, WProf</p>
    <p>Problem: Dependencies not reusable due to dynamic content</p>
    <p>Intuition: Page structure is stable</p>
  </div>
  <div class="page">
    <p>Dependency DAG</p>
    <p>HTML</p>
    <p>CSS IMAGE 1SCRIPT</p>
    <p>IMAGE 2 IMAGE 3</p>
    <p>Prior work on static dependencies  E.g., WebProphet, WProf</p>
    <p>Problem: Dependencies not reusable due to dynamic content</p>
    <p>Our observation:  Nodes in DAG change  DAG structure largely stable</p>
    <p>Intuition: Page structure is stable</p>
  </div>
  <div class="page">
    <p>Intuition: Page structure is stable</p>
    <p>Dependency DAG</p>
    <p>HTML</p>
    <p>CSS IMAGE 1SCRIPT</p>
    <p>IMAGE 2 IMAGE 3</p>
    <p>Prior work on static dependencies  E.g., WebProphet, WProf</p>
    <p>Problem: Dependencies not reusable due to dynamic content</p>
    <p>Our observation:  Nodes in DAG change  DAG structure largely stable</p>
    <p>Load page repeatedly to generate fingerprint:  DAG structure with a URL pattern at every node  Pattern generalizes URL of dynamic resources</p>
  </div>
  <div class="page">
    <p>Learn URL Patterns  Generalize known prior URLs of a dynamic resource</p>
    <p>foo.com/SG39HZ78/a.js foo.com/SHFS2732/a.js  foo.com/*/a.js</p>
  </div>
  <div class="page">
    <p>Learn URL Patterns  Generalize known prior URLs of a dynamic resource</p>
    <p>3 Cases = 90% of Replacements:  Single token in URL changes  Only URL argument changes: www.site.org/a.js?FOO=1...  CDN node name: {CDN2.bar.com/x.jpg, CDN5.bar.com/x.jpg}</p>
    <p>foo.com/SG39HZ78/a.js foo.com/SHFS2732/a.js  foo.com/*/a.js</p>
  </div>
  <div class="page">
    <p>Identify Resource Replacements</p>
    <p>Capture set of prior URLs: Track Replacement of Resource over multiple page loads</p>
  </div>
  <div class="page">
    <p>Identify Resource Replacements</p>
    <p>R1 R2  Capture set of prior URLs:</p>
    <p>Track Replacement of Resource over multiple page loads</p>
  </div>
  <div class="page">
    <p>Identify Resource Replacements</p>
    <p>R1 R2</p>
    <p>Combination of techniques:  Match position in DAG</p>
    <p>dependency structure  Identical position on screen  Identical reference in source</p>
    <p>Capture set of prior URLs: Track Replacement of Resource over multiple page loads</p>
  </div>
  <div class="page">
    <p>Challenge 2: Optimal Prioritization Schedule</p>
    <p>Klotski Proxy</p>
    <p>Which subset to prioritize and how?</p>
    <p>High Priority Resource</p>
    <p>Low Priority Resource</p>
    <p>Web Server</p>
    <p>time budget</p>
  </div>
  <div class="page">
    <p>Select Subset of High Utility Resources</p>
    <p>Dependency structure in fingerprint</p>
  </div>
  <div class="page">
    <p>Select Subset of High Utility Resources</p>
    <p>Dependency structure in fingerprint</p>
  </div>
  <div class="page">
    <p>Select Subset of High Utility Resources</p>
    <p>Dependency structure in fingerprint</p>
    <p>DAG Cut</p>
    <p>Reduces to knapsack with dependencies: NP-Hard</p>
    <p>Apply greedy heuristic</p>
  </div>
  <div class="page">
    <p>Prioritizing High-Utility Resources</p>
    <p>Static URLs: Use SPDY PUSH to pre-emptively deliver</p>
    <p>as soon as main HTML is requested</p>
    <p>Dynamic URLs: Prioritize delivery if match with regular</p>
    <p>expression of a selected resource</p>
  </div>
  <div class="page">
    <p>Challenge 3: Estimating Load Times in the Wild</p>
    <p>Klotski Proxy</p>
    <p>Will subset load within budget?</p>
    <p>High Priority Resource</p>
    <p>Low Priority Resource</p>
    <p>Web Server</p>
    <p>time budget</p>
    <p>X</p>
  </div>
  <div class="page">
    <p>Seemingly Natural Non-Solutions</p>
    <p>Klotski Proxy</p>
    <p>High Priority Resource</p>
    <p>Low Priority Resource</p>
    <p>Web Server</p>
    <p>time budget</p>
    <p>Model: bytes, #requests, ..? Use Apriori Load Times?</p>
    <p>Model: Too simplistic to capture browser effects Apriori Loads: No longer valid with reprioritization Cannot capture diversity in client conditions</p>
  </div>
  <div class="page">
    <p>Intuition Behind Klotski Estimator</p>
    <p>Bottleneck = Client-Proxy Link (e.g, 4G)</p>
    <p>Klotski Proxy</p>
    <p>Web Server</p>
    <p>time budget</p>
  </div>
  <div class="page">
    <p>Intuition Behind Klotski Estimator</p>
    <p>Klotski Proxy</p>
    <p>Web Server</p>
    <p>time budget</p>
    <p>Build Fluid Model Simulation  Proxy as work conserving scheduler  Priorities/Dependencies, fairly shared bw for concurrent transfers  Some subtle issues: PUSH, client processing delays</p>
  </div>
  <div class="page">
    <p>Klotski: System Architecture</p>
    <p>Clients</p>
    <p>Klotski Service</p>
    <p>Web Servers</p>
    <p>Fingerprint Generator</p>
    <p>Load Time Estimator</p>
    <p>Resource Selection</p>
    <p>BackEnd FrontEnd</p>
  </div>
  <div class="page">
    <p>Klotski: Experimental Results</p>
    <p>Data Set</p>
    <p>Websites  50 Random From Alexa Top 200</p>
    <p>Mobile Device  Android Smartphone  4G Connection  Google Chrome</p>
    <p>Paper Only Results  Desktop PC + Ethernet  Smartphone + Full Website  User study on utility preferences  Resource churn over time</p>
  </div>
  <div class="page">
    <p>Klotski Improves User Experience</p>
  </div>
  <div class="page">
    <p>Klotski Improves User Experience</p>
    <p>Within the first X seconds</p>
  </div>
  <div class="page">
    <p>Klotski Improves User Experience</p>
    <p>% of site's high util resources loaded</p>
    <p>Within the first X seconds</p>
  </div>
  <div class="page">
    <p>Klotski Improves User Experience</p>
  </div>
  <div class="page">
    <p>Klotski Improves User Experience</p>
  </div>
  <div class="page">
    <p>Klotski Improves User Experience</p>
    <p>Median site 25% ATF in 2 secs</p>
  </div>
  <div class="page">
    <p>Klotski Improves User Experience</p>
  </div>
  <div class="page">
    <p>Klotski Improves User Experience</p>
  </div>
  <div class="page">
    <p>Klotski Improves User Experience</p>
  </div>
  <div class="page">
    <p>High Utility Gain For Diverse Users</p>
  </div>
  <div class="page">
    <p>High Utility Gain For Diverse Users</p>
    <p>User Preferences</p>
  </div>
  <div class="page">
    <p>High Utility Gain For Diverse Users</p>
    <p>User Preferences</p>
    <p>Utility Gained at 2 Seconds</p>
  </div>
  <div class="page">
    <p>High Utility Gain For Diverse Users</p>
  </div>
  <div class="page">
    <p>Conclusions  Mobile web continues to be a pain point</p>
    <p>Focus on load time alone is likely insufficient</p>
    <p>Instead we focus on dynamic reprioritization</p>
    <p>Key challenges we address:</p>
    <p>dynamic dependency representation</p>
    <p>fast resource selection</p>
    <p>load time estimation</p>
    <p>Klotski greatly improves user experience</p>
    <p>for diverse preferences</p>
  </div>
</Presentation>

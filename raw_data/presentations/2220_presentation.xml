<?xml version="1.0" ?>
<Presentation>
  <div class="page">
    <p>: 9 AC A , : 9 0 C F -HD 8AC A 0A ACH</p>
    <p>A - AC 9 F H</p>
  </div>
  <div class="page">
    <p>2   &amp;</p>
  </div>
  <div class="page">
    <p>1FE KFC I C D DF 1 0  2)0 3 3(0 455 3(0 L2F EI I AEFCF M</p>
    <p>1 0 C M I D</p>
    <p>NAND Flash PCM DRAM Byte-addressable No Yes Yes Density 4X 2X-4X 1X Read latency 25us 50~70ns 60ns Write latency 350us 150~1000ns 60ns Write Endurance 105 109 1016</p>
    <p>Non-Volatile Yes Yes No NVMCPU</p>
    <p>Memory bus File system</p>
    <p>Features of NVM[1, 2, 3, 4, 5]</p>
  </div>
  <div class="page">
    <p>H DE A CA G 4 DIDE D  2 E A G CEF DIDE</p>
    <p>- CA G DIDE  1 3  3 3  1 3  04</p>
    <p>BA9 E 3, 013 F 3 F BBC FCB3ID C D FCB3ID</p>
  </div>
  <div class="page">
    <p>( )</p>
    <p>5 5 5  5 5 5 5</p>
    <p>5 5  5 5 5  5 5  5</p>
    <p>VFS</p>
    <p>Application</p>
    <p>ext4 NFS</p>
    <p>socket device</p>
  </div>
  <div class="page">
    <p>6 &lt;FF ADF DH ADF R M  - M ADF R M K MC&lt;H A &lt; &lt;K M ADF &lt;FF K MC&lt;H :  ,F N? &lt;H? 4, FN M K S ADF 0 :</p>
    <p>1 M&lt;?&lt;M&lt; K&lt;MD H ? DH&lt;M &lt;FF ADF &lt;  1 M&lt;?&lt;M&lt; &lt; HMKD NM MD A K &lt; DHB &lt; &lt;FF ADF H &lt; ?D :  K D H C R M S A R M &lt;FF ? &lt;MC F N :  4&lt;MC &lt; ? R M &lt;FF &lt; NHM A K % S A M M&lt;F NMD H MD :</p>
    <p>: &lt;KM K 6364 : &lt;D 6364</p>
    <p>K 281 &lt; ? ADF R M C P &lt; NM M&lt;?&lt;M&lt; K&lt;MD H O KC &lt;?</p>
  </div>
  <div class="page">
    <p>VFS: time of lookup spent in VFS FS: time of lookup spent in physical file system</p>
  </div>
  <div class="page">
    <p>3 2 7 .8 .  %8 4 2 3 . ., 4.</p>
    <p>.</p>
    <p>VFS: time of lookup spent in VFS FS: time of lookup spent in physical file system</p>
  </div>
  <div class="page">
    <p>, 6 9 8 3 63 2  27 8 . 9 3 31 7 7 3 7</p>
    <p>27 8 . 7 4 6 9 8 3 7 7 1 3 3  ,3 13 53 4 3 31 7 7 3 7 .</p>
    <p>, 53</p>
    <p>VFS: time of lookup spent in VFS FS: time of lookup spent in physical file system</p>
    <p>. 7 5 3 3 63 2 4 . 32</p>
  </div>
  <div class="page">
    <p>,1 1 9 1 0 2 9 % 9 2 1 0 91 9 0 1 1 1 0 9 2 1 1  ,1 6 6 1 1B 1 1 1 % 1 0 9 2</p>
    <p>%  ,1 1 19 10 % 9 9 2 % . 1 9 019 1 0</p>
  </div>
  <div class="page">
    <p>1 1 1  1  1  &amp;1</p>
  </div>
  <div class="page">
    <p>2  (1</p>
    <p>1 2 2  2</p>
    <p>1 2 2(  2</p>
    <p>1 , 1 2</p>
    <p>2 1 1 , 1 2  1  2</p>
  </div>
  <div class="page">
    <p>start stat(/home/wy/example.txt)</p>
    <p>cache inode/dentry</p>
    <p>lookup inode</p>
    <p>miss</p>
    <p>hitlookup icache</p>
    <p>hit</p>
    <p>miss lookup dentry</p>
    <p>miss</p>
    <p>yes</p>
    <p>check path end</p>
    <p>no yes</p>
    <p>permission check</p>
    <p>hitlookup dcache</p>
    <p>get next path component</p>
    <p>6 3 C 3 :3 21 163 7 .) 23 7 6 71 : 47:3 3 71 163 7 .) 6 2 :7 7 23 7 6 71 : 47:3 3</p>
    <p>( 3 3 2 7 7 7 :7F3 .) 1 3 )7:3 113 3 7 7 1631</p>
    <p>)7:3 : 3 2 1 27 7  / 1 163 3  )7:3 2 3 3 7 3  .) 1 7 71 163 3  ( :2 1 163 3 no</p>
    <p>Operation in physical file system</p>
  </div>
  <div class="page">
    <p>( ))</p>
    <p>G ) (: 64C G D 56 C G : GB:42 : 6 BGBC6</p>
    <p>D : 56 : GB:42 : 6 BGBC6 6C :424 6 5: 64C G 3G : C6 62C6 2 5 : :C:2 : 6 ) BC D4CD 6B</p>
    <p>): 6 2446BB 6 :BB: 4 64 D5 6 C 6 6 5 D</p>
    <p>): 6 D 6 5 4 5:C:  ): 6 5 B6 C 6F:BC BC6  12 424 6 BC6 D C: 6B  5 424 6 BC6 D C: 6B</p>
    <p>start stat(/home/wy/example.txt)</p>
    <p>cache inode</p>
    <p>lookup inode</p>
    <p>miss</p>
    <p>hit</p>
    <p>miss lookup dentry</p>
    <p>miss</p>
    <p>yes</p>
    <p>check path end</p>
    <p>no yes</p>
    <p>permission check</p>
    <p>get next path component</p>
    <p>no</p>
    <p>Operation in physical file system</p>
    <p>end</p>
    <p>get icache</p>
    <p>hit</p>
    <p>miss</p>
  </div>
  <div class="page">
    <p>1 1) 2 16 2  2 6 21</p>
    <p>6 2 6</p>
    <p>2 16 2 16 ) 62 )</p>
    <p>6 6 ) 2 6</p>
    <p>/home/wy/linux/ getcwd</p>
    <p>/home/wy/linux/</p>
    <p>We are here</p>
  </div>
  <div class="page">
    <p>)</p>
    <p>1 ) ) 7 1 . 1 )  1</p>
    <p>. 7 1 ) .1</p>
    <p>1 . 7) 1 )</p>
    <p>1</p>
    <p>) ) . ) 7) 7 )1 .</p>
    <p>7 1 ) .1 ) 1 2 )</p>
    <p>/home/wy/linux/ getcwd</p>
    <p>/home/wy/linux/</p>
    <p>We are here</p>
    <p>/home/wy/linux/</p>
    <p>. .. linux xxx</p>
    <p>Repeat this process until to root directory</p>
    <p>/home/wy/</p>
    <p>linux</p>
  </div>
  <div class="page">
    <p>1  1 8 8 8 1 1 8 8</p>
    <p>88  1</p>
    <p>1</p>
    <p>1 8 8 8 8  8 8 88</p>
    <p>1 8 1 8 8 8</p>
    <p>8 1 1 8 1 8 18 8</p>
    <p>Superblock Inode</p>
    <p>icache</p>
    <p>NVM</p>
    <p>DRAM</p>
    <p>Pointer X crash</p>
  </div>
  <div class="page">
    <p>A 1 1 B 1 9 B  1 1 1 9 1 1 B</p>
    <p>(9 1 1     19 9 1 1 1 1 9 9 1 1 9 B</p>
    <p>, B 9 1 1 1 1 B 1  , 9 11 9 9 1 B 9 19 B 9 19 B 9 1 B  1 1 1 1 9A 9 B )( - 9 1 1</p>
    <p>A 9 11 9 19 B  1 19 9 19 B 9 9 B 1 B 1 1 A</p>
    <p>) 1</p>
  </div>
  <div class="page">
    <p>2 2 2  0 0 2  2  2  &amp; 00</p>
  </div>
  <div class="page">
    <p>G NC  6B PB ( 0INBG B I - + 8S B E + 8 E M BM  - OG NFID 2 1 OMFID ,5)1 R AAFID FNB G NBI R IM  2 1  ,5)1</p>
    <p>+ BA 6RMNB  + IPBINF I G 6 ERMF G CFGB MRMNB 23 ) 2</p>
    <p>+ GA EB( 6 A BM I N IN FI CFGB BN A N BC B BP GO NF I  : EB( 6 IN FIM CFGB BN A N BC B BP GO NF I</p>
    <p>R 6 AFCFBA 23 )</p>
    <p>DBO )6</p>
  </div>
  <div class="page">
    <p>,  , 22</p>
    <p>, , , , : 2  2 , 2 , - , : : , ,</p>
    <p>: - 2</p>
    <p>,  2 : , , , , , , : 2 :  , , , , , , : 2 :  , , , 2 - 2, , : 2 :</p>
    <p>,</p>
  </div>
  <div class="page">
    <p>op en _N</p>
    <p>op en _B</p>
    <p>ac ce ss_ N</p>
    <p>ac ce ss_ B</p>
    <p>ren am e_ N</p>
    <p>ren am e_ B</p>
    <p>un lin k_ N</p>
    <p>un lin k_ B</p>
    <p>mk dir _N</p>
    <p>mk dir _B</p>
    <p>rm kd ir_ N</p>
    <p>rm kd ir_ B</p>
    <p>Ex ec ut io n tim</p>
    <p>e( us )</p>
    <p>vfs_lookup vfs_other FS</p>
  </div>
  <div class="page">
    <p>. 8  ,4 8 4 B 4 B4 8 7 A82 8 4 A AB4 4 4 8 E</p>
    <p>( 4 A 14BB4 E 8B4 4 B8 A 3 2784 4 A8 8 4 24 4 3 4 B8 A</p>
    <p>ac ce ss_ ca ch e_ N</p>
    <p>ac ce ss_ ca ch e_ B</p>
    <p>un lin k_ ca ch e_ N</p>
    <p>un lin k_ ca ch e_ B</p>
    <p>Ex ec ut io n tim</p>
    <p>e( us )</p>
    <p>vfs_lookup vfs_other FS</p>
  </div>
  <div class="page">
    <p>1 3691 8 2 2 6:9 682 . 2 21 21 /  2 2 6:9 682 . 2 69 2. 21 / %</p>
    <p>2 . 21 6 5 . 8 . 52 56 . 6:  2 6 : 686 2 5 6 . 36 2 28 69 52 3 2</p>
    <p>VFS cache hit ratios</p>
    <p>du 14.1% find 69.1% rm 55.5% ls 95.8% cp 95.3%</p>
    <p>du_N du_B find_N find_B ls_N ls_B rm_Nrm_B cp_N cp_B</p>
    <p>Ex ec</p>
    <p>ut io</p>
    <p>n tim</p>
    <p>e (s</p>
    <p>)</p>
    <p>vfs_lookup vfs_other FS</p>
  </div>
  <div class="page">
    <p>2 26 6 2  6 6 2  6 2  6 2  &amp;</p>
  </div>
  <div class="page">
    <p>Problems Solution Works</p>
    <p>NVM FS</p>
    <p>Crash consistency  Journal  Copy-on-Write  Log-structure</p>
    <p>PMFS[2], NOVA[4], NOVA-fortis[5]</p>
    <p>Software overhead</p>
    <p>Bypassing page cache, block layer</p>
    <p>BPFS[1], PMFS[2], SCMFS[3], NOVA[4], NOVA-fortis[5], Aerie[7]</p>
    <p>Optimizing index structure SCMFS[3]</p>
    <p>Reducing kernel interaction Aerie[7]</p>
    <p>Hardware overhead Adding write buffer HinFS[6]</p>
    <p>Metadata operations</p>
    <p>Path lookup Adding cache on top of VFS [8,9]</p>
    <p>Full path lookup [10,11,12,13]</p>
    <p>Write amplification Index optimization [11,12,13,14,15]</p>
    <p>F C 4142 4 3 LDD ,L 4 4 7L 4 8L - 45 8L 4142 1L ,L 4 J . CJ ,L 4 J L EH 645 4142 0 FJCFA 494513 FF F - 45 9L F - 45</p>
    <p>F - 45 0L - 45 3 F 5</p>
  </div>
  <div class="page">
    <p>2 2 8 2  2  8 2  2  &amp;</p>
  </div>
  <div class="page">
    <p>, . 9 2 2 . 9 2 .</p>
    <p>9 B , . 2 . 2 . , .</p>
    <p>9 B . 9 92</p>
    <p>2 .</p>
  </div>
  <div class="page">
    <p>! &amp; &amp;</p>
  </div>
</Presentation>

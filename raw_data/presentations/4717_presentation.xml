<?xml version="1.0" ?>
<Presentation>
  <div class="page">
    <p>Design and Evaluation of a Versatile and Efficient Receiver-Initiated Link Layer for Low-Power</p>
    <p>Wireless</p>
    <p>Prabal Dutta, Stephen Dawson-Haggerty, Yin Chen, Chieh-Jan (Mike) Liang, and Andreas Terzis</p>
    <p>Sensys10 at ETH Zurich</p>
  </div>
  <div class="page">
    <p>A sender-initiated MAC: Sender triggers communications by transmitting a data</p>
    <p>Receiver</p>
    <p>Sender Listen D</p>
    <p>DListen</p>
  </div>
  <div class="page">
    <p>Low-power listening (LPL) with a sender-initiated MAC</p>
    <p>Preamble DSender</p>
    <p>Receiver D</p>
    <p>Tlisten Noise</p>
    <p>Overhearing/noise adds significant unpredictability to node lifetime</p>
  </div>
  <div class="page">
    <p>A receiver-initiated MAC: Receiver triggers exchange by transmitting a probe</p>
    <p>Receiver</p>
    <p>Sender PListen D</p>
    <p>P D</p>
  </div>
  <div class="page">
    <p>Low-power, receiver-initiated services offer many benefits over sender-initiated ones</p>
    <p>Handle hidden terminals better than sender-initiated ones</p>
    <p>Support asynchronous communication w/o longpreambles</p>
    <p>Support extremely low duty cycles or high data rates</p>
    <p>Support many low-power services  Wakeup (LPP, Musaloiu-E. et al., IPSN08)  Discovery (Disco, Dutta et al., Sensys08)  Unicast (RI-MAC, Sun et al., Sensys08)  Broadcast (ADB, Sun et al., Sensys09)  Pollcast (Pollcast, Demirbas et al., INFOCOM08)  Anycast (Backcast, Dutta et al., HotNets08)</p>
  </div>
  <div class="page">
    <p>Low-power, receiver-initiated MACs face a number of drawbacks as well</p>
    <p>Probe (LPP) is more expensive than channel sample (LPL)  Baseline power is higher</p>
    <p>Frequent probe transmissions  Could congest channel &amp; increase latency  Could disrupt ongoing communications  Channel usage scales with node density rather than traffic</p>
    <p>Services use incompatible probe semantics  Makes concurrent use of services difficult  Supporting multiple, incompatible probes increases power</p>
  </div>
  <div class="page">
    <p>The probe incompatibility mess</p>
    <p>Probes use hardware acknowledgements  Probes do not use hardware acknowledgements  Probes include only receiver-specific data  Probes include sender-specific data too  Probes include contention windows  Probes do not include contention windows</p>
    <p>Pollcast</p>
    <p>RI-MACLPP</p>
    <p>Backcast</p>
  </div>
  <div class="page">
    <p>Is it possible to design a generalpurpose,</p>
    <p>yet efficient, receiver-initiated link layer?</p>
  </div>
  <div class="page">
    <p>Most consequential decision a low-power MAC makes: stay awake or go to sleep?</p>
    <p>Preamble DTX</p>
    <p>RX D</p>
    <p>Tlisten Noise</p>
    <p>TX</p>
    <p>RX</p>
    <p>P</p>
    <p>P</p>
    <p>DATA</p>
    <p>DATA</p>
    <p>Listen</p>
    <p>Sender-Initiated: Channel Sampling</p>
    <p>Receiver-Initiated: Channel Probing</p>
    <p>P</p>
  </div>
  <div class="page">
    <p>Asynchronous network wakeup</p>
    <p>P DNode 2</p>
    <p>Node 3</p>
    <p>Node 4</p>
    <p>P DNode 1</p>
    <p>Node 5</p>
    <p>Listen</p>
    <p>Listen P D Listen P D Listen</p>
    <p>P D Listen</p>
    <p>Listen</p>
    <p>P D</p>
    <p>P D</p>
    <p>Listen P D</p>
    <p>P</p>
    <p>P</p>
    <p>D</p>
    <p>D</p>
    <p>frame collision PFN? PFP?</p>
  </div>
  <div class="page">
    <p>Wait, not so fast! Node 5 might receive a response</p>
    <p>Power capture: One response has a sufficiently higher power than the sum of the others and it arrives first</p>
    <p>Delay capture: One response frame arrives some time before the remaining ones and its power is higher than the sum of the others</p>
    <p>Message-in-Message capture: Like power capture, but the highest power frame arrives in the middle of another frame transmission and radio detects elevated energy and the radio does continuous preamble detection</p>
    <p>These are a lot of caveats</p>
  </div>
  <div class="page">
    <p>Solving the synchronization problem with Backcast</p>
    <p>A link-layer frame exchange in which:  A single radio PROBE frame transmission  Triggers zero or more identical ACK frames  Transmitted with tight timing tolerance  So there is minimum inter-symbol interference  And ACKs collide non-destructively at the receiver</p>
    <p>P A TX</p>
    <p>RX P A</p>
    <p>P A TX</p>
    <p>Yo u</p>
    <p>sh ou</p>
    <p>ld b</p>
    <p>e sk</p>
    <p>ep tic</p>
    <p>al th</p>
    <p>at th</p>
    <p>is id</p>
    <p>ea m</p>
    <p>ig ht</p>
    <p>w or</p>
    <p>k</p>
    <p>P. Dutta, R. Musaloiu-E., I. Stoica, A. Terzis, Wireless ACK Collisions Not Considered Harmful, HotNets-VII, October, 2008, Alberta, BC, Canada</p>
  </div>
  <div class="page">
    <p>Outline</p>
    <p>Introduction  Motivation  What is A-MAC?</p>
    <p>Protocol overview  Synchronization using Backcast  Contention using binary exponential backof  Communications using multichannel transfers</p>
    <p>How is it used?  How well does it work?  How much does it cost?  What are its limitations?</p>
  </div>
  <div class="page">
    <p>A-MAC: An 802.15.4 receiver-initiated link layer</p>
    <p>P ASender</p>
    <p>Receiver P A</p>
    <p>DATA</p>
    <p>DATA</p>
    <p>Max data packet</p>
    <p>ACK transmission time 352 s</p>
    <p>RXTX turnaround time: 192 s</p>
    <p>P</p>
    <p>P</p>
    <p>Listen</p>
  </div>
  <div class="page">
    <p>A-MACs contention mechanism</p>
    <p>Receiver</p>
    <p>Sender</p>
    <p>Sender P AListen D P-CW</p>
    <p>P AListen D P-CW</p>
    <p>P A D P-CW D</p>
    <p>BO</p>
    <p>D</p>
    <p>frame collision</p>
    <p>Backcast</p>
  </div>
  <div class="page">
    <p>A-MACs parallel multichannel data transfers use control, data (1), and data (2) channels</p>
    <p>P ASender 1</p>
    <p>Receiver 1 P A</p>
    <p>DATA</p>
    <p>DATA</p>
    <p>P</p>
    <p>P</p>
    <p>Listen</p>
    <p>P ASender 2</p>
    <p>Receiver 2 P A</p>
    <p>DATA</p>
    <p>DATA</p>
    <p>P</p>
    <p>P</p>
    <p>Listen</p>
  </div>
  <div class="page">
    <p>Outline</p>
    <p>Introduction  Motivation  What is A-MAC?  How is it used? [Lacking hardware support]</p>
    <p>Unicast  Broadcast  Pollcast  Wakeup</p>
    <p>How well does it work?  How much does it cost?  What are its limitations?</p>
  </div>
  <div class="page">
    <p>Unicast</p>
    <p>P A Node 2</p>
    <p>(Receiver)</p>
    <p>Node 3 (Sender)</p>
    <p>P A Node 1</p>
    <p>(Sender) Listen</p>
    <p>D DST=0x8002 SRC=0x0002</p>
    <p>D P</p>
    <p>P L</p>
    <p>MAC=0x8002</p>
    <p>P AListen D P-CW</p>
    <p>MAC=0x8002</p>
    <p>P AListen D P-CW MAC=0x8002</p>
    <p>P A D P-CW D</p>
    <p>BO</p>
    <p>D</p>
    <p>DST=0x8002 SRC=0x0002 ACK=0x0023 FRM=0x0001</p>
    <p>DST=0x0002 SRC=0x0001 SEQ=0x23</p>
    <p>frame collision</p>
    <p>Backcast</p>
  </div>
  <div class="page">
    <p>Broadcast</p>
    <p>TX 1</p>
    <p>RX 2</p>
    <p>RX 3</p>
    <p>RX 4</p>
    <p>Listen P A Listen P A Listen</p>
    <p>P A</p>
    <p>P A</p>
    <p>Backcast</p>
    <p>auto-ack=on addr-recog=off</p>
    <p>D</p>
    <p>D</p>
    <p>P</p>
    <p>P</p>
    <p>D</p>
    <p>D</p>
    <p>P</p>
    <p>P</p>
    <p>P A D P</p>
    <p>P A D P</p>
    <p>DST=0x8002 SRC=0x0002</p>
    <p>DST=0x8002 SRC=0x0002 ACK=0x0023 FRM=0x0001</p>
    <p>DST=0x0002 SRC=0x0001 SEQ=0x23</p>
    <p>off off</p>
    <p>on off</p>
    <p>Backcast</p>
    <p>Backcast</p>
  </div>
  <div class="page">
    <p>Wakeup</p>
    <p>P ANode 2</p>
    <p>Node 3</p>
    <p>Node 4</p>
    <p>P ANode 1</p>
    <p>Node 5</p>
    <p>Listen</p>
    <p>Listen P A Listen P A Listen</p>
    <p>P A Listen</p>
    <p>Listen</p>
    <p>P A</p>
    <p>P A</p>
    <p>Listen P A</p>
    <p>P</p>
    <p>P</p>
    <p>A</p>
    <p>A</p>
    <p>Backcast</p>
    <p>DST=0xFFFF SRC=0x0002</p>
  </div>
  <div class="page">
    <p>Pollcast</p>
    <p>Node 2 (Receiver)</p>
    <p>Node 3 (Sender)</p>
    <p>Node 1 (Sender)</p>
    <p>PredEvent</p>
    <p>PredEvent</p>
    <p>Pred</p>
    <p>M. Demirbas, O. Soysal, and M. Hussain, A Single-Hop Collaborative Feedback Primitive for Wireless Sensor Networks, INFOCOM08, April , 2008, Phoenix, AZ</p>
    <p>Listen</p>
    <p>MAC=0x8765</p>
    <p>Listen</p>
    <p>MAC=0x8765</p>
    <p>Listen</p>
    <p>P A</p>
    <p>P A</p>
    <p>P A</p>
    <p>Backcast</p>
    <p>DST=0xFFFF SRC=0x0002</p>
    <p>PRED=elephant MAC=0x8765</p>
    <p>Event DST=0x8765</p>
    <p>P+Pred</p>
    <p>P+Pred</p>
    <p>P+Pred DST=0xFFFF SRC=0x0002</p>
    <p>PRED=elephant</p>
    <p>A</p>
    <p>A</p>
    <p>A</p>
  </div>
  <div class="page">
    <p>Outline</p>
    <p>Introduction  Motivation  What is A-MAC?  How is it used?  How well does it work?</p>
    <p>Backcast  A-MAC</p>
    <p>How much does it cost?  What are its limitations?</p>
  </div>
  <div class="page">
    <p>Evaluating Backcast: equal-power, equal-path delay</p>
    <p>Setup Methodology  Platform: Telos mote  Protocol: IEEE 802.15.4  Radio: Texas Instruments</p>
    <p>CC2420  Experiment</p>
    <p>8 responder nodes  Connect w/ splitter/attenuator  Turned on sequentially  Transmit 100 packets  125 ms inter-packet interval  Log</p>
    <p>RSSI: received signal strength  LQI: chip correlation rate  ARR: ACK reception rate</p>
  </div>
  <div class="page">
    <p>As the number of colliding ACKs goes from one to eight</p>
    <p>But, for two nodes, LQI exhibits outliers and a lower median</p>
    <p>Median RSSI increases logarithmically</p>
    <p>Median LQI remains nearly constant but is more left-tailed ACK reception rate stays practically constant</p>
  </div>
  <div class="page">
    <p>Backcast scales to a large number of nodes</p>
  </div>
  <div class="page">
    <p>The effect of interference on idle listening: Sampling, Probing, and Backcast</p>
    <p>Sampling</p>
    <p>Channel 18 Channel 26</p>
    <p>Probing</p>
    <p>Backcast</p>
    <p>Sampling</p>
    <p>Probing</p>
    <p>Backcast</p>
    <p>Background noise/traffic/noise in an office environment</p>
  </div>
  <div class="page">
    <p>Idle listening cost skyrockets under heavy interference</p>
  </div>
  <div class="page">
    <p>A-MAC offers modest incast performance</p>
    <p>R</p>
    <p>S SS S</p>
    <p>Collision Domain</p>
  </div>
  <div class="page">
    <p>A-MAC supports multiple parallel unicast flows</p>
    <p>RS</p>
    <p>RS</p>
    <p>RS</p>
    <p>Collision Domain</p>
  </div>
  <div class="page">
    <p>A-MAC wakes up the network faster and more efficiently than LPL (Flash) flooding</p>
    <p>Faster Wakeup</p>
    <p>Fewer Packets</p>
    <p>A-MAC</p>
    <p>LP L</p>
    <p>(F la</p>
    <p>sh )</p>
    <p>A-M AC</p>
    <p>LP L</p>
    <p>(F la</p>
    <p>sh )</p>
  </div>
  <div class="page">
    <p>A-MAC wakeup works well at low duty cycles</p>
    <p>normalized to the probe interval</p>
    <p>Tprobe = 4,000 ms</p>
    <p>Pavg = 63 W Iavg = 21 A</p>
    <p>N = 59</p>
  </div>
  <div class="page">
    <p>Supporting the Collection Tree Protocol (CTP), A-MAC beats LPL on nearly every figure of merit</p>
    <p>R</p>
    <p>S</p>
    <p>S</p>
    <p>SS</p>
    <p>SS</p>
    <p>S S N = 59 Tdata = 60 s Tprobe = 500 ms</p>
  </div>
  <div class="page">
    <p>Outline</p>
    <p>Introduction  Motivation  What is A-MAC?  How is it used?  How well does it work?  How much does it cost?  What are its limitations?</p>
  </div>
  <div class="page">
    <p>Energy cost of A-MAC primitives: probe, receive, transmit, and listen</p>
  </div>
  <div class="page">
    <p>With hardware support, probes would cost at least 40% less energy</p>
  </div>
  <div class="page">
    <p>The cost of a Backcast can be less than 1 ms (for IEEE 802.15.4)</p>
    <p>P ASender</p>
    <p>Receiver P A</p>
    <p>DATA</p>
    <p>DATA</p>
    <p>Max data packet</p>
    <p>ACK transmission time 352 s</p>
    <p>RXTX turnaround time: 192 s</p>
  </div>
  <div class="page">
    <p>Outline</p>
    <p>Introduction  Motivation  What is A-MAC?  How is it used?  How well does it work?  How much does it cost?  What are its limitations?</p>
    <p>Backcast  A-MAC</p>
  </div>
  <div class="page">
    <p>Backcast Limitations</p>
    <p>Protocol support (802.15.4 supports)  Superposition semantically valid for modulation scheme  Auto ACK with tight timing  ACK frames are identical</p>
    <p>Radio support (CC2420 supports)  Broadcast auto ACKs  Multicast auto ACKs  Multiple MAC addresses for interface  Auto ACKs based on SRC address filtering  Auto ACKs based on DST address filtering</p>
    <p>Other factors (Not necessarily an issue)  Propagation delay  RTT &lt;  symbol time  ACK frames do not cancel at PHY layer  Security  Easy to spoof</p>
  </div>
  <div class="page">
    <p>Backcast degrades when path delay differences exceeds approximately 500 ns (500 ft free space)</p>
  </div>
  <div class="page">
    <p>A-MAC single channel PDR degrades with high node density and high probe frequency</p>
    <p>S</p>
    <p>RS</p>
    <p>S</p>
    <p>Collision Domain</p>
    <p>S S</p>
    <p>S S S S</p>
    <p>S</p>
    <p>SSSS</p>
    <p>S S</p>
    <p>S S</p>
    <p>S</p>
  </div>
  <div class="page">
    <p>Conclusion</p>
    <p>Backcast provides a new synchronization primitive  Common abstraction underlying many protocols  Can be implemented using a DATA/ACK frame exchange  Works even with a 8, 12, 94 colliding ACK frames  Faster, more efficient, and more robust than LPL, LPP</p>
    <p>A-MAC augments Backcast to implement  Unicast  Broadcast  Network wakeup  Robust pollcast</p>
    <p>Results show  Higher packet delivery ratios  Lower duty cycles  Better throughput (and min/max fairness)  Faster network wakeup  Higher channel efficiency</p>
  </div>
  <div class="page">
    <p>Acknowledgements</p>
  </div>
  <div class="page">
    <p>Questions? Comments? Discussion?</p>
  </div>
  <div class="page">
    <p>Backup Slides</p>
  </div>
  <div class="page">
    <p>A-MACs synchronization primitive</p>
    <p>P A Sender</p>
    <p>Receiver P A</p>
    <p>P A Sender</p>
    <p>AP</p>
    <p>P AProbe transmission</p>
    <p>Probe reception ACK reception</p>
    <p>ACK transmission</p>
  </div>
  <div class="page">
    <p>The Query/Response exchange can be mapped to acknowledged anycast semantics</p>
    <p>A node  Broadcasts (or multicasts) a query packet  Waits to see whether the packet is ACKed  By at least one of its neighboring nodes  And stays awake if an ACK is received  But goes to sleep otherwise</p>
    <p>And the frame collision is like a multicast ACK implosion</p>
    <p>Node 5 asks all of it neighbors, should one wake up?</p>
    <p>To which, Nodes 2, 3, and 4 all respond, Yes</p>
    <p>dst=broadcast src=&lt;doesnt matter&gt;</p>
    <p>ACK</p>
    <p>(everyone sends back the same response)</p>
  </div>
  <div class="page">
    <p>Backcast using a link-layer DATA/ACK frame exchange</p>
    <p>D AReceiver</p>
    <p>Sender D A</p>
    <p>Many wireless standards use link-layer automatic ACKs  IEEE 802.11 a/b/g  IEEE 802.15.4</p>
    <p>The DATA/ACK frame turnaround time is tightlycontrolled</p>
    <p>Creates conditions favorable for power and delay capture</p>
    <p>But what should the destination address be?  802.11 a/b/g: DONT ACK broadcast or multicast</p>
    <p>frames  802.15.4: Standard is fuzzy on ACK-ing broadcast</p>
    <p>frames</p>
    <p>We play with the SRC and DST addresses to get around this</p>
  </div>
  <div class="page">
    <p>Broadcast</p>
    <p>TX 1</p>
    <p>RX 2</p>
    <p>RX 3</p>
    <p>RX 4</p>
    <p>Listen P A Listen P A Listen</p>
    <p>P A</p>
    <p>P A</p>
    <p>Backcast</p>
    <p>auto-ack=on addr-recog=off</p>
    <p>D</p>
    <p>D</p>
    <p>P</p>
    <p>P</p>
    <p>D</p>
    <p>D</p>
    <p>P</p>
    <p>P</p>
    <p>P A D P</p>
    <p>P A D P</p>
    <p>DST=0x8002 SRC=0x0002</p>
    <p>DST=0x8002 SRC=0x0002 ACK=0x0023 FRM=0x0001</p>
    <p>DST=0x0002 SRC=0x0001 SEQ=0x23</p>
    <p>off off</p>
    <p>on off</p>
    <p>Backcast</p>
    <p>Backcast</p>
  </div>
  <div class="page">
    <p>Wakeup</p>
    <p>P ANode 2</p>
    <p>Node 3</p>
    <p>Node 4</p>
    <p>P ANode 1</p>
    <p>Node 5</p>
    <p>Listen</p>
    <p>Listen P A Listen P A Listen</p>
    <p>P A Listen</p>
    <p>Listen</p>
    <p>P A</p>
    <p>P A</p>
    <p>Listen P A</p>
    <p>P</p>
    <p>P</p>
    <p>A</p>
    <p>A</p>
    <p>Backcast</p>
    <p>DST=0xFFFF SRC=0x0002</p>
  </div>
  <div class="page">
    <p>Pollcast</p>
    <p>Node 2 (Receiver)</p>
    <p>Node 3 (Sender)</p>
    <p>Node 1 (Sender)</p>
    <p>PredEvent</p>
    <p>PredEvent</p>
    <p>Pred</p>
    <p>M. Demirbas, O. Soysal, and M. Hussain, A Single-Hop Collaborative Feedback Primitive for Wireless Sensor Networks, INFOCOM08, April , 2008, Phoenix, AZ</p>
    <p>Listen</p>
    <p>MAC=0x8765</p>
    <p>Listen</p>
    <p>MAC=0x8765</p>
    <p>Listen</p>
    <p>P A</p>
    <p>P A</p>
    <p>P A</p>
    <p>Backcast</p>
    <p>DST=0xFFFF SRC=0x0002</p>
    <p>PRED=elephant MAC=0x8765</p>
    <p>Event DST=0x8765</p>
    <p>P+Pred</p>
    <p>P+Pred</p>
    <p>P+Pred DST=0xFFFF SRC=0x0002</p>
    <p>PRED=elephant</p>
    <p>A</p>
    <p>A</p>
    <p>A</p>
  </div>
</Presentation>

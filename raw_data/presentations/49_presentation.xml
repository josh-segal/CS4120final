<?xml version="1.0" ?>
<Presentation>
  <div class="page">
    <p>m p</p>
    <p>ut e</p>
    <p>ie nc</p>
    <p>e , T</p>
    <p>e xa</p>
    <p>s A</p>
    <p>&amp; M</p>
    <p>U ni</p>
    <p>ve rs</p>
    <p>ity</p>
    <p>On Node Isolation under Churn in Unstructured P2P Networks with Heavy-Tailed Lifetimes</p>
    <p>On Node Isolation under Churn in On Node Isolation under Churn in Unstructured P2P Networks with Unstructured P2P Networks with HeavyHeavy--Tailed Lifetimes Tailed Lifetimes</p>
    <p>ZhongmeiZhongmei YaoYao Joint work with Xiaoming Wang, Derek Leonard, and Joint work with Xiaoming Wang, Derek Leonard, and Dmitri LoguinovDmitri Loguinov Internet Research LabInternet Research Lab Department of Computer ScienceDepartment of Computer Science Texas A&amp;M University, College Station, TX 77843Texas A&amp;M University, College Station, TX 77843</p>
    <p>May 10, 2007May 10, 2007</p>
  </div>
  <div class="page">
    <p>m p</p>
    <p>ut e</p>
    <p>ie nc</p>
    <p>e , T</p>
    <p>e xa</p>
    <p>s A</p>
    <p>&amp; M</p>
    <p>U ni</p>
    <p>ve rs</p>
    <p>ity</p>
    <p>AgendaAgendaAgenda</p>
    <p>Motivation and background  Terminology, assumptions, and related work</p>
    <p>Generic node isolation model</p>
    <p>Max-age selection</p>
    <p>Age-proportional random-walk selection</p>
    <p>Wrap-up</p>
  </div>
  <div class="page">
    <p>m p</p>
    <p>ut e</p>
    <p>ie nc</p>
    <p>e , T</p>
    <p>e xa</p>
    <p>s A</p>
    <p>&amp; M</p>
    <p>U ni</p>
    <p>ve rs</p>
    <p>ity</p>
    <p>TerminologyTerminologyTerminology</p>
    <p>Resilience of unstructured P2P networks  Ability of a network to remain connected under node failure,</p>
    <p>which is fundamental to system performance</p>
    <p>User churn  Each user stays in the system for L random time units</p>
    <p>Out-degree  Joining users select k neighbors</p>
    <p>Neighbor replacement  Detection of failed neighbors and replacement with existing</p>
    <p>peers occur within S time units (can be fixed or random)</p>
  </div>
  <div class="page">
    <p>m p</p>
    <p>ut e</p>
    <p>ie nc</p>
    <p>e , T</p>
    <p>e xa</p>
    <p>s A</p>
    <p>&amp; M</p>
    <p>U ni</p>
    <p>ve rs</p>
    <p>ity</p>
    <p>Heavy-tailed lifetimes</p>
    <p>Background Background Background Resilience</p>
    <p>Local: isolation of individual nodes before they depart</p>
    <p>Global: disconnection of the graph</p>
    <p>Out-degree Joint in/out-degreeDisconnection iff a node is isolated</p>
    <p>Leonard 2005 Yao 2006</p>
    <p>Real unstructured P2P networks</p>
    <p>Exponential lifetimes</p>
    <p>Pandurangan 2001, Liben-Nowell 2002, Krishnamurthy 2005, Leonard 2005</p>
    <p>No prior work</p>
  </div>
  <div class="page">
    <p>m p</p>
    <p>ut e</p>
    <p>ie nc</p>
    <p>e , T</p>
    <p>e xa</p>
    <p>s A</p>
    <p>&amp; M</p>
    <p>U ni</p>
    <p>ve rs</p>
    <p>ity</p>
    <p>AgendaAgendaAgenda</p>
    <p>Motivation and background  Terminology, assumptions, and related work</p>
    <p>Generic node isolation model</p>
    <p>Max-age selection</p>
    <p>Age-proportional random-walk selection</p>
    <p>Wrap-up</p>
  </div>
  <div class="page">
    <p>m p</p>
    <p>ut e</p>
    <p>ie nc</p>
    <p>e , T</p>
    <p>e xa</p>
    <p>s A</p>
    <p>&amp; M</p>
    <p>U ni</p>
    <p>ve rs</p>
    <p>ity</p>
    <p>Model BasicsModel BasicsModel Basics  Neighbor residual lifetimes R</p>
    <p>The time duration from the instance a peer is selected by user v as a neighbor until the peer departs</p>
    <p>This metric depends on neighbor selection strategies  Some strategies may find users with large residual lifetimes</p>
    <p>with high probability while others may not</p>
    <p>time tv when v selects a neighbor R</p>
    <p>L: user lifetime peer 1</p>
    <p>peer 2</p>
    <p>peer 3</p>
  </div>
  <div class="page">
    <p>m p</p>
    <p>ut e</p>
    <p>ie nc</p>
    <p>e , T</p>
    <p>e xa</p>
    <p>s A</p>
    <p>&amp; M</p>
    <p>U ni</p>
    <p>ve rs</p>
    <p>ity</p>
    <p>Model Basics 2Model Basics 2Model Basics 2</p>
    <p>Neighbor failure/replacement is an ON/OFF process</p>
    <p>Node out-degree evolution</p>
    <p>R: residual lifetime</p>
    <p>S: search delay</p>
    <p>the i-th link</p>
    <p>L: user lifetime</p>
    <p>W(t) isolation time T</p>
    <p>isolation probability: P(T &lt; L)</p>
    <p>k</p>
    <p>neighbor alive neighbor</p>
    <p>dead</p>
  </div>
  <div class="page">
    <p>m p</p>
    <p>ut e</p>
    <p>ie nc</p>
    <p>e , T</p>
    <p>e xa</p>
    <p>s A</p>
    <p>&amp; M</p>
    <p>U ni</p>
    <p>ve rs</p>
    <p>ity</p>
    <p>Out-Degree Process OutOut--Degree Process Degree Process</p>
    <p>Determining the first-hitting time of W(t) to zero (i.e., isolation time T) is difficult unless W(t) is Markovian  Idea: replace the distribution of ON/OFF durations with a</p>
    <p>hyper-exponential approximation (see paper for details)  It is well-known (Feldmann 1998) that any completely</p>
    <p>monotone density function (e.g., Pareto, Weibull) can be approximated by a hyper-exponential PDF with arbitrary accuracy</p>
    <p>Theorem 1: For hyper-exponential neighbor residual lifetimes R and hyper-exponential search delays S, the out-degree process {W(t)} is a continuous-time Markov process</p>
  </div>
  <div class="page">
    <p>m p</p>
    <p>ut e</p>
    <p>ie nc</p>
    <p>e , T</p>
    <p>e xa</p>
    <p>s A</p>
    <p>&amp; M</p>
    <p>U ni</p>
    <p>ve rs</p>
    <p>ity</p>
    <p>Node Isolation ProbabilityNode Isolation ProbabilityNode Isolation Probability</p>
    <p>Theorem 2: Given that {W(t)} is a Markov process, the PDF fT(t) of the isolation time T can be obtained using the transition rate matrix of process {W(t)} shown in the paper  Then, it is straightforward to obtain:</p>
    <p>the CCDF of user lifetimes</p>
    <p>node isolation probability</p>
  </div>
  <div class="page">
    <p>m p</p>
    <p>ut e</p>
    <p>ie nc</p>
    <p>e , T</p>
    <p>e xa</p>
    <p>s A</p>
    <p>&amp; M</p>
    <p>U ni</p>
    <p>ve rs</p>
    <p>ity</p>
    <p>Accuracy of Node Isolation ModelAccuracy of Node Isolation ModelAccuracy of Node Isolation Model  Simulation results on isolation probability  for E[L] = 0.5 hours and k = 7 under uniform selection</p>
    <p>Our model can be used to compute  in networks with various types of lifetimes and different neighbor selection strategies  As long as the distribution of neighbor residual lifetimes can</p>
    <p>be approximated by a hyper-exponential distribution</p>
    <p>consistent</p>
    <p>shape parameter</p>
  </div>
  <div class="page">
    <p>m p</p>
    <p>ut e</p>
    <p>ie nc</p>
    <p>e , T</p>
    <p>e xa</p>
    <p>s A</p>
    <p>&amp; M</p>
    <p>U ni</p>
    <p>ve rs</p>
    <p>ity</p>
    <p>Rules for Selecting NeighborsRules for Selecting NeighborsRules for Selecting Neighbors</p>
    <p>Higher resilience (i.e., smaller isolation probability) is achieved by selecting neighbors with larger residual lifetimes  When it is impossible to obtain future knowledge of user</p>
    <p>remaining lifetimes R, user age A may be used as a robust predictor of R</p>
    <p>In systems with heavy-tailed lifetimes (e.g., Pareto, Weibull, and Cauchy), users with larger age demonstrate stochastically larger residual lifetimes.</p>
    <p>For light-tailed lifetimes (e.g., uniform distributions), it is the opposite</p>
  </div>
  <div class="page">
    <p>m p</p>
    <p>ut e</p>
    <p>ie nc</p>
    <p>e , T</p>
    <p>e xa</p>
    <p>s A</p>
    <p>&amp; M</p>
    <p>U ni</p>
    <p>ve rs</p>
    <p>ity</p>
    <p>AgendaAgendaAgenda</p>
    <p>Motivation and background  Terminology, assumptions, and related work</p>
    <p>Generic node isolation model</p>
    <p>Max-age selection</p>
    <p>Age-proportional random-walk selection</p>
    <p>Wrap-up</p>
  </div>
  <div class="page">
    <p>m p</p>
    <p>ut e</p>
    <p>ie nc</p>
    <p>e , T</p>
    <p>e xa</p>
    <p>s A</p>
    <p>&amp; M</p>
    <p>U ni</p>
    <p>ve rs</p>
    <p>ity</p>
    <p>Basics of Max-Age SelectionBasics of MaxBasics of Max--Age SelectionAge Selection</p>
    <p>Suppose that each user v publishes its joining time tv to its neighbors, so that they knows vs current age: t  tv, where t is the current time</p>
    <p>Each user uniformly selects m alive users at random from the system and chooses the one with the maximal current age as its neighbor  Uniform selection can be implemented using special random</p>
    <p>walks on the graph (Zhong 2005)  When m = 1, the max-age approach reduces to the simple</p>
    <p>uniform approach</p>
    <p>Denote by Um the residual lifetime of the user whose age is maximal among m uniformly selected peers</p>
  </div>
  <div class="page">
    <p>m p</p>
    <p>ut e</p>
    <p>ie nc</p>
    <p>e , T</p>
    <p>e xa</p>
    <p>s A</p>
    <p>&amp; M</p>
    <p>U ni</p>
    <p>ve rs</p>
    <p>ity</p>
    <p>Neighbor Residual LifetimesNeighbor Residual LifetimesNeighbor Residual Lifetimes  Theorem 3: For any heavy-tailed lifetime distribution,</p>
    <p>larger m implies a stochastically larger neighbor residual lifetime Um:</p>
    <p>U6 is stochastically larger than U1</p>
    <p>Open question: how does m affect the obtained</p>
    <p>benefits?</p>
    <p>See the paper for the formula of the distribution of Um</p>
    <p>Simulation results on the tail distribution of Um for  = 3</p>
  </div>
  <div class="page">
    <p>m p</p>
    <p>ut e</p>
    <p>ie nc</p>
    <p>e , T</p>
    <p>e xa</p>
    <p>s A</p>
    <p>&amp; M</p>
    <p>U ni</p>
    <p>ve rs</p>
    <p>ity</p>
    <p>Neighbor Residual Lifetimes 2Neighbor Residual Lifetimes 2Neighbor Residual Lifetimes 2</p>
    <p>Theorem 4: For Pareto lifetimes L with CDF F(x) = 1  (1 + x/), the mean residual lifetime E[Um] is proportional to m1/(  1) for  &gt; 2 and nontrivial m  If  = 3,  For   2, the increase in E[Um] is more aggressive:</p>
    <p>If   2, the mean is infinite</p>
    <p>Max-age selection is much more effective in systems with more heavy-tailed lifetimes (e.g., smaller )</p>
  </div>
  <div class="page">
    <p>m p</p>
    <p>ut e</p>
    <p>ie nc</p>
    <p>e , T</p>
    <p>e xa</p>
    <p>s A</p>
    <p>&amp; M</p>
    <p>U ni</p>
    <p>ve rs</p>
    <p>ity</p>
    <p>Node Isolation under Max-Age SelectionNode Isolation under MaxNode Isolation under Max--Age SelectionAge Selection  By approximating the distribution of Um with a hyper</p>
    <p>exponential distribution, we readily obtain isolation probability using our general node isolation model</p>
    <p>m=6, =3, and k=7 =2, and k=7, E[S]=6 mins</p>
    <p>isolation probability approaches 0 as</p>
    <p>m  matches simulation results</p>
  </div>
  <div class="page">
    <p>m p</p>
    <p>ut e</p>
    <p>ie nc</p>
    <p>e , T</p>
    <p>e xa</p>
    <p>s A</p>
    <p>&amp; M</p>
    <p>U ni</p>
    <p>ve rs</p>
    <p>ity</p>
    <p>DiscussionDiscussionDiscussion</p>
    <p>The max-age selection strategy requires sampling m users per link  The overhead may not scale well for large m</p>
    <p>Much higher resilience can be achieved by more aggressively preferring users with large age</p>
    <p>We thus next propose a more efficient and effective neighbor selection strategy for heavy-tailed lifetimes</p>
  </div>
  <div class="page">
    <p>m p</p>
    <p>ut e</p>
    <p>ie nc</p>
    <p>e , T</p>
    <p>e xa</p>
    <p>s A</p>
    <p>&amp; M</p>
    <p>U ni</p>
    <p>ve rs</p>
    <p>ity</p>
    <p>AgendaAgendaAgenda</p>
    <p>Motivation and background  Terminology, assumptions, and related work</p>
    <p>Generic node isolation model</p>
    <p>Max-age selection</p>
    <p>Age-proportional random-walk selection</p>
    <p>Wrap-up</p>
  </div>
  <div class="page">
    <p>m p</p>
    <p>ut e</p>
    <p>ie nc</p>
    <p>e , T</p>
    <p>e xa</p>
    <p>s A</p>
    <p>&amp; M</p>
    <p>U ni</p>
    <p>ve rs</p>
    <p>ity</p>
    <p>Basics of Age-Proportional SelectionBasics of AgeBasics of Age--Proportional SelectionProportional Selection</p>
    <p>We introduce a new age-biased neighbor selection method to ensure that the probability that user v is selected by another peer is proportional to its current age Av:</p>
    <p>This approach is based on random walks on directed and weighted graphs  It provides a distributed solution that requires only one</p>
    <p>sample per link</p>
    <p>the set including all existing users</p>
  </div>
  <div class="page">
    <p>m p</p>
    <p>ut e</p>
    <p>ie nc</p>
    <p>e , T</p>
    <p>e xa</p>
    <p>s A</p>
    <p>&amp; M</p>
    <p>U ni</p>
    <p>ve rs</p>
    <p>ity</p>
    <p>Random WalksRandom WalksRandom Walks  Assume that each user makes its current age and in</p>
    <p>degree known to its in-degree neighbors  The weight of each link is determined by the current age and</p>
    <p>in-degree of the node that the link points to</p>
    <p>Random walks are performed by alternating between walking along incoming and outgoing links  The probability that a link is chosen is proportional to its</p>
    <p>weight  The stationary distribution of the random-walk algorithm is:</p>
    <p>u v</p>
    <p>achieves the desired result</p>
  </div>
  <div class="page">
    <p>m p</p>
    <p>ut e</p>
    <p>ie nc</p>
    <p>e , T</p>
    <p>e xa</p>
    <p>s A</p>
    <p>&amp; M</p>
    <p>U ni</p>
    <p>ve rs</p>
    <p>ity</p>
    <p>Neighbor Residual LifetimesNeighbor Residual LifetimesNeighbor Residual Lifetimes</p>
    <p>Theorem 5: For random-walks where the above stationary distribution holds, the tail distribution of residual lifetimes R of selected neighbors is:</p>
    <p>For Pareto lifetimes F(x)=1  (1 + x/),  &gt; 2, the above yields:</p>
    <p>The mean E[R] is /(  3) if  &gt; 3, and is infinite otherwise</p>
    <p>the mean age the user lifetime distribution</p>
    <p>The shape is reduced by 2</p>
  </div>
  <div class="page">
    <p>m p</p>
    <p>ut e</p>
    <p>ie nc</p>
    <p>e , T</p>
    <p>e xa</p>
    <p>s A</p>
    <p>&amp; M</p>
    <p>U ni</p>
    <p>ve rs</p>
    <p>ity</p>
    <p>Node Isolation Probability for  &gt; 2Node Isolation Probability for Node Isolation Probability for  &gt;&gt; 22</p>
    <p>Simulation results on node isolation probability under age-proportional selection for Pareto L and k = 7</p>
    <p>Isolation probability is 104 times smaller than that under uniform selection for  = 2.5</p>
    <p>Isolation probability converges to 0 as   2</p>
    <p>In contrast, this metric under max-age selection does not tend to 0 unless m   or   1 (both impossible to achieve in practice)</p>
  </div>
  <div class="page">
    <p>m p</p>
    <p>ut e</p>
    <p>ie nc</p>
    <p>e , T</p>
    <p>e xa</p>
    <p>s A</p>
    <p>&amp; M</p>
    <p>U ni</p>
    <p>ve rs</p>
    <p>ity</p>
    <p>Node Isolation Probability for   2Node Isolation Probability for Node Isolation Probability for   22</p>
    <p>Theorem 4: For age-proportional random walks, Pareto lifetimes with 1 &lt;   2, any number of neighbors k  1, and any type of search delay (including S = ), as system age and size n converge to infinity, node isolation probability approaches:</p>
    <p>Gnutella has been shown to have  between 1.06 (Bustamante 2003) and 1.09 (Wang 2007)  These networks under age-proportional random walks</p>
    <p>approach an ideal system with zero node isolation probability as users join/depart the system</p>
  </div>
  <div class="page">
    <p>m p</p>
    <p>ut e</p>
    <p>ie nc</p>
    <p>e , T</p>
    <p>e xa</p>
    <p>s A</p>
    <p>&amp; M</p>
    <p>U ni</p>
    <p>ve rs</p>
    <p>ity</p>
    <p>Node Isolation Probability for   2Node Isolation Probability for Node Isolation Probability for   22  Simulation results of node isolation probability without</p>
    <p>replacing neighbors (i.e., S = ) for Pareto lifetimes</p>
    <p>monotonically decreases as system</p>
    <p>age increases</p>
  </div>
  <div class="page">
    <p>m p</p>
    <p>ut e</p>
    <p>ie nc</p>
    <p>e , T</p>
    <p>e xa</p>
    <p>s A</p>
    <p>&amp; M</p>
    <p>U ni</p>
    <p>ve rs</p>
    <p>ity</p>
    <p>Wrap-upWrapWrap--upup</p>
    <p>We developed a general node isolation model for any completely monotone density function of neighbor residual lifetimes  We applied this model to study node isolation behavior</p>
    <p>under uniform, max-age, or age-proportional random-walk selection to demonstrate its versatility</p>
    <p>We proposed a new neighbor selection strategy, ageproportional random walks  Under proposed neighbor selection, P2P networks with</p>
    <p>heavy-tailed lifetimes with   2 become progressively more resilient over time and approach a system with zero node isolation probability, as more users join the system</p>
  </div>
</Presentation>

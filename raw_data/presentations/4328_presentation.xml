<?xml version="1.0" ?>
<Presentation>
  <div class="page">
    <p>Domain Adaptation for Constituency Parsing Using Partial Annotations</p>
    <p>Vidur Joshi Matthew Peters Mark Hopkins</p>
  </div>
  <div class="page">
    <p>Textual Entailment (Bowman et al., 2016)</p>
    <p>Semantic Parsing (Hopkins et al., 2017)</p>
    <p>Sentiment Analysis (Socher et al., 2013)</p>
    <p>Language Modeling (Dyer et al., 2016)</p>
    <p>Constituency Parsing is Useful</p>
  </div>
  <div class="page">
    <p>Penn Tree Bank (PTB) (Marcus et al., 1993)</p>
    <p>Newswire domain</p>
  </div>
  <div class="page">
    <p>Geometry Problem:</p>
    <p>In the rhombus PQRS, PR = 24 and QS = 10.</p>
    <p>Question:</p>
    <p>What's the second-most-used vowel in English?</p>
    <p>Biochemistry:</p>
    <p>Ethoxycoumarin was metabolized by isolated epidermal cells via dealkylation to</p>
    <p>But, Target Domains Are Diverse!</p>
  </div>
  <div class="page">
    <p>Parse geometry sentence with PTB trained parser</p>
    <p>Performance Outside Source Domain</p>
  </div>
  <div class="page">
    <p>Parse geometry sentence with PTB trained parser</p>
    <p>Performance Outside Source Domain</p>
  </div>
  <div class="page">
    <p>Parse geometry sentence with PTB trained parser</p>
    <p>Performance Outside Source Domain</p>
  </div>
  <div class="page">
    <p>How can we cheaply create high quality parsers for new domains?</p>
  </div>
  <div class="page">
    <p>Relevant Recent Developments in NLP</p>
    <p>Contextualized word representations improve sample efficiency. (Peters et al., 2018)</p>
    <p>Span-focused models achieve state-of-the-art constituency parsing results. (Stern et al., 2017)</p>
  </div>
  <div class="page">
    <p>Contributions</p>
    <p>Show contextual word embeddings help domain adaptation. E.g., Over 90% F1 on Brown Corpus.</p>
    <p>Adapt a parser using partial annotations. E.g., Increase correct geometry-domain parses by 23%.</p>
  </div>
  <div class="page">
    <p>Outline</p>
    <p>Review Contextual Word Representations</p>
    <p>Partial Annotations: Definition Training Parsing as Span Classification The Span Classification Model</p>
    <p>Experiments and Results: Performance on PTB and new Domains Adapting Using Partial Annotations</p>
  </div>
  <div class="page">
    <p>Contextualized Word Representations ELMo trained on Billion Word Corpus (Peters et al., 2018).</p>
  </div>
  <div class="page">
    <p>Contextualized Word Representations ELMo trained on Billion Word Corpus (Peters et al., 2018).</p>
    <p>Improve sample efficiency 13</p>
  </div>
  <div class="page">
    <p>Partial Annotations</p>
    <p>Definition</p>
    <p>Training</p>
    <p>Parsing as Span Classification</p>
    <p>The Span Classification Model</p>
  </div>
  <div class="page">
    <p>A triangle has a perimeter of 16 and one side of length 4.</p>
    <p>Selectively Annotate Important Phenomena</p>
  </div>
  <div class="page">
    <p>A triangle has [a perimeter of 16] and one side of length 4.</p>
    <p>Selectively Annotate Important Phenomena</p>
  </div>
  <div class="page">
    <p>A triangle has [a perimeter of 16] and one side of length 4.</p>
    <p>Selectively Annotate Important Phenomena</p>
  </div>
  <div class="page">
    <p>A triangle has [a perimeter {of 16] and one side of length 4}.</p>
    <p>Selectively Annotate Important Phenomena</p>
  </div>
  <div class="page">
    <p>Full Versus Partial Annotation</p>
    <p>(S (NP A triangle) (VP has (NP (NP (NP a perimeter) (PP of 16)) and (NP (NP one side) (PP of (NP length 4))))) .)</p>
    <p>A triangle has [a perimeter {of 16] and one side of length 4}.</p>
  </div>
  <div class="page">
    <p>Partial Annotation Definition</p>
    <p>Partial annotation is a labeled span.</p>
    <p>A triangle has [a perimeter of 16] and one side of length 4 .</p>
    <p>A triangle has [NP a perimeter of 16] and one side of length 4 .</p>
    <p>A triangle has a perimeter {of 16 and one side of length 4} . 20</p>
  </div>
  <div class="page">
    <p>Allowing annotators to selectively annotate important phenomena, makes the process faster and simpler.</p>
    <p>(Mielens et al., 2015)</p>
    <p>Why Partial Annotations?</p>
  </div>
  <div class="page">
    <p>Definition</p>
    <p>Training</p>
    <p>Parsing as Span Classification</p>
    <p>The Span Classification Model</p>
  </div>
  <div class="page">
    <p>Objective for Full Annotation</p>
  </div>
  <div class="page">
    <p>Since we do not have a full parse,</p>
    <p>marginalize out components for which no supervision exists.</p>
    <p>Objective for Partial Annotation</p>
  </div>
  <div class="page">
    <p>Marginalize out components for which no supervision exists.</p>
    <p>Objective for Partial Annotation</p>
    <p>Expensive!</p>
  </div>
  <div class="page">
    <p>One Solution: Approximation*</p>
    <p>*(Mirroshandel and Nasr, 2011; Majidi and Crane, 2013, Nivre et al., 2014; Li et al., 2016)</p>
  </div>
  <div class="page">
    <p>Our Solution: Parsing as Span Classification Assume probability of a parse factors into a product of probabilities.</p>
  </div>
  <div class="page">
    <p>Our Solution: Parsing as Span Classification Assume probability of a parse factors into a product of probabilities.</p>
  </div>
  <div class="page">
    <p>Our Solution: Parsing as Span Classification Assume probability of a parse factors into a product of probabilities.</p>
  </div>
  <div class="page">
    <p>Our Solution: Parsing as Span Classification Assume probability of a parse factors into a product of probabilities.</p>
    <p>Objective now simplifies to:</p>
    <p>Easy if model classifies spans!</p>
  </div>
  <div class="page">
    <p>Definition</p>
    <p>Training</p>
    <p>Parsing as Span Classification</p>
    <p>The Span Classification Model</p>
  </div>
  <div class="page">
    <p>Parse Tree Labels All Spans*</p>
  </div>
  <div class="page">
    <p>Parse Tree Labels All Spans*</p>
  </div>
  <div class="page">
    <p>Parse Tree Labels All Spans*</p>
  </div>
  <div class="page">
    <p>Parse Tree Labels All Spans*</p>
  </div>
  <div class="page">
    <p>Parse Tree Labels All Spans*</p>
  </div>
  <div class="page">
    <p>Parse Tree Labels All Spans*</p>
  </div>
  <div class="page">
    <p>Parse Tree Labels All Spans*</p>
  </div>
  <div class="page">
    <p>Parse Tree Labels All Spans*</p>
  </div>
  <div class="page">
    <p>Parse Tree Labels All Spans*</p>
  </div>
  <div class="page">
    <p>Parse Tree Labels All Spans*</p>
  </div>
  <div class="page">
    <p>Parse Tree Labels All Spans*</p>
  </div>
  <div class="page">
    <p>A partial annotation is a labeled span.</p>
    <p>A full parse labels every span in the sentence.</p>
    <p>Therefore, training on both is identical under our derived objective.</p>
    <p>Training on Full and Partial Annotations</p>
  </div>
  <div class="page">
    <p>Parsing Using Span Classification Model Find maximum using dynamic programming:</p>
  </div>
  <div class="page">
    <p>Partial annotations are labeled spans.</p>
    <p>Summary</p>
  </div>
  <div class="page">
    <p>Partial annotations are labeled spans.</p>
    <p>Use a span classification model to parse.</p>
    <p>Summary</p>
  </div>
  <div class="page">
    <p>Partial annotations are labeled spans.</p>
    <p>Use a span classification model to parse.</p>
    <p>Training on partial and full annotations becomes identical.</p>
    <p>Summary</p>
  </div>
  <div class="page">
    <p>Definition</p>
    <p>Training</p>
    <p>Parsing as Span Classification</p>
    <p>The Span Classification Model</p>
  </div>
  <div class="page">
    <p>Model Architecture (Stern et al., 2017)</p>
  </div>
  <div class="page">
    <p>Model Architecture (Stern et al., 2017)</p>
  </div>
  <div class="page">
    <p>Model Architecture (Stern et al., 2017)</p>
    <p>LSTM</p>
    <p>LSTM</p>
    <p>LSTM</p>
    <p>LSTM</p>
    <p>LSTM</p>
    <p>LSTM</p>
    <p>LSTM</p>
    <p>LSTM</p>
    <p>LSTM</p>
    <p>LSTM</p>
  </div>
  <div class="page">
    <p>Model Architecture (Stern et al., 2017)</p>
    <p>... ... ... ... ...</p>
  </div>
  <div class="page">
    <p>Span Embedding (Wang and Chang, 2016; Cross and Huang, 2016; Stern et al., 2017)</p>
    <p>enjoys playing =</p>
    <p>She enjoys playing tennis .</p>
    <p>... ... ... ... ...</p>
  </div>
  <div class="page">
    <p>Model Architecture (Stern et al., 2017)</p>
    <p>enjoys playing =</p>
    <p>She enjoys playing tennis .</p>
    <p>... ... ... ... ...</p>
    <p>MLP</p>
  </div>
  <div class="page">
    <p>Differences</p>
    <p>Ours Stern et al., 2017</p>
    <p>Objective Maximum likelihood on labels</p>
    <p>Maximum margin on trees</p>
    <p>ELMo Yes No</p>
    <p>POS Tags as Input No Yes</p>
  </div>
  <div class="page">
    <p>Differences</p>
    <p>Ours Stern et al., 2017</p>
    <p>Objective Maximum likelihood on labels</p>
    <p>Maximum margin on trees</p>
    <p>ELMo Yes No</p>
    <p>POS Tags as Input No Yes</p>
  </div>
  <div class="page">
    <p>Differences</p>
    <p>Ours Stern et al., 2017</p>
    <p>Objective Maximum likelihood on labels</p>
    <p>Maximum margin on trees</p>
    <p>ELMo Yes No</p>
    <p>POS Tags as Input No Yes</p>
  </div>
  <div class="page">
    <p>Differences</p>
    <p>Ours Stern et al., 2017</p>
    <p>Objective Maximum likelihood on labels</p>
    <p>Maximum margin on trees</p>
    <p>ELMo Yes No</p>
    <p>POS Tags as Input No Yes</p>
  </div>
  <div class="page">
    <p>Experiments and</p>
    <p>Results</p>
    <p>Performance on PTB</p>
    <p>Learning Curve on New Domains</p>
    <p>Adapting Using Partial Annotations</p>
  </div>
  <div class="page">
    <p>Performance on PTB</p>
    <p>-POS tags</p>
    <p>=</p>
  </div>
  <div class="page">
    <p>Performance on PTB</p>
    <p>Generative Neural Parsing</p>
    <p>*New SoTA is 95.1 (Kitaev and Klein, ACL 2018)</p>
  </div>
  <div class="page">
    <p>Performance on PTB</p>
    <p>Learning Curve on New Domains</p>
    <p>Adapting Using Partial Annotations</p>
  </div>
  <div class="page">
    <p>Question Bank (Judge et al., 2006)</p>
    <p>4,000 questions.  In contrast, PTB has few questions.</p>
    <p>Who is the author of the book, ``The Iron Lady: A Biography of Margaret Thatcher''?</p>
  </div>
  <div class="page">
    <p>Do We Need Domain Adaptation?</p>
    <p>Number of parses from Question Bank</p>
    <p>F1 +7.2 % Training on QB</p>
  </div>
  <div class="page">
    <p>How Much Data Do We Need?</p>
    <p>Number of parses from Question Bank</p>
    <p>F1</p>
  </div>
  <div class="page">
    <p>How Much Data Do We Need?</p>
    <p>Number of parses from Question Bank</p>
    <p>F1 Not Much Improvements taper quickly</p>
  </div>
  <div class="page">
    <p>Experiments and</p>
    <p>Results</p>
    <p>Performance on PTB</p>
    <p>Learning Curve on New Domains</p>
    <p>Adapting Using Partial Annotations</p>
  </div>
  <div class="page">
    <p>Geometry Problems (Seo et al., 2015) In the diagram at the right, circle O has a radius of 5, and CE = 2. Diameter AC is</p>
    <p>perpendicular to chord BD at E. What is the length of BD?</p>
    <p>Biochemistry (Nivre et al., 2007) Ethoxycoumarin was metabolized by isolated epidermal cells via dealkylation to</p>
  </div>
  <div class="page">
    <p>Setup</p>
    <p>Annotator is a parsing expert.</p>
    <p>Sees parser output.</p>
    <p>Annotated sentences randomly split into train and dev.</p>
  </div>
  <div class="page">
    <p>Biochemistry Annotations</p>
    <p>[ [ In situ ] hybridization ] has revealed a striking subnuclear distribution of [ c-myc RNA transcripts ] .</p>
    <p>[ Cell growth of neuroblastoma cells in [ serum containing medium ] ] was clearly diminished by [ inhibition of FPTase ]</p>
  </div>
  <div class="page">
    <p>What do partial annotations buy us?</p>
  </div>
  <div class="page">
    <p>Geometry Annotations</p>
    <p>What is [ the value of [ y { + z } ] ] ? [ Diameter AC ] is perpendicular [ to chord BD ] [ at E ] .</p>
    <p>Find [ the measure of [ the angle designated by x ] ] .</p>
  </div>
  <div class="page">
    <p>What do partial annotations buy us?</p>
  </div>
  <div class="page">
    <p>Iterative Annotation</p>
  </div>
  <div class="page">
    <p>Error Analysis on Geometry Training Set</p>
  </div>
  <div class="page">
    <p>Right Attaching Participial Adjective Error</p>
    <p>Find the hypotenuse of the triangle labeled t.</p>
  </div>
  <div class="page">
    <p>Iterative Annotation Proof-of-Concept</p>
    <p>Invent 3 sentences similar to the incorrect one: Find the hypotenuse of [ the triangle labeled t ] .</p>
  </div>
  <div class="page">
    <p>Iterative Annotation Proof-of-Concept</p>
    <p>Invent 3 sentences similar to the incorrect one: Find the hypotenuse of [ the triangle labeled t ] . Given [ a circle with [ the tangent shown ] ] .</p>
  </div>
  <div class="page">
    <p>Iterative Annotation Proof-of-Concept</p>
    <p>Invent 3 sentences similar to the incorrect one: Find the hypotenuse of [ the triangle labeled t ] . Given [ a circle with [ the tangent shown ] ] . Examine [ the following diagram with [ the square highlighted ] ] .</p>
  </div>
  <div class="page">
    <p>Performance after Iterative Annotation</p>
    <p>Correctly identified constituents:</p>
    <p>Error free sentences:</p>
  </div>
  <div class="page">
    <p>Conclusion</p>
    <p>Recent developments make it much easier to train on</p>
    <p>partial annotations and build custom parsers.</p>
    <p>Making a few partial annotations can lead to significant</p>
    <p>performance improvements. Demo: http://demo.allennlp.org/constituency-parsing</p>
    <p>Datasets: https://github.com/vidurj/parser-adaptation/tree/master/data</p>
  </div>
  <div class="page"/>
</Presentation>

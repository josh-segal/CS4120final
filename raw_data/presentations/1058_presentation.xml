<?xml version="1.0" ?>
<Presentation>
  <div class="page">
    <p>Bound Analysis of Closed Queueing Networks with Workload Burstiness</p>
    <p>Giuliano Casale</p>
    <p>Ningfang Mi</p>
    <p>Evgenia Smirni {casale,ningfang,esmirni}@cs.wm.edu</p>
    <p>College of William and Mary Department of Computer Science</p>
    <p>Williamsburg, Virginia</p>
    <p>ACM SIGMETRICS 2008</p>
    <p>Annapolis, June 3, 2008</p>
  </div>
  <div class="page">
    <p>Integrate in queueing networks service time burstiness  Long peaks (burstsbursts) of consecutively large requests</p>
    <p>Real workloads often characterized by burstiness  Seagate (disks, [Usenix06,Perf07]),HPLabs (multi-tier,[HotMetrics])</p>
    <p>Workload Burstiness</p>
    <p>G.Casale, N.Mi, E.Smirni. Bound Analysis of Closed Queueing Networks with Workload Burstiness 2SIGMETRICS 2008</p>
  </div>
  <div class="page">
    <p>Classes of Closed Queueing Networks</p>
    <p>G.Casale, N.Mi, E.Smirni. Bound Analysis of Closed Queueing Networks with Workload Burstiness 3SIGMETRICS 2008</p>
    <p>Product-Form Networks</p>
    <p>High Service Variability Networks (GI)</p>
    <p>Queueing Networks with Burstiness (G)</p>
    <p>BCMP assumptions</p>
    <p>Exact Solution: MVA</p>
    <p>General Independent Service/FCFS</p>
    <p>Approximations: AMVA, Decomposition</p>
    <p>No prior formalization</p>
    <p>Can analyze also GI/Product-Form</p>
    <p>Burstiness: High-variability and correlation of service times</p>
  </div>
  <div class="page">
    <p>Research Contributions</p>
    <p>Generalization of PH-Type distributions</p>
    <p>MAP Queueing Networks</p>
    <p>Mean error 2% on random models</p>
    <p>G.Casale, N.Mi, E.Smirni. Bound Analysis of Closed Queueing Networks with Workload Burstiness 4SIGMETRICS 2008</p>
  </div>
  <div class="page">
    <p>MAP Queueing Networks</p>
    <p>Model Definition</p>
  </div>
  <div class="page">
    <p>Markovian Arrival Processes (MAPs)</p>
    <p>Hyper-exponential: samples independent of past history</p>
    <p>Two-phase MAP with burstiness (high-CV+correlations)</p>
    <p>G.Casale, N.Mi, E.Smirni. Bound Analysis of Closed Queueing Networks with Workload Burstiness 6SIGMETRICS 2008</p>
    <p>FASTFAST</p>
    <p>SLOWSLOW</p>
    <p>Job 1 completionJob 1 completion</p>
    <p>Job 2 completionJob 2 completion</p>
    <p>FASTFAST</p>
    <p>SLOWSLOW</p>
    <p>Job 1 completionJob 1 completion</p>
    <p>FASTFAST</p>
    <p>SLOWSLOW</p>
    <p>FASTFAST</p>
    <p>SLOWSLOW</p>
    <p>FASTFAST</p>
    <p>SLOWSLOW</p>
    <p>FASTFAST</p>
    <p>SLOWSLOW</p>
    <p>Job 2 completionJob 2 completion</p>
  </div>
  <div class="page">
    <p>Markovian Arrival Processes (MAPs)</p>
    <p>MAP model both distribution (e.g., high-CV) and burstiness</p>
    <p>Generalization of the method of phasesmethod of phases  Building block: exponential distribution</p>
    <p>Easy to integrate in Markov chains and queueing models</p>
    <p>Tools and fitting algorithms  KPC-Toolbox: automatic fitting from traces [Demo, QEST08]</p>
    <p>G.Casale, N.Mi, E.Smirni. Bound Analysis of Closed Queueing Networks with Workload Burstiness 7SIGMETRICS 2008</p>
  </div>
  <div class="page">
    <p>3 queues, Population N</p>
    <p>Single MAP server with two phases</p>
    <p>Example MAP Queueing Network</p>
    <p>G.Casale, N.Mi, E.Smirni. Bound Analysis of Closed Queueing Networks with Workload Burstiness 8SIGMETRICS 2008</p>
    <p>MM</p>
    <p>MMStation 1Station 1</p>
    <p>Station 2Station 2</p>
    <p>Station 3Station 3</p>
    <p>pp11</p>
    <p>pp22</p>
    <p>MAPMAP</p>
    <p>FASTFAST</p>
    <p>SLOWSLOW</p>
  </div>
  <div class="page">
    <p>Roadmap Bound Derivation</p>
    <p>G.Casale, N.Mi, E.Smirni. Bound Analysis of Closed Queueing Networks with Workload Burstiness 9SIGMETRICS 2008</p>
    <p>Dimensionality ReductionDimensionality Reduction Bound AnalysisBound Analysis</p>
    <p>Conditioning</p>
    <p>Transformation</p>
    <p>Characterization</p>
    <p>Bounding (Linear Programming)</p>
  </div>
  <div class="page">
    <p>MAP Queueing Networks</p>
    <p>Dimensionality Reduction</p>
  </div>
  <div class="page">
    <p>State Space Dimensionality</p>
    <p>G.Casale, N.Mi, E.Smirni. Bound Analysis of Closed Queueing Networks with Workload Burstiness 11SIGMETRICS 2008</p>
    <p>JOB DistributionJOB Distribution</p>
    <p>= Job Completions</p>
    <p>Station 3 empty</p>
    <p>Station 3 1 job</p>
    <p>Station 3 2 jobs Queues States</p>
    <p>State Space ExplosionState Space Explosion</p>
    <p>Population N=100Population N=2</p>
  </div>
  <div class="page">
    <p>MAP QN State Space (Markov chain)</p>
    <p>G.Casale, N.Mi, E.Smirni. Bound Analysis of Closed Queueing Networks with Workload Burstiness 12SIGMETRICS 2008</p>
    <p>Station 3Station 3 MAPMAP</p>
    <p>FASTFAST</p>
    <p>SLOWSLOW</p>
    <p>FASTFAST phase SLOWSLOW phase</p>
  </div>
  <div class="page">
    <p>Disjoint partitions solved as separate product-form networks</p>
    <p>Scalability thanks to MVA</p>
    <p>Decomposition-Aggregation</p>
    <p>G.Casale, N.Mi, E.Smirni. Bound Analysis of Closed Queueing Networks with Workload Burstiness 13SIGMETRICS 2008</p>
    <p>Partition 1 FASTFAST phase</p>
    <p>Partition 1 SLOWSLOW phase</p>
  </div>
  <div class="page">
    <p>Decomposition performance</p>
    <p>Decomposition unable to approximate MAP QN performance</p>
    <p>G.Casale, N.Mi, E.Smirni. Bound Analysis of Closed Queueing Networks with Workload Burstiness 14SIGMETRICS 2008</p>
  </div>
  <div class="page">
    <p>Busy Conditioning</p>
    <p>G.Casale, N.Mi, E.Smirni. Bound Analysis of Closed Queueing Networks with Workload Burstiness 15SIGMETRICS 2008</p>
    <p>Overlapping States = Not Lumping/Decomposition</p>
    <p>Station 3 busy FASTFAST phase</p>
    <p>Station 1 busy FASTFAST phase</p>
    <p>Station 3 busy SLOWSLOW phase</p>
    <p>Station 1 busy SLOWSLOW phase</p>
    <p>Station 2 busy SLOWSLOW phase</p>
    <p>Station 2 busy FASTFAST phase</p>
    <p>More information available to partitions: assume a station is busybusy</p>
    <p>No longer a product-form network: we lose scalability!</p>
  </div>
  <div class="page">
    <p>Idle Conditioning</p>
    <p>G.Casale, N.Mi, E.Smirni. Bound Analysis of Closed Queueing Networks with Workload Burstiness 16SIGMETRICS 2008</p>
    <p>Station 2 idle FASTFAST phase</p>
    <p>Station 3 idle FASTFAST phase</p>
    <p>Station 1 idle FASTFAST phase</p>
    <p>Station 1 idle SLOWSLOW phase</p>
    <p>Station 2 idle SLOWSLOW phase</p>
    <p>Station 3 idle SLOWSLOW phase</p>
    <p>How do we restore scalability? How do we use the new information?</p>
    <p>Alternatively assume a certain station is idleidle</p>
  </div>
  <div class="page">
    <p>Linear Reduction (LR) Transformation</p>
    <p>G.Casale, N.Mi, E.Smirni. Bound Analysis of Closed Queueing Networks with Workload Burstiness 17SIGMETRICS 2008</p>
    <p>Station 3 busy FASTFAST phase</p>
    <p>Conditional Queue-Length Station 1</p>
    <p>?</p>
    <p>Conditional Queue-Length Station 2</p>
    <p>?</p>
    <p>Conditional Queue-Length Station 3</p>
    <p>?</p>
    <p>Population N=2</p>
    <p>Loss of information to reduce dimension</p>
    <p>Number of states scales well with model size</p>
  </div>
  <div class="page">
    <p>MAP Queueing Networks</p>
    <p>Bound Analysis</p>
  </div>
  <div class="page">
    <p>Necessary conditionsNecessary conditions of equilibrium (12 equation types)</p>
    <p>Example 1:Example 1: population constraint</p>
    <p>Exact Characterization</p>
    <p>G.Casale, N.Mi, E.Smirni. Bound Analysis of Closed Queueing Networks with Workload Burstiness 19SIGMETRICS 2008</p>
    <p>Q3+ + = NQ2Q1 condcondcond</p>
    <p>Conditional Queue-Length 3</p>
    <p>Conditional Queue-Length 2</p>
    <p>Conditional Queue-Length 1</p>
  </div>
  <div class="page">
    <p>Example 2: Example 2: Flow Balance Assumption (FBA)</p>
    <p>Marginal balanceMarginal balance: fine grain probabilistic version of FBA</p>
    <p>XIN(k) = XOUT (k)</p>
    <p>Exact Characterization</p>
    <p>G.Casale, N.Mi, E.Smirni. Bound Analysis of Closed Queueing Networks with Workload Burstiness 20SIGMETRICS 2008</p>
    <p>XIN XOUT XIN=XOUT</p>
    <p>MAPMAPXIN(k)</p>
    <p>k jobs</p>
    <p>XOUT (k)</p>
    <p>XIN(k), XOUT(k) function of conditional queue-lengths</p>
  </div>
  <div class="page">
    <p>Summary of Linear Reduction</p>
    <p>G.Casale, N.Mi, E.Smirni. Bound Analysis of Closed Queueing Networks with Workload Burstiness 21SIGMETRICS 2008</p>
    <p>Queues Jobs Num states LR states LR eqs</p>
    <p>Computational complexity scales linearlylinearly with population</p>
    <p>Many equations between conditional queue-lengths</p>
  </div>
  <div class="page">
    <p>Linear Reduction (LR) bounds</p>
    <p>Intelligent guess of conditional queue-length probabilities  Best guess searched by linear programming</p>
    <p>Objective function  Utilizations</p>
    <p>Throughput ( Response Time)</p>
    <p>Mean queue-lengths</p>
    <p>Linear programming analysis  Unknowns: marginal subspace probabilities</p>
    <p>Constraints: exact characterization</p>
    <p>LR lower bounds: solve min F(x) subject to constraints</p>
    <p>LR upper bounds: solve max F(x) subject to constraints</p>
    <p>G.Casale, N.Mi, E.Smirni. Bound Analysis of Closed Queueing Networks with Workload Burstiness 22SIGMETRICS 2008</p>
    <p>F(x)</p>
  </div>
  <div class="page">
    <p>LR Bounds Example</p>
    <p>G.Casale, N.Mi, E.Smirni. Bound Analysis of Closed Queueing Networks with Workload Burstiness 23SIGMETRICS 2008</p>
  </div>
  <div class="page">
    <p>Random Validation Methodology</p>
    <p>G.Casale, N.Mi, E.Smirni. Bound Analysis of Closed Queueing Networks with Workload Burstiness 24SIGMETRICS 2008</p>
    <p>Validation on 10,000 random queueing networks</p>
    <p>Arbitrary routing, three queues</p>
    <p>Random two-phase MAP distribution and burstiness</p>
    <p>LR bounds compared to exact for populations 1000 jobs</p>
    <p>Reference metric: response time R</p>
    <p>Error function = worst case relative error</p>
  </div>
  <div class="page">
    <p>LR Bounds: Worst Case Error</p>
    <p>G.Casale, N.Mi, E.Smirni. Bound Analysis of Closed Queueing Networks with Workload Burstiness 25SIGMETRICS 2008</p>
  </div>
  <div class="page">
    <p>Conclusion</p>
    <p>Major extension of closed QNs to workload burstiness  Linear Reduction state-space transformation</p>
    <p>LR Bounds</p>
    <p>Future work  delay servers/load-dependent MAP service (we have it )</p>
    <p>mean-value analysis version (no state space, we almost have it)</p>
    <p>open queueing networks (not yet)</p>
    <p>Online resources: http://www.cs.wm.edu/MAPQN/</p>
    <p>Supported by NSF grants ITR-0428330 and CNS-0720699</p>
    <p>G.Casale, N.Mi, E.Smirni. Bound Analysis of Closed Queueing Networks with Workload Burstiness 26SIGMETRICS 2008</p>
  </div>
  <div class="page">
    <p>http://www.cs.wm.edu/MAPQN/</p>
  </div>
  <div class="page">
    <p>References</p>
    <p>[HotMetrics] Giuliano Casale, Ningfang Mi, Lucy Cherkasova, Evgenia Smirni: How to Parameterize Models with Bursty Workloads. To be presented at 1st HotMetrics Worshop (6th June 2008), Annapolis, MD, US.</p>
    <p>[KPC-Toolbox] Giuliano Casale, Eddy Z. Zhang, Evgenia Smirni. KPC-Toolbox: Simple Yet Effective Trace Fitting Using Markovian Arrival Processes. To be presented at QEST 2008 Conference, St.Malo, France, Sep 2008.</p>
    <p>[Performance07] Ningfang Mi, Qi Zhang, Alma Riska, Evgenia Smirni, Erik Riedel. Performance impacts of autocorrelated flows in multi-tiered systems. Perform. Eval. 64(9-12): 1082-1101 (2007)</p>
    <p>[Usenix06] Alma Riska, Erik Riedel. Disk Drive Level Workload Characterization. USENIX Annual Technical Conference, General Track 2006: 97-102</p>
    <p>G.Casale, N.Mi, E.Smirni. Bound Analysis of Closed Queueing Networks with Workload Burstiness 28SIGMETRICS 2008</p>
  </div>
  <div class="page"/>
  <div class="page">
    <p>Applicability to Real Workloads</p>
    <p>3 queues, 16-phases MAP fitting the Bellcore-Aug89 trace</p>
    <p>G.Casale, N.Mi, E.Smirni. Bound Analysis of Closed Queueing Networks with Workload Burstiness 30SIGMETRICS 2008</p>
  </div>
</Presentation>

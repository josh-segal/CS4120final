<?xml version="1.0" ?>
<Presentation>
  <div class="page">
    <p>Full Gamut Color Matching for Tiled Display Walls</p>
    <p>Grant Wallace, Han Chen, Kai Li</p>
    <p>Princeton University</p>
  </div>
  <div class="page">
    <p>Talk Outline</p>
    <p>Introduction</p>
    <p>Previous Work</p>
    <p>Algorithm Description</p>
    <p>Algorithm Evaluation</p>
    <p>Questions and Comments</p>
  </div>
  <div class="page">
    <p>The Goal: Seamless Display Walls</p>
    <p>Geometric Alignment  Luminance Balancing  Color Correction</p>
  </div>
  <div class="page">
    <p>Causes of Color Imbalance</p>
    <p>Differing color primaries  Projector bulbs  Color filters</p>
    <p>Differing RGB color proportions  Color temperature setting  RGB luminance mismatch</p>
    <p>Contributing to these  Manufacturing tolerances  Temporal decay  Differences in model/brand</p>
  </div>
  <div class="page">
    <p>Talk Outline</p>
    <p>Introduction</p>
    <p>Previous Work</p>
    <p>Algorithm Description</p>
    <p>Algorithm Evaluation</p>
    <p>Questions and Comments</p>
  </div>
  <div class="page">
    <p>Previous Work</p>
    <p>Majumder et al  Generalized description of color balancing</p>
    <p>problem  Independent RGB channel balancing</p>
    <p>Stone et al  Algorithm to find common gamut of LCD</p>
    <p>projectors  Characterization of difficulties with DLP</p>
    <p>projectors  Independent channel balancing</p>
  </div>
  <div class="page">
    <p>New Challenges</p>
    <p>DLP projectors have non-additive color response.  Projectors of different model/brand may have</p>
    <p>different primary chromaticity values.</p>
  </div>
  <div class="page">
    <p>A color gamut is the set of reproducible colors.</p>
    <p>Color gamuts are device dependent  A collection of projectors are color balanced when</p>
    <p>A standard gamut is defined within the intersecton of the individual gamuts</p>
    <p>A standard color transfer function is used to map rgb triples into the standard gamut</p>
    <p>Color Gamuts</p>
  </div>
  <div class="page">
    <p>Additive Gamuts</p>
    <p>A gamut is additive if its color transfer function is distributive under addition.</p>
    <p>Let F(r,g,b) be a devices color response to a rgb input  If F(r,g,b) = F(r,0,0) + F(0,g,0) + F(0,0,b)</p>
    <p>then F is defines an additive gamut.  Nice properties of additive gamuts</p>
    <p>The color transfer function F can be represented by a 3x3 matrix  Independent RGB channel balancing is effective at color balancing</p>
    <p>Additive Gamut</p>
  </div>
  <div class="page">
    <p>y</p>
    <p>x</p>
    <p>z</p>
    <p>y</p>
    <p>x</p>
    <p>z</p>
    <p>y</p>
    <p>x</p>
    <p>z</p>
    <p>y</p>
    <p>x</p>
    <p>z</p>
    <p>Channel balancing is effective on additive gamuts</p>
    <p>x</p>
  </div>
  <div class="page">
    <p>DLP Projectors</p>
    <p>DLP projectors commonly use white enhancement to increase the contrast ratio</p>
    <p>Four color filters are used  red, green, blue and clear (white)  White is added based on a function of the RGB input values  Similar to CMYK color printing</p>
    <p>White enhancement creates a non-additive gamut</p>
    <p>Typical Gamut of a DLP Projector</p>
  </div>
  <div class="page">
    <p>y</p>
    <p>x</p>
    <p>z</p>
    <p>y</p>
    <p>x</p>
    <p>z</p>
    <p>y</p>
    <p>x</p>
    <p>z</p>
    <p>y</p>
    <p>x</p>
    <p>z</p>
    <p>Channel balancing cannot completely match non-additive gamuts</p>
    <p>x</p>
  </div>
  <div class="page">
    <p>Mixed Vendor Projector Arrays</p>
    <p>Projectors from different vendors typically have different primary chromaticity values</p>
    <p>Comparing CIE x-y Plot for a LCD and DLP Projector</p>
    <p>R</p>
    <p>B</p>
    <p>G</p>
    <p>x</p>
    <p>y</p>
    <p>W</p>
  </div>
  <div class="page">
    <p>y</p>
    <p>x</p>
    <p>z</p>
    <p>y</p>
    <p>x</p>
    <p>z</p>
    <p>y</p>
    <p>x</p>
    <p>z</p>
    <p>y</p>
    <p>x</p>
    <p>z</p>
    <p>Channel balancing not effective for differing primary chromaticity values</p>
    <p>x</p>
  </div>
  <div class="page">
    <p>Talk Outline</p>
    <p>Introduction</p>
    <p>Previous Work</p>
    <p>Algorithm Description</p>
    <p>Algorithm Evaluation</p>
    <p>Questions and Comments</p>
  </div>
  <div class="page">
    <p>Full Gamut Color Matching</p>
    <p>Generalized approach  Treat projectors as black box</p>
    <p>Color transfer function and parameters unknown  Type and characteristics of projector unknown</p>
    <p>Handle all cases  Non-additive gamuts  Differing primary chromaticity values</p>
    <p>Method  Sub-sample the color response of each projector  Define a common gamut in the intersection of the</p>
    <p>projector gamuts  Remap color transfer function into common</p>
    <p>gamut</p>
  </div>
  <div class="page">
    <p>Measuring the Color Transfer Function</p>
    <p>24 bit color = 16 Million colors (too many to measure)</p>
    <p>Subsample at a lower spatial frequency  Non-uniform sampling grid  Use 32 increment for RGB &lt; 128  Use 16 increment for RGB &gt; 128  This gives 13 grid points per channel</p>
    <p>133 (2197) sample points total</p>
  </div>
  <div class="page">
    <p>y</p>
    <p>x</p>
    <p>z</p>
    <p>y</p>
    <p>x</p>
    <p>z</p>
    <p>Finding a Standard Color Gamut</p>
    <p>Choose an initial standard color gamut Gs  We can choose to have a shape similar to the average gamut  Or we can choose any reference gamut (useful for mixed arrays)</p>
    <p>Maximize the volume of Gs  Constraint: Gs must be contained in the intersection of the</p>
    <p>projector gamuts  i.e</p>
    <p>ns GGGG  21</p>
    <p>Projector Gamuts Standard gamut Gs highlighted</p>
  </div>
  <div class="page">
    <p>Color Maps</p>
    <p>A color map Mi is needed for each projector to emulate the standard gamut Gs</p>
    <p>This map can be generated once Gs is defined  Let Fi be a projectors native color transfer function  Let Fs be the color transfer function that generates</p>
    <p>Gs  We want  Therefore</p>
    <p>Mi must be pre-applied to all imagery</p>
    <p>sii FMF  RGBRGBMFsFM iii   : where1</p>
  </div>
  <div class="page">
    <p>Applying Color Map</p>
    <p>Applying in CPU too costly  Latest graphics cards and</p>
    <p>libraries can support color mapping</p>
    <p>Nvidia GeForce4 and ATI Radeon 9700</p>
    <p>DirectX Pixel Shader and OpenGL Texture Shader</p>
    <p>Process  Load color map M as a volume</p>
    <p>texture  RGB pixel value used as texture</p>
    <p>coordinate into M, returns the mapped color</p>
    <p>// Sample code ps 1.2 // t0 is the rendered texture tex t0 // t1 is the color map texreg2rgb t1, t0 // t2 is the luminance map tex t2 mov r1, t1 mul r0, t2, r1</p>
    <p>Sample Cope</p>
  </div>
  <div class="page">
    <p>Talk Outline</p>
    <p>Introduction</p>
    <p>Previous Work</p>
    <p>Algorithm Description</p>
    <p>Algorithm Evaluation</p>
    <p>Questions and Comments</p>
  </div>
  <div class="page">
    <p>Experimental Setup</p>
    <p>Two test cases  Case 1: 4 DLP projectors  Case 2: 1 DLP and 1 LCD projector</p>
    <p>Measurement - Sequel Chroma IV colorimeter  Inexpensive CIE XYZ measuring device ~ 200 USD  Average measurement consistency of 0.4% on DLP projectors</p>
    <p>Channel balancing algorithm implemented for comparison</p>
    <p>Color corrected projectors remeasured  Using same colorimeter  Lower spatial frequency 93 (729) samples</p>
    <p>Error Metric  Average deviation of a test color from the mean  Gives an indication of color consistency among projectors</p>
  </div>
  <div class="page">
    <p>Results Case 1: DLP Projector Array</p>
    <p>Display Wall of 4 Compaq MP1800 DLP projectors  Compare color consistency from three sets of measurements:</p>
    <p>No correction, Channel balancing, and Full gamut matching</p>
    <p>Color None ICB FGCM</p>
    <p>Red (R) 10.22% 1.78% 0.75%</p>
    <p>Green (G) 7.36% 1.71% 0.77%</p>
    <p>Blue (B) 10.75% 2.38% 1.20%</p>
    <p>Cyan (C) 9.54% 2.41% 0.86%</p>
    <p>Magenta (M)</p>
    <p>Yellow (Y) 8.64% 3.26% 1.14%</p>
    <p>Black (K) 15.59% 19.48% 3.26%</p>
    <p>White (W) 10.40% 8.95% 1.11%</p>
    <p>Total 11.12% 3.40% 1.47%</p>
  </div>
  <div class="page">
    <p>Results Case 1: DLP Projector Array</p>
    <p>y</p>
    <p>x</p>
    <p>z</p>
    <p>Uncorrected Projector Gamuts</p>
    <p>y</p>
    <p>x</p>
    <p>z</p>
    <p>Full Gamut CorrectionChannel Balance Correction</p>
    <p>y</p>
    <p>x</p>
    <p>z</p>
  </div>
  <div class="page">
    <p>Results Case 2: Mixed DLP-LCD Array</p>
    <p>Display Wall contains a Compaq MP1800 DLP projector and a Toshiba TLP511U LCD projector</p>
    <p>Compare color consistency from three sets of measurements: No correction, Channel balancing, and Full gamut matching</p>
    <p>Color None ICB FGCM</p>
    <p>Red (R) 17.03% 5.28% 1.33%</p>
    <p>Green (G) 2.37% 3.90% 0.64%</p>
    <p>Blue (B) 15.42% 8.25% 1.28%</p>
    <p>Cyan (C) 11.20% 5.49% 0.82%</p>
    <p>Magenta (M)</p>
    <p>Yellow (Y) 10.09% 2.66% 1.19%</p>
    <p>Black (K) 50.22% 40.02% 11.93%</p>
    <p>White (W) 32.54% 8.28% 0.74%</p>
    <p>Total 12.95% 6.21% 1.27%</p>
  </div>
  <div class="page">
    <p>Results Case 2: Mixed DLP-LCD Array</p>
    <p>y</p>
    <p>x</p>
    <p>z</p>
    <p>Uncorrected Projector Gamuts</p>
    <p>y</p>
    <p>x</p>
    <p>z</p>
    <p>Full Gamut Correction</p>
    <p>y</p>
    <p>x</p>
    <p>z</p>
    <p>Channel Balance Correction</p>
  </div>
  <div class="page">
    <p>Results Case 2: Mixed DLP-LCD Array</p>
    <p>Full Gamut Correction CIE x-y Plot</p>
    <p>Channel Balanced CIE x-y Plot</p>
    <p>Uncalibrated CIE x-y Plot</p>
  </div>
  <div class="page">
    <p>Performance Results  We tested the performance of Full Gamut Color Mapping on</p>
    <p>two platforms  550 MHz Pentium III w/ GeForce4 card  3.06 GHz Pentium 4 w/ ATI Radeon card</p>
    <p>We compare with the following transformations  A  applies only geometric alignment  B  applies geometric alignment and alpha mask  C  applies geometric alignment with color map  D  applies geometric alignment, alpha mask and color map</p>
    <p>Platform A B C D</p>
    <p>Performance of image viewer in Frames Per Second</p>
  </div>
  <div class="page">
    <p>Talk Outline</p>
    <p>Introduction</p>
    <p>Previous Work</p>
    <p>Algorithm Description</p>
    <p>Algorithm Evaluation</p>
    <p>Questions and Comments</p>
  </div>
  <div class="page">
    <p>The End</p>
    <p>Questions and Comments?</p>
    <p>Further Information  www.cs.princeton.edu/omnimedia</p>
  </div>
  <div class="page">
    <p>Perceptible Color Differences</p>
    <p>MacAdam ellipses magnified 10 times</p>
    <p>DLP-LCD Chromaticity Variance</p>
  </div>
</Presentation>

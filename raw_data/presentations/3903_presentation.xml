<?xml version="1.0" ?>
<Presentation>
  <div class="page">
    <p>Network-wide Decision Making: Toward a Wafer-thin Control Plane</p>
    <p>Jennifer Rexford, Albert Greenberg, Gisli Hjalmtysson ATT Labs Research</p>
    <p>David A. Maltz, Andy Myers, Geoffrey Xie,</p>
    <p>Jibin Zhan, Hui Zhang Carnegie Mellon University</p>
  </div>
  <div class="page">
    <p>A Well-Studied Architecture Question Smart hosts, dumb network</p>
    <p>Network moves IP packets between hosts</p>
    <p>Services implemented on hosts</p>
    <p>Keep state at the edges</p>
    <p>Edge EdgeNetwork IP !  IP !</p>
    <p>How to partition function vertically?</p>
  </div>
  <div class="page">
    <p>Inside a Single Network</p>
    <p>Data Plane  Distributed routers  Forwarding, filtering, queueing  Based on FIB or labels</p>
    <p>Management Plane  Figure out what is</p>
    <p>happening in network  Decide how to change it</p>
    <p>Shell scripts Traffic Eng</p>
    <p>DatabasesPlanning tools</p>
    <p>OSPF SNMP netflow modemsConfigs</p>
    <p>OSPF BGP</p>
    <p>Link metrics</p>
    <p>OSPF BGP</p>
    <p>OSPF BGP</p>
    <p>Control Plane  Multiple routing processes</p>
    <p>on each router  Each router with different</p>
    <p>configuration program  Huge number of control</p>
    <p>knobs: metrics, ACLs, policy</p>
    <p>FIB</p>
    <p>FIB</p>
    <p>FIB</p>
    <p>Routing policies</p>
    <p>Packet filters</p>
  </div>
  <div class="page">
    <p>Inside a Single Network</p>
    <p>Data Plane  Distributed routers  Forwarding, filtering, queueing  Based on FIB or labels</p>
    <p>Management Plane  Figure out what is</p>
    <p>happening in network  Decide how to change it</p>
    <p>Shell scripts Traffic Eng</p>
    <p>DatabasesPlanning tools</p>
    <p>OSPF SNMP netflow modemsConfigs</p>
    <p>OSPF BGP</p>
    <p>Link metrics</p>
    <p>OSPF BGP</p>
    <p>OSPF BGP</p>
    <p>Control Plane  Multiple routing processes</p>
    <p>on each router  Each router with different</p>
    <p>configuration program  Huge number of control</p>
    <p>knobs: metrics, ACLs, policy</p>
    <p>FIB</p>
    <p>FIB</p>
    <p>FIB</p>
    <p>Routing policies</p>
    <p>Packet filters</p>
    <p>State everywhere!</p>
    <p>Dynamic state in FIBs</p>
    <p>Configured state in settings, policies, packet filters</p>
    <p>Programmed state in magic constants, timers</p>
    <p>Many dependencies between bits of state</p>
    <p>State updated in uncoordinated, decentralized way!</p>
  </div>
  <div class="page">
    <p>Example  Traffic Engineering - 1</p>
    <p>Routers make uncoordinated changes to their routes</p>
    <p>Poor stability, traffic thrashing</p>
    <p>Network-wide view needed for a network-wide goal</p>
    <p>Load sensitive routing  OSPF distributes load info  Paths computed to avoid hotspots</p>
    <p>Management Plane</p>
    <p>Control Plane</p>
    <p>Data Plane</p>
  </div>
  <div class="page">
    <p>Example  Traffic Engineering - 2</p>
    <p>Must predict &amp; undo effects of control plane</p>
    <p>Must translate solution into settings of control plane knobs</p>
    <p>Need ability to express desired solution</p>
    <p>Route planning  Learn topology  Estimate traffic matrix  Compute OSPF weights  Reconfigure routers</p>
    <p>Management Plane</p>
    <p>Control Plane</p>
    <p>Data Plane</p>
    <p>OSPF Load info</p>
  </div>
  <div class="page">
    <p>An Architecture Question to Study</p>
    <p>How should the functionality that controls a network be divided up?</p>
    <p>Important: everyone hates net outages</p>
    <p>Practical: solutions can be implemented without changing IP or end-hosts</p>
    <p>Relevant: trends toward separating decision-making from forwarding</p>
    <p>Unsolved: problem is not solved by running BGP/OSPF on faster servers</p>
  </div>
  <div class="page">
    <p>Our Proposal: Dissemination and Decision Planes</p>
    <p>What functions require a view of entire network and network objectives?</p>
    <p>Path selection and traffic engineering  Reachability control and VPNs  ! Decision plane What functions must be on every router to support</p>
    <p>creation of a network-wide view?  Topology discovery  Report measurements, status, resources  Install state (e.g., FIBs, ACLs) into data-plane  ! Dissemination plane</p>
  </div>
  <div class="page">
    <p>Good Abstractions Reduce Complexity</p>
    <p>All decision making logic lifted out of control plane</p>
    <p>Eliminates duplicate logic in management plane</p>
    <p>Dissemination plane provides a control channel to/from data plane</p>
    <p>Management Plane</p>
    <p>Control Plane</p>
    <p>Data Plane</p>
    <p>Decision Plane</p>
    <p>Dissemination</p>
    <p>Data Plane</p>
    <p>Configs</p>
    <p>FIBs, ACLs FIBs, ACLs</p>
  </div>
  <div class="page">
    <p>Many Implementations Possible</p>
    <p>Decision Plane  Centralized, or  Distributed Dissemination Plane  In-band, or  Out-of-band Choice based on reliability requirements</p>
    <p>Data plane evolution should be driven by needs of decision and dissemination planes</p>
  </div>
  <div class="page">
    <p>Example  Traffic Engineering Reprise</p>
    <p>Network-wide view provided by Dissemination Plane</p>
    <p>All policy, goals, decision logic located in Decision Plane</p>
    <p>Consistent network-wide solution constructed</p>
    <p>Decision plane can directly express desired solution</p>
    <p>Decision Plane</p>
    <p>Dissemination Plane</p>
    <p>Data Plane</p>
    <p>Traffic Matrix</p>
    <p>Path Computation</p>
    <p>Topology Load info FIBs</p>
  </div>
  <div class="page">
    <p>Example  Traffic Isolation</p>
    <p>Prevent some hosts/apps from communicating with others</p>
    <p>Routing policy is very coarse grained</p>
    <p>Packet filters are very expensive in the data plane</p>
    <p>Missing filters can allow packets to leak, violating isolation</p>
    <p>Reachability control  Create routing design  Configure routing protocols  Add packet filters to patch holes where needed</p>
    <p>Management Plane</p>
    <p>Control Plane</p>
    <p>Data Plane</p>
    <p>Route attrs</p>
  </div>
  <div class="page">
    <p>Example  Traffic Isolation Reprise</p>
    <p>Reachability matrix directly expresses intended goal  Path computation can jointly optimize traffic load and</p>
    <p>obey reachability constraints  Packet filters installed only where needed, and changed</p>
    <p>whenever routing changes</p>
    <p>Decision Plane</p>
    <p>Dissemination Plane</p>
    <p>Data Plane</p>
    <p>Traffic Matrix</p>
    <p>Path Computation</p>
    <p>Topology Load info</p>
    <p>FIBs, ACLs</p>
    <p>Reachability matrix</p>
  </div>
  <div class="page">
    <p>Challenges</p>
    <p>Scalability for a single network  Back-of-the-envelope calculations ! no show-stoppers</p>
    <p>Responsiveness  Reacting to unplanned failure takes an extra 40-100ms;</p>
    <p>OSPF/iBGP reconvergence today measured in seconds</p>
    <p>Preplanning for failure is easier with network-wide view</p>
    <p>Coordination  Minimize by having single active decision engine</p>
    <p>Leverage distributed computing work</p>
  </div>
  <div class="page">
    <p>Challenges Dissemination plane robustness  Must survive failures of links, but be less complicated than</p>
    <p>the routing protocols it tries to replace</p>
    <p>Hierarchy  How do two Decision Planes inter-network?  How is the boundary of the Dissemination Plane defined?</p>
  </div>
  <div class="page">
    <p>Related Work</p>
    <p>Separation of forwarding elements and control elements  IETF: FORCES, GSMP, GMPLS</p>
    <p>SoftRouter [Lakshman]</p>
    <p>Driving network operation from network-wide views  Traffic Engineering, Traffic Matrix computation</p>
    <p>Centralization of decision making logic  RCP [Feamster], PCE [Farrel]</p>
    <p>SS7 [Ma Bell]</p>
  </div>
  <div class="page">
    <p>Summary How to partition functionality inside the systems</p>
    <p>that control a network?</p>
    <p>Dissemination and Decision Planes Power of solution comes from:</p>
    <p>Locating all decision making in one plane</p>
    <p>Providing that plane with network-wide views</p>
    <p>Directly write forwarding state to data plane</p>
    <p>Benefits</p>
    <p>Network-wide views</p>
    <p>Focus on network issues, less on distributed protocols</p>
    <p>Coordinated state updates ! better reliability</p>
  </div>
</Presentation>

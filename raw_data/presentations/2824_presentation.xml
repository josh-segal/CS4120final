<?xml version="1.0" ?>
<Presentation>
  <div class="page">
    <p>Understanding Lifecycle Management Complexity of Datacenter Topologies Mingyang Zhang (USC) Radhika Niranjan Mysore (VMware Research) Sucha Supittayapornpong (USC) Ramesh Govindan (USC)</p>
    <p>Understanding Lifecycle Management Complexity of Datacenter</p>
    <p>Topologies Mingyang Zhang (USC) Radhika Niranjan Mysore (VMware Research) Sucha Supittayapornpong (USC) Ramesh Govindan (USC)</p>
  </div>
  <div class="page">
    <p>Datacenter topology designs</p>
  </div>
  <div class="page">
    <p>Previous focus</p>
    <p>Clos</p>
    <p>Jellyfish</p>
    <p>Xpander Cost ($)</p>
    <p>C ap</p>
    <p>ac ity</p>
  </div>
  <div class="page">
    <p>Manageability has received very little attention!</p>
    <p>Clos</p>
    <p>Jellyfish</p>
    <p>Xpander</p>
    <p>C ap</p>
    <p>ac ity</p>
    <p>Cost ($)</p>
  </div>
  <div class="page">
    <p>Manageability has received very little attention!</p>
    <p>Clos</p>
    <p>Jellyfish</p>
    <p>Xpander</p>
    <p>C ap</p>
    <p>ac ity</p>
    <p>Management complexity</p>
    <p>Cost ($)</p>
  </div>
  <div class="page">
    <p>Our Focus: Lifecycle management</p>
    <p>How does the complexity of managing data centers depend on the topology?</p>
  </div>
  <div class="page">
    <p>Lifecycle management of datacenter topologies</p>
    <p>Logical topology</p>
    <p>Deployment</p>
    <p>Physical topology</p>
  </div>
  <div class="page">
    <p>Lifecycle management of datacenter topologies</p>
    <p>Logical topology</p>
    <p>Deployment</p>
    <p>Physical topology</p>
    <p>New added switchesExpansion</p>
  </div>
  <div class="page">
    <p>Management complexity is important</p>
    <p>Complex deployment stalls the rollout of services for a long time</p>
  </div>
  <div class="page">
    <p>Management complexity is important</p>
    <p>Complex deployment stalls the rollout of services for a long time  Expensive considering the increasing traffic demand</p>
    <p>From Singh et al. Sigcomm15</p>
  </div>
  <div class="page">
    <p>Management complexity is important</p>
    <p>Topology expansion leads to capacity drop due to rewiring  Complex expansion leads to degraded capacity for a long time</p>
    <p>New added switches</p>
  </div>
  <div class="page">
    <p>Challenges Contributions</p>
  </div>
  <div class="page">
    <p>How to characterize the management complexity? Metrics  Deployment  Expansion</p>
    <p>Challenges Contributions</p>
  </div>
  <div class="page">
    <p>How to characterize the management complexity? Metrics  Deployment  Expansion</p>
    <p>Challenges</p>
    <p>How does topology structure affect the management complexity?</p>
    <p>Comparison of topologies  No topology dominates  Principles learned</p>
    <p>Contributions</p>
  </div>
  <div class="page">
    <p>How to characterize the management complexity? Metrics  Deployment  Expansion</p>
    <p>Challenges</p>
    <p>How does topology structure affect the management complexity?</p>
    <p>Is there a topology family with lower management complexity, lower cost and high capacity?</p>
    <p>Comparison of topologies  No topology dominates  Principles learned</p>
    <p>New topology  FatClique</p>
    <p>Contributions</p>
  </div>
  <div class="page">
    <p>How to characterize the management complexity? Metrics  Deployment  Expansion</p>
    <p>Challenges</p>
    <p>How does topology structure affect the management complexity?</p>
    <p>Is there a topology family with lower management complexity, lower cost and high capacity?</p>
    <p>Comparison of topologies  No topology dominates  Principles learned</p>
    <p>New topology  FatClique</p>
    <p>Contributions</p>
  </div>
  <div class="page">
    <p>Lifecycle management overview</p>
    <p>Problems: packaging, wiring, placement, rewiring...  Constraints: switch, rack, patch panel, cable tray...</p>
    <p>Broadcom Trident 3 Optical patch panelRack Cable tray</p>
  </div>
  <div class="page">
    <p>Methodology</p>
    <p>From first principles</p>
    <p>Understand in detail how topologies are deployed and expanded</p>
    <p>Derive metrics that capture the complexity of these operations</p>
  </div>
  <div class="page">
    <p>How to characterize the management complexity? Metrics  Deployment  Expansion</p>
    <p>Challenges</p>
    <p>How does topology structure affect the management complexity?</p>
    <p>Is there a topology family with lower management complexity, lower cost and high capacity?</p>
    <p>Comparison of topologies  No topology dominates  Principles learned</p>
    <p>New topology  FatClique</p>
    <p>Contributions</p>
  </div>
  <div class="page">
    <p>Packaging</p>
    <p>switch server</p>
    <p>data center racks</p>
    <p>...</p>
    <p>Deployment</p>
  </div>
  <div class="page">
    <p>Packaging</p>
    <p>switch server</p>
    <p>server rack switch rack server rack switch rack</p>
    <p>...</p>
    <p>Deployment</p>
  </div>
  <div class="page">
    <p>Wiring</p>
    <p>switch rack</p>
    <p>Intra-rack links: short and cheap</p>
    <p>Deployment</p>
  </div>
  <div class="page">
    <p>Wiring complexity</p>
    <p>rack rack</p>
    <p>......</p>
    <p>Inter-rack links</p>
    <p>Deployment</p>
  </div>
  <div class="page">
    <p>Wiring</p>
    <p>rack rack</p>
    <p>......</p>
    <p>Inter-rack links over cable trays (expensive)</p>
    <p>Deployment</p>
  </div>
  <div class="page">
    <p>Cable bundling Deployment</p>
    <p>Too many fibers to be handled individually!</p>
  </div>
  <div class="page">
    <p>Cable bundling</p>
    <p>Cable bundle  a fixed number of identical-length fibers between two</p>
    <p>clusters of network devices.</p>
    <p>Bundle type  capacity (# fibers in a bundle)  length</p>
    <p>Deployment</p>
  </div>
  <div class="page">
    <p>Cable bundling</p>
    <p>Top view of racks</p>
    <p>Deployment</p>
    <p>Bundle type: (bundle capacity, bundle length)</p>
    <p>w/o bundling</p>
  </div>
  <div class="page">
    <p>Cable bundling</p>
    <p>Top view of racks</p>
    <p>Deployment</p>
    <p>Bundle type: (bundle capacity, bundle length)</p>
    <p>aggregator</p>
    <p>bundle</p>
    <p>w/ bundlingw/o bundling</p>
    <p>Metric: the number of bundle types</p>
  </div>
  <div class="page">
    <p>Cable bundling</p>
    <p>It is hard to handle individual fibers with various length!</p>
    <p>Deployment</p>
    <p>w/o bundling w/ bundling [Singh, et al. Sigcomm15]</p>
  </div>
  <div class="page">
    <p>Role of patch panel in bundling Deployment</p>
    <p>Aggregator: Patch panel</p>
    <p>Aggregator</p>
  </div>
  <div class="page">
    <p>Role of patch panel in bundling Deployment</p>
    <p>Manual process</p>
    <p>Metric: the number of patch panels</p>
    <p>Aggregator: Patch panel</p>
  </div>
  <div class="page">
    <p>Deployment complexity metrics</p>
  </div>
  <div class="page">
    <p>Deployment complexity metrics</p>
    <p># switches ...</p>
  </div>
  <div class="page">
    <p>Deployment complexity metrics</p>
    <p># switches</p>
    <p># patch panels</p>
    <p>...</p>
  </div>
  <div class="page">
    <p>Deployment complexity metrics</p>
    <p># switches</p>
    <p># patch panels</p>
    <p># bundle types</p>
    <p>...</p>
  </div>
  <div class="page">
    <p>How to characterize the management complexity? Metrics  Deployment  Expansion</p>
    <p>Challenges</p>
    <p>How does topology structure affect the management complexity?</p>
    <p>Is there a topology family with lower management complexity, lower cost and high capacity?</p>
    <p>Comparison of topologies  No topology dominates  Principles learned</p>
    <p>New topology  FatClique</p>
    <p>Contributions</p>
  </div>
  <div class="page">
    <p>Expansion complexity</p>
    <p>Metric: # Expansion steps</p>
    <p>New</p>
  </div>
  <div class="page">
    <p>A single expansion step complexity</p>
    <p>It is hard to move existing links in cable trays</p>
  </div>
  <div class="page">
    <p>A single expansion step complexity</p>
    <p>Patch panel rack</p>
    <p>Patch panel rack</p>
    <p>Existing links New links</p>
  </div>
  <div class="page">
    <p>A single expansion step complexity</p>
    <p>New Spine</p>
    <p>Patch panel rack</p>
    <p>Patch panel rack</p>
    <p>Patch panel rack</p>
    <p>Patch panel rack</p>
    <p>Existing links New links</p>
  </div>
  <div class="page">
    <p>A single expansion step complexity</p>
    <p>New Spine</p>
    <p>Existing links New links</p>
    <p>Metric: # Rewired links per patch panel rack</p>
    <p>Patch panel rack</p>
    <p>Patch panel rack</p>
    <p>Patch panel rack</p>
    <p>Patch panel rack</p>
  </div>
  <div class="page">
    <p>Metrics</p>
    <p>Deployment</p>
    <p># Switches # Patch panels # Bundle types</p>
    <p>Expansion # Expansion step # Rewired links per patch panel rack</p>
  </div>
  <div class="page">
    <p>How to characterize the management complexity? Metrics  Deployment  Expansion</p>
    <p>Challenges</p>
    <p>How does topology structure affect the management complexity?</p>
    <p>Is there a topology family with lower management complexity, lower cost and high capacity?</p>
    <p>New topology  FatClique</p>
    <p>Contributions</p>
    <p>Comparison of topologies  No topology dominates  Principles learned</p>
  </div>
  <div class="page">
    <p>Topology comparison case study</p>
    <p>We equalize capacities of topologies</p>
    <p>Patch panels</p>
    <p>Bundle types</p>
    <p>Switches</p>
    <p>Re-wired links per patch panel rack</p>
    <p>Expansion steps</p>
  </div>
  <div class="page">
    <p>Topology comparison case study</p>
    <p>We equalize capacities of topologies</p>
    <p>Patch panels</p>
    <p>Bundle types</p>
    <p>Switches</p>
    <p>Re-wired links per patch panel rack</p>
    <p>Expansion steps</p>
  </div>
  <div class="page">
    <p>Topology comparison case study</p>
    <p>We equalize capacities of topologies</p>
    <p>Patch panels</p>
    <p>Bundle types</p>
    <p>Switches</p>
    <p>Re-wired links per patch panel rack</p>
    <p>Expansion steps</p>
  </div>
  <div class="page">
    <p>Topology comparison case study</p>
    <p>We equalize capacities of topologies</p>
    <p>Patch panels</p>
    <p>Bundle types</p>
    <p>Switches</p>
    <p>Re-wired links per patch panel rack</p>
    <p>Expansion steps</p>
  </div>
  <div class="page">
    <p>Principles learned</p>
    <p>Importance of regularity  Importance of maximizing intra-rack links  Importance of fat edge</p>
  </div>
  <div class="page">
    <p>Principle 1: Importance of regularity</p>
    <p>Jellyfish is a random graph which leads to non-uniform bundles between switch clusters.</p>
    <p>In large scale, Jellyfish has one order of magnitude more bundle types than Clos!</p>
  </div>
  <div class="page">
    <p>Principle 2: Importance of maximizing intra-rack links</p>
    <p>Switch</p>
    <p>Intra-rack Inter-rack</p>
    <p>R ac</p>
    <p>k in</p>
    <p>C lo</p>
    <p>s</p>
  </div>
  <div class="page">
    <p>Principle 2: Importance of maximizing intra-rack links R</p>
    <p>ac k</p>
    <p>in C</p>
    <p>lo s</p>
    <p>Intra-rack Inter-rack</p>
    <p>R ac</p>
    <p>k in</p>
    <p>J el</p>
    <p>ly fis</p>
    <p>h</p>
    <p>Switch</p>
    <p>Intra-rack Inter-rack</p>
    <p>Most links in Jellyfish are inter-rack links, which leads to more patch panel usage and high wiring complexity!</p>
    <p>Switch</p>
  </div>
  <div class="page">
    <p>Principle 3: Importance of fat edge</p>
    <p>Network edge</p>
  </div>
  <div class="page">
    <p>Principle 3: Importance of fat edge</p>
    <p>ServersSouthbound links</p>
    <p>Northbound links Switches</p>
  </div>
  <div class="page">
    <p>Principle 3: Importance of fat edge</p>
    <p>Thin Edge</p>
    <p>North:South = 1:1</p>
  </div>
  <div class="page">
    <p>Principle 3: Importance of fat edge</p>
    <p>Fat Edge</p>
    <p>North:South = 1:1 North:South = 2:1</p>
    <p>Thin Edge</p>
  </div>
  <div class="page">
    <p>Principle 3: Importance of fat edge</p>
    <p>Fat Edge</p>
    <p>North:South = 1:1 North:South = 2:1</p>
    <p>Residual capacity requirement during expansion: 75% Rewiring leads to capacity drop; Drain traffic before rewiring</p>
    <p>Draining 25% links --&gt; 25% lose</p>
    <p>Thin Edge</p>
  </div>
  <div class="page">
    <p>Principle 3: Importance of fat edge</p>
    <p>Thin Edge Fat Edge</p>
    <p>North:South = 1:1 North:South = 2:1</p>
    <p>Draining 25% links --&gt; 25% lose</p>
    <p>Draining 50% links --&gt; 0% lose</p>
    <p>Residual capacity requirement during expansion: 75% Rewiring leads to capacity drop; Drain traffic before rewiring</p>
  </div>
  <div class="page">
    <p>Principle 3: Importance of fat edge</p>
    <p>Thin Edge Fat Edge</p>
    <p>North:South = 1:1 North:South = 2:1</p>
    <p>Residual capacity requirement during expansion: 75%</p>
    <p>At fat edge, more links can be rewired in a single expansion step.  Jellyfish has fat edge = fewer expansion steps  Clos has thin edge = more expansion steps</p>
    <p>Draining 25% links --&gt; 25% lose Draining 50% links --&gt; 0% lose</p>
  </div>
  <div class="page">
    <p>Summary of case study</p>
    <p>Jellyfish</p>
    <p>Regularity</p>
    <p>Maximizing intra-rack links</p>
    <p>Fat edge</p>
  </div>
  <div class="page">
    <p>How to characterize the management complexity? Metrics  Deployment  Expansion</p>
    <p>Challenges</p>
    <p>How does topology structure affect the management complexity?</p>
    <p>Is there a topology family with lower management complexity, lower cost and high capacity?</p>
    <p>New topology  FatClique</p>
    <p>Contributions</p>
    <p>Comparison of topologies  No topology dominates  Principles learned</p>
  </div>
  <div class="page">
    <p>FatClique</p>
    <p>Sub-block (Clique of Switches)</p>
    <p>switch</p>
    <p>server</p>
  </div>
  <div class="page">
    <p>FatClique</p>
    <p>switch</p>
    <p>server</p>
    <p>Sub-block (Clique of Switches)</p>
    <p>Goal: one or multiple sub-blocks should be packed into a single rack to maximize intra-rack links</p>
  </div>
  <div class="page">
    <p>FatClique</p>
    <p>switch</p>
    <p>server</p>
    <p>Sub-block (Clique of Switches) Block (Clique of Sub-blocks)</p>
  </div>
  <div class="page">
    <p>FatClique</p>
    <p>switch</p>
    <p>server</p>
    <p>Sub-block (Clique of Switches)</p>
    <p>The Whole Network (Clique of Blocks)</p>
    <p>Block (Clique of Sub-blocks)</p>
    <p>Goal: blocks should be large enough to form uniform bundles.</p>
  </div>
  <div class="page">
    <p>Does FatClique satisfy principles learned?</p>
    <p>Regularity</p>
    <p>Maximizing intra-rack links</p>
    <p>Fat edge</p>
  </div>
  <div class="page">
    <p>Does FatClique satisfy principles learned?</p>
    <p>Regularity</p>
    <p>Maximizing intra-rack links</p>
    <p>Fat edge</p>
  </div>
  <div class="page">
    <p>Challenges</p>
    <p>Conflicts: Fat edge vs maximizing intra-rack links</p>
    <p>Su b</p>
    <p>bl o ck</p>
    <p>For each switch,  3 servers  3 intra-rack links  3 inter-rack links</p>
  </div>
  <div class="page">
    <p>Challenges</p>
    <p>Conflicts: Fat edge vs maximizing intra-rack links</p>
    <p>Su b</p>
    <p>bl o ck</p>
    <p>For each switch,  3 servers  3 intra-rack links  3 inter-rack links</p>
  </div>
  <div class="page">
    <p>Challenges</p>
    <p>Su b</p>
    <p>bl o ck</p>
    <p>For each switch,  3 servers  3 intra-rack sw  3 inter-rack sw</p>
    <p>Conflicts: Fat edge vs maximizing intra-rack links</p>
  </div>
  <div class="page">
    <p>Challenges</p>
    <p>For each switch,  3 servers  3 intra-rack sw  3 inter-rack sw</p>
    <p>Su b</p>
    <p>bl o ck</p>
    <p>Conflicts: Fat edge vs maximizing intra-rack links</p>
  </div>
  <div class="page">
    <p>Challenges</p>
    <p>Su b</p>
    <p>bl o ck</p>
    <p>Thin edge</p>
    <p>For each switch,  3 servers  3 intra-rack sw  3 inter-rack sw</p>
    <p>Conflicts: Fat edge vs maximizing intra-rack links</p>
  </div>
  <div class="page">
    <p>Challenges</p>
    <p>Su b</p>
    <p>bl o ck</p>
    <p>Thin edge</p>
    <p>Decrease intra-rack links per switch from 3 to 2</p>
    <p>Fat edge</p>
    <p>For each switch,  3 servers  3 intra-rack sw  3 inter-rack sw</p>
    <p>Conflicts: Fat edge vs maximizing intra-rack links</p>
  </div>
  <div class="page">
    <p>Challenges</p>
    <p>Conflicts</p>
    <p>Fat edge vs maximizing intra-rack links  Fat edge vs minimizing switches</p>
  </div>
  <div class="page">
    <p>Challenges</p>
    <p>Conflicts</p>
    <p>Fat edge vs maximizing intra-rack links  Fat edge vs minimizing switches</p>
    <p>Constraints</p>
    <p>provide right amount of capacity  minimize rack fragmentation  minimize overall cable length  ... 74</p>
  </div>
  <div class="page">
    <p>Constraint-based search</p>
    <p>sub-block</p>
    <p>Block</p>
    <p>switch</p>
    <p>server</p>
  </div>
  <div class="page">
    <p>Constraint-based search</p>
    <p>sub-block</p>
    <p>Block</p>
    <p>switch</p>
    <p>server</p>
    <p>Constraints  Fat edge at a switch</p>
    <p># Northbound &gt; # Southbound</p>
  </div>
  <div class="page">
    <p>Constraint-based search</p>
    <p>sub-block</p>
    <p>Block</p>
    <p>switch</p>
    <p>server</p>
    <p>Constraints  Fat edge at a switch</p>
    <p># Northbound &gt; # Southbound</p>
  </div>
  <div class="page">
    <p>Constraint-based search</p>
    <p>sub-block</p>
    <p>Block</p>
    <p>switch</p>
    <p>server</p>
    <p>Constraints  Fat edge at a switch</p>
    <p># Northbound &gt; # Southbound</p>
    <p>Fat edge at a block  Block size  ...</p>
  </div>
  <div class="page">
    <p>Evaluation</p>
    <p>Does FatClique have lower deployment complexity?</p>
    <p>Does FatClique have lower expansion complexity?</p>
  </div>
  <div class="page">
    <p>Evaluation Methodology</p>
    <p>Equalize capacities for topologies  Compare topologies at different scale  Highly optimized placement algorithms for different topologies  Optimal expansion algorithm for symmetric Clos  Search-based near-optimal expansion algorithm for FatClique  Patch panel usage in different topologies  ...</p>
  </div>
  <div class="page">
    <p>FatClique has low deployment complexity</p>
    <p>C: Clos, J: Jellyfish, X: Xpander, F: FatClique</p>
    <p># switches # patch panels # bundle types</p>
    <p>FatClique performs best by all deployment metrics 81</p>
  </div>
  <div class="page">
    <p>FatClique has low deployment complexity</p>
    <p>C: Clos, J: Jellyfish, X: Xpander, F: FatClique</p>
    <p># switches # patch panels # bundle types</p>
    <p>FatClique performs best by all deployment metrics 82</p>
  </div>
  <div class="page">
    <p>FatClique has low expansion complexity</p>
    <p>FatClique is as good as expanders  3 or 4 expansion steps even when the</p>
    <p>residual capacity requirement is tight</p>
  </div>
  <div class="page">
    <p>FatClique has low expansion complexity</p>
    <p>FatClique is as good as expanders  3 or 4 expansion steps even when the</p>
    <p>residual capacity requirement is tight  FatClique enables higher availability</p>
  </div>
  <div class="page">
    <p>Conclusions and Future work</p>
    <p>Management complexity is an important dimension for topology design</p>
    <p>Our work is a first step towards this direction</p>
    <p>Metric design</p>
    <p>FatClique achieves lower management complexity</p>
    <p>with same capacity  with lower cost</p>
    <p>Future work</p>
    <p>control plane complexity  network debuggability  practical routing for</p>
    <p>FatClique</p>
    <p>Management complexity</p>
    <p>FatClique</p>
    <p>Considered topologies</p>
  </div>
  <div class="page">
    <p>Thanks!</p>
  </div>
  <div class="page">
    <p>Backup</p>
  </div>
  <div class="page">
    <p>FatClique has low cabling cost</p>
    <p>C ab</p>
    <p>lin g</p>
    <p>C o st</p>
    <p>( $ ) FatClique is 23% cheaper than Clos</p>
    <p>Smaller number of links</p>
    <p>FatClique is cheaper than Expanders  Maximizing intra-rack links, which saves</p>
    <p>expensive optical transceivers.</p>
  </div>
  <div class="page">
    <p>Single step complexity</p>
  </div>
  <div class="page">
    <p>Path diversity</p>
  </div>
  <div class="page">
    <p>Spectral gap</p>
  </div>
  <div class="page">
    <p>Deployment complexity metrics</p>
    <p># switches # patch panels # bundle types</p>
  </div>
  <div class="page">
    <p>Deployment-wiring</p>
    <p>Googles Watchtower Chassis</p>
  </div>
</Presentation>

<?xml version="1.0" ?>
<Presentation>
  <div class="page">
    <p>CFA: A Practical Prediction System for Video Quality Optimization</p>
    <p>Junchen Jiang, Vyas Sekar, Henry Milner, Davis Shepherd, Ion Stoica, Hui Zhang</p>
  </div>
  <div class="page">
    <p>One-Minute Overview</p>
    <p>Prediction leads to dramatic quality improvement</p>
    <p>Predicting video quality is very challenging</p>
    <p>Persistence of critical features  CFA</p>
  </div>
  <div class="page">
    <p>Internet Video Quality Matters!</p>
    <p>Buffering ratio</p>
    <p>U se</p>
    <p>r En</p>
    <p>ga ge</p>
    <p>m en</p>
    <p>t</p>
    <p>U se</p>
    <p>r En</p>
    <p>ga ge</p>
    <p>m en</p>
    <p>t</p>
    <p>Avg Bitrate</p>
    <p>A significant room of improvement!</p>
    <p>Better quality Longer user Engagement More revenues!</p>
  </div>
  <div class="page">
    <p>New Paradigm: Centralized Control Platform</p>
    <p>Internet</p>
    <p>Local reactive adaptation is too slow Fundamentally crippled for initial selections</p>
    <p>A Case for Centralized Control Plane Real-time global network view  Prediction Oracle</p>
    <p>e.g., potentially 50% less re-buffering [SIGCOMM12,NSDI15]</p>
    <p>Prediction Oracle</p>
    <p>Answer What-if questions. e.g., What if I use 400Kbps, Akamai?</p>
    <p>Local adaptation</p>
  </div>
  <div class="page">
    <p>Key Missing Piece: How to Build a Prediction Oracle?</p>
    <p>Internet</p>
    <p>Prediction Oracle</p>
    <p>CFA Our contribution: Critical Feature Analytics (CFA)</p>
    <p>Data-Driven Video Quality Prediction System</p>
  </div>
  <div class="page">
    <p>Outline</p>
    <p>Motivation</p>
    <p>Challenges of Video Quality Prediction System</p>
    <p>The CFA Approach</p>
    <p>Evaluation</p>
  </div>
  <div class="page">
    <p>Why is Building a Quality Prediction System Challenging?</p>
    <p>Challenge 1: Complex factors affect video quality  Need expressive models to capture these factors</p>
    <p>Challenge 2: Video quality changes quickly  Need to refresh predictions in near real-time (e.g., 30 sec)</p>
    <p>Trains a Quality Prediction Model Pred(quality of other sessions)</p>
    <p>Quality of other sessions Quality prediction for new sessions</p>
  </div>
  <div class="page">
    <p>City ASN CDN Video Device Quality NY Comcast Level3 Foo bar PIT Comcast Level3 Foo bar NY AT&amp;T Level3 Foo bar NY Comcast Akamai Foo bar</p>
    <p>Challenge 1: Complex relation between video quality and features</p>
    <p>NY Comcast</p>
    <p>AT&amp;T</p>
    <p>Level3 CDN</p>
    <p>PIT Akamai Quality depends on combinations of features</p>
  </div>
  <div class="page">
    <p>Time City ASN CDN Video Device Quality</p>
    <p>Such feature combinations differ cross clients &amp; time</p>
    <p>Spatial diversity: Quality-determining features differ cross clients</p>
    <p>Model drift: Quality-determining features change over time</p>
    <p>Combinational effects: Quality depends on combinations of multiple features</p>
  </div>
  <div class="page">
    <p>Challenge 2: Video Quality Changes Quickly</p>
    <p>Using fresh quality measurement is critical!</p>
  </div>
  <div class="page">
    <p>Needs both model expressiveness &amp; fast update</p>
    <p>Simple ML</p>
    <p>Complex ML</p>
    <p>Not expressive enough to model complex factors e.g., NaiveBayes, Decision Tree</p>
    <p>CFA</p>
    <p>Needs tens of min to update model, Not interpretable e.g., SVM</p>
    <p>Algorithm for Problems that have Persistent critical features</p>
    <p>Low High Expressiveness</p>
    <p>Update speed</p>
    <p>Fast</p>
    <p>Slow</p>
    <p>Be tte</p>
    <p>r</p>
  </div>
  <div class="page">
    <p>Outline</p>
    <p>Motivation</p>
    <p>Challenges</p>
    <p>The CFA Approach</p>
    <p>Evaluation</p>
  </div>
  <div class="page">
    <p>Session under prediction</p>
    <p>The Basic CFA Workflow: Similar feature values short history  similar quality</p>
    <p>Finding similar sessions</p>
    <p>s</p>
    <p>Similar sessions to s</p>
    <p>Quality estimate (e.g., median)</p>
    <p>Quality prediction</p>
    <p>for s Strawman: Matching</p>
    <p>on all features</p>
    <p>Curse of dimensionality: Hard to find sessions matching on all features</p>
    <p>All historical sessions with observed quality</p>
    <p>Accurate Reliable Matching on all features</p>
  </div>
  <div class="page">
    <p>F( ) F( )</p>
    <p>Insight to Find Similar Sessions: Critical Features</p>
    <p>City ASN CDN Content Device NY Comcast Level3 foo bar</p>
    <p>Critical features: subset of features ultimately determines video quality</p>
    <p>Quality</p>
    <p>NY Comcast Level3 * *</p>
    <p>Time (min)</p>
    <p>Q ua</p>
    <p>lit y</p>
    <p>(F ai</p>
    <p>lu re</p>
    <p>r at</p>
    <p>e)</p>
    <p>Time (min)</p>
    <p>Q ua</p>
    <p>lit y</p>
    <p>(F ai</p>
    <p>lu re</p>
    <p>r at</p>
    <p>e)</p>
    <p>Enough sessions matching NY, Comcast, Level3 in last minute</p>
    <p>s</p>
    <p>Strawman: Matching on all features in the last minute</p>
    <p>Use sessions matching NY, Comcast, Level3, foo, bar in last minute</p>
    <p>Curse of dimensionality: Few sessions matching on all features in one minute</p>
  </div>
  <div class="page">
    <p>The CFA Workflow Based on Critical Features</p>
    <p>Finding similar sessions</p>
    <p>s</p>
    <p>Similar sessions to s</p>
    <p>Quality estimate (e.g., median)</p>
    <p>Quality prediction</p>
    <p>for s Matching on</p>
    <p>Critical Features</p>
    <p>Accurate Reliable Matching on all features</p>
    <p>Matching on critical features</p>
    <p>Finding Critical feature of sHow to get</p>
    <p>critical features?</p>
  </div>
  <div class="page">
    <p>Insight to Learn Critical Features: Critical Features are Persistent</p>
    <p>Time (min)</p>
    <p>Q ua</p>
    <p>lit y</p>
    <p>(F ai</p>
    <p>lu re</p>
    <p>r at</p>
    <p>e) Strawman: Learn Critical Features over last minute</p>
    <p>Curse of dimensionality: No data of ground truth</p>
    <p>Insight: Critical features typically last for 10s minutes or longer.</p>
    <p>Persistence:</p>
    <p>CFA approach: Learn Critical Features over last hour</p>
    <p>s</p>
    <p>Longer history  Enough sessions to construct ground-truth quality</p>
  </div>
  <div class="page">
    <p>How to Estimate Quality with Fresh Updates?</p>
    <p>Finding similar sessions</p>
    <p>s</p>
    <p>Similar sessions to s</p>
    <p>Quality estimate (e.g., median)</p>
    <p>Quality prediction</p>
    <p>for s Matching on</p>
    <p>Critical Features</p>
    <p>Finding Critical feature of s</p>
    <p>A few secondsA few seconds</p>
    <p>Takes 10s minutes</p>
  </div>
  <div class="page">
    <p>CFA Approach to Fresh Updates</p>
    <p>Time</p>
    <p>Learn critical features (every tens of min)</p>
    <p>Learn critical features (every tens of min)</p>
    <p>Learn critical features (every tens of min)</p>
    <p>Learn critical features (every tens of min)</p>
    <p>Estimate quality (every tens of sec)</p>
    <p>Sequential workflow</p>
    <p>Decoupled workflow</p>
    <p>Slow path</p>
    <p>Fast path</p>
    <p>Enabled by Persistence of Critical Features</p>
  </div>
  <div class="page">
    <p>Putting Everything Together: CFA Implementation</p>
    <p>Video clients</p>
    <p>The C3 platform [NSDI15]</p>
    <p>Backend cluster</p>
    <p>Geo-distributed frontend clusters</p>
    <p>Learn critical features + estimate quality</p>
    <p>Pick the (CDN, bitrate) of the best predicted quality and return it in 10s of ms</p>
    <p>Update quality prediction per 10s of sec</p>
  </div>
  <div class="page">
    <p>Outline</p>
    <p>Motivation</p>
    <p>Challenges</p>
    <p>The CFA Approach</p>
    <p>Evaluation</p>
  </div>
  <div class="page">
    <p>Real-world A/B Testing</p>
    <p>Baseline (random)</p>
    <p>CFA 0</p>
    <p>A vg</p>
    <p>b uff</p>
    <p>er in</p>
    <p>g ra</p>
    <p>ti o</p>
    <p>(% )</p>
    <p>Baseline (random) CFA 0</p>
    <p>A vg</p>
    <p>b itr</p>
    <p>at e</p>
    <p>(M bp</p>
    <p>s)</p>
    <p>Substantial quality improvement by CFA.</p>
    <p>crease</p>
  </div>
  <div class="page">
    <p>CFA vs. Strawman Prediction Algorithms (Decision tree, Nave Bayes, kNN, Last-mile, ASN-based etc)</p>
    <p>Best of strawmen CFA 0</p>
    <p>A vg</p>
    <p>b itr</p>
    <p>at e</p>
    <p>Best of strawmen CFA 0</p>
    <p>Pr ed</p>
    <p>ic ti</p>
    <p>on e</p>
    <p>rr or</p>
    <p>(b itr</p>
    <p>at e)</p>
    <p>CFA is more accurate CFA leads to better quality</p>
  </div>
  <div class="page">
    <p>Conclusion  Higher video quality  Long user engagement  More revenues!</p>
    <p>Prediction has huge potential but is also challenging: Quality-determining features are complex, heterogeneous and dynamic.</p>
    <p>CFA uses domain-specific insights Video quality depends on a subset of persistent critical features. CFA leads to 30% less buffering ratio and 12% high bitrate</p>
    <p>Key takeaway: Prediction  Performance improvement Persistence of critical features  Accurate prediction</p>
  </div>
</Presentation>

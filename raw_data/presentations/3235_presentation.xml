<?xml version="1.0" ?>
<Presentation>
  <div class="page">
    <p>M2R: Enabling Stronger Privacy in MapReduce Computa;on</p>
    <p>Anh Dinh, Prateek Saxena, Ee-Chien Chang, Beng Chin Ooi, Chunwang Zhang</p>
    <p>School of Compu,ng</p>
    <p>Na,onal University of Singapore</p>
  </div>
  <div class="page">
    <p>Integrity + Confiden,ality.  Applicable in private or public cloud seGng.</p>
    <p>St or ag e</p>
    <p>T</p>
    <p>T</p>
    <p>T</p>
  </div>
  <div class="page">
    <p>Challenge 1: Keep Trusted Code Base small</p>
    <p>Opera,ng Systems</p>
    <p>Hypervisor</p>
    <p>Applica,on Frameworks</p>
    <p>Affected many hypervisors (e.g Xen / KVM) [CS Report]</p>
    <p>CVEs in Linux [CVE-DB]</p>
  </div>
  <div class="page">
    <p>Baseline System</p>
    <p>Protected Code / Data</p>
    <p>TCB</p>
    <p>(e.g. SGX enclave)</p>
    <p>MapReduce/Hadoop Framework</p>
    <p>Opera,ng System</p>
    <p>Hypervisor</p>
    <p>S t o</p>
    <p>r a g e</p>
    <p>Trusted CPU</p>
    <p>All data outside trusted environment is encrypted  SoZware only a[ack.  Previous system: VC3 (IEEE S&amp;P 2015)</p>
  </div>
  <div class="page">
    <p>Background: MapReduce</p>
    <p>Computa,on &amp; shuffling of &lt;key, value&gt; tuples.  Phases: Map  Shuffle  Reduce.  map outputs a set of tuples.  During Shuffling, tuples are grouped according to their key.  Each reduce instance corresponds to an unique key k. It takes all tuples</p>
    <p>with the key k and output a set of tuples.</p>
    <p>map</p>
    <p>map</p>
    <p>map</p>
    <p>reduce</p>
    <p>shuffling</p>
    <p>reduce</p>
    <p>reduce</p>
    <p>reduce</p>
  </div>
  <div class="page">
    <p>Background: Hadoop  Hadoop: soZware framework wri[en in Java   190K LOC (Hadoop 0.21.0)  Consists of MapReduce modules, Hadoop Distributed File System (HDFS), etc.</p>
    <p>Usensix Security 2015 M2R: Enabling Stronger Privacy in MapReduce</p>
    <p>Computa,on</p>
  </div>
  <div class="page">
    <p>St or ag e</p>
    <p>T</p>
    <p>T</p>
    <p>T</p>
    <p>Iden,fy small essen,al components of MapReduce to be included in the TCB.</p>
    <p>Is the Baseline System sufficient?</p>
  </div>
  <div class="page">
    <p>Challenge 2: Interac;ons Leaks Info</p>
    <p>Usensix Security 2015 M2R: Enabling Stronger Privacy in MapReduce</p>
    <p>Computa,on St or ag e</p>
    <p>T</p>
    <p>T</p>
    <p>T</p>
  </div>
  <div class="page">
    <p>Example of leakage: wordcount  Map Phase: each mapT generates the tuples.</p>
    <p>w1 w2</p>
    <p>w1 w2 w4</p>
    <p>w3 w4</p>
    <p>mapT</p>
    <p>mapT</p>
    <p>mapT</p>
    <p>reduceT (key: w1)</p>
    <p>reduceT (key: w2)</p>
    <p>reduceT (key: w3)</p>
    <p>reduceT (key:w4)</p>
    <p>shuffling F1</p>
    <p>F2</p>
    <p>F3</p>
    <p>w1 w2</p>
    <p>w1 w2</p>
    <p>w3 w4</p>
    <p>w4</p>
  </div>
  <div class="page">
    <p>Example of leakage: wordcount  Shuffling Phase: The tuples are grouped w.r.t the words.</p>
    <p>w1 w2</p>
    <p>w1 w2 w4</p>
    <p>w3 w4</p>
    <p>mapT</p>
    <p>mapT</p>
    <p>mapT</p>
    <p>reduceT (key: w1)</p>
    <p>reduceT (key: w2)</p>
    <p>reduceT (key: w3)</p>
    <p>reduceT (key:w4)</p>
    <p>shuffling F1</p>
    <p>F2</p>
    <p>F3</p>
    <p>Reduce Phase: reduceT counts and outputs the number of tuples it received.</p>
  </div>
  <div class="page">
    <p>Example of leakage: word counts  By observing the flow of tuples, one can infer rela,onships</p>
    <p>among the input files.</p>
    <p>w1 w2</p>
    <p>w1 w2 w4</p>
    <p>w3 w4</p>
    <p>mapT</p>
    <p>mapT</p>
    <p>mapT</p>
    <p>reduceT (key: w1)</p>
    <p>reduceT (key: w2)</p>
    <p>reduceT (key: w3)</p>
    <p>reduceT (key:w4)</p>
    <p>shuffling F1</p>
    <p>F2</p>
    <p>F3</p>
    <p>F3 contains a unique word</p>
  </div>
  <div class="page">
    <p>Example of leakage: word counts  By observing the flow of tuples, one can infer rela,onships</p>
    <p>among the input files.</p>
    <p>w1 w2</p>
    <p>w1 w2 w4</p>
    <p>w3 w4</p>
    <p>mapT</p>
    <p>mapT</p>
    <p>mapT</p>
    <p>reduceT (key: w1)</p>
    <p>reduceT (key: w2)</p>
    <p>reduceT (key: w3)</p>
    <p>reduceT (key:w4)</p>
    <p>shuffling F1</p>
    <p>F2</p>
    <p>F3</p>
    <p>Goal: hide these rela;onships.</p>
  </div>
  <div class="page">
    <p>Possible solu;on: Oblivious RAM  Very high overhead.</p>
    <p>Usensix Security 2015 M2R: Enabling Stronger Privacy in MapReduce</p>
    <p>Computa,on</p>
    <p>mapT</p>
    <p>mapT</p>
    <p>mapT</p>
    <p>reduceT</p>
    <p>reduceT</p>
    <p>reduceT</p>
    <p>reduceT</p>
    <p>ORAM</p>
  </div>
  <div class="page">
    <p>mapT</p>
    <p>mapT</p>
    <p>mapT</p>
    <p>reduceT</p>
    <p>reduceT</p>
    <p>reduceT</p>
    <p>reduceT Se cu re M</p>
    <p>ix in g (M</p>
    <p>ix T)</p>
    <p>G ro up</p>
    <p>in g</p>
  </div>
  <div class="page">
    <p>mapT</p>
    <p>mapT</p>
    <p>mapT</p>
    <p>reduceT</p>
    <p>reduceT</p>
    <p>reduceT</p>
    <p>reduceT Se cu re M</p>
    <p>ix in g (M</p>
    <p>ix T)</p>
    <p>G ro up</p>
    <p>in g</p>
    <p>Ve ri fy g ro up</p>
    <p>in gs (G</p>
    <p>ro up</p>
    <p>T)</p>
  </div>
  <div class="page">
    <p>mapT</p>
    <p>mapT</p>
    <p>mapT</p>
    <p>reduceT</p>
    <p>reduceT</p>
    <p>reduceT</p>
    <p>reduceT Se cu re M</p>
    <p>ix in g (M</p>
    <p>ix T)</p>
    <p>G ro up</p>
    <p>in g</p>
    <p>Ve ri fy g ro up</p>
    <p>in gs (G</p>
    <p>ro up</p>
    <p>T)</p>
    <p>Original untrusted Shuffling process Randomly permutes</p>
    <p>the tuples Verifies grouping is correctly done</p>
  </div>
  <div class="page">
    <p>Cascaded Mixing A cascaded mixing is employed to randomly permute the tuples distributedly.</p>
    <p>m ix T</p>
    <p>m ix T</p>
    <p>m ix T</p>
    <p>m ix T</p>
    <p>m ix T</p>
    <p>m ix T</p>
    <p>m ix T</p>
    <p>m ix T</p>
    <p>m ix T</p>
    <p>round 1 round 2 round 3</p>
  </div>
  <div class="page">
    <p>Remarks  Key management, handling of the random nonce and ini,al value is not straighoorward.</p>
    <p>In Hadoop, mul,ple reduce instances are carried out by a single reducer. Likewise mapper.</p>
    <p>Usensix Security 2015 M2R: Enabling Stronger Privacy in MapReduce</p>
    <p>Computa,on</p>
  </div>
  <div class="page">
    <p>ORAM vs Our solu;on  M2R exploits the fact that, reads and writes can be batched into 2 phases, whereas ORAM caters for single read/write and thus incurs higher overhead.</p>
    <p>Many construc,ons of ORAM need to permute or o-sort the data.</p>
    <p>Usensix Security 2015 M2R: Enabling Stronger Privacy in MapReduce</p>
    <p>Computa,on</p>
    <p>mapT</p>
    <p>mapT</p>
    <p>mapT</p>
    <p>reduceT</p>
    <p>reduceT</p>
    <p>reduceT</p>
    <p>reduceT</p>
    <p>O RA</p>
    <p>M mapT</p>
    <p>mapT</p>
    <p>mapT</p>
    <p>reduceT</p>
    <p>reduceT</p>
    <p>reduceT</p>
    <p>reduceT</p>
    <p>Se cu re M</p>
    <p>ix in g (M</p>
    <p>ix T)</p>
    <p>G ro up</p>
    <p>in g</p>
    <p>Ve ri fy g ro up</p>
    <p>in gs (G</p>
    <p>ro up</p>
    <p>T)</p>
  </div>
  <div class="page">
    <p>Ac,ve adversary can:  Arbitrary Invoke trusted instances.  Halt instances.  Drop/duplicate ciphertext (encrypted tuples).  Add delays.</p>
    <p>Usensix Security 2015 M2R: Enabling Stronger Privacy in MapReduce</p>
    <p>Computa,on</p>
  </div>
  <div class="page">
    <p>Modulo- private Based on formula,on by CaneG (FOCS 01). Let be the permissible data that can be revealed during honest execu,on. A provisioning protocol is modulo- private if, for any adversary A execuHng the protocol, there is an algorithm B with access only to , such that the output of A and B are indisHnguishable.</p>
    <p>Usensix Security 2015 M2R: Enabling Stronger Privacy in MapReduce</p>
    <p>Computa,on</p>
  </div>
  <div class="page">
    <p>The permissible :  size of input/output, ,me of revoca,on/return of mapT and reduceT under honest execu,on.</p>
    <p>w1 w2</p>
    <p>w1 w2 w4</p>
    <p>w3 w4</p>
    <p>mapT</p>
    <p>mapT</p>
    <p>mapT</p>
    <p>reduceT (key: w1)</p>
    <p>reduceT (key: w2)</p>
    <p>reduceT (key: w3)</p>
    <p>reduceT (key:w4)</p>
    <p>shuffling</p>
    <p>F1</p>
    <p>F2</p>
    <p>F3</p>
    <p>Goal: hide these rela;onships.</p>
  </div>
  <div class="page">
    <p>M2R is -modulo private.</p>
    <p>Usensix Security 2015 M2R: Enabling Stronger Privacy in MapReduce</p>
    <p>Computa,on</p>
  </div>
  <div class="page">
    <p>Ported 7 MapReduc benchmark applica,ons.  KMeans : Itera,ve, Compute intensive  Grep : Compute intensive  Pagerank : Itera,ve, Compute intensive  WordCount : Shuffle intensive  Index : Shuffle intensive  Join : database queries  Aggregate : database queries</p>
    <p>8 compute nodes, each quad-core Intel CPU 1.8 GHz, 8GB RAM, 1GB Ethernet cards.</p>
  </div>
  <div class="page">
    <p>Trusted Code Base 4 trusted computa,on units: mixT, GroupT, mapT, reduceT.  Plaoorm related: (mixT, GroupT)</p>
    <p>Lines Of Code:  300  Applica,ons: (mapT, ReduceT) Lines Of Code  200 for our examples.</p>
    <p>Usensix Security 2015 M2R: Enabling Stronger Privacy in MapReduce</p>
    <p>Computa,on</p>
  </div>
  <div class="page">
    <p>Performance Job Input size</p>
    <p>(bytes) (vs plaintext size)</p>
    <p>Shuffled bytes</p>
    <p>#Applica,ons hyper calls</p>
    <p>#plaoorm hyper calls</p>
    <p>Wordcount 2.1G (1.1) 4.2G 3.3  106 35</p>
    <p>Index 2.5G (1.2) 8G 3.3  106 59 Grep 2.1G (1.1) 75M 3.3  106 10 Aggregate 2.0G (1.2) 289M 18.0  106 12 Join 2.0G (1.2) 450M 11.0  106 14 Pagerank 2.5G (4.0) 2.6G 1.7  106 21 KMeans 1.0G (1.1) 11K 12.0  106 8</p>
    <p>Usensix Security 2015 M2R: Enabling Stronger Privacy in MapReduce</p>
    <p>Computa,on</p>
  </div>
  <div class="page">
    <p>Running ;me (s)</p>
    <p>Usensix Security 2015 M2R: Enabling Stronger Privacy in MapReduce</p>
    <p>Computa,on</p>
    <p>Job Baseline (vs no</p>
    <p>encryp,on)</p>
    <p>M2R (vs baseline)</p>
    <p>Wordcount 570 (2.6 ) 1156 (2.0 ) Index 666 (1.6 ) 1549 (2.3 ) Grep 70 (1.5 ) 106 (1.5 ) Aggregate 125 (1.6 ) 205 (1.6 ) Join 422 (2 ) 510 (1.2 ) Pagerank 521 (1.6 ) 755 (1.4 ) KMeans 123 (1.7 ) 145 (1.2 )</p>
  </div>
  <div class="page">
    <p>Conclusions  Privacy-preserving distributed computa,on of MapReduce with trusted compu,ng.</p>
    <p>Security:  Execu,on integrity +Data Confiden,ality  Observa,on that simply running the map/reduce in trusted environment is not sufficient: interac,ons leak sensi,ve info.</p>
    <p>Small TCB  Exploit the algorithmic structure to outperform a solu,on that employs generic ORAM.</p>
    <p>Future works: other distributed dataflow systems.</p>
  </div>
</Presentation>

<?xml version="1.0" ?>
<Presentation>
  <div class="page">
    <p>Locality-preserving Graph Traversal with Split Live Migration</p>
    <p>Xiating Xie, Xingda Wei, Rong Chen, Haibo Chen Shanghai Jiao Tong University</p>
    <p>Pragh:</p>
  </div>
  <div class="page">
    <p>Urban Monitoring</p>
    <p>Graphs are Everywhere</p>
    <p>Graph traversal queries are key operations to support emerging applications.</p>
    <p>User Profiling</p>
  </div>
  <div class="page">
    <p>Remote access is much slower than local access</p>
    <p>Locality is Important on Traversal</p>
    <p>la te</p>
    <p>n cy</p>
    <p>( s)</p>
    <p>local remote</p>
    <p>Memory Access</p>
  </div>
  <div class="page">
    <p>Remote access is much slower than local access</p>
    <p>Node 0</p>
    <p>Node 1</p>
    <p>Who is Haibofriend of friend of</p>
    <p>Locality is Important on Traversal</p>
    <p>la te</p>
    <p>n cy</p>
    <p>( s)</p>
    <p>local remote</p>
    <p>Memory Access</p>
    <p>Qun</p>
    <p>DongNingXingda</p>
    <p>Haibo Rong</p>
    <p>Xiating</p>
    <p>Han</p>
    <p>(cross-node)</p>
  </div>
  <div class="page">
    <p>Remote access is much slower than local access</p>
    <p>Node 0</p>
    <p>Node 1</p>
    <p>Who is Haibofriend of friend of</p>
    <p>Locality is Important on Traversal</p>
    <p>la te</p>
    <p>n cy</p>
    <p>( s)</p>
    <p>local remote</p>
    <p>Memory Access</p>
    <p>Qun</p>
    <p>DongNingXingda</p>
    <p>Haibo Rong</p>
    <p>Xiating</p>
    <p>Han</p>
    <p>Haibo Rong</p>
    <p>Xingda</p>
    <p>Han</p>
    <p>(cross-node)</p>
  </div>
  <div class="page">
    <p>Remote access is much slower than local access</p>
    <p>Node 0</p>
    <p>Node 1</p>
    <p>Who is Haibofriend of friend of</p>
    <p>Locality is Important on Traversal</p>
    <p>la te</p>
    <p>n cy</p>
    <p>( s)</p>
    <p>local remote</p>
    <p>Memory Access</p>
    <p>Ning</p>
    <p>Xiating</p>
    <p>Han Haibo Xingda</p>
    <p>Rong</p>
    <p>Key Value</p>
    <p>Node 0 Node 1</p>
    <p>Xiating</p>
    <p>Dong</p>
    <p>Rong</p>
    <p>Rong</p>
    <p>Qun</p>
    <p>Han</p>
    <p>Xiating</p>
    <p>Key Value</p>
    <p>Qun</p>
    <p>Han</p>
    <p>Haibo</p>
    <p>Rong</p>
    <p>Qun</p>
    <p>DongNingXingda</p>
    <p>Haibo Rong</p>
    <p>Xiating</p>
    <p>Han</p>
    <p>Haibo Rong</p>
    <p>Xingda</p>
    <p>Han</p>
    <p>(cross-node)</p>
  </div>
  <div class="page">
    <p>Remote access is much slower than local access</p>
    <p>Node 0</p>
    <p>Node 1</p>
    <p>Who is Haibofriend of friend of</p>
    <p>Locality is Important on Traversal</p>
    <p>la te</p>
    <p>n cy</p>
    <p>( s)</p>
    <p>local remote</p>
    <p>Memory Access</p>
    <p>Ning</p>
    <p>Xiating</p>
    <p>Han Haibo Xingda</p>
    <p>Rong</p>
    <p>Key Value</p>
    <p>Node 0 Node 1</p>
    <p>Xiating</p>
    <p>Dong</p>
    <p>Rong</p>
    <p>Rong</p>
    <p>Qun</p>
    <p>Han</p>
    <p>Xiating</p>
    <p>Key Value</p>
    <p>Qun</p>
    <p>Han</p>
    <p>Haibo</p>
    <p>Rong</p>
    <p>Qun</p>
    <p>DongNingXingda</p>
    <p>Haibo Rong</p>
    <p>Xiating</p>
    <p>Han</p>
    <p>Haibo Rong</p>
    <p>Xingda</p>
    <p>Han</p>
    <p>Haibo</p>
    <p>Rong</p>
    <p>Han Haibo Xingda</p>
    <p>Rong local access</p>
    <p>remote access</p>
    <p>(cross-node)</p>
  </div>
  <div class="page">
    <p>How to Preserve Locality? Live Migration</p>
    <p>Rong</p>
    <p>Qun</p>
    <p>Han</p>
    <p>Xiating Ning</p>
    <p>Xiating</p>
    <p>Rong</p>
    <p>Key KeyValue Value</p>
    <p>Node 0 Node 1</p>
    <p>Qun</p>
    <p>Han</p>
    <p>Xiating</p>
    <p>Dong</p>
    <p>HaiboHaibo</p>
    <p>RongRong</p>
    <p>Han Haibo Xingda</p>
    <p>RongRong</p>
    <p>Goal: benefit &lt;&gt; overhead</p>
    <p>Traditional approach: shard-based migration</p>
  </div>
  <div class="page">
    <p>How to Preserve Locality? Live Migration</p>
    <p>Rong</p>
    <p>Qun</p>
    <p>Han</p>
    <p>Xiating Ning</p>
    <p>Xiating</p>
    <p>Rong</p>
    <p>Key KeyValue Value</p>
    <p>Node 0 Node 1</p>
    <p>Qun</p>
    <p>Han</p>
    <p>Xiating</p>
    <p>Dong</p>
    <p>HaiboHaibo</p>
    <p>RongRong</p>
    <p>Han Haibo Xingda</p>
    <p>Rong</p>
    <p>Rong</p>
    <p>Goal: benefit &lt;&gt; overhead</p>
    <p>Traditional approach: shard-based migration</p>
  </div>
  <div class="page">
    <p>How to Preserve Locality? Live Migration</p>
    <p>Rong</p>
    <p>Qun</p>
    <p>Han</p>
    <p>Xiating Ning</p>
    <p>Xiating</p>
    <p>Rong</p>
    <p>Key KeyValue Value</p>
    <p>Node 0 Node 1</p>
    <p>Qun</p>
    <p>Han</p>
    <p>Xiating</p>
    <p>Dong</p>
    <p>HaiboHaibo</p>
    <p>RongRong</p>
    <p>Han Haibo Xingda</p>
    <p>Rong</p>
    <p>Rong</p>
    <p>Goal: benefit &lt;&gt; overhead</p>
    <p>Traditional approach: shard-based migration</p>
    <p>Node 0 Node 1</p>
    <p>KEY</p>
    <p>VAL</p>
    <p>KEY</p>
    <p>VAL</p>
    <p>Shard</p>
  </div>
  <div class="page">
    <p>How to Preserve Locality? Live Migration</p>
    <p>Rong</p>
    <p>Qun</p>
    <p>Han</p>
    <p>Xiating Ning</p>
    <p>Xiating</p>
    <p>Rong</p>
    <p>Key KeyValue Value</p>
    <p>Node 0 Node 1</p>
    <p>Qun</p>
    <p>Han</p>
    <p>Xiating</p>
    <p>Dong</p>
    <p>HaiboHaibo</p>
    <p>RongRong</p>
    <p>Han Haibo Xingda</p>
    <p>Rong</p>
    <p>Rong</p>
    <p>Goal: benefit &lt;&gt; overhead</p>
    <p>Traditional approach: shard-based migration</p>
    <p>Node 0 Node 1</p>
    <p>KEY</p>
    <p>VAL</p>
    <p>KEY</p>
    <p>VAL</p>
    <p>Shard</p>
  </div>
  <div class="page">
    <p>How to Preserve Locality? Live Migration</p>
    <p>Rong</p>
    <p>Qun</p>
    <p>Han</p>
    <p>Xiating Ning</p>
    <p>Xiating</p>
    <p>Rong</p>
    <p>Key KeyValue Value</p>
    <p>Node 0 Node 1</p>
    <p>Qun</p>
    <p>Han</p>
    <p>Xiating</p>
    <p>Dong</p>
    <p>HaiboHaibo</p>
    <p>RongRong</p>
    <p>Han Haibo Xingda</p>
    <p>Rong</p>
    <p>Rong</p>
    <p>Goal: benefit &lt;&gt; overhead</p>
    <p>Traditional approach: shard-based migration</p>
    <p>Node 0 Node 1</p>
    <p>KEY</p>
    <p>VAL</p>
    <p>KEY</p>
    <p>VAL</p>
    <p>Shard</p>
    <p>Hash(key)</p>
    <p>P(key)</p>
    <p>META</p>
  </div>
  <div class="page">
    <p>Shard-based Migration: Dilemma</p>
    <p>th ro</p>
    <p>u g</p>
    <p>h p</p>
    <p>u t</p>
    <p>(K o</p>
    <p>p s</p>
    <p>/s e</p>
    <p>c)</p>
    <p># m</p>
    <p>e ta</p>
    <p>e n</p>
    <p>tr y</p>
    <p>#shard</p>
    <p>graph RMAT_26</p>
    <p>#key value 54 M</p>
    <p>#node 8</p>
    <p>Before Ideal(1 node)</p>
    <p>Each node has to cache entire metadata.</p>
    <p># m</p>
    <p>e ta</p>
    <p>e n</p>
    <p>tr y</p>
  </div>
  <div class="page">
    <p>Shard-based Migration: Dilemma</p>
    <p>th ro</p>
    <p>u g</p>
    <p>h p</p>
    <p>u t</p>
    <p>(K o</p>
    <p>p s</p>
    <p>/s e</p>
    <p>c)</p>
    <p># m</p>
    <p>e ta</p>
    <p>e n</p>
    <p>tr y</p>
    <p>#shard smaller shard</p>
    <p>graph RMAT_26</p>
    <p>#key value 54 M</p>
    <p>#node 8</p>
    <p>Before Ideal(1 node)</p>
    <p>Each node has to cache entire metadata.</p>
    <p># m</p>
    <p>e ta</p>
    <p>e n</p>
    <p>tr y</p>
  </div>
  <div class="page">
    <p>Shard-based Migration: Dilemma</p>
    <p>th ro</p>
    <p>u g</p>
    <p>h p</p>
    <p>u t</p>
    <p>(K o</p>
    <p>p s</p>
    <p>/s e</p>
    <p>c)</p>
    <p># m</p>
    <p>e ta</p>
    <p>e n</p>
    <p>tr y</p>
    <p>#shard smaller shard</p>
    <p>Large shard:</p>
    <p>weak migration benefit</p>
    <p>graph RMAT_26</p>
    <p>#key value 54 M</p>
    <p>#node 8</p>
    <p>Before Ideal(1 node)</p>
    <p>Each node has to cache entire metadata.</p>
    <p># m</p>
    <p>e ta</p>
    <p>e n</p>
    <p>tr y</p>
  </div>
  <div class="page">
    <p>Shard-based Migration: Dilemma</p>
    <p>th ro</p>
    <p>u g</p>
    <p>h p</p>
    <p>u t</p>
    <p>(K o</p>
    <p>p s</p>
    <p>/s e</p>
    <p>c)</p>
    <p># m</p>
    <p>e ta</p>
    <p>e n</p>
    <p>tr y</p>
    <p>#shard smaller shard</p>
    <p>Large shard:</p>
    <p>weak migration benefit</p>
    <p>graph RMAT_26</p>
    <p>#key value 54 M</p>
    <p>#node 8</p>
    <p>Before Ideal(1 node)</p>
    <p>Each node has to cache entire metadata.</p>
    <p>Small shard:</p>
    <p>heavy metadata overhead</p>
    <p># m</p>
    <p>e ta</p>
    <p>e n</p>
    <p>tr y</p>
  </div>
  <div class="page">
    <p>Design Overview</p>
    <p>uses split live migration for graph traversal.Pragh</p>
    <p>Split live migration: migrates values while keeps keys stationary</p>
    <p>Node 0</p>
    <p>KEY</p>
    <p>VAL</p>
    <p>Hash(key)</p>
    <p>Node 1</p>
    <p>addr</p>
  </div>
  <div class="page">
    <p>Design Overview</p>
    <p>uses split live migration for graph traversal.Pragh</p>
    <p>Split live migration: migrates values while keeps keys stationary</p>
    <p>Great migration benefits</p>
    <p>No metadata overhead Node 0</p>
    <p>KEY</p>
    <p>VAL</p>
    <p>Hash(key)</p>
    <p>Node 1</p>
    <p>addr</p>
  </div>
  <div class="page">
    <p>Design Overview</p>
    <p>uses split live migration for graph traversal.Pragh</p>
    <p>Split live migration: migrates values while keeps keys stationary</p>
    <p>Great migration benefits</p>
    <p>No metadata overhead</p>
    <p>Throughput: 19X</p>
    <p>Eliminate remote access: 97%</p>
    <p>Port to Wukong (OSDI16): 2.53X</p>
    <p>Node 0</p>
    <p>KEY</p>
    <p>VAL</p>
    <p>Hash(key)</p>
    <p>Node 1</p>
    <p>addr</p>
  </div>
  <div class="page">
    <p>Design Overview</p>
    <p>uses split live migration for graph traversal.Pragh</p>
    <p>Split live migration: migrates values while keeps keys stationary</p>
    <p>Good migration benefit</p>
    <p>No metadata overhead</p>
    <p>Throughput: 19X</p>
    <p>Eliminate remote access: 97%</p>
    <p>Port to Wukong (OSDI16): 2.53X</p>
    <p>Node 0</p>
    <p>KEY</p>
    <p>VAL</p>
    <p>Hash(key)</p>
    <p>Node 1</p>
    <p>addr</p>
    <p>How to achieve fully-localized split migration ?</p>
    <p>How to migrate over evolving graphs?</p>
    <p>How to support fine-grained and lightweight monitoring ?</p>
  </div>
  <div class="page">
    <p>ATC 2019, 4:35 PM, Track II, on July 11th</p>
  </div>
</Presentation>

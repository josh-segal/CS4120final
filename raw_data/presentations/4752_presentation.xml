<?xml version="1.0" ?>
<Presentation>
  <div class="page">
    <p>BGP Safety with Spurious Updates</p>
    <p>Martin Suchara</p>
    <p>in collaboration with: Alex Fabrikant and</p>
    <p>Jennifer Rexford</p>
    <p>IEEE INFOCOM April 14, 2011</p>
  </div>
  <div class="page">
    <p>The Border Gateway Protocol (BGP)  BGP calculates paths to each address prefix</p>
    <p>Each Autonomous System (AS) implements its own custom policies</p>
    <p>Can prefer an arbitrary path</p>
    <p>Can export the path to a subset of neighbors</p>
    <p>Prefix d</p>
    <p>Data trafc</p>
    <p>I ca n rea</p>
    <p>ch</p>
    <p>d via AS 1</p>
    <p>44</p>
    <p>I can reach d 11</p>
    <p>n rea ch</p>
    <p>d via AS 1</p>
  </div>
  <div class="page">
    <p>BGP Safety Challenges</p>
    <p>35,000 ASes and 300,000 address blocks</p>
    <p>Routing convergence usually takes minutes</p>
    <p>But the system does not always converge</p>
    <p>d</p>
    <p>Prefer 120 to 10</p>
    <p>Prefer 210 to 20</p>
    <p>Use 20Use 10Use 120</p>
    <p>Use 210</p>
  </div>
  <div class="page">
    <p>Results on BGP Safety</p>
    <p>Necessary or sufficient conditions of safety (Gao and Rexford, 2001), (Gao, Griffin and Rexford, 2001), (Griffin, Jaggard and Ramachandran, 2003), (Feamster, Johari and Balakrishnan, 2005), (Sobrinho, 2005), (Fabrikant and Papadimitriou, 2008), (Cittadini, Battista, Rimondini and Vissicchio, 2009),</p>
    <p>Absence of a dispute wheel sufficient for safety (Griffin, Shepherd, Wilfong, 2002)</p>
    <p>Verifying safety is computationally hard (Fabrikant and Papadimitriou, 2008), (Cittadini, Chiesa, Battista and Vissicchio, 2011)</p>
  </div>
  <div class="page">
    <p>Key Results</p>
    <p>Existing models of BGP do not capture important transient phenomena</p>
    <p>A new model of BGP  Accurately capture the consequences of</p>
    <p>transient phenomena on convergence  Retain simplicity of previous models</p>
    <p>More accurate model makes proofs easier!</p>
  </div>
  <div class="page">
    <p>Overview</p>
    <p>I. Classical model of BGP: the SPVP</p>
    <p>III. The surprise: networks believed to be safe oscillate!</p>
    <p>IV. Convergence conditions: polynomial time verifiable</p>
    <p>V. Conclusion</p>
    <p>II. Spurious BGP updates: what are they?</p>
  </div>
  <div class="page">
    <p>Simple Path Vector Protocol (SPVP) Traditional BGP Model (Griffin and Wilfong, 2000)</p>
    <p>Permitted paths</p>
    <p>Network topology</p>
    <p>The higher the more preferred</p>
    <p>The destination</p>
  </div>
  <div class="page">
    <p>Simple Path Vector Protocol (SPVP) Traditional BGP Model (Griffin and Wilfong, 2000)</p>
    <p>Selected paths</p>
  </div>
  <div class="page">
    <p>Simple Path Vector Protocol (SPVP) Traditional BGP Model (Griffin and Wilfong, 2000)</p>
    <p>Activation21</p>
    <p>Activation models the processing of BGP update messages sent by neighbors</p>
  </div>
  <div class="page">
    <p>Simple Path Vector Protocol (SPVP) Traditional BGP Model (Griffin and Wilfong, 2000)</p>
    <p>Switch to best available</p>
    <p>Activation models the processing of BGP update messages sent by neighbors</p>
  </div>
  <div class="page">
    <p>Simple Path Vector Protocol (SPVP) Traditional BGP Model (Griffin and Wilfong, 2000)</p>
    <p>System is safe if all fair activation sequences lead to a stable path assignment</p>
    <p>Switch to best available</p>
  </div>
  <div class="page">
    <p>Overview</p>
    <p>I. Classical model of BGP: the SPVP</p>
    <p>III. The surprise: networks believed to be safe oscillate!</p>
    <p>IV. Convergence conditions: polynomial time verifiable</p>
    <p>V. Conclusion</p>
    <p>II. Spurious BGP updates: what are they?</p>
  </div>
  <div class="page">
    <p>What are Spurious Updates?</p>
    <p>A phenomenon: router announces a route other than the highest ranked one</p>
    <p>Spurious BGP update 230:</p>
    <p>Selected path: 20</p>
    <p>Behavior not allowed in SPVP</p>
  </div>
  <div class="page">
    <p>What Causes Spurious Updates?</p>
  </div>
  <div class="page">
    <p>DPVP A More General Model of BGP</p>
    <p>DPVP = Dynamic Path Vector Protocol</p>
    <p>Transient period  after each route change  Spurious updates with a less preferred</p>
    <p>recently available route</p>
    <p>Only allows the right kind of spurious updates  Every spurious update has a cause in BGP  General enough and future-proof</p>
  </div>
  <div class="page">
    <p>DPVP A More General Model of BGP</p>
    <p>The permitted paths and their ranking</p>
    <p>Spurious update</p>
    <p>Selected path: 210</p>
    <p>Spurious updates are allowed only if current time &lt; StableTime</p>
    <p>Spurious updates may include paths that were recently available or the empty path</p>
    <p>Remember all recently available paths (e.g. 20, 210)</p>
    <p>StableTime =  after last path change</p>
  </div>
  <div class="page">
    <p>Overview</p>
    <p>I. Classical model of BGP: the SPVP</p>
    <p>III. The surprise: networks believed to be safe oscillate!</p>
    <p>IV. Convergence conditions: polynomial time verifiable</p>
    <p>V. Conclusion</p>
    <p>II. Spurious BGP updates: what are they?</p>
  </div>
  <div class="page">
    <p>Consequences of Spurious Updates</p>
    <p>Spurious behavior is temporary, can it have long-term consequences?</p>
    <p>Yes, it may trigger oscillations in otherwise safe configurations!</p>
  </div>
  <div class="page">
    <p>The Surprise: Spurious Announcements Trigger Permanent Oscillations!</p>
    <p>Stable because node 3 cannot use route 30</p>
    <p>Safe instance in all classical models of routing:</p>
    <p>Stable outcome</p>
  </div>
  <div class="page">
    <p>The Surprise: Spurious Announcements Trigger Permanent Oscillations!</p>
    <p>Can be caused by route flap damping</p>
    <p>Oscillates if node 3 announces route 30</p>
    <p>Spurious update 30</p>
  </div>
  <div class="page">
    <p>Some Results No Longer Hold</p>
    <p>Absence of a dispute reel necessary and sufficient for safety under filtering in SPVP (Cittadini et al., 2009)  Our result: permanent oscillations in DPVP</p>
    <p>even without a reel</p>
    <p>Linear time convergence of BGP (Sami et al., 2009)  Our result: exponential slowdown</p>
  </div>
  <div class="page">
    <p>Overview</p>
    <p>I. Classical model of BGP: the SPVP</p>
    <p>III. The surprise: networks believed to be safe oscillate!</p>
    <p>IV. Convergence conditions: polynomial time verifiable</p>
    <p>V. Conclusion</p>
    <p>II. Spurious BGP updates: what are they?</p>
  </div>
  <div class="page">
    <p>Convergence Conditions</p>
    <p>Absence of a dispute wheel is still sufficient for safety in DPVP  Most of the previous results of the past</p>
    <p>decade still hold under DPVP!</p>
    <p>Absence of a dispute wheel sufficient for safety in SPVP (Griffin, Shepherd, Wilfong, 2002)  One of the most cited results</p>
  </div>
  <div class="page">
    <p>DPVP Makes Analysis Easier</p>
    <p>No need to prove that:  Announced route is the highest ranked one  Announced route is the last one learned from</p>
    <p>the downstream neighbor</p>
    <p>We changed the problem  PSPACE complete vs. NP complete</p>
  </div>
  <div class="page">
    <p>Necessary and Sufficient Conditions</p>
    <p>How can we prove a system may oscillate?  Classify each node as stable or coy  At least one coy node exists  Prove that stable nodes must be stable  Prove that coy nodes may oscillate</p>
    <p>Easy in a model with spurious announcements</p>
  </div>
  <div class="page">
    <p>Necessary and Sufficient Conditions</p>
    <p>Coy nodes may make spurious announcements</p>
    <p>Stable nodes have a permanent path</p>
    <p>Theorem: DPVP oscillates if and only if it has a CoyOTE</p>
    <p>Definition: CoyOTE is a triple (C, S, ) satisfying several conditions</p>
    <p>One path assigned to each node proves if the node is coy or stable</p>
  </div>
  <div class="page">
    <p>Verifying the Convergence Conditions = Finding a CoyOTE</p>
    <p>In general an NP-hard problem</p>
    <p>Can be checked in polynomial time for most reasonable network configurations!</p>
    <p>(i) filter paths violating business relationships</p>
    <p>(ii) prefer paths not containing certain AS numbers</p>
    <p>(iii) prefer paths from certain groups of neighbors</p>
    <p>(iv) prefer shorter paths over longer ones</p>
    <p>(v) prefer paths from a lowest AS number neighbor</p>
    <p>e.g .</p>
  </div>
  <div class="page">
    <p>DeCoy  Safety Verification Algorithm</p>
    <p>Goal: verify safety in polynomial time</p>
    <p>Key observation: greedy algorithm works!</p>
    <p>If all nodes become stable system is safe</p>
    <p>Otherwise system can oscillate</p>
  </div>
  <div class="page">
    <p>Overview</p>
    <p>I. Classical model of BGP: the SPVP</p>
    <p>III. The surprise: networks believed to be safe oscillate!</p>
    <p>IV. Convergence conditions: polynomial time verifiable</p>
    <p>V. Conclusion</p>
    <p>II. Spurious BGP updates: what are they?</p>
  </div>
  <div class="page">
    <p>Conclusion  DPVP: best of both worlds</p>
    <p>More accurate model of BGP  Model simplifies theoretical analysis</p>
    <p>Key results (i) Spurious announcements are real</p>
    <p>(ii) Safe instances in SPVP may oscillate in DPVP</p>
    <p>(iii) No dispute wheel  safety</p>
    <p>(iv) Necessary and sufficient conditions of convergence, can be found in polynomial time</p>
  </div>
  <div class="page">
    <p>Thank You!</p>
  </div>
</Presentation>

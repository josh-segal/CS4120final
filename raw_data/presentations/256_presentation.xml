<?xml version="1.0" ?>
<Presentation>
  <div class="page">
    <p>August 8th, 2011 CSET-2011 1</p>
    <p>Challenges in Experimenting</p>
    <p>with Botnet Detection</p>
    <p>Systems</p>
    <p>Adam J. Aviv Andreas Haeberlen</p>
    <p>University of Pennsylvania</p>
  </div>
  <div class="page">
    <p>August 8th, 2011 CSET-2011 2</p>
    <p>Alice has developed a new botnet detector!!!</p>
    <p>What should the evaluation show?</p>
    <p>Alice's Detector</p>
  </div>
  <div class="page">
    <p>August 8th, 2011 CSET-2011 3</p>
    <p>Ideal</p>
    <p>Alice deploys her detector live on her local network</p>
    <p>Alice is provided with a list of hosts that are botnet infected</p>
    <p>Alice deploys her detector on various other networks</p>
    <p>Academic, Residential, Corporate, etc.</p>
    <p>Alice records traces of each deployment</p>
    <p>Improve detector in the lab</p>
    <p>Readily available to other researchers</p>
  </div>
  <div class="page">
    <p>August 8th, 2011 CSET-2011 4</p>
    <p>Realities</p>
    <p>Production-ready deployment?</p>
    <p>Ground truth of botnet infections?</p>
    <p>Deployment on various networks?</p>
    <p>Record trace and replay experiment?</p>
    <p>Traces available to other researchers?</p>
  </div>
  <div class="page">
    <p>August 8th, 2011 CSET-2011 5</p>
    <p>Taking a Step Back</p>
  </div>
  <div class="page">
    <p>August 8th, 2011 CSET-2011 6</p>
    <p>Many Challenges</p>
    <p>Multiple Administrative Domains</p>
    <p>Network Heterogeneity</p>
    <p>Multimorbidity</p>
    <p>Privacy</p>
    <p>Controlled Environments</p>
    <p>Artifact Overfitting</p>
    <p>Botnet Overfitting</p>
    <p>Focus on Academic Networks</p>
    <p>Scale</p>
    <p>Mixing Artifacts</p>
    <p>False Postives &amp; Negatives</p>
    <p>Repeatability</p>
    <p>Comparability</p>
    <p>Lack of Verification</p>
  </div>
  <div class="page">
    <p>August 8th, 2011 CSET-2011 7</p>
    <p>privacy</p>
  </div>
  <div class="page">
    <p>August 8th, 2011 CSET-2011 8</p>
    <p>We have to worry about privacy, but the botnet authors</p>
    <p>don't!</p>
  </div>
  <div class="page">
    <p>August 8th, 2011 CSET-2011 9</p>
    <p>Can we do better together?</p>
  </div>
  <div class="page">
    <p>August 8th, 2011 CSET-2011 10</p>
    <p>Discussion/Topics/Questions</p>
    <p>Experimental Ideals vs. Realities</p>
    <p>Not just botnet detectors ...</p>
    <p>Raw Materials of the Experiment</p>
    <p>Sharing and Obtaining Traces</p>
    <p>Botnet and Background Traces</p>
    <p>Can we do better via collaboration?</p>
  </div>
  <div class="page">
    <p>August 8th, 2011 CSET-2011 11</p>
    <p>Experimental Challenges</p>
    <p>Overlay Methodology</p>
    <p>What can be done?</p>
    <p>Obtaining Traces Sharing Traces</p>
    <p>Pitfalls</p>
    <p>Presentation OutlineIdeal vs. Reality</p>
  </div>
  <div class="page">
    <p>August 8th, 2011 CSET-2011 12</p>
    <p>Alice has developed a new botnet detector!!!</p>
    <p>What should the evaluation show?</p>
    <p>Alice's Detector</p>
  </div>
  <div class="page">
    <p>August 8th, 2011 CSET-2011 13</p>
    <p>Ideal vs. Reality</p>
    <p>Alice deploys her detector live on her local network</p>
    <p>Alice is provided with list of hosts that are botnet infected</p>
    <p>Alice deploys her detector on other various networks</p>
    <p>Corporate, Residential, Corporate, etc.</p>
    <p>Alice records traces of each deployment</p>
    <p>Improve detector in the lab</p>
    <p>Readily available to other researchers</p>
    <p>Production-ready deployment?</p>
    <p>Ground truth of botnet infections?</p>
    <p>Deployment on various networks?</p>
    <p>Record trace and replay experiment?</p>
    <p>Traces available to other researchers?</p>
  </div>
  <div class="page">
    <p>August 8th, 2011 CSET-2011 14</p>
    <p>Evaluation Realities</p>
    <p>Network Heterogeneity</p>
    <p>Multiple Administrative Domains</p>
    <p>Lack of Ground Truth</p>
    <p>Overfitting</p>
    <p>Privacy</p>
    <p>Modernity Comparability &amp;</p>
    <p>Repeatability</p>
    <p>PerformanceRealistic Settings</p>
  </div>
  <div class="page">
    <p>August 8th, 2011 CSET-2011 15</p>
    <p>Pitfalls</p>
    <p>Experimental Challenges</p>
    <p>Overlay Methodology</p>
    <p>What can be done?</p>
    <p>Obtaining Traces Sharing Traces</p>
    <p>Pitfalls</p>
  </div>
  <div class="page">
    <p>August 8th, 2011 CSET-2011 16</p>
    <p>Overlay Methodology</p>
    <p>v v</p>
    <p>v</p>
    <p>v</p>
    <p>v</p>
    <p>v</p>
    <p>v</p>
    <p>v</p>
    <p>Network Trace</p>
    <p>Internet</p>
    <p>Anonymizer</p>
  </div>
  <div class="page">
    <p>August 8th, 2011 CSET-2011 17</p>
    <p>Replay and Evaluate</p>
    <p>Network Trace Detected 2</p>
    <p>Bots!</p>
    <p>v</p>
    <p>v</p>
    <p>v</p>
    <p>v</p>
    <p>v v</p>
    <p>v</p>
    <p>vv</p>
    <p>v</p>
    <p>Collected Independently Background</p>
    <p>Trace is Sensitive</p>
  </div>
  <div class="page">
    <p>August 8th, 2011 CSET-2011 18</p>
    <p>Prevalence in the Literature</p>
    <p>Overlay Methodology</p>
    <p>Other Methodology</p>
    <p>[13] [49] [15] [36] [46] [47] [41] [23] [6] [7] [28] [25] [24] [14]</p>
    <p>[20] [14] [45] [36] [11] [5]</p>
    <p>* See paper for references.</p>
  </div>
  <div class="page">
    <p>August 8th, 2011 CSET-2011 19</p>
    <p>Advantages of Overlay Methodology</p>
    <p>Ground Truth</p>
    <p>v</p>
    <p>v v</p>
    <p>v</p>
    <p>v v</p>
    <p>v</p>
    <p>vv</p>
    <p>v</p>
  </div>
  <div class="page">
    <p>August 8th, 2011 CSET-2011 20</p>
    <p>Pitfalls</p>
    <p>Experimental Challenges</p>
    <p>Overlay Methodology</p>
    <p>What can be done?</p>
    <p>Obtaining Traces Sharing Traces</p>
    <p>Pitfalls</p>
  </div>
  <div class="page">
    <p>August 8th, 2011 CSET-2011 21</p>
    <p>Obtaining Traces</p>
    <p>Realism</p>
    <p>Merging of Botnet and Background trace should be realistic</p>
  </div>
  <div class="page">
    <p>August 8th, 2011 CSET-2011 22</p>
    <p>Collecting Botnet Traces</p>
    <p>v</p>
  </div>
  <div class="page">
    <p>August 8th, 2011 CSET-2011 23</p>
    <p>Realistic Embedding</p>
    <p>v</p>
    <p>v</p>
    <p>v</p>
    <p>v</p>
    <p>v v</p>
    <p>v</p>
    <p>vv</p>
    <p>v</p>
    <p>SPAM!</p>
    <p>Residential ISP</p>
    <p>?</p>
  </div>
  <div class="page">
    <p>August 8th, 2011 CSET-2011 24</p>
    <p>Mixing Artifacts</p>
    <p>v</p>
    <p>v</p>
    <p>v</p>
    <p>v</p>
    <p>v v</p>
    <p>v</p>
    <p>vv</p>
    <p>v</p>
    <p>DHCP</p>
    <p>v</p>
    <p>v</p>
  </div>
  <div class="page">
    <p>August 8th, 2011 CSET-2011 25</p>
    <p>Multimorbidity</p>
    <p>v</p>
    <p>v</p>
    <p>v</p>
    <p>v</p>
    <p>v v</p>
    <p>v</p>
    <p>vv</p>
    <p>vv</p>
    <p>v</p>
    <p>v</p>
    <p>v</p>
  </div>
  <div class="page">
    <p>August 8th, 2011 CSET-2011 26</p>
    <p>Obtaining Traces</p>
    <p>Realism</p>
    <p>Merging of Botnet and Background trace should be realistic</p>
    <p>Representativeness</p>
    <p>Reflect diversity in network scenarios</p>
  </div>
  <div class="page">
    <p>August 8th, 2011 CSET-2011 27</p>
    <p>Focus on Academic Networks</p>
    <p>v</p>
    <p>v v</p>
    <p>v</p>
    <p>v v</p>
    <p>v</p>
    <p>vv</p>
    <p>v</p>
    <p>State University Corporate Business</p>
  </div>
  <div class="page">
    <p>August 8th, 2011 CSET-2011 28</p>
    <p>Prevalence in the Literature</p>
    <p>Academic Traces At Least One Other Trace</p>
    <p>Overlay Methodology</p>
    <p>Other Methodology</p>
    <p>[13] [49] [15] [36] [46] [47] [41] [23] [6] [7]</p>
    <p>[28] [25] [24] [14]</p>
    <p>[36] [11] [5] [20] [14] [45]</p>
    <p>* See paper for references.</p>
  </div>
  <div class="page">
    <p>August 8th, 2011 CSET-2011 29</p>
    <p>Scale</p>
    <p>v</p>
    <p>v v</p>
    <p>v</p>
    <p>v v</p>
    <p>v</p>
    <p>v v</p>
    <p>v v</p>
    <p>v</p>
    <p>vv v</p>
    <p>v</p>
    <p>v</p>
    <p>v v</p>
    <p>v</p>
    <p>vv v</p>
    <p>v</p>
    <p>v</p>
    <p>v v</p>
    <p>v</p>
    <p>vv v</p>
    <p>v</p>
    <p>v</p>
    <p>v v</p>
    <p>v</p>
    <p>vv v</p>
    <p>v</p>
    <p>v</p>
    <p>v v</p>
    <p>v</p>
    <p>vv v</p>
    <p>v</p>
    <p>v v v</p>
    <p>v vv</p>
    <p>v v</p>
    <p>v v v</p>
    <p>v vv</p>
    <p>v v</p>
    <p>v v v</p>
    <p>v vv</p>
    <p>v v</p>
    <p>v v v</p>
    <p>v vv</p>
    <p>v v</p>
    <p>v v v</p>
    <p>v vv</p>
    <p>v v</p>
    <p>v v v</p>
    <p>v vv</p>
    <p>v v</p>
    <p>v v v</p>
    <p>v vv</p>
    <p>v v</p>
    <p>v v v</p>
    <p>v vv</p>
    <p>v v</p>
    <p>v v v</p>
    <p>v vv</p>
    <p>v v</p>
    <p>v v v</p>
    <p>v vv</p>
    <p>v v</p>
    <p>v v v</p>
    <p>v vv</p>
    <p>v v</p>
    <p>v v v</p>
    <p>v vv</p>
    <p>v v</p>
    <p>v v v</p>
    <p>v vv</p>
    <p>v v</p>
    <p>v v v</p>
    <p>v vv</p>
    <p>v v</p>
    <p>v v v</p>
    <p>v vv</p>
    <p>v v</p>
    <p>v v v</p>
    <p>v vv</p>
    <p>v v</p>
    <p>v v v</p>
    <p>v vv</p>
    <p>v v</p>
    <p>v v v</p>
    <p>v vv</p>
    <p>v v</p>
    <p>v v v</p>
    <p>v vv</p>
    <p>v v</p>
    <p>v v v</p>
    <p>v vv</p>
    <p>v v</p>
    <p>v v v</p>
    <p>v vv</p>
    <p>v v</p>
    <p>v v v</p>
    <p>v vv</p>
    <p>v v</p>
    <p>v v v</p>
    <p>v vv</p>
    <p>v v</p>
    <p>v v v</p>
    <p>v vv</p>
    <p>v v</p>
    <p>v v v</p>
    <p>v vv</p>
    <p>v v</p>
  </div>
  <div class="page">
    <p>August 8th, 2011 CSET-2011 30</p>
    <p>Obtaining Traces</p>
    <p>Realism</p>
    <p>Merging of Botnet and Background trace should be realistic</p>
    <p>Representativeness</p>
    <p>Reflect diversity in network scenarios</p>
    <p>Performance</p>
    <p>False postives and negatives</p>
  </div>
  <div class="page">
    <p>August 8th, 2011 CSET-2011 31</p>
    <p>Lack of Verification</p>
    <p>v</p>
    <p>v</p>
    <p>v</p>
    <p>v</p>
    <p>v v</p>
    <p>v</p>
    <p>v v</p>
  </div>
  <div class="page">
    <p>August 8th, 2011 CSET-2011 32</p>
    <p>Example From the Literature TaMD</p>
    <p>We suspect that the reason not every bot in the botnet was detected is due to the randomness in our choice of selected internal hosts to which the malware traffic was assigned, such that a selected internal host that was also contacting other suspicious subnets (not relevant to the botnet) is likely to bias the dimension reduction and clustering algorithm.</p>
  </div>
  <div class="page">
    <p>August 8th, 2011 CSET-2011 33</p>
    <p>privacy</p>
  </div>
  <div class="page">
    <p>August 8th, 2011 CSET-2011 34</p>
    <p>Sharing Traces</p>
    <p>Is the experiment independently repeatable?</p>
    <p>Can we do apples to apples comparison?</p>
    <p>v</p>
    <p>v v</p>
    <p>v</p>
    <p>v v</p>
    <p>v</p>
    <p>vv</p>
    <p>v</p>
  </div>
  <div class="page">
    <p>August 8th, 2011 CSET-2011 35</p>
    <p>What can be done?</p>
    <p>Experimental Challenges</p>
    <p>Overlay Methodology</p>
    <p>What can be done?</p>
    <p>Obtaining Traces Sharing Traces</p>
    <p>Pitfalls</p>
  </div>
  <div class="page">
    <p>August 8th, 2011 CSET-2011 36</p>
    <p>Observations</p>
    <p>Much of these challenges stem from difficulties in sharing and obtaining realistic data sets.</p>
    <p>Similar to problems faced by researchers studying large scale distributed systems</p>
    <p>---&gt; PlanetLab</p>
  </div>
  <div class="page">
    <p>August 8th, 2011 CSET-2011 37</p>
    <p>A PlanetLab for Botnet Detection?</p>
    <p>Can we do better together?</p>
  </div>
  <div class="page">
    <p>August 8th, 2011 CSET-2011 38</p>
    <p>Strawman</p>
    <p>Distributed Evaluation</p>
    <p>PlanetLab-like nodes on participating networks</p>
    <p>Cannot communicate network traces outside of network</p>
    <p>Researchers Deploy Detector Code on Nodes</p>
    <p>Reports are reviewed and declassified by sys-admins</p>
    <p>Researcher can test and debug on local node</p>
    <p>Incentives</p>
    <p>Sys-Admins gain access to bleeding edge detectors, for FREE!</p>
    <p>Researchers gain insight into usefulness of reports or ground truth</p>
  </div>
  <div class="page">
    <p>August 8th, 2011 CSET-2011 39</p>
    <p>Address Challenges</p>
    <p>Network Heterogeneity</p>
    <p>Multiple Administrative Domains</p>
    <p>Lack of Ground Truth</p>
    <p>Overfitting Privacy</p>
    <p>Modernity Comparability &amp;</p>
    <p>Repeatability</p>
    <p>PerformanceRealistic Settings</p>
  </div>
  <div class="page">
    <p>August 8th, 2011 CSET-2011 40</p>
    <p>Huge Deployment Challenges</p>
    <p>Privacy</p>
    <p>Accountability</p>
  </div>
  <div class="page">
    <p>August 8th, 2011 CSET-2011 41</p>
    <p>Conclusions</p>
    <p>Taking a step back</p>
    <p>Literature Review</p>
    <p>Ideal is hard</p>
    <p>Ideal vs. Reality</p>
    <p>Privacy!</p>
    <p>Sharing and Obtaining realistic traces</p>
    <p>Overlay Methodology</p>
    <p>And, its pitfalls</p>
    <p>Can we do better together?</p>
    <p>PlanetLab for Botnet detectors?</p>
  </div>
  <div class="page">
    <p>August 8th, 2011 CSET-2011 42</p>
    <p>Backup</p>
  </div>
</Presentation>

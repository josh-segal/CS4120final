<?xml version="1.0" ?>
<Presentation>
  <div class="page">
    <p>A Comparative Experimental Study of</p>
    <p>Parallel File Systems for Large-Scale Data</p>
    <p>Processing</p>
    <p>Z. Sebepou, K. Magoutis, M. Marazakis, A. Bilas</p>
    <p>Institute of Computer Science (ICS)</p>
    <p>Foundation for Research and Technology Hellas (FORTH)</p>
    <p>Heraklion, Crete, Greece</p>
  </div>
  <div class="page">
    <p>FORTH-ICS First USEIX LaSCo Workshop 2008 2</p>
    <p>Evolution</p>
    <p>Distributed file systems</p>
    <p>NFS versions 2, 3, 4; AFS; etc.</p>
    <p>Shared-disk parallel file systems</p>
    <p>Frangipani/Petal; GPFS; GFS; etc.</p>
    <p>Separating data/metadata paths to object storage</p>
    <p>NASD; pNFS; Panassas; Lustre; PVFS; etc.</p>
  </div>
  <div class="page">
    <p>FORTH-ICS First USEIX LaSCo Workshop 2008 3</p>
    <p>NASD-style Parallel File Systems</p>
    <p>Open, Lookup, etc.Read, Write</p>
  </div>
  <div class="page">
    <p>FORTH-ICS First USEIX LaSCo Workshop 2008 4</p>
    <p>Lustre, PVFS</p>
    <p>Open-source systems, following the NASD paradigm</p>
    <p>Lustre: Cluster File Systems, Inc.; acquired (2007) by Sun</p>
    <p>PVFS: Clemson University, ANL, OSC</p>
    <p>Targeted for large-scale data processing</p>
    <p>LLNL, ORNL, ANL, CERN</p>
    <p>Representative of different approaches to filesystem design</p>
    <p>Client caching</p>
    <p>Statelessness</p>
    <p>Consistency and file access semantics</p>
    <p>Portability</p>
  </div>
  <div class="page">
    <p>FORTH-ICS First USEIX LaSCo Workshop 2008 5</p>
    <p>Lustre Architecture</p>
    <p>Linux ext3 (modified)Linux ext3 (modified)</p>
    <p>Intent-based locking</p>
    <p>POSIX semantics</p>
    <p>Pre-allocation of MD objs</p>
    <p>active/backup</p>
    <p>Stripping</p>
    <p>Data/MD</p>
    <p>Caching TCP/IP, RDMA, etc.</p>
    <p>Kernel-based</p>
    <p>Client Structure</p>
  </div>
  <div class="page">
    <p>FORTH-ICS First USEIX LaSCo Workshop 2008 6</p>
    <p>PVFS2 Architecture</p>
    <p>Stripping</p>
    <p>No Data Caching</p>
    <p>DBPF (database plus files)Any Linux file system</p>
    <p>No file locking;</p>
    <p>non-conflicting writes</p>
    <p>multiple active</p>
    <p>User-level</p>
    <p>Client Structure</p>
    <p>TCP/IP, RDMA, etc.</p>
  </div>
  <div class="page">
    <p>FORTH-ICS First USEIX LaSCo Workshop 2008 7</p>
    <p>Benchmarks</p>
    <p>Streaming; one client, many servers</p>
    <p>IOZone</p>
    <p>Streaming: many clients, many servers</p>
    <p>Parallel I/O (MPI)</p>
    <p>Metadata-intensive</p>
    <p>Cluster PostMark</p>
    <p>Near-random I/O, optionally with data overlap</p>
    <p>Tile I/O (MPI)</p>
    <p>User-perceived response time</p>
    <p>ls lR on Linux kernel tree</p>
  </div>
  <div class="page">
    <p>FORTH-ICS First USEIX LaSCo Workshop 2008 8</p>
    <p>Experimental Testbed</p>
    <p>PVFS 2.6.3</p>
    <p>Lustre 1.6.0.1</p>
    <p>MPICH 2 Metadata Server</p>
    <p>Object Server Object Server Object Server Object Server</p>
    <p>Linux ext3 or</p>
    <p>modified ext3</p>
    <p>Lustre stripe: 64KB, 256KB, 1MB (default)</p>
    <p>PVFS2 stripe: 64KB (default)</p>
  </div>
  <div class="page">
    <p>FORTH-ICS First USEIX LaSCo Workshop 2008 9</p>
    <p>Streaming: One Client, Many Servers</p>
    <p>(IOZone Benchmark)</p>
    <p>PVFS 2.6.3</p>
    <p>Lustre 1.6.0.1</p>
    <p>MPICH 2 Metadata Server</p>
    <p>Object Server Object Server Object Server Object Server</p>
    <p>Linux ext3 or</p>
    <p>modified ext3</p>
    <p>Lustre stripe: 64KB, 256KB, 1MB (default)</p>
    <p>PVFS2 stripe: 64KB (default)</p>
    <p>Block sizes 1KB, 64KB, 1MB, 4MB</p>
  </div>
  <div class="page">
    <p>FORTH-ICS First USEIX LaSCo Workshop 2008 10</p>
    <p>Streaming: One Client, Many Servers</p>
    <p>(IOZone Benchmark)  Lustre</p>
  </div>
  <div class="page">
    <p>FORTH-ICS First USEIX LaSCo Workshop 2008 11</p>
    <p>Streaming: One Client, Many Servers</p>
    <p>(IOZone Benchmark)  PVFS</p>
  </div>
  <div class="page">
    <p>FORTH-ICS First USEIX LaSCo Workshop 2008 12</p>
    <p>Streaming: Many Clients, Many Servers</p>
    <p>(Parallel I/O Benchmark)</p>
    <p>PVFS 2.6.3</p>
    <p>Lustre 1.6.0.1</p>
    <p>MPICH 2 Metadata Server</p>
    <p>Object Server Object Server Object Server Object Server</p>
    <p>Linux ext3 or</p>
    <p>modified ext3</p>
    <p>Lustre stripe: 64KB, 256KB, 1MB (default)</p>
    <p>PVFS2 stripe: 64KB (default)</p>
    <p>Block sizes 64KB-16MB</p>
  </div>
  <div class="page">
    <p>FORTH-ICS First USEIX LaSCo Workshop 2008 13</p>
    <p>Streaming: Many Clients, Many Servers</p>
    <p>(Parallel I/O Benchmark)</p>
    <p>Lustre</p>
    <p>PVFS2</p>
    <p>Writes to Separate Files; 12 clients, 12 servers</p>
  </div>
  <div class="page">
    <p>FORTH-ICS First USEIX LaSCo Workshop 2008 14</p>
    <p>Streaming: Many Clients, Many Servers</p>
    <p>(Parallel I/O Benchmark)</p>
    <p>Lustre</p>
    <p>PVFS2</p>
    <p>Reads from Single File; 12 clients, 12 servers</p>
    <p>Lustre</p>
    <p>PVFS2</p>
  </div>
  <div class="page">
    <p>FORTH-ICS First USEIX LaSCo Workshop 2008 15</p>
    <p>Cluster PostMark</p>
    <p>Three configurations:</p>
    <p>(a) Few (100), large (10-100MB) files</p>
    <p>(b) Moderate number (800) of medium-size (1-10MB) files</p>
    <p>(c) Many (8000), small (4-128KB) files</p>
  </div>
  <div class="page">
    <p>FORTH-ICS First USEIX LaSCo Workshop 2008 16</p>
    <p>Cluster PostMark  Bandwidth</p>
    <p>Block Size</p>
  </div>
  <div class="page">
    <p>FORTH-ICS First USEIX LaSCo Workshop 2008 17</p>
    <p>Cluster PostMark  Transactions</p>
    <p>Block Size</p>
  </div>
  <div class="page">
    <p>FORTH-ICS First USEIX LaSCo Workshop 2008 18</p>
    <p>Near-random I/O, optionally with data overlap</p>
    <p>(Tile I/O)</p>
    <p>block element tile</p>
    <p>two-dimensional logical structure overlaid on a single file</p>
    <p>each tile assigned to a separate client process</p>
  </div>
  <div class="page">
    <p>FORTH-ICS First USEIX LaSCo Workshop 2008 19</p>
    <p>Tile I/O - Reads</p>
  </div>
  <div class="page">
    <p>FORTH-ICS First USEIX LaSCo Workshop 2008 20</p>
    <p>Tile I/O - Writes</p>
  </div>
  <div class="page">
    <p>FORTH-ICS First USEIX LaSCo Workshop 2008 21</p>
    <p>User-Perceived Response Time</p>
    <p>Response Time (sec)File System</p>
    <p>ls lR on Linux 2.6.12 kernel tree (~25,000 files)</p>
  </div>
  <div class="page">
    <p>FORTH-ICS First USEIX LaSCo Workshop 2008 22</p>
    <p>Conclusions</p>
    <p>Scalable I/O bandwidth is achievable through</p>
    <p>parallel I/O paths to file servers</p>
    <p>Lustres efficient metadata management is critical</p>
    <p>for metadata-intensive applications</p>
    <p>Lustres consistency semantics are useful to some</p>
    <p>applications but cause unnecessary overhead to</p>
    <p>others that do not require them</p>
  </div>
  <div class="page">
    <p>FORTH-ICS First USEIX LaSCo Workshop 2008 23</p>
    <p>Thank You!</p>
  </div>
</Presentation>
